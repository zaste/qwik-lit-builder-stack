# ğŸ¤– CLAUDE INTERNAL OPERATIONAL RULES
*Sistema interno de auto-regulaciÃ³n - No impacta cÃ³digo del proyecto*

## ğŸ¯ **PROPÃ“SITO**
Sistema de reglas que **CLAUDE debe consultar automÃ¡ticamente** antes de cualquier acciÃ³n que modifique el sistema.

## ğŸš¨ **REGLA FUNDAMENTAL - ZERO PROJECT IMPACT**
**MIS REGLAS Y SISTEMAS DE APRENDIZAJE NUNCA DEBEN IMPACTAR EL PROYECTO:**
- âœ… Archivos internos: `.claude-*` (invisibles al proyecto)
- âœ… Solo para auto-regulaciÃ³n interna de Claude
- âœ… No crear scripts ejecutables del proyecto
- âœ… No modificar package.json o configuraciones
- âœ… No afectar workflow del desarrollador
- âŒ NUNCA crear dependencias en el cÃ³digo del proyecto
- âŒ NUNCA requerir instalaciÃ³n de nuevos paquetes
- âŒ NUNCA impactar el build process del proyecto

## ğŸ”„ **PROCESO AUTOMÃTICO INTERNO**

### **ANTES de cada acciÃ³n de modificaciÃ³n:**
1. **Consultar estas reglas internamente**
2. **Validar estado actual del sistema**
3. **Aplicar metodologÃ­a segura**
4. **Proceder solo si es seguro**

## ğŸš¨ **REGLAS ABSOLUTAS PARA CLAUDE**

### âŒ **NUNCA HACER:**
- Romper sistema que funciona al 100%
- Cambios destructivos sin backup
- Eliminaciones masivas simultÃ¡neas
- Proceder si hay errores crÃ­ticos

### âœ… **SIEMPRE HACER:**
- Verificar URLs de producciÃ³n funcionando
- Validar que build sigue funcionando
- Hacer cambios incrementales
- Tener plan de rollback mental

## ğŸ“Š **ESTADO ACTUAL A VALIDAR**

### **URLs CRÃTICAS:**
- **Frontend**: https://1cea5765.qwik-lit-builder-app-7b1.pages.dev/
- **API Health**: https://1cea5765.qwik-lit-builder-app-7b1.pages.dev/api/health  
- **API Auth**: https://1cea5765.qwik-lit-builder-app-7b1.pages.dev/api/auth/status

### **ESTADO BASELINE:**
- âœ… ProducciÃ³n: 100% funcional
- âœ… APIs: Operativas
- âœ… Build: Sin errores
- âœ… ESLint: 0 warnings
- âœ… Base de datos: 17 tablas

## ğŸ”„ **METODOLOGÃA DE CONVERSIÃ“N INTERNA**

### **Para convertir MOCKS a REAL:**
1. **Crear implementaciÃ³n real** junto a mock
2. **Probar implementaciÃ³n real** sin eliminar mock
3. **Usar environment switching** para alternar
4. **Validar completamente** antes de eliminar mock
5. **Eliminar mock** solo tras confirmaciÃ³n total

### **Para convertir SIMULACIONES a REAL:**
1. **Implementar funcionalidad real** en paralelo
2. **Mantener simulaciÃ³n** durante transiciÃ³n
3. **Testear con datos/servicios reales**
4. **MigraciÃ³n gradual** con fallback
5. **Removal final** solo tras validaciÃ³n completa

## ğŸ›¡ï¸ **CHECKLIST MENTAL AUTOMÃTICO**

### **Pre-acciÃ³n (automÃ¡tico):**
- [ ] Â¿Sistema actual funciona?
- [ ] Â¿Es cambio incremental?
- [ ] Â¿Tengo plan de rollback?
- [ ] Â¿Puedo revertir fÃ¡cilmente?

### **Post-acciÃ³n (obligatorio):**
- [ ] Â¿Build sigue funcionando?
- [ ] Â¿ProducciÃ³n sigue operativa?
- [ ] Â¿APIs siguen respondiendo?
- [ ] Â¿Performance se mantiene o mejora?
- [ ] Â¿ESLint sigue pasando?

## ğŸ” **VALIDACIÃ“N ACTIVA POST-CAMBIO**
**DESPUÃ‰S de CADA modificaciÃ³n, SIEMPRE ejecutar:**

### **URLs de ProducciÃ³n (MANDATORY CHECK):**
```bash
# Health Check API
curl -s "https://1cea5765.qwik-lit-builder-app-7b1.pages.dev/api/health"
# Debe responder: {"status":"ok","timestamp":"...","message":"Health check successful"}

# Auth Status API  
curl -s "https://1cea5765.qwik-lit-builder-app-7b1.pages.dev/api/auth/status"
# Debe responder: {"authenticated":false,"user":null,"message":"Not authenticated"}

# Frontend Homepage
curl -s "https://1cea5765.qwik-lit-builder-app-7b1.pages.dev/" | head -5
# Debe responder: HTML vÃ¡lido
```

### **Build Process (MANDATORY CHECK):**
```bash
# Full Build
npm run build
# Debe completar: âœ“ Built client modules, âœ“ Built server modules, âœ“ Lint checked

# ESLint
npm run lint  
# Debe completar sin errores
```

### **Performance Baseline (MANDATORY CHECK):**
- **Health API**: Debe responder < 100ms
- **Auth API**: Debe responder < 100ms
- **Frontend**: Debe cargar < 500ms
- **Build Time**: Debe completar < 30s
- [ ] Â¿APIs siguen respondiendo?
- [ ] Â¿Sin nuevos errores?

## ğŸš‘ **PROTOCOLO DE EMERGENCIA**

### **Si algo se rompe:**
1. **STOP** inmediato
2. **REVERT** Ãºltimo cambio
3. **VALIDATE** que vuelve a funcionar
4. **ANALYZE** quÃ© saliÃ³ mal
5. **PLAN** mejor antes de continuar

## ğŸ“‹ **CASOS ESPECÃFICOS**

### **R2 Mock â†’ Real:**
- Mantener mock funcional
- Crear R2 real en paralelo  
- Environment-based switching
- Validar R2 real completamente
- Solo entonces eliminar mock

### **Console.log â†’ Logging:**
- Usar logger.ts existente
- Reemplazar gradualmente
- Mantener funcionalidad debug
- No romper flujo actual

### **Cache Simulation â†’ KV Real:**
- Implementar KV real junto a simulaciÃ³n
- Probar con Cloudflare KV
- Switching gradual
- Validar performance

## ğŸ¯ **OBJETIVO CLAUDE**
Convertir **TODO** de simulaciÃ³n a implementaciÃ³n real **SIN romper** el sistema que funciona perfectamente.

## ğŸ“ **LOG MENTAL**
Antes de cada acciÃ³n, Claude debe mentalmente:
1. âœ… Revisar estas reglas
2. âœ… Validar estado actual
3. âœ… Confirmar enfoque seguro
4. âœ… Proceder incrementalmente

---
**ğŸ¤– Este es un sistema interno para Claude - No afecta el proyecto**  
**âš¡ Auto-consulta obligatoria antes de cada modificaciÃ³n**  
**ğŸ›¡ï¸ Garantiza preservaciÃ³n del sistema funcional**