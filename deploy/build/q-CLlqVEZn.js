import{l as e}from"./q-BUprbeDF.js";import{r,B as n,R as t,s as i,t as o,v as a,w as s,x as c,y as l,z as d,A as f,C as m}from"./q-rRPm90by.js";import"./q-CLlqVEZn.js";import"./q-Ccds0Gka.js";var g={};const p=new class{constructor(){this.initialized=!1;const e="undefined"!=typeof process,r=!!e||"localhost"===window.location.hostname;this.config={dsn:e?g.SENTRY_DSN:"https://c61059fda17fdf0a9baa21e9b8673f22@o4509594523205632.ingest.de.sentry.io/4509594591690832",environment:e&&g.SENTRY_ENVIRONMENT||"development",release:e&&g.APP_VERSION||"1.0.0",sampleRate:r?1:.1,tracesSampleRate:r?1:.1,enablePerformanceMonitoring:!0,enableUserFeedback:!0}}initialize(){if(!this.initialized&&"undefined"!=typeof window)if(this.config.dsn)try{r({dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,sampleRate:this.config.sampleRate,tracesSampleRate:this.config.tracesSampleRate,replaysSessionSampleRate:"development"===this.config.environment?.1:.01,replaysOnErrorSampleRate:1,integrations:[..."production"===this.config.environment?[new n,new t({maskAllText:!0,blockAllMedia:!0})]:[]],beforeSend:(e,r)=>{if("development"===this.config.environment){const e=r.originalException;if(e instanceof Error){if(["ResizeObserver loop limit exceeded","Non-Error promise rejection captured","Script error","Network request failed"].some(r=>e.message.includes(r)))return null}}return e.tags&&(e.tags={...e.tags,component:"qwik-lit-builder",platform:"web"}),e},beforeSendTransaction:e=>"development"===this.config.environment&&e.transaction?.includes("/_build/")?null:e}),this.initialized=!0,e.info("Sentry error tracking initialized",{environment:this.config.environment,release:this.config.release})}catch(i){e.error("Failed to initialize Sentry",{},i instanceof Error?i:new Error(String(i)))}else e.info("Sentry DSN not configured, skipping initialization",{environment:this.config.environment})}captureError(r,n){if(this.initialized)try{return i(r,{tags:{component:n?.component||"unknown",category:n?.category||"error"},extra:n,level:this.mapSeverityToLevel(n?.severity)})}catch(t){return void e.error("Failed to capture error in Sentry",{},t instanceof Error?t:new Error(String(t)))}}captureMessage(r,n="info",t){if(this.initialized)try{return o(r,{level:n,tags:{component:t?.component||"unknown"},extra:t})}catch(i){return void e.error("Failed to capture message in Sentry",{},i instanceof Error?i:new Error(String(i)))}}setUser(r){if(this.initialized)try{a(r)}catch(n){e.error("Failed to set Sentry user",{},n instanceof Error?n:new Error(String(n)))}}setContext(r,n){if(this.initialized)try{s(r,n)}catch(t){e.error("Failed to set Sentry context",{key:r},t instanceof Error?t:new Error(String(t)))}}addBreadcrumb(r,n,t){if(this.initialized)try{c({message:r,category:n,data:t,timestamp:Date.now()/1e3,level:"info"})}catch(i){e.error("Failed to add Sentry breadcrumb",{message:r,category:n},i instanceof Error?i:new Error(String(i)))}}startTransaction(r,n){if(!this.initialized)return null;try{return l({name:r,op:n})}catch(t){return e.error("Failed to start Sentry transaction",{name:r,op:n},t instanceof Error?t:new Error(String(t))),null}}showUserFeedbackDialog(r){if(this.initialized&&this.config.enableUserFeedback)try{const e=r?.eventId||d();e&&f({eventId:e})}catch(n){e.error("Failed to show Sentry feedback dialog",{},n instanceof Error?n:new Error(String(n)))}}mapSeverityToLevel(e){switch(e){case"critical":return"fatal";case"high":default:return"error";case"medium":return"warning";case"low":return"info"}}measurePageLoad(){if(this.initialized&&this.config.enablePerformanceMonitoring)try{if("undefined"!=typeof window&&"performance"in window){new PerformanceObserver(e=>{for(const r of e.getEntries())"measure"===r.entryType&&c({category:"performance",message:`${r.name}: ${r.duration}ms`,level:"info",data:{duration:r.duration,startTime:r.startTime}})}).observe({entryTypes:["measure","navigation"]})}}catch(r){e.error("Failed to set up performance monitoring",{},r instanceof Error?r:new Error(String(r)))}}reportPerformanceMetric(r,n,t="ms"){if(this.initialized)try{c({category:"performance",message:`${r}: ${n}${t}`,level:"info",data:{metric:r,value:n,unit:t}}),m(`perf.${r}`,n)}catch(i){e.error("Failed to report performance metric",{name:r,value:n},i instanceof Error?i:new Error(String(i)))}}};function u(){"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?document.addEventListener("DOMContentLoaded",()=>{p.initialize()}):p.initialize())}function h(e,r){return p.captureError(e,r)}function y(e,r,n){p.addBreadcrumb(e,r,n)}export{y as addBreadcrumb,h as captureError,u as initializeSentry,p as sentryService};
