import{_ as l}from"./q-Ccds0Gka.js";import{c as e,q as t,G as s,H as a,e as n,f as o,b as u,d as r,_ as i,a as d,o as c,u as m,_hW as p}from"./q-rRPm90by.js";import{l as g}from"./q-BUprbeDF.js";import"./q-CLlqVEZn.js";const f=e(t(()=>l(()=>import("./q-_pv7qv5J.js"),[]),"s_C03Fqoboh3U")),_=s(a("s_00pXWz0FAag")),b=e(t(()=>l(()=>Promise.resolve().then(()=>y),void 0),"s_BDZLd0X4JxU")),v=Object.freeze(Object.defineProperty({__proto__:null,default:b,head:{title:"Media Library - Dashboard",meta:[{name:"description",content:"Upload and manage your media files with intelligent storage routing"}]},useMediaData:_},Symbol.toStringTag,{value:"Module"})),x=()=>{n();const e=_(),s=o(""),a=o(0),m=o([]),p=o(!1);if(!e.value)return u("div",null,{class:"flex items-center justify-center h-64"},u("div",null,{class:"text-gray-500"},"Loading...",3,null),3,"Wk_0");const g=t(()=>l(()=>Promise.resolve().then(()=>S),void 0),"s_cdAui9V38SU",[t(()=>l(()=>Promise.resolve().then(()=>P),void 0),"s_BCO4F9EvjfI",[p,e,m,s]),a,s]),b=t(()=>l(()=>Promise.resolve().then(()=>j),void 0),"s_2VhBVnlzOS4",[s]),v=t(()=>l(()=>Promise.resolve().then(()=>O),void 0),"s_tUSlurN8mDc",[s]);return u("div",null,{class:"space-y-8"},[u("div",null,{class:"border-b border-gray-200 pb-4"},[u("h1",null,{class:"text-3xl font-bold text-gray-900"},"Media Library",3,null),u("p",null,{class:"text-gray-600 mt-2"},"Upload and manage your files with intelligent storage routing",3,null)],3,null),u("div",null,{class:"grid grid-cols-1 md:grid-cols-3 gap-6"},[u("div",null,{class:"bg-white p-6 rounded-lg shadow"},[u("h3",null,{class:"text-sm font-medium text-gray-500"},"Total Files",3,null),u("p",null,{class:"text-3xl font-bold text-gray-900 mt-2"},r(l=>l.value.stats.totalFiles,[e]),3,null)],3,null),u("div",null,{class:"bg-white p-6 rounded-lg shadow"},[u("h3",null,{class:"text-sm font-medium text-gray-500"},"Storage Used",3,null),u("p",null,{class:"text-3xl font-bold text-gray-900 mt-2"},r(l=>l.value.stats.storageUsed,[e]),3,null)],3,null),u("div",null,{class:"bg-white p-6 rounded-lg shadow"},[u("h3",null,{class:"text-sm font-medium text-gray-500"},"Storage Type",3,null),u("p",null,{class:"text-sm text-gray-600 mt-2"},[u("span",null,{class:"block"},"‚úÖ R2: All files (simplified architecture)",3,null),u("span",null,{class:"block text-gray-400"},"Up to 5GB per file",3,null)],3,null)],3,null)],3,null),u("div",null,{class:"bg-white rounded-lg shadow p-6"},[u("h2",null,{class:"text-xl font-semibold text-gray-900 mb-4"},"Upload Files",3,null),i(f,{endpoint:"/api/upload",accept:"image/*,application/pdf,text/*,video/*",maxSize:52428800,multiple:!0,bucket:"uploads",class:"w-full",onUploadSuccess$:g,onUploadError$:b,onUploadComplete$:v,[d]:{endpoint:d,accept:d,maxSize:d,multiple:d,bucket:d,class:d,onUploadSuccess$:d,onUploadError$:d,onUploadComplete$:d}},3,"Wk_1"),s.value&&u("div",null,{class:"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md"},u("p",null,{class:"text-blue-800 text-sm"},r(l=>l.value,[s]),3,null),3,"Wk_2"),u("div",null,{class:"mt-4 text-sm text-gray-600"},[u("p",null,{class:"mb-2"},[u("strong",null,null,"Simplified Storage:",3,null)," All files go to Cloudflare R2 for consistent performance and global CDN delivery."],3,null),u("p",null,null,[u("strong",null,null,"Supported formats:",3,null)," Images, PDFs, text files, videos up to 50MB"],3,null)],3,null)],1,null),u("div",null,{class:"bg-white rounded-lg shadow"},[u("div",null,{class:"px-6 py-4 border-b border-gray-200"},u("h2",null,{class:"text-xl font-semibold text-gray-900"},"Your Files",3,null),3,null),u("div",null,{class:"p-6"},p.value?u("div",null,{class:"text-center py-12"},[u("div",null,{class:"text-gray-400 text-6xl mb-4"},"üîÑ",3,null),u("h3",null,{class:"text-lg font-medium text-gray-900 mb-2"},"Loading files...",3,null)],3,"Wk_3"):0===(m.value.length>0?m.value:e.value.files).length?u("div",null,{class:"text-center py-12"},[u("div",null,{class:"text-gray-400 text-6xl mb-4"},"üìÅ",3,null),u("h3",null,{class:"text-lg font-medium text-gray-900 mb-2"},"No files yet",3,null),u("p",null,{class:"text-gray-600 mb-4"},"Upload your first file using the upload area above",3,null),u("p",null,{class:"text-sm text-gray-500"},"Files will be stored securely and optimized for global delivery",3,null)],3,"Wk_4"):u("div",null,{class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"},(m.value.length>0?m.value:e.value.files).map(l=>u("div",null,{class:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow"},[u("div",null,{class:"flex items-center justify-between mb-3"},[u("div",null,{class:"text-sm font-medium text-gray-900 truncate"},c(l,"name"),1,null),u("span",null,{class:"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800"},"R2",3,null)],1,null),u("div",null,{class:"text-sm text-gray-600 space-y-1"},[u("div",null,null,["Size: ",(l.size/1024/1024).toFixed(2)," MB"],1,null),u("div",null,null,["Type: ",c(l,"type")],1,null),u("div",null,null,["Uploaded: ",new Date(l.uploadedAt).toLocaleDateString()],1,null)],1,null),u("div",null,{class:"mt-4 flex space-x-2"},[u("button",null,{class:"text-blue-600 hover:text-blue-800 text-sm font-medium"},"Download",3,null),u("button",null,{class:"text-red-600 hover:text-red-800 text-sm font-medium"},"Delete",3,null)],3,null)],1,l.id)),1,null),1,null)],1,null)],1,"Wk_5")},y=Object.freeze(Object.defineProperty({__proto__:null,s_BDZLd0X4JxU:x},Symbol.toStringTag,{value:"Module"})),h=l=>{const[e,t,s]=m(),{file:a}=l.detail;s.value=`‚úÖ Uploaded: ${a.name}`,e(),t.value+=1},S=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_cdAui9V38SU:h},Symbol.toStringTag,{value:"Module"})),U=l=>{const[e]=m(),{file:t,error:s}=l.detail;e.value=`‚ùå Failed: ${t.name} - ${s}`},j=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_2VhBVnlzOS4:U},Symbol.toStringTag,{value:"Module"})),w=l=>{const[e]=m(),{results:t}=l.detail,s=t.filter(l=>"success"===l.status).length,a=t.filter(l=>"error"===l.status).length;e.value=`üìä Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{e.value=""},5e3)},O=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_tUSlurN8mDc:w},Symbol.toStringTag,{value:"Module"})),D=async()=>{const[l,e,t,s]=m();if(e.value?.user){l.value=!0;try{const l=await fetch("/api/files/list?limit=50",{headers:{Cookie:document.cookie}});if(l.ok){const e=await l.json();t.value=e.files}}catch(a){const l=a instanceof Error?a.message:"Unknown error";g.error("Failed to refresh file list",{error:l,endpoint:"/api/files/list",userId:e.value.user?.id}),s.value=`‚ùå Failed to refresh file list: ${l}`,t.value=[]}finally{l.value=!1}}},P=Object.freeze(Object.defineProperty({__proto__:null,_hW:p,s_BCO4F9EvjfI:D},Symbol.toStringTag,{value:"Module"}));export{p as _hW,v as i,U as s_2VhBVnlzOS4,D as s_BCO4F9EvjfI,x as s_BDZLd0X4JxU,h as s_cdAui9V38SU,w as s_tUSlurN8mDc};
