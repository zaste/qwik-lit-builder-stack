var e,t,n,s=Object.defineProperty,r=(e,t,n)=>((e,t,n)=>t in e?s(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n)(e,"symbol"!=typeof t?t+"":t,n);import{_ as i}from"./q-Ccds0Gka.js";const o=document,a="modulepreload",c={t:0,o:25,l:.65},l=o.createElement("link").relList.supports(a)?a:"preload",u=(Date.now(),/\.[mc]?js$/),d=new Map;let h,p=0;const f=[],m=()=>{if(f.length){for(h&&(f.sort((e,t)=>e.u-t.u),h=0);f.length;){const e=f[0],t=1-e.u,n=w?Math.max(1,c.o*t):2;if(!(t>=.99||p<n))break;f.shift(),g(e)}if(c.t&&!f.length){const e=[...d.values()].filter(e=>e.i>0);e.reduce((e,t)=>e+t.p,0),e.reduce((e,t)=>e+t.$,0);e.length,d.size}}},g=e=>{if(e.i>=2)return;p++;const t=Date.now();e.p=t-e.m,e.i=2,c.t&&(Math.round(100*(1-e.u)),e.p,e.B);const n=o.createElement("link");n.href=new URL(`${b}${e.B}`,o.baseURI).toString(),n.rel=l,n.as="script",n.onload=n.onerror=()=>{p--;const s=Date.now();e.$=s-t,e.i=4,c.t&&(e.$,e.B),n.remove(),m()},o.head.appendChild(n)},y=(e,t,n)=>{if(null==n?void 0:n.has(e))return;const s=e.u;if(e.u=t,!(s-e.u<.01)&&(null!=b&&e.i<2&&e.u<c.l&&(0===e.i&&(e.i=1,f.push(e),c.t&&(Math.round(100*(1-e.u)),e.B)),h=1),e.h)){n||(n=new Set),n.add(e);const t=1-e.u;for(const s of e.h){const e=k(s.B);if(0===e.u)continue;let r;if(s.S>.5&&(1===t||t>=.99&&v<100))v++,r=Math.min(.01,1-s.S);else{const n=(1-s.S*t)/s.q;r=Math.max(.02,e.u*n),s.q=n}y(e,r,n)}}},_=(e,t)=>{const n=k(e);n&&n.u>t&&y(n,t)};let v;const $=(e,t)=>{if(!(null==e?void 0:e.length))return;v=0;let n=t?1-t:.4;if(Array.isArray(e))for(let s=e.length-1;s>=0;s--){const t=e[s];"number"==typeof t?n=1-t/10:_(t,n)}else _(e,n);m()};let b,w;document.addEventListener("qsymbol",e=>{const{symbol:t,href:n}=e.detail;if(n){const e=t.slice(t.lastIndexOf("_")+1);$(e,1)}});const S=e=>{const t=new Map;let n=0;for(;n<e.length;){const s=e[n++],r=[];let i,o=1;for(;i=e[n],"number"==typeof i;)i<0?o=-i/10:r.push({B:e[i],S:o,q:1}),n++;t.set(s,r)}return t},k=e=>{let t=d.get(e);if(!t){let n;if(w){if(n=w.get(e),!n)return;n.length||(n=void 0)}t=((e,t)=>({B:e,i:u.test(e)?0:3,h:t,u:1,m:Date.now(),p:0,$:0}))(e,n),d.set(e,t)}return t},T=(e,t,n)=>{n&&("d"in n&&(c.t=!!n.d),"P"in n&&(c.o=n.P),"Q"in n&&(c.l=1-n.Q)),null!=e&&(b=e,t&&t.then(e=>e.text()).then(e=>{w=S(JSON.parse(e));const t=[];for(const[n,s]of w.entries()){const e=k(n);e.h=s,e.u<1&&(t.push([e,e.u]),e.u=1)}c.t&&(w.size,t.length);for(const[n,s]of t)y(n,s);m()}).catch(console.warn))},E=!1,x=!1!==globalThis.qDynamicPlatform,C=!0===globalThis.qRuntimeQrl,I=e=>e&&"number"==typeof e.nodeType,R=e=>1===e.nodeType,O=e=>{const t=e.nodeType;return 1===t||111===t},A=e=>{const t=e.nodeType;return 1===t||111===t||3===t},P=e=>111===e.nodeType,M=e=>3===e.nodeType,D=e=>8===e.nodeType,j=(e,...t)=>N(!1,e,...t),L=(e,...t)=>N(E,e,...t),N=(e,t,...n)=>t instanceof Error?t:new Error(t);function q(e,t,...n){}function U(e,t,n,...s){}function F(e,t,...n){}function B(e){}const z=(e,...t)=>`Code(${e}) https://github.com/QwikDev/qwik/blob/main/packages/qwik/src/core/error/error.ts#L${8+e}`,W=(e,...t)=>{const n=z(e,...t);return L(n,...t)},H=()=>({isServer:false,importSymbol(e,t,n){if(!t)throw W(31,n);if(!e)throw W(30,t,n);const s=V(e.ownerDocument,e,t).toString(),r=new URL(s);r.hash="";const i=r.href;return import(i).then(e=>e[n])},raf:e=>new Promise(t=>{requestAnimationFrame(()=>{t(e())})}),nextTick:e=>new Promise(t=>{setTimeout(()=>{t(e())})}),chunkForSymbol:(e,t)=>[e,t??"_"]}),V=(e,t,n)=>{const s=e.baseURI,r=new URL(t.getAttribute("q:base")??s,s);return new URL(n,r)};let J=H();const K=()=>J,G=()=>!!x&&J.isServer,Y=e=>{const t=Object.getPrototypeOf(e);return t===Object.prototype||null===t},X=e=>!!e&&"object"==typeof e,Q=e=>Array.isArray(e),Z=e=>"string"==typeof e,ee=e=>"function"==typeof e,te=e=>e&&"function"==typeof e.then,ne=(e,t,n)=>{try{const s=e();return te(s)?s.then(t,n):t(s)}catch(s){return n(s)}},se=(e,t)=>te(e)?e.then(t):t(e),re=e=>e.some(te)?Promise.all(e):e,ie=e=>e.length>0?Promise.all(e):e,oe=e=>null!=e,ae=e=>new Promise(t=>{setTimeout(t,e)}),ce=[],le={},ue=e=>{if(!x)return document;if("undefined"!=typeof document)return document;if(9===e.nodeType)return e;return e.ownerDocument},de="q:renderFn",he="q:slot",pe="q:sref",fe="q:s",me="q:style",ge="q:instance",ye=(e,t)=>e["qFuncs_"+t]||[],_e="q:container",ve="[q\\:container]",$e="qRender",be="qTask",we="q:id",Se=Symbol("proxy target"),ke=Symbol("proxy flags"),Te=Symbol("proxy manager"),Ee=Symbol("IMMUTABLE"),xe="$$",Ce="__virtual",Ie="_qc_",Re=(e,t,n)=>e.setAttribute(t,n),Oe=(e,t)=>e.getAttribute(t),Ae=e=>e.replace(/([A-Z])/g,"-$1").toLowerCase(),Pe=(e,t,n=0)=>{const s=t.$proxyMap$.get(e);return s||(0!==n&&je(e,n),Me(e,t,void 0))},Me=(e,t,n)=>{Di(e),t.$proxyMap$.has(e);const s=t.$subsManager$.$createManager$(n),r=new Proxy(e,new Le(t,s));return t.$proxyMap$.set(e,r),r},De=()=>{const e={};return je(e,2),e},je=(e,t)=>{Object.defineProperty(e,ke,{value:t,enumerable:!1})};class Le{constructor(e,t){r(this,"$containerState$"),r(this,"$manager$"),this.$containerState$=e,this.$manager$=t}deleteProperty(e,t){if(2&e[ke])throw W(17);return"string"==typeof t&&delete e[t]&&(this.$manager$.$notifySubs$(Q(e)?void 0:t),!0)}get(e,t){if("symbol"==typeof t)return t===Se?e:t===Te?this.$manager$:e[t];const n=e[ke]??0,s=Dn(),r=!!(1&n),i=!!(2&n),o=e[xe+t];let a,c;if(s&&(a=s.$subscriber$),!i||t in e&&!Ne(e[Ee]?.[t])||(a=null),o?(c=o.value,a=null):c=e[t],a){const n=Q(e);this.$manager$.$addSub$(a,n?void 0:t)}return r?qe(c,this.$containerState$):c}set(e,t,n){if("symbol"==typeof t)return e[t]=n,!0;const s=e[ke]??0;if(!!(2&s))throw W(17);const r=!!(1&s)?Di(n):n;if(Q(e))return e[t]=r,this.$manager$.$notifySubs$(),!0;const i=e[t];return e[t]=r,i!==r&&this.$manager$.$notifySubs$(t),!0}has(e,t){if(t===Se)return!0;const n=Dn();if("string"==typeof t&&n){const s=n.$subscriber$;if(s){const n=Q(e);this.$manager$.$addSub$(s,n?void 0:t)}}const s=Object.prototype.hasOwnProperty;return!!s.call(e,t)||!("string"!=typeof t||!s.call(e,xe+t))}ownKeys(e){if(!!!(2&(e[ke]??0))){let e=null;const t=Dn();t&&(e=t.$subscriber$),e&&this.$manager$.$addSub$(e)}return Q(e)?Reflect.ownKeys(e):Reflect.ownKeys(e).map(e=>"string"==typeof e&&e.startsWith(xe)?e.slice(2):e)}getOwnPropertyDescriptor(e,t){const n=Reflect.getOwnPropertyDescriptor(e,t);return Q(e)||"symbol"==typeof t||n&&!n.configurable?n:{enumerable:!0,configurable:!0}}}const Ne=e=>e===Ee||rs(e),qe=(e,t)=>{if(X(e)){if(Object.isFrozen(e))return e;const n=Di(e);if(n!==e)return e;if(Ai(n))return e;if(Y(n)||Q(n)){const e=t.$proxyMap$.get(n);return e||Pe(n,t,1)}}return e},Ue=/^(on|window:|document:)/,Fe="preventdefault:",Be=e=>e.endsWith("$")&&Ue.test(e),ze=(e,t,n,s)=>{if(t.endsWith("$"),t=Ve(t.slice(0,-1)),n)if(Q(n)){const r=n.flat(1/0).filter(e=>null!=e).map(e=>[t,Je(e,s)]);e.push(...r)}else e.push([t,Je(n,s)]);return t},We=["on","window:on","document:on"],He=["on","on-window","on-document"],Ve=e=>{let t="on";for(let n=0;n<We.length;n++){const s=We[n];if(e.startsWith(s)){t=He[n],e=e.slice(s.length);break}}return t+":"+(e=e.startsWith("-")?Ae(e.slice(1)):e.toLowerCase())},Je=(e,t)=>{const n=Wi(e)?e:eo(e);return n.$setContainer$(t),n},Ke=(e,t)=>`${((e,t=0)=>{for(let n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return Number(Math.abs(t)).toString(36)})(e.$hash$)}-${t}`,Ge=()=>{const e=Ln(),t=e.$hostElement$,n=Cn(t,e.$renderCtx$.$static$.$containerState$),s=n.$seq$||(n.$seq$=[]),r=e.$i$++;return{val:s[r],set:e=>s[r]=e,i:r,iCtx:e,elCtx:n}},Ye=e=>(/^[\w/.-]+$/.test(e),Object.freeze({id:Ae(e)})),Xe=(e,t)=>{const{val:n,set:s,elCtx:r}=Ge();if(void 0!==n)return;(r.$contexts$||(r.$contexts$=new Map)).set(e.id,t),s(!0)},Qe=(e,t)=>{const{val:n,set:s,iCtx:r,elCtx:i}=Ge();if(void 0!==n)return n;const o=et(e,i,r.$renderCtx$.$static$.$containerState$);if("function"==typeof t)return s(Un(void 0,t,o));if(void 0!==o)return s(o);if(void 0!==t)return s(t);throw W(13,e.id)},Ze=(e,t)=>(void 0===e.$parentCtx$&&(e.$parentCtx$=((e,t)=>{let n=e,s=1;for(;n&&!n.hasAttribute?.("q:container");){for(;n=n.previousSibling;)if(D(n)){const e=n[Ce];if(e){const s=e[Ie];if(n===e.open)return s??Cn(e,t);if(s?.$parentCtx$)return s.$parentCtx$;n=e;continue}if("/qv"===n.data)s++;else if(n.data.startsWith("qv ")&&(s--,0===s))return Cn(Cr(n),t)}n=e.parentElement,e=n}return null})(e.$element$,t)),e.$parentCtx$),et=(e,t,n)=>{const s=e.id;if(!t)return;let r=t;for(;r;){const e=r.$contexts$?.get(s);if(e)return e;r=Ze(r,n)}},tt=Ye("qk-error"),nt=(e,t,n)=>{const s=xn(t);if(G())throw e;{const t=et(tt,s,n.$static$.$containerState$);if(void 0===t)throw e;t.error=e}},st=new Set(["animationIterationCount","aspectRatio","borderImageOutset","borderImageSlice","borderImageWidth","boxFlex","boxFlexGroup","boxOrdinalGroup","columnCount","columns","flex","flexGrow","flexShrink","gridArea","gridRow","gridRowEnd","gridRowStart","gridColumn","gridColumnEnd","gridColumnStart","fontWeight","lineClamp","lineHeight","opacity","order","orphans","scale","tabSize","widows","zIndex","zoom","MozAnimationIterationCount","MozBoxFlex","msFlex","msFlexPositive","WebkitAnimationIterationCount","WebkitBoxFlex","WebkitBoxOrdinalGroup","WebkitColumnCount","WebkitColumns","WebkitFlex","WebkitFlexGrow","WebkitFlexShrink","WebkitLineClamp"]),rt=(e,t,n)=>{t.$flags$&=-2,t.$flags$|=En,t.$slots$=[],t.li.length=0;const s=t.$element$,r=t.$componentQrl$,i=t.$props$,o=Wn(e.$static$.$locale$,s,void 0,$e),a=o.$waitOn$=[],c=it(e);c.$cmpCtx$=t,c.$slotCtx$=void 0,o.$subscriber$=[0,s],o.$renderCtx$=e,r.$setContainer$(e.$static$.$containerState$.$containerEl$);const l=r.getFn(o);return ne(()=>l(i),s=>se(G()?se(ie(a),()=>se(en(e.$static$.$containerState$,e),()=>ie(a))):ie(a),()=>{if(t.$flags$&kn){if(!(n&&n>100))return rt(e,t,n?n+1:1);t.$componentQrl$}return{node:s,rCtx:c}}),r=>{if(r===Zn){if(!(n&&n>100))return se(ie(a),()=>rt(e,t,n?n+1:1));t.$componentQrl$}return nt(r,s,e),{node:St,rCtx:c}})},it=e=>({$static$:e.$static$,$cmpCtx$:e.$cmpCtx$,$slotCtx$:e.$slotCtx$}),ot=(e,t)=>t?.$scopeIds$?.length?t.$scopeIds$.join(" ")+" "+at(e):at(e),at=e=>{if(!e)return"";if(Z(e))return e.trim();const t=[];if(Q(e))for(const n of e){const e=at(n);e&&t.push(e)}else for(const[n,s]of Object.entries(e))s&&t.push(n.trim());return t.join(" ")},ct=e=>{if(null==e)return"";if("object"==typeof e){if(Q(e))throw W(0,e,"style");{const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const s=e[n];null!=s&&"function"!=typeof s&&(n.startsWith("--")?t.push(n+":"+s):t.push(Ae(n)+":"+lt(n,s)))}return t.join(";")}}return String(e)},lt=(e,t)=>{return"number"!=typeof t||0===t||(n=e,st.has(n))?t:t+"px";var n},ut=(e,t)=>{const n=ps(e.$static$.$containerState$.$elementIndex$++);t.$id$=n},dt=e=>rs(e)?dt(e.value):null==e||"boolean"==typeof e?"":String(e);const ht="dangerouslySetInnerHTML",pt=(e,t,n)=>new ns(e,t,n),ft=(e,t,n,s,r,i,o)=>{const a=null==i?null:String(i);return new vt(e,t||le,n,s,r,a)},mt=(e,t,n,s,r,i)=>{let o=null;return t&&"children"in t&&(o=t.children,delete t.children),ft(e,t,n,o,s,r)},gt=(e,t,n,s,r)=>{const i=null==s?null:String(s),o=t??{};if("string"==typeof e&&Ee in o){const t=o[Ee];delete o[Ee];const r=o.children;delete o.children;for(const[e,n]of Object.entries(t))n!==Ee&&(delete o[e],o[e]=n);return ft(e,null,o,r,n,s)}const a=new vt(e,o,null,o.children,n,i);return"string"==typeof e&&t&&delete t.children,a},yt=(e,t,n)=>{const s=Vn(()=>{const n=t.children;return"string"==typeof e&&delete t.children,n});Z(e)&&"className"in t&&(t.class=t.className,delete t.className);return new vt(e,t,null,s,0,null)},_t=":skipRender";class vt{constructor(e,t,n,s,i,o=null){r(this,"type"),r(this,"props"),r(this,"immutableProps"),r(this,"children"),r(this,"flags"),r(this,"key"),r(this,"dev"),this.type=e,this.props=t,this.immutableProps=n,this.children=s,this.flags=i,this.key=o}}const $t=e=>e.children,bt=e=>e instanceof vt,wt=e=>e.children,St=Symbol("skip render"),kt=(e,t,n)=>{const s=!(t.$flags$&En),r=t.$element$,i=e.$static$.$containerState$;return i.$hostsStaging$.delete(t),i.$subsManager$.$clearSub$(r),se(rt(e,t),i=>{const o=e.$static$,a=i.rCtx,c=Wn(e.$static$.$locale$,r);if(o.$hostElements$.add(r),c.$subscriber$=[0,r],c.$renderCtx$=a,s&&t.$appendStyles$)for(const e of t.$appendStyles$)ur(o,e);const l=It(i.node,c);return se(l,e=>{const s=Ct(r,e),i=Tt(t);return se(vs(a,i,s,n),()=>{t.$vdom$=s})})})},Tt=e=>(e.$vdom$||(e.$vdom$=Ts(e.$element$)),e.$vdom$);class Et{constructor(e,t,n,s,i,o){r(this,"$type$"),r(this,"$props$"),r(this,"$immutableProps$"),r(this,"$children$"),r(this,"$flags$"),r(this,"$key$"),r(this,"$elm$",null),r(this,"$text$",""),r(this,"$signal$",null),r(this,"$id$"),r(this,"$dev$"),this.$type$=e,this.$props$=t,this.$immutableProps$=n,this.$children$=s,this.$flags$=i,this.$key$=o,this.$id$=e+(o?":"+o:"")}}const xt=(e,t)=>{const{key:n,type:s,props:r,children:i,flags:o,immutableProps:a}=e;let c="";if(Z(s))c=s;else{if(s!==$t){if(ee(s)){const i=Un(t,s,r,n,o,e.dev);return((e,t)=>!!t.key&&(!bt(e)||!ee(e.type)&&e.key!=t.key))(i,e)?xt(gt($t,{children:i},0,n),t):It(i,t)}throw W(25,s)}c=Tr}let l=ce;if(null!=i)return se(It(i,t),e=>{void 0!==e&&(l=Q(e)?e:[e]);return new Et(c,r,a,l,o,n)});return new Et(c,r,a,l,o,n)},Ct=(e,t)=>{const n=void 0===t?ce:Q(t)?t:[t],s=new Et(":virtual",{},null,n,0,null);return s.$elm$=e,s},It=(e,t)=>{if(null!=e&&"boolean"!=typeof e){if(Rt(e)){const t=new Et("#text",le,null,ce,0,null);return t.$text$=String(e),t}if(bt(e))return xt(e,t);if(rs(e)){const t=new Et("#signal",le,null,ce,0,null);return t.$signal$=e,t}if(Q(e)){const n=re(e.flatMap(e=>It(e,t)));return se(n,e=>e.flat(100).filter(oe))}return te(e)?e.then(e=>It(e,t)):e===St?new Et(_t,le,null,ce,0,null):void 0}},Rt=e=>Z(e)||"number"==typeof e,Ot=e=>{"paused"===Oe(e,_e)&&Pt(e)},At=(e,t)=>{const n=JSON.parse(e);if("object"!=typeof n)return null;const{_objs:s,_entry:r}=n;if(void 0===s||void 0===r)return null;let i={},o={};if(I(t)&&O(t)){const e=Hn(t);e&&(o=cs(e),i=e.ownerDocument)}const a=Ei(o,i);for(let l=0;l<s.length;l++){const e=s[l];Z(e)&&(s[l]=e===Qr?void 0:a.prepare(e))}const c=e=>s[fs(e)];for(const l of s)Dt(l,c,a);return c(r)},Pt=e=>{if(!hs(e))return;const t=e._qwikjson_??(e=>{const t=ue(e),n=e===t.documentElement?t.body:e,s=Lt(n,"type");if(s){const e=s.firstChild.data;return JSON.parse(jt(e)||"{}")}})(e);if(e._qwikjson_=null,!t)return;const n=ue(e),s=e.getAttribute(ge);e===n.documentElement&&n.body;const r=ye(n,s),i=cs(e),o=new Map,a=new Map;let c=null,l=0;const u=n.createTreeWalker(e,ds);for(;c=u.nextNode();){const e=c.data;if(0===l)if(e.startsWith("qv ")){const t=qt(e);t>=0&&o.set(t,c)}else if(e.startsWith("t=")){const t=e.slice(2),n=fs(t),s=Nt(c);o.set(n,s),a.set(n,s.data)}"cq"===e?l++:"/cq"===e&&l--}const d=0!==e.getElementsByClassName("qc📦").length;e.querySelectorAll("[q\\:id]").forEach(t=>{if(d&&t.closest("[q\\:container]")!==e)return;const n=Oe(t,we),s=fs(n);o.set(s,t)});const h=Ei(i,n),p=new Map,f=new Set,m=e=>("string"==typeof e&&e.length,p.has(e)?p.get(e):g(e)),g=e=>{if(e.startsWith("#")){const t=e.slice(1),n=fs(t);o.has(n);const s=o.get(n);if(D(s)){if(!s.isConnected)return void p.set(e,void 0);const t=Cr(s);return p.set(e,t),Cn(t,i),t}return R(s)?(p.set(e,s),Cn(s,i),s):(p.set(e,s),s)}if(e.startsWith("@")){const t=e.slice(1),n=fs(t),s=r[n];return s}if(e.startsWith("*")){const t=e.slice(1),n=fs(t);o.has(n);const s=a.get(n);return p.set(e,s),s}const n=fs(e),s=t.objs;s.length;let c=s[n];Z(c)&&(c=c===Qr?void 0:h.prepare(c));let l=c;for(let t=e.length-1;t>=0;t--){const n=e[t],s=xi[n];if(!s)break;l=s(l,i)}return p.set(e,l),Rt(c)||f.has(n)||(f.add(n),Mt(c,n,t.subs,m,i,h),Dt(c,m,h)),l};var y,_,v,$;i.$elementIndex$=1e5,i.$pauseCtx$={getObject:m,meta:t.ctx,refs:t.refs},Re(e,_e,"resumed"),_="qresume",v=void 0,$=!0,(y=e)&&y.dispatchEvent(new CustomEvent(_,{detail:v,bubbles:$,composed:$}))},Mt=(e,t,n,s,r,i)=>{const o=n[t];if(o){const t=[];let n=0;for(const e of o)if(e.startsWith("_"))n=parseInt(e.slice(1),10);else{const n=qi(e,s);n&&t.push(n)}if(n>0&&je(e,n),!i.subs(e,t)){const n=r.$proxyMap$.get(e);n?Li(n).$addSubs$(t):Me(e,r,t)}}},Dt=(e,t,n)=>{if(!n.fill(e,t)&&e&&"object"==typeof e)if(Q(e))for(let s=0;s<e.length;s++)e[s]=t(e[s]);else if(Y(e))for(const s in e)e[s]=t(e[s])},jt=e=>e.replace(/\\x3C(\/?script)/gi,"<$1"),Lt=(e,t)=>{let n=e.lastElementChild;for(;n;){if("SCRIPT"===n.tagName&&"qwik/json"===Oe(n,t))return n;n=n.previousElementSibling}},Nt=e=>{const t=e.nextSibling;if(M(t))return t;{const t=e.ownerDocument.createTextNode("");return e.parentElement.insertBefore(t,e),t}},qt=e=>{const t=e.indexOf("q:id=");return t>0?fs(e.slice(t+5)):-1},Ut=()=>{const e=jn();let t=e.$qrl$;if(t)t.$captureRef$;else{const n=e.$element$,s=Hn(n);t=Hr(decodeURIComponent(String(e.$url$)),s),Ot(s);const r=Cn(n,cs(s));Jr(t,r)}return t.$captureRef$},Ft=(e,t)=>{try{const n=t[0],s=e.$static$;switch(n){case 1:case 2:{let e,r;1===n?(e=t[1],r=t[3]):(e=t[3],r=t[1]);const i=xn(e);if(null==i)return;const o=t[4],a=e.namespaceURI===ms;s.$containerState$.$subsManager$.$clearSignal$(t);let c=Kn(t[2],t.slice(0,-1));"class"===o?c=ot(c,xn(r)):"style"===o&&(c=ct(c));const l=Tt(i);if(o in l.$props$&&l.$props$[o]===c)return;return l.$props$[o]=c,zs(s,e,o,c,a)}case 3:case 4:{const n=t[3];if(!s.$visited$.includes(n)){s.$containerState$.$subsManager$.$clearSignal$(t);const r=void 0;let i=Kn(t[2],t.slice(0,-1));const o=zi;Array.isArray(i)&&(i=new vt($t,{},null,i,0,null));let a=It(i,r);if(te(a))j("Rendering promises in JSX signals is not supported");else{void 0===a&&(a=It("",r));const i=ks(n),c=function(e){for(;e;){if(O(e))return e;e=e.parentElement}throw new Error("Not found")}(t[1]);if(e.$cmpCtx$=Cn(c,e.$static$.$containerState$),i.$type$==a.$type$&&i.$key$==a.$key$&&i.$id$==a.$id$)Rs(e,i,a,0);else{const t=[],r=i.$elm$,c=js(e,a,0,t);t.length&&j("Rendering promises in JSX signals is not supported"),o[3]=c,ar(e.$static$,n.parentElement,c,r),r&&fr(s,r)}}}}}}catch(n){}};const Bt=(e,t)=>{if(0===e[0]){const n=e[1];wn(n)?Ht(n,t):zt(n,t)}else Wt(e,t)},zt=(e,t)=>{const n=G();n||Ot(t.$containerEl$);const s=Cn(e,t);if(s.$componentQrl$,s.$flags$&kn)return;s.$flags$|=kn;if(void 0!==t.$hostsRendering$)t.$hostsStaging$.add(s);else{if(n)return;t.$hostsNext$.add(s),Vt(t)}},Wt=(e,t)=>{const n=void 0!==t.$hostsRendering$;t.$opsNext$.add(e),n||Vt(t)},Ht=(e,t)=>{if(e.$flags$&hn)return;e.$flags$|=hn;void 0!==t.$hostsRendering$?t.$taskStaging$.add(e):(t.$taskNext$.add(e),Vt(t))},Vt=e=>(void 0===e.$renderPromise$&&(e.$renderPromise$=K().nextTick(()=>Kt(e))),e.$renderPromise$),Jt=()=>{const[e]=Ut();Ht(e,cs(Hn(e.$el$)))},Kt=async e=>{const t=e.$containerEl$,n=ue(t);try{const r=((e,t)=>{const n={$static$:{$doc$:e,$locale$:t.$serverData$.locale,$containerState$:t,$hostElements$:new Set,$operations$:[],$postOperations$:[],$roots$:[],$addSlots$:[],$rmSlots$:[],$visited$:[]},$cmpCtx$:null,$slotCtx$:void 0};return n})(n,e),i=r.$static$,o=e.$hostsRendering$=new Set(e.$hostsNext$);e.$hostsNext$.clear(),await Zt(e,r),e.$hostsStaging$.forEach(e=>{o.add(e)}),e.$hostsStaging$.clear();const a=Array.from(e.$opsNext$);e.$opsNext$.clear();const c=Array.from(o);if(nn(c),!e.$styleMoved$&&c.length>0){e.$styleMoved$=!0;(t===n.documentElement?n.body:t).querySelectorAll("style[q\\:style]").forEach(t=>{e.$styleIds$.add(Oe(t,me)),lr(i,n.head,t)})}for(const e of c){const t=e.$element$;if(!i.$hostElements$.has(t)&&e.$componentQrl$){F(t.isConnected),i.$roots$.push(e);try{await kt(r,e,Gt(t.parentElement))}catch(s){j(s)}}}return a.forEach(e=>{Ft(r,e)}),i.$operations$.push(...i.$postOperations$),0===i.$operations$.length?(br(i),void(await Yt(e,r))):(await Ks(i),br(i),Yt(e,r))}catch(s){j(s)}},Gt=e=>{let t=0;return e&&(e.namespaceURI===ms&&(t|=gs),"HEAD"===e.tagName&&(t|=ys)),t},Yt=async(e,t)=>{const n=t.$static$.$hostElements$;await tn(e,t,(e,t)=>0!==(e.$flags$&ln)&&(!t||n.has(e.$el$))),e.$hostsStaging$.forEach(t=>{e.$hostsNext$.add(t)}),e.$hostsStaging$.clear(),e.$hostsRendering$=void 0,e.$renderPromise$=void 0;e.$hostsNext$.size+e.$taskNext$.size+e.$opsNext$.size>0&&(e.$renderPromise$=Kt(e))},Xt=e=>0!==(e.$flags$&un),Qt=e=>0!==(e.$flags$&dn),Zt=async(e,t)=>{const n=e.$containerEl$,s=[],r=[];e.$taskNext$.forEach(t=>{Xt(t)&&(r.push(se(t.$qrl$.$resolveLazy$(n),()=>t)),e.$taskNext$.delete(t)),Qt(t)&&(s.push(se(t.$qrl$.$resolveLazy$(n),()=>t)),e.$taskNext$.delete(t))});do{if(e.$taskStaging$.forEach(t=>{Xt(t)?r.push(se(t.$qrl$.$resolveLazy$(n),()=>t)):Qt(t)?s.push(se(t.$qrl$.$resolveLazy$(n),()=>t)):e.$taskNext$.add(t)}),e.$taskStaging$.clear(),r.length>0){const n=await Promise.all(r);sn(n),await Promise.all(n.map(n=>mn(n,e,t))),r.length=0}}while(e.$taskStaging$.size>0);if(s.length>0){const n=await Promise.all(s);sn(n);for(const s of n)mn(s,e,t)}},en=(e,t)=>{const n=e.$containerEl$,s=e.$taskStaging$;if(!s.size)return;const r=[];let i=20;const o=()=>{if(s.forEach(e=>{Xt(e)&&r.push(se(e.$qrl$.$resolveLazy$(n),()=>e))}),s.clear(),r.length>0)return Promise.all(r).then(async n=>{if(sn(n),await Promise.all(n.map(n=>mn(n,e,t))),r.length=0,--i&&s.size>0)return o();i||Array.from(s).map(e=>`  ${e.$qrl$.$symbol$}`).join("\n")})};return o()},tn=async(e,t,n)=>{const s=[],r=e.$containerEl$;e.$taskNext$.forEach(t=>{n(t,!1)&&(t.$el$.isConnected&&s.push(se(t.$qrl$.$resolveLazy$(r),()=>t)),e.$taskNext$.delete(t))});do{if(e.$taskStaging$.forEach(t=>{t.$el$.isConnected&&(n(t,!0)?s.push(se(t.$qrl$.$resolveLazy$(r),()=>t)):e.$taskNext$.add(t))}),e.$taskStaging$.clear(),s.length>0){const n=await Promise.all(s);sn(n);for(const s of n)mn(s,e,t);s.length=0}}while(e.$taskStaging$.size>0)},nn=e=>{e.sort((e,t)=>2&e.$element$.compareDocumentPosition(Ir(t.$element$))?1:-1)},sn=e=>{const t=G();e.sort((e,n)=>t||e.$el$===n.$el$?e.$index$<n.$index$?-1:1:2&e.$el$.compareDocumentPosition(Ir(n.$el$))?1:-1)},rn=(e,t)=>{an(on(e,"document"),t)},on=(e,t)=>{const n=void 0!==t?t+":":"";return Array.isArray(e)?e.map(e=>`${n}on-${e}`):`${n}on-${e}`},an=(e,t)=>{if(t){const n=Ln(),s=Cn(n.$hostElement$,n.$renderCtx$.$static$.$containerState$);"string"==typeof e?s.li.push([Ve(e),t]):s.li.push(...e.map(e=>[Ve(e),t])),s.$flags$|=Tn}},cn=e=>(e=>{const{val:t,set:n}=Ge();return null!=t?t:n(e=ee(e)&&!so(e)?e():e)})(()=>(e=>{const t=Nn(),n=ee(e)&&!so(e)?Un(void 0,e):e;return Xn(n,t,0)})(e)),ln=1,un=2,dn=4,hn=16,pn=(e,t)=>{const{val:n,set:s,iCtx:r,i:i,elCtx:o}=Ge();if(n)return;const a=r.$renderCtx$.$static$.$containerState$,c=new Sn(hn|un,i,o.$element$,e,void 0);s(!0),e.$resolveLazy$(a.$containerEl$),o.$tasks$||(o.$tasks$=[]),o.$tasks$.push(c),Bn(r,()=>yn(c,a,r.$renderCtx$)),G()&&$n(c,t?.eagerness)},fn=(e,t)=>{const{val:n,set:s,i:r,iCtx:i,elCtx:o}=Ge(),a=t?.strategy??"intersection-observer";if(n)return void(G()&&$n(n,a));const c=new Sn(ln,r,o.$element$,e,void 0),l=i.$renderCtx$.$static$.$containerState$;o.$tasks$||(o.$tasks$=[]),o.$tasks$.push(c),s(c),$n(c,a),G()||(e.$resolveLazy$(l.$containerEl$),Ht(c,l))},mn=async(e,t,n)=>(e.$flags$,(e=>0!==(e.$flags$&dn))(e)?gn(e,t,n):(e=>!!(8&e.$flags$))(e)?_n(e,t,n):yn(e,t,n)),gn=(e,t,n,s)=>{e.$flags$&=-17,vn(e);const r=e.$el$,i=Wn(n.$static$.$locale$,r,void 0,be),{$subsManager$:o}=t;i.$renderCtx$=n;const a=e.$qrl$.getFn(i,()=>{o.$clearSub$(e)}),c=[],l=e.$state$,u=Di(l),d={track:(t,s)=>{if(ee(t)){const s=Wn();return s.$renderCtx$=n,s.$subscriber$=[0,e],Un(s,t)}const r=Li(t);return r?r.$addSub$([0,e],s):L(z(26),t),s?t[s]:rs(t)?t.value:t},cleanup(e){c.push(e)},cache(e){let t=0;t="immutable"===e?1/0:e,l._cache=t},previous:u._resolved};let h,p,f=!1;const m=(e,t)=>!f&&(f=!0,e?(f=!0,l.loading=!1,l._state="resolved",l._resolved=t,l._error=void 0,h(t)):(f=!0,l.loading=!1,l._state="rejected",l._error=t,p(t)),!0);Un(i,()=>{l._state="pending",l.loading=!G(),l.value=new Promise((e,t)=>{h=e,p=t})}),e.$destroy$=Mi(()=>{f=!0,c.forEach(e=>e())});const g=ne(()=>se(s,()=>a(d)),e=>{m(!0,e)},e=>{m(!1,e)}),y=u._timeout;return y>0?Promise.race([g,ae(y).then(()=>{m(!1,new Error("timeout"))&&vn(e)})]):g},yn=(e,t,n)=>{e.$flags$&=-17,vn(e);const s=e.$el$,r=Wn(n.$static$.$locale$,s,void 0,be);r.$renderCtx$=n;const{$subsManager$:i}=t,o=e.$qrl$.getFn(r,()=>{i.$clearSub$(e)}),a=[];e.$destroy$=Mi(()=>{a.forEach(e=>e())});const c={track:(t,n)=>{if(ee(t)){const n=Wn();return n.$subscriber$=[0,e],Un(n,t)}const s=Li(t);return s?s.$addSub$([0,e],n):L(z(26),t),n?t[n]:rs(t)?t.value:t},cleanup(e){a.push(e)}};return ne(()=>o(c),e=>{ee(e)&&a.push(e)},e=>{nt(e,s,n)})},_n=(e,t,n)=>{e.$state$,e.$flags$&=-17,vn(e);const s=e.$el$,r=Wn(n.$static$.$locale$,s,void 0,"qComputed");r.$subscriber$=[0,e],r.$renderCtx$=n;const{$subsManager$:i}=t,o=e.$qrl$.getFn(r,()=>{i.$clearSub$(e)}),a=t=>{Vn(()=>{const n=e.$state$;n[Qn]&=-3,n.untrackedValue=t,n[Te].$notifySubs$()})},c=e=>{nt(e,s,n)};try{return se(e.$qrl$.$resolveLazy$(t.$containerEl$),()=>{const e=o();if(te(e)){const t="useComputed$: Async functions in computed tasks are deprecated and will stop working in v2. Use useTask$ or useResource$ instead.",n=new Error(t).stack;if(n){n.replace(/^Error:\s*/,"")}else;return e.then(a,c)}a(e)})}catch(l){c(l)}},vn=e=>{const t=e.$destroy$;if(t){e.$destroy$=void 0;try{t()}catch(n){j(n)}}},$n=(e,t)=>{var n,s;"visible"===t||"intersection-observer"===t?(n="qvisible",s=bn(e),an(on(n,void 0),s)):"load"===t||"document-ready"===t?rn("qinit",bn(e)):"idle"!==t&&"document-idle"!==t||rn("qidle",bn(e))},bn=e=>{const t=e.$qrl$,n=Ji(t.$chunk$,"_hW",Jt,null,null,[e],t.$symbol$);return t.dev&&(n.dev=t.dev),n},wn=e=>X(e)&&e instanceof Sn;let Sn=class{constructor(e,t,n,s,i){r(this,"$flags$"),r(this,"$index$"),r(this,"$el$"),r(this,"$qrl$"),r(this,"$state$"),this.$flags$=e,this.$index$=t,this.$el$=n,this.$qrl$=s,this.$state$=i}};const kn=1,Tn=2,En=4,xn=e=>e[Ie],Cn=(e,t)=>{const n=xn(e);if(n)return n;const s=Rn(e),r=Oe(e,"q:id");if(r){const n=t.$pauseCtx$;if(s.$id$=r,n){const{getObject:o,meta:a,refs:c}=n;if(function(e){return e&&"number"==typeof e.nodeType}(i=e)&&1===i.nodeType){const e=c[r];e&&(s.$refMap$=e.split(" ").map(o),s.li=((e,t)=>{const n=e.$element$.attributes,s=[];for(let r=0;r<n.length;r++){const{name:i,value:o}=n.item(r);if(i.startsWith("on:")||i.startsWith("on-window:")||i.startsWith("on-document:")){const n=o.split("\n");for(const r of n){const n=Hr(r,t);n.$capture$&&Jr(n,e),s.push([i,n])}}}return s})(s,t.$containerEl$))}else{const n=e.getAttribute("q:sstyle");s.$scopeIds$=n?n.split("|"):null;const i=a[r];if(i){const e=i.s,n=i.h,r=i.c,a=i.w;if(e&&(s.$seq$=e.split(" ").map(o)),a&&(s.$tasks$=a.split(" ").map(o)),r){s.$contexts$=new Map;for(const e of r.split(" ")){const[t,n]=e.split("=");s.$contexts$.set(t,o(n))}}if(n){const[e,r]=n.split(" ");if(s.$flags$=En,e&&(s.$componentQrl$=o(e)),r){const e=o(r);s.$props$=e,je(e,2),e[Ee]=In(e)}else s.$props$=Me(De(),t)}}}}}var i;return s},In=e=>{const t={},n=ji(e);for(const s in n)s.startsWith(xe)&&(t[s.slice(2)]=n[s]);return t},Rn=e=>{const t={$flags$:0,$id$:"",$element$:e,$refMap$:[],li:[],$tasks$:null,$seq$:null,$slots$:null,$scopeIds$:null,$appendStyles$:null,$props$:null,$vdom$:null,$componentQrl$:null,$contexts$:null,$dynamicSlots$:null,$parentCtx$:void 0,$realParentCtx$:void 0};return e[Ie]=t,t},On=(e,t)=>{e.$tasks$?.forEach(e=>{t.$clearSub$(e),(e=>{32&e.$flags$?(e.$flags$&=-33,(0,e.$qrl$)()):vn(e)})(e)}),e.$componentQrl$=null,e.$seq$=null,e.$tasks$=null};let An,Pn;function Mn(e,t){const n=An;try{return An=e,t()}finally{An=n}}const Dn=()=>{if(!Pn){const e="undefined"!=typeof document&&document&&document.__q_context__;if(!e)return;return Q(e)?document.__q_context__=zn(e):e}return Pn},jn=()=>{const e=Dn();if(!e)throw W(14);return e},Ln=()=>{const e=Dn();if(!e||e.$event$!==$e)throw W(20);return e.$hostElement$,e.$waitOn$,e.$renderCtx$,e.$subscriber$,e},Nn=()=>Ln().$renderCtx$.$static$.$containerState$;function qn(e){if(null==e)return e;const t=jn();return function(...n){return Fn.call(this,t,e,n)}}function Un(e,t,...n){return Fn.call(this,e,t,n)}function Fn(e,t,n){const s=Pn;let r;try{Pn=e,r=t.apply(this,n)}finally{Pn=s}return r}const Bn=(e,t)=>{const n=e.$waitOn$;if(0===n.length){const e=t();te(e)&&n.push(e)}else n.push(Promise.all(n).then(t))},zn=([e,t,n])=>{const s=e.closest(ve),r=s?.getAttribute("q:locale")||void 0;return r&&function(e){An=e}(r),Wn(r,void 0,e,t,n)},Wn=(e,t,n,s,r)=>({$url$:r,$i$:0,$hostElement$:t,$element$:n,$event$:s,$qrl$:void 0,$waitOn$:void 0,$subscriber$:void 0,$renderCtx$:void 0,$locale$:e||("object"==typeof s&&s&&"locale"in s?s.locale:void 0)}),Hn=e=>e.closest(ve),Vn=e=>Un(void 0,e),Jn=Wn(void 0,void 0,void 0,$e),Kn=(e,t)=>(Jn.$subscriber$=t,Un(Jn,()=>e.value)),Gn=()=>{const e=Dn();if(e)return e.$element$??e.$hostElement$??e.$qrl$?.$setContainer$(void 0)},Yn=e=>{const t=Dn();if(t&&t.$hostElement$&&t.$renderCtx$){const e=t.$hostElement$;Cn(e,t.$renderCtx$.$static$.$containerState$).$flags$|=8}return e},Xn=(e,t,n,s)=>{const r=t.$subsManager$.$createManager$(s);return new ts(e,r,n)},Qn=Symbol("proxy manager"),Zn=Symbol("unassigned signal");class es{}class ts extends(n=es,t=Te,e=Qn,n){constructor(n,s,i){super(),r(this,"untrackedValue"),r(this,t),r(this,e,0),this.untrackedValue=n,this[Te]=s,this[Qn]=i}valueOf(){}toString(){return`[Signal ${String(this.value)}]`}toJSON(){return{value:this.value}}get value(){if(2&this[Qn])throw Zn;const e=Dn()?.$subscriber$;return e&&this[Te].$addSub$(e),this.untrackedValue}set value(e){const t=this[Te],n=this.untrackedValue;t&&n!==e&&(this.untrackedValue=e,t.$notifySubs$())}}class ns extends es{constructor(e,t,n){super(),r(this,"$func$"),r(this,"$args$"),r(this,"$funcStr$"),this.$func$=e,this.$args$=t,this.$funcStr$=n}get value(){return this.$func$.apply(void 0,this.$args$)}}class ss extends es{constructor(e,t){super(),r(this,"ref"),r(this,"prop"),this.ref=e,this.prop=t}get[Te](){return Li(this.ref)}get value(){return this.ref[this.prop]}set value(e){this.ref[this.prop]=e}}const rs=e=>e instanceof es,is=(e,t)=>{if(!X(e))return e[t];if(e instanceof es)return e;const n=ji(e);if(n){const s=n[xe+t];if(s)return s;if(!0!==n[Ee]?.[t])return new ss(e,t)}const s=e[Ee]?.[t];return rs(s)?s:Ee},os=(e,t)=>{const n=is(e,t);return n===Ee?e[t]:n},as=Symbol("ContainerState"),cs=e=>{let t=e[as];return t||(e[as]=t=ls(e,Oe(e,"q:base")??"/")),t},ls=(e,t)=>{const n={};if(e){const t=e.attributes;if(t)for(let e=0;e<t.length;e++){const s=t[e];n[s.name]=s.value}}const s={$containerEl$:e,$elementIndex$:0,$styleMoved$:!1,$proxyMap$:new WeakMap,$opsNext$:new Set,$taskNext$:new Set,$taskStaging$:new Set,$hostsNext$:new Set,$hostsStaging$:new Set,$styleIds$:new Set,$events$:new Set,$serverData$:{containerAttributes:n},$base$:t,$renderPromise$:void 0,$hostsRendering$:void 0,$pauseCtx$:void 0,$subsManager$:null,$inlineFns$:new Map};return s.$subsManager$=Fi(s),s},us=(e,t)=>{if(ee(e))return e(t);if(rs(e))return G()?e.untrackedValue=t:e.value=t;throw W(32,e)},ds=128,hs=e=>R(e)&&e.hasAttribute(_e),ps=e=>e.toString(36),fs=e=>parseInt(e,36),ms="http://www.w3.org/2000/svg",gs=1,ys=2,_s=[],vs=(e,t,n,s)=>{t.$elm$;const r=n.$children$;if(1===r.length&&r[0].$type$===_t)return void(n.$children$=t.$children$);const i=t.$elm$,o=t.$children$===_s;let a=Cs;if(o){"HEAD"===i.nodeName&&(a=Es,s|=ys)}const c=$s(t,a);return c.length>0&&r.length>0?bs(e,i,c,r,s):c.length>0&&0===r.length?Ps(e.$static$,c,0,c.length-1):r.length>0?As(e,i,null,r,0,r.length-1,s):void 0},$s=(e,t)=>{const n=e.$children$,s=e.$elm$;return n===_s?e.$children$=Ss(s,t):n},bs=(e,t,n,s,r)=>{let i,o,a,c=0,l=0,u=n.length-1,d=n[0],h=n[u],p=s.length-1,f=s[0],m=s[p];const g=[],y=e.$static$;for(;c<=u&&l<=p;)if(null==d)d=n[++c];else if(null==h)h=n[--u];else if(null==f)f=s[++l];else if(null==m)m=s[--p];else if(d.$id$===f.$id$)g.push(Rs(e,d,f,r)),d=n[++c],f=s[++l];else if(h.$id$===m.$id$)g.push(Rs(e,h,m,r)),h=n[--u],m=s[--p];else if(d.$key$&&d.$id$===m.$id$)q(d.$elm$),q(h.$elm$),g.push(Rs(e,d,m,r)),cr(y,t,d.$elm$,h.$elm$),d=n[++c],m=s[--p];else if(h.$key$&&h.$id$===f.$id$)q(d.$elm$),q(h.$elm$),g.push(Rs(e,h,f,r)),ar(y,t,h.$elm$,d.$elm$),h=n[--u],f=s[++l];else{if(void 0===i&&(i=Qs(n,c,u)),o=i[f.$key$],void 0===o){const n=js(e,f,r,g);ar(y,t,n,d?.$elm$)}else if(a=n[o],a.$type$!==f.$type$){const n=js(e,f,r,g);se(n,e=>{ar(y,t,e,d?.$elm$)})}else g.push(Rs(e,a,f,r)),n[o]=void 0,q(a.$elm$),ar(y,t,a.$elm$,d.$elm$);f=s[++l]}if(l<=p){const n=null==s[p+1]?null:s[p+1].$elm$;g.push(As(e,t,n,s,l,p,r))}let _=re(g);return c<=u&&(_=se(_,()=>{Ps(y,n,c,u)})),_},ws=(e,t)=>{const n=P(e)?e.close:null,s=[];let r=e.firstChild;for(;(r=xr(r))&&(t(r)&&s.push(r),r=r.nextSibling,r!==n););return s},Ss=(e,t)=>ws(e,t).map(ks),ks=e=>R(e)?xn(e)?.$vdom$??Ts(e):Ts(e),Ts=e=>{if(O(e)){const t=new Et(e.localName,{},null,_s,0,_r(e));return t.$elm$=e,t}if(M(e)){const t=new Et(e.nodeName,le,null,_s,0,null);return t.$text$=e.data,t.$elm$=e,t}},Es=e=>{const t=e.nodeType;return 1===t?e.hasAttribute("q:head"):111===t},xs=e=>"Q:TEMPLATE"===e.nodeName,Cs=e=>{const t=e.nodeType;if(3===t||111===t)return!0;if(1!==t)return!1;const n=e.nodeName;return"Q:TEMPLATE"!==n&&("HEAD"===n?e.hasAttribute("q:head"):"STYLE"!==n||!e.hasAttribute(me))},Is=e=>{const t={};for(const n of e){const e=Ds(n);(t[e]??(t[e]=new Et(Tr,{[fe]:""},null,[],0,e))).$children$.push(n)}return t},Rs=(e,t,n,s)=>{t.$type$,n.$type$,t.$key$,n.$key$,t.$id$,n.$id$;const r=t.$elm$,i=n.$type$,o=e.$static$,a=o.$containerState$,c=e.$cmpCtx$;if(n.$elm$=r,"#text"===i){o.$visited$.push(r);const e=n.$signal$;return e&&(n.$text$=dt(Kn(e,[4,c.$element$,e,r]))),void sr(o,r,"data",n.$text$)}if("#signal"===i)return;const l=n.$props$,u=n.$flags$,d=Cn(r,a);if(i!==Tr){let h=0!==(s&gs);if(h||"svg"!==i||(s|=gs,h=!0),l!==le){1&u||(d.li.length=0);const e=t.$props$;n.$props$=e;for(const t in l){let n=l[t];if("ref"!==t){if(Be(t)){const e=ze(d.li,t,n,a.$containerEl$);Zs(o,r,e);continue}rs(n)&&(n=Kn(n,[1,c.$element$,n,r,t])),"class"===t?n=ot(n,c):"style"===t&&(n=ct(n)),e[t]!==n&&(e[t]=n,zs(o,r,t,n,h))}else void 0!==n&&us(n,r)}}if(2&u)return;h&&"foreignObject"===i&&(s&=-2);if(void 0!==l[ht])return;if("textarea"===i)return;return vs(e,t,n,s)}if(de in l){const t=l.props;Hs(a,d,t);let r=!!(d.$flags$&kn);return r||d.$componentQrl$||d.$element$.hasAttribute(we)||(ut(e,d),d.$componentQrl$=t[de],d.$componentQrl$,r=!0),r?se(kt(e,d,s),()=>Os(e,d,n,s)):Os(e,d,n,s)}if(fe in l)return c.$slots$,void c.$slots$.push(n);if(ht in l)sr(o,r,"innerHTML",l[ht]);else if(!(2&u))return vs(e,t,n,s)},Os=(e,t,n,s)=>{if(2&n.$flags$)return;const r=n.$children$,i=e.$static$,o=Is(r),a=Ls(t);for(const c in a.slots)if(!o[c]){const e=a.slots[c],t=Ss(e,Cs);if(t.length>0){const n=xn(e);n&&n.$vdom$&&(n.$vdom$.$children$=[]),Ps(i,t,0,t.length-1)}}for(const c in a.templates){const e=a.templates[c];e&&!o[c]&&(a.templates[c]=void 0,fr(i,e))}return re(Object.keys(o).map(n=>{const r=o[n],c=Ms(i,a,t,n,e.$static$.$containerState$),l=Tt(c),u=it(e),d=c.$element$;u.$slotCtx$=c,c.$vdom$=r,r.$elm$=d;let h=-2&s;d.isSvg&&(h|=gs);const p=i.$addSlots$.findIndex(e=>e[0]===d);return p>=0&&i.$addSlots$.splice(p,1),vs(u,l,r,h)}))},As=(e,t,n,s,r,i,o)=>{const a=[];for(;r<=i;++r){const i=s[r];q(0,0);const c=js(e,i,o,a);ar(e.$static$,t,c,n)}return ie(a)},Ps=(e,t,n,s)=>{for(;n<=s;++n){const s=t[n];s&&(q(s.$elm$),fr(e,s.$elm$))}},Ms=(e,t,n,s,r)=>{const i=t.slots[s];if(i)return Cn(i,r);const o=t.templates[s];if(o)return Cn(o,r);const a=gr(e.$doc$,s),c=Rn(a);return c.$parentCtx$=n,hr(e,n.$element$,a),t.templates[s]=a,c},Ds=e=>e.$props$[he]??"",js=(e,t,n,s)=>{const r=t.$type$,i=e.$static$.$doc$,o=e.$cmpCtx$;if("#text"===r)return t.$elm$=i.createTextNode(t.$text$);if("#signal"===r){const r=t.$signal$,a=r.value;if(bt(a)){const i=It(a);if(rs(i))throw new Error("NOT IMPLEMENTED: Promise");if(Array.isArray(i))throw new Error("NOT IMPLEMENTED: Array");{const a=js(e,i,n,s);return Kn(r,4&n?[3,a,r,a]:[4,o.$element$,r,a]),t.$elm$=a}}{const e=i.createTextNode(t.$text$);return e.data=t.$text$=dt(a),Kn(r,4&n?[3,e,r,e]:[4,o.$element$,r,e]),t.$elm$=e}}let a,c=!!(n&gs);c||"svg"!==r||(n|=gs,c=!0);const l=r===Tr,u=t.$props$,d=e.$static$,h=d.$containerState$;l?a=wr(i,c):"head"===r?(a=i.head,n|=ys):(a=or(i,r,c),n&=-3),2&t.$flags$&&(n|=4),t.$elm$=a;const p=Rn(a);if(e.$slotCtx$?(p.$parentCtx$=e.$slotCtx$,p.$realParentCtx$=e.$cmpCtx$):p.$parentCtx$=e.$cmpCtx$,l){if(de in u){const r=u[de],i=De(),o=h.$subsManager$.$createManager$(),c=new Proxy(i,new Le(h,o)),l=u.props;if(h.$proxyMap$.set(i,c),p.$props$=c,l!==le){const e=i[Ee]=l[Ee]??le;for(const t in l)if("children"!==t&&t!==he){const n=e[t];rs(n)?i[xe+t]=n:i[t]=l[t]}}ut(e,p),p.$componentQrl$=r;const f=se(kt(e,p,n),()=>{let s=t.$children$;if(0===s.length)return;1===s.length&&s[0].$type$===_t&&(s=s[0].$children$);const r=Ls(p),i=[],o=Is(s);for(const t in o){const s=o[t],a=Ms(d,r,p,t,d.$containerState$),c=it(e),l=a.$element$;c.$slotCtx$=a,a.$vdom$=s,s.$elm$=l;let u=-2&n;l.isSvg&&(u|=gs);for(const e of s.$children$){const t=js(c,e,u,i);q(e.$elm$),U(0,e.$elm$),lr(d,l,t)}}return ie(i)});return te(f)&&s.push(f),a}if(fe in u)o.$slots$,vr(a,t.$key$),Re(a,pe,o.$id$),Re(a,fe,""),o.$slots$.push(t),d.$addSlots$.push([a,o.$element$]);else if(ht in u)return sr(d,a,"innerHTML",u[ht]),a}else{if(t.$immutableProps$){const e=u!==le?Object.fromEntries(Object.entries(t.$immutableProps$).map(([e,t])=>[e,t===Ee?u[e]:t])):t.$immutableProps$;Ws(d,p,o,e,c,!0)}if(u!==le){p.$vdom$=t;const e=t.$immutableProps$?Object.fromEntries(Object.entries(u).filter(([e])=>!(e in t.$immutableProps$))):u;t.$props$=Ws(d,p,o,e,c,!1)}if(c&&"foreignObject"===r&&(c=!1,n&=-2),o){const e=o.$scopeIds$;e&&e.forEach(e=>{a.classList.add(e)}),o.$flags$&Tn&&(p.li.push(...o.li),o.$flags$&=-3)}for(const e of p.li)Zs(d,a,e[0]);if(void 0!==u[ht])return a;c&&"foreignObject"===r&&(c=!1,n&=-2)}let f=t.$children$;if(0===f.length)return a;1===f.length&&f[0].$type$===_t&&(f=f[0].$children$);const m=f.map(t=>js(e,t,n,s));for(const g of m)Gs(a,g);return a},Ls=e=>{const t=(e=>{const t=e.$slots$;return t||(e.$element$.parentElement,e.$slots$=Ns(e))})(e),n={},s={},r=Array.from(e.$element$.childNodes).filter(xs);for(const i of t)B(i.$elm$),n[i.$key$??""]=i.$elm$;for(const i of r)s[Oe(i,he)??""]=i;return{slots:n,templates:s}},Ns=e=>{const t=e.$element$.parentElement;return Sr(t,pe,e.$id$).map(Ts)},qs=(e,t,n)=>(t.namespaceURI===ms?tr(e,t,"class",n):sr(e,t,"className",n),!0),Us=(e,t,n,s)=>s in t&&((t[s]!==n||"value"===s&&!t.hasAttribute(s))&&("value"===s&&"OPTION"!==t.tagName?rr(e,t,s,n):sr(e,t,s,n)),!0),Fs=(e,t,n,s)=>(tr(e,t,s.toLowerCase(),n),!0),Bs={style:(e,t,n)=>(sr(e,t.style,"cssText",n),!0),class:qs,className:qs,value:Us,checked:Us,href:Fs,list:Fs,form:Fs,tabIndex:Fs,download:Fs,innerHTML:()=>!0,[ht]:(e,t,n)=>(sr(e,t,"innerHTML",n),!0)},zs=(e,t,n,s,r)=>{if(function(e){return e.startsWith("aria-")}(n))return void tr(e,t,n,null!=s?String(s):s);const i=Bs[n];i&&i(e,t,s,n)||(r||!(n in t)?(n.startsWith(Fe)&&er(n.slice(15)),tr(e,t,n,s)):sr(e,t,n,s))},Ws=(e,t,n,s,r,i)=>{const o={},a=t.$element$;for(const c in s){let l=s[c];if("ref"!==c)if(Be(c))ze(t.li,c,l,e.$containerState$.$containerEl$);else{if(rs(l)&&(q(),l=Kn(l,i?[1,a,l,n.$element$,c]:[2,n.$element$,l,a,c])),"class"===c){if(l=ot(l,n),!l)continue}else"style"===c&&(l=ct(l));o[c]=l,zs(e,a,c,l,r)}else void 0!==l&&us(l,a)}return o},Hs=(e,t,n)=>{let s=t.$props$;if(s||(t.$props$=s=Me(De(),e)),n===le)return;const r=Li(s),i=ji(s),o=i[Ee]=n[Ee]??le;for(const a in n)if("children"!==a&&a!==he&&!o[a]){const e=n[a];i[a]!==e&&(i[a]=e,r.$notifySubs$(a))}},Vs=(e,t,n,s)=>{if(n.$clearSub$(e),O(e)){if(s&&e.hasAttribute(fe))return void t.$rmSlots$.push(e);const r=xn(e);r&&On(r,n);const i=P(e)?e.close:null;let o=e.firstChild;for(;(o=xr(o))&&(Vs(o,t,n,!0),o=o.nextSibling,o!==i););}},Js=()=>{document.__q_scroll_restore__&&(document.__q_scroll_restore__(),document.__q_scroll_restore__=void 0)},Ks=async e=>{if(document.__q_view_transition__&&(document.__q_view_transition__=void 0,document.startViewTransition)){const t=document.startViewTransition(()=>{yr(e),Js()}),n=new CustomEvent("qviewTransition",{detail:t});return document.dispatchEvent(n),void(await t.finished)}yr(e),Js()},Gs=(e,t)=>{P(t)?t.appendTo(e):e.appendChild(t)},Ys=(e,t,n)=>{P(t)?t.insertBeforeTo(e,n?.nextSibling??null):e.insertBefore(t,n?.nextSibling??null)},Xs=(e,t,n)=>{P(t)?t.insertBeforeTo(e,Ir(n)):e.insertBefore(t,Ir(n))},Qs=(e,t,n)=>{const s={};for(let r=t;r<=n;++r){const t=e[r].$key$;null!=t&&(s[t]=r)}return s},Zs=(e,t,n)=>{n.startsWith("on:")||tr(e,t,n,""),er(n)},er=e=>{{const n=(e=>{const t=e.indexOf(":");return e?e.slice(t+1).replace(/-./g,e=>e[1].toUpperCase()):e})(e);try{(globalThis.qwikevents||(globalThis.qwikevents=[])).push(n)}catch(t){}}},tr=(e,t,n,s)=>{e.$operations$.push({$operation$:nr,$args$:[t,n,s]})},nr=(e,t,n)=>{if(null==n||!1===n)e.removeAttribute(t);else{const s=!0===n?"":String(n);Re(e,t,s)}},sr=(e,t,n,s)=>{e.$operations$.push({$operation$:ir,$args$:[t,n,s]})},rr=(e,t,n,s)=>{e.$postOperations$.push({$operation$:ir,$args$:[t,n,s]})},ir=(e,t,n)=>{try{e[t]=null==n?"":n,null==n&&I(e)&&R(e)&&e.removeAttribute(t)}catch(s){j(z(6),t,{node:e,value:n},s)}},or=(e,t,n)=>n?e.createElementNS(ms,t):e.createElement(t),ar=(e,t,n,s)=>(e.$operations$.push({$operation$:Xs,$args$:[t,n,s||null]}),n),cr=(e,t,n,s)=>(e.$operations$.push({$operation$:Ys,$args$:[t,n,s||null]}),n),lr=(e,t,n)=>(e.$operations$.push({$operation$:Gs,$args$:[t,n]}),n),ur=(e,t)=>{e.$containerState$.$styleIds$.add(t.styleId),e.$postOperations$.push({$operation$:dr,$args$:[e.$containerState$,t]})},dr=(e,t)=>{const n=e.$containerEl$,s=ue(n),r=s.documentElement===n,i=s.head,o=s.createElement("style");Re(o,me,t.styleId),Re(o,"hidden",""),o.textContent=t.content,r&&i?Gs(i,o):Xs(n,o,n.firstChild)},hr=(e,t,n)=>{e.$operations$.push({$operation$:pr,$args$:[t,n]})},pr=(e,t)=>{Xs(e,t,e.firstChild)},fr=(e,t)=>{if(O(t)){const n=e.$containerState$.$subsManager$;Vs(t,e,n,!0)}e.$operations$.push({$operation$:mr,$args$:[t,e]})},mr=(e,t)=>{const n=e.parentElement;n&&((e,t)=>{P(t)?t.remove():e.removeChild(t)})(n,e)},gr=(e,t)=>{const n=or(e,"q:template",!1);return Re(n,he,t),Re(n,"hidden",""),Re(n,"aria-hidden","true"),n},yr=e=>{for(const t of e.$operations$)t.$operation$.apply(void 0,t.$args$);$r(e)},_r=e=>Oe(e,"q:key"),vr=(e,t)=>{null!==t&&Re(e,"q:key",t)},$r=e=>{const t=e.$containerState$.$subsManager$;for(const n of e.$rmSlots$){const s=_r(n);q();const r=ws(n,Cs);if(r.length>0){const i=n.getAttribute(pe),o=e.$roots$.find(e=>e.$id$===i);if(o){const i=o.$element$;if(i.isConnected){if(ws(i,xs).some(e=>Oe(e,he)===s))Vs(n,e,t,!1);else{const t=gr(e.$doc$,s);for(const e of r)Gs(t,e);Xs(i,t,i.firstChild)}}else Vs(n,e,t,!1)}else Vs(n,e,t,!1)}}for(const[n,s]of e.$addSlots$){const e=_r(n);q();const t=ws(s,xs).find(t=>t.getAttribute(he)===e);t&&(ws(t,Cs).forEach(e=>{Gs(n,e)}),t.remove())}},br=e=>{},wr=(e,t)=>{const n=e.createComment("qv "),s=e.createComment("/qv");return new Er(n,s,t)},Sr=(e,t,n)=>{const s=((e,t,n)=>e.ownerDocument.createTreeWalker(e,128,{acceptNode(e){const s=Cr(e);return s&&Oe(s,t)===n?1:2}}))(e,t,n),r=[];let i=null;for(;i=s.nextNode();)r.push(Cr(i));return r},kr=e=>e.replace(/\+/g," "),Tr=":virtual";class Er{constructor(e,t,n){r(this,"open"),r(this,"close"),r(this,"isSvg"),r(this,"ownerDocument"),r(this,"_qc_",null),r(this,"nodeType",111),r(this,"localName",Tr),r(this,"nodeName",Tr),r(this,"$attributes$"),r(this,"$template$"),this.open=e,this.close=t,this.isSvg=n;const s=this.ownerDocument=e.ownerDocument;this.$template$=or(s,"template",!1),this.$attributes$=(e=>{if(!e)return{};const t=e.split(" ");return Object.fromEntries(t.map(e=>{const t=e.indexOf("=");return t>=0?[e.slice(0,t),kr(e.slice(t+1))]:[e,""]}))})(e.data.slice(3)),e.data.startsWith("qv "),e[Ce]=this,t[Ce]=this}insertBefore(e,t){const n=this.parentElement;if(n){const s=t||this.close;n.insertBefore(e,s)}else this.$template$.insertBefore(e,t);return e}remove(){const e=this.parentElement;if(e){const t=this.childNodes;this.$template$.childElementCount,e.removeChild(this.open);for(let e=0;e<t.length;e++)this.$template$.appendChild(t[e]);e.removeChild(this.close)}}appendChild(e){return this.insertBefore(e,null)}insertBeforeTo(e,t){const n=this.childNodes;e.insertBefore(this.open,t);for(const s of n)e.insertBefore(s,t);e.insertBefore(this.close,t),this.$template$.childElementCount}appendTo(e){this.insertBeforeTo(e,null)}get namespaceURI(){return this.parentElement?.namespaceURI??""}removeChild(e){this.parentElement?this.parentElement.removeChild(e):this.$template$.removeChild(e)}getAttribute(e){return this.$attributes$[e]??null}hasAttribute(e){return e in this.$attributes$}setAttribute(e,t){this.$attributes$[e]=t}removeAttribute(e){delete this.$attributes$[e]}matches(e){return!1}compareDocumentPosition(e){return this.open.compareDocumentPosition(e)}closest(e){const t=this.parentElement;return t?t.closest(e):null}querySelectorAll(e){const t=[];return ws(this,A).forEach(n=>{O(n)&&(n.matches(e)&&t.push(n),t.concat(Array.from(n.querySelectorAll(e))))}),t}querySelector(e){for(const t of this.childNodes)if(R(t)){if(t.matches(e))return t;const n=t.querySelector(e);if(null!==n)return n}return null}get innerHTML(){return""}set innerHTML(e){const t=this.parentElement;t?(this.childNodes.forEach(e=>this.removeChild(e)),this.$template$.innerHTML=e,t.insertBefore(this.$template$.content,this.close)):this.$template$.innerHTML=e}get firstChild(){if(this.parentElement){const e=this.open.nextSibling;return e===this.close?null:e}return this.$template$.firstChild}get nextSibling(){return this.close.nextSibling}get previousSibling(){return this.open.previousSibling}get childNodes(){if(!this.parentElement)return Array.from(this.$template$.childNodes);const e=[];let t=this.open;for(;(t=t.nextSibling)&&t!==this.close;)e.push(t);return e}get isConnected(){return this.open.isConnected}get parentElement(){return this.open.parentElement}}const xr=e=>{if(null==e)return null;if(D(e)){const t=Cr(e);if(t)return t}return e},Cr=e=>{const t=e[Ce];if(t)return t;if(e.data.startsWith("qv ")){const t=(e=>{let t=e,n=1;for(;t=t.nextSibling;)if(D(t)){const e=t[Ce];if(e)t=e;else if(t.data.startsWith("qv "))n++;else if("/qv"===t.data&&(n--,0===n))return t}})(e);return new Er(e,t,e.parentElement?.namespaceURI===ms)}return null},Ir=e=>null==e?null:P(e)?e.open:e,Rr=async(e,t)=>{const n=ls(null,null),s=Ar(n);let r;for(qr(e,s,!1);(r=s.$promises$).length>0;){s.$promises$=[];const e=await Promise.allSettled(r);for(const t of e)t.status}const i=Array.from(s.$objSet$.keys());let o=0;const a=new Map;for(const u of i)a.set(u,ps(o)),o++;if(s.$noSerialize$.length>0){const e=a.get(void 0);for(const t of s.$noSerialize$)a.set(t,e)}const c=e=>{let t="";if(te(e)){const n=Nr(e);if(!n)throw W(27,e);e=n.value,n.resolved?t+="~":t+="_"}if(X(e)){const n=ji(e);n&&(t+="!",e=n)}const n=a.get(e);if(void 0===n)throw W(27,e);return n+t},l=function(e,t,n,s,r){return e.map(e=>{if(null===e)return null;const n=typeof e;switch(n){case"undefined":return Qr;case"number":if(!Number.isFinite(e))break;return e;case"string":if(e.charCodeAt(0)<32)break;return e;case"boolean":return e}const i=Ti(e,t,s,r);if(void 0!==i)return i;if("object"===n){if(Q(e))return e.map(t);if(Y(e)){const n={};for(const s in e)n[s]=t(e[s]);return n}}throw W(3,e)})}(i,c,0,s,n);return JSON.stringify({_entry:c(e),_objs:l})},Or=(e,t,n)=>{let s="";for(const r of e){const e=t(r);null!==e&&(""!==s&&(s+=n),s+=e)}return s},Ar=e=>{const t=[];return e.$inlineFns$.forEach((e,n)=>{for(;t.length<=e;)t.push("");t[e]=n}),{$containerState$:e,$seen$:new Set,$objSet$:new Set,$prefetch$:0,$noSerialize$:[],$inlinedFunctions$:t,$resources$:[],$elements$:[],$qrls$:[],$deferElements$:[],$promises$:[]}},Pr=(e,t)=>{const n=xn(e);t.$elements$.includes(n)||(t.$elements$.push(n),8&n.$flags$?(t.$prefetch$++,Mr(n,t,!0),t.$prefetch$--):t.$deferElements$.push(n))},Mr=(e,t,n)=>{if(e.$props$&&!Ur(e.$props$)&&(qr(e.$props$,t,n),jr(Li(e.$props$),t,n)),e.$componentQrl$&&qr(e.$componentQrl$,t,n),e.$seq$)for(const s of e.$seq$)qr(s,t,n);if(e.$tasks$){const s=t.$containerState$.$subsManager$.$groupToManagers$;for(const r of e.$tasks$)s.has(r)&&qr(r,t,n)}if(Dr(e,t),e.$dynamicSlots$)for(const s of e.$dynamicSlots$)Dr(s,t)},Dr=(e,t)=>{for(;e;){if(e.$contexts$)for(const n of e.$contexts$.values())qr(n,t,!0);e=e.$parentCtx$}},jr=(e,t,n)=>{if(t.$seen$.has(e))return;t.$seen$.add(e);const s=e.$subs$;for(const r of s){if(r[0]>0&&qr(r[2],t,n),!0===n){const e=r[1];I(e)&&P(e)?0===r[0]&&Pr(e,t):qr(e,t,!0)}}},Lr=Symbol(),Nr=e=>e[Lr],qr=(e,t,n)=>{if(null!=e){const r=typeof e;switch(r){case"function":case"object":{if(t.$seen$.has(e))return;if(t.$seen$.add(e),Ai(e))return t.$objSet$.add(void 0),void t.$noSerialize$.push(e);const i=e,o=ji(e);if(o){const s=!(2&Ni(e=o));if(n&&s&&jr(Li(i),t,n),Pi(i))return void t.$objSet$.add(e)}if(ki(e,t,n))return void t.$objSet$.add(e);if(te(e))return void t.$promises$.push((s=e,s.then(e=>{const t={resolved:!0,value:e};return s[Lr]=t,e},e=>{const t={resolved:!1,value:e};return s[Lr]=t,e})).then(e=>{qr(e,t,n)}));if("object"===r){if(I(e))return;if(Q(e))for(let s=0;s<e.length;s++)qr(i[s],t,n);else if(Y(e))for(const s in e)qr(i[s],t,n)}break}}}var s;t.$objSet$.add(e)},Ur=e=>0===Object.keys(e).length;const Fr=new Set,Br=(e,t,n=ce,s=0)=>{let r=null,i=null;if(ee(e))i=e;else{if(!Z(e))throw W(12,e);r=e}return Fr.has(t)||Fr.add(t),Ji(r,t,null,i,null,n,null)},zr=(e,t=ce)=>Ji(null,e,null,null,null,t,null),Wr=(e,t={})=>{let n=e.$symbol$,s=e.$chunk$;const r=e.$refSymbol$??n,i=K();if(i){const t=i.chunkForSymbol(r,s,e.dev?.file);t&&(s=t[1],e.$refSymbol$||(n=t[0]))}if(C&&null==s&&(s="/runtimeQRL",n="_"),null==s)throw W(31,e.$symbol$);if(s.startsWith("./")&&(s=s.slice(2)),Vi(e))if(t.$containerState$){const s=e.resolved,r=t.$containerState$,i=s.serialized||s.toString();let o=r.$inlineFns$.get(i);void 0===o&&(o=r.$inlineFns$.size,r.$inlineFns$.set(i,o)),n=String(o)}else((e,...t)=>{throw N(!1,e,...t)})("Sync QRL without containerState");let o=`${s}#${n}`;const a=e.$capture$,c=e.$captureRef$;return c&&c.length?t.$getObjId$?o+=`[${Or(c,t.$getObjId$," ")}]`:t.$addRefMap$&&(o+=`[${Or(c,t.$addRefMap$," ")}]`):a&&a.length>0&&(o+=`[${a.join(" ")}]`),o},Hr=(e,t)=>{const n=e.length,s=Vr(e,0,"#"),r=Vr(e,s,"["),i=Math.min(s,r),o=e.substring(0,i),a=s==n?s:s+1,c=r,l=a==c?"default":e.substring(a,c),u=r,d=n,h=u===d?ce:e.substring(u+1,d-1).split(" "),p=Ji(o,l,null,null,h,null,null);return t&&p.$setContainer$(t),p},Vr=(e,t,n)=>{const s=e.length,r=e.indexOf(n,t==s?0:t);return-1==r?s:r},Jr=(e,t)=>(e.$capture$,e.$captureRef$=e.$capture$.map(e=>{const n=parseInt(e,10),s=t.$refMap$[n];return t.$refMap$.length,s})),Kr=e=>{const t=!G(),n=e.value;let s;if(Gr(n)){if(t){if(e.onRejected&&(n.value.catch(()=>{}),"rejected"===n._state))return e.onRejected(n._error);if(e.onPending){const t=n._state;if("resolved"===t)return e.onResolved(n._resolved);if("pending"===t)return e.onPending();if("rejected"===t)throw n._error}if(void 0!==Vn(()=>n._resolved))return e.onResolved(n._resolved)}s=n.value}else if(te(n))s=n;else{if(!rs(n))return e.onResolved(n);s=Promise.resolve(n.value)}return yt(wt,{children:s.then(qn(e.onResolved),qn(e.onRejected))})},Gr=e=>X(e)&&"resource"===e.__brand,Yr=e=>{const[t,n]=e.split(" "),s=(r=void 0,{__brand:"resource",value:void 0,loading:!G(),_resolved:void 0,_error:void 0,_state:"pending",_timeout:r?.timeout??-1,_cache:0});var r;return s.value=Promise.resolve(),"0"===t?(s._state="resolved",s._resolved=n,s.loading=!1):"1"===t?(s._state="pending",s.value=new Promise(()=>{}),s.loading=!0):"2"===t&&(s._state="rejected",s._error=n,s.loading=!1),s},Xr=e=>gt($t,{[fe]:""},0,e.name??""),Qr="";function Zr(e){return{$prefixCode$:e.$prefix$.charCodeAt(0),$prefixChar$:e.$prefix$,$test$:e.$test$,$serialize$:e.$serialize$,$prepare$:e.$prepare$,$fill$:e.$fill$,$collect$:e.$collect$,$subs$:e.$subs$}}const ei=Zr({$prefix$:"",$test$:e=>Wi(e),$collect$:(e,t,n)=>{if(e.$captureRef$)for(const s of e.$captureRef$)qr(s,t,n);0===t.$prefetch$&&t.$qrls$.push(e)},$serialize$:(e,t)=>Wr(e,{$getObjId$:t}),$prepare$:(e,t)=>Hr(e,t.$containerEl$),$fill$:(e,t)=>{e.$capture$&&e.$capture$.length>0&&(e.$captureRef$=e.$capture$.map(t),e.$capture$=null)}}),ti=Zr({$prefix$:"",$test$:e=>wn(e),$collect$:(e,t,n)=>{qr(e.$qrl$,t,n),e.$state$&&(qr(e.$state$,t,n),!0===n&&e.$state$ instanceof ts&&jr(e.$state$[Te],t,!0))},$serialize$:(e,t)=>((e,t)=>{let n=`${ps(e.$flags$)} ${ps(e.$index$)} ${t(e.$qrl$)} ${t(e.$el$)}`;return e.$state$&&(n+=` ${t(e.$state$)}`),n})(e,t),$prepare$:e=>(e=>{const[t,n,s,r,i]=e.split(" ");return new Sn(fs(t),fs(n),r,s,i)})(e),$fill$:(e,t)=>{e.$el$=t(e.$el$),e.$qrl$=t(e.$qrl$),e.$state$&&(e.$state$=t(e.$state$))}}),ni=Zr({$prefix$:"",$test$:e=>Gr(e),$collect$:(e,t,n)=>{qr(e.value,t,n),qr(e._resolved,t,n)},$serialize$:(e,t)=>((e,t)=>{const n=e._state;return"resolved"===n?`0 ${t(e._resolved)}`:"pending"===n?"1":`2 ${t(e._error)}`})(e,t),$prepare$:e=>Yr(e),$fill$:(e,t)=>{if("resolved"===e._state)e._resolved=t(e._resolved),e.value=Promise.resolve(e._resolved);else if("rejected"===e._state){const n=Promise.reject(e._error);n.catch(()=>null),e._error=t(e._error),e.value=n}}}),si=Zr({$prefix$:"",$test$:e=>e instanceof URL,$serialize$:e=>e.href,$prepare$:e=>new URL(e)}),ri=Zr({$prefix$:"",$test$:e=>e instanceof Date,$serialize$:e=>e.toISOString(),$prepare$:e=>new Date(e)}),ii=Zr({$prefix$:"",$test$:e=>e instanceof RegExp,$serialize$:e=>`${e.flags} ${e.source}`,$prepare$:e=>{const t=e.indexOf(" "),n=e.slice(t+1),s=e.slice(0,t);return new RegExp(n,s)}}),oi=Zr({$prefix$:"",$test$:e=>e instanceof Error,$serialize$:e=>e.message,$prepare$:e=>{const t=new Error(e);return t.stack=void 0,t}}),ai=Zr({$prefix$:"",$test$:e=>!!e&&"object"==typeof e&&9===e.nodeType,$prepare$:(e,t,n)=>n}),ci=Symbol("serializable-data"),li=Zr({$prefix$:"",$test$:e=>so(e),$serialize$:(e,t)=>{const[n]=e[ci];return Wr(n,{$getObjId$:t})},$prepare$:(e,t)=>{const n=Hr(e,t.$containerEl$);return no(n)},$fill$:(e,t)=>{const[n]=e[ci];n.$capture$?.length&&(n.$captureRef$=n.$capture$.map(t),n.$capture$=null)}}),ui=Zr({$prefix$:"",$test$:e=>e instanceof ns,$collect$:(e,t,n)=>{if(e.$args$)for(const s of e.$args$)qr(s,t,n)},$serialize$:(e,t,n)=>{const s=(e=>{let t="";for(let n=0;n<e.$args$.length;n++)t+=`p${n},`;return`(${t})=>(null)`})(e);let r=n.$inlinedFunctions$.indexOf(s);return r<0&&(r=n.$inlinedFunctions$.length,n.$inlinedFunctions$.push(s)),Or(e.$args$,t," ")+" @"+ps(r)},$prepare$:e=>{const t=e.split(" "),n=t.slice(0,-1),s=t[t.length-1];return new ns(s,n,s)},$fill$:(e,t)=>{e.$func$,e.$func$=t(e.$func$),e.$args$=e.$args$.map(t)}}),di=Zr({$prefix$:"",$test$:e=>e instanceof ts,$collect$:(e,t,n)=>{qr(e.untrackedValue,t,n);const s=!(1&e[Qn]);return!0===n&&s&&jr(e[Te],t,!0),e},$serialize$:(e,t)=>t(e.untrackedValue),$prepare$:(e,t)=>new ts(e,t?.$subsManager$?.$createManager$(),0),$subs$:(e,t)=>{e[Te].$addSubs$(t)},$fill$:(e,t)=>{e.untrackedValue=t(e.untrackedValue)}}),hi=Zr({$prefix$:"",$test$:e=>e instanceof ss,$collect$(e,t,n){if(qr(e.ref,t,n),Pi(e.ref)){const s=Li(e.ref);Ci(t.$containerState$.$subsManager$,s,n)&&qr(e.ref[e.prop],t,n)}return e},$serialize$:(e,t)=>`${t(e.ref)} ${e.prop}`,$prepare$:e=>{const[t,n]=e.split(" ");return new ss(t,n)},$fill$:(e,t)=>{e.ref=t(e.ref)}}),pi=Zr({$prefix$:"",$test$:e=>"number"==typeof e,$serialize$:e=>String(e),$prepare$:e=>Number(e)}),fi=Zr({$prefix$:"",$test$:e=>e instanceof URLSearchParams,$serialize$:e=>e.toString(),$prepare$:e=>new URLSearchParams(e)}),mi=Zr({$prefix$:"",$test$:e=>"undefined"!=typeof FormData&&e instanceof globalThis.FormData,$serialize$:e=>{const t=[];return e.forEach((e,n)=>{"string"==typeof e?t.push([n,e]):t.push([n,e.name])}),JSON.stringify(t)},$prepare$:e=>{const t=JSON.parse(e),n=new FormData;for(const[s,r]of t)n.append(s,r);return n}}),gi=Zr({$prefix$:"",$test$:e=>bt(e),$collect$:(e,t,n)=>{qr(e.children,t,n),qr(e.props,t,n),qr(e.immutableProps,t,n),qr(e.key,t,n);let s=e.type;s===Xr?s=":slot":s===wt&&(s=":fragment"),qr(s,t,n)},$serialize$:(e,t)=>{let n=e.type;return n===Xr?n=":slot":n===wt&&(n=":fragment"),`${t(n)} ${t(e.props)} ${t(e.immutableProps)} ${t(e.key)} ${t(e.children)} ${e.flags}`},$prepare$:e=>{const[t,n,s,r,i,o]=e.split(" ");return new vt(t,n,s,i,parseInt(o,10),r)},$fill$:(e,t)=>{e.type=Ii(t(e.type)),e.props=t(e.props),e.immutableProps=t(e.immutableProps),e.key=t(e.key),e.children=t(e.children)}}),yi=Zr({$prefix$:"",$test$:e=>"bigint"==typeof e,$serialize$:e=>e.toString(),$prepare$:e=>BigInt(e)}),_i=Zr({$prefix$:"",$test$:e=>e instanceof Uint8Array,$serialize$:e=>{let t="";for(const n of e)t+=String.fromCharCode(n);return btoa(t).replace(/=+$/,"")},$prepare$:e=>{const t=atob(e),n=new Uint8Array(t.length);let s=0;for(const r of t)n[s++]=r.charCodeAt(0);return n},$fill$:void 0}),vi=Symbol(),$i=[ei,ti,ni,si,ri,ii,oi,ai,li,ui,di,hi,pi,fi,mi,gi,yi,Zr({$prefix$:"",$test$:e=>e instanceof Set,$collect$:(e,t,n)=>{e.forEach(e=>qr(e,t,n))},$serialize$:(e,t)=>Array.from(e).map(t).join(" "),$prepare$:e=>{const t=new Set;return t[vi]=e,t},$fill$:(e,t)=>{const n=e[vi];e[vi]=void 0;const s=0===n.length?[]:n.split(" ");for(const r of s)e.add(t(r))}}),Zr({$prefix$:"",$test$:e=>e instanceof Map,$collect$:(e,t,n)=>{e.forEach((e,s)=>{qr(e,t,n),qr(s,t,n)})},$serialize$:(e,t)=>{const n=[];return e.forEach((e,s)=>{n.push(t(s)+" "+t(e))}),n.join(" ")},$prepare$:e=>{const t=new Map;return t[vi]=e,t},$fill$:(e,t)=>{const n=e[vi];e[vi]=void 0;const s=0===n.length?[]:n.split(" ");s.length;for(let r=0;r<s.length;r+=2)e.set(t(s[r]),t(s[r+1]))}}),Zr({$prefix$:"",$test$:e=>!!wi(e)||e===Qr,$serialize$:e=>e,$prepare$:e=>e}),_i],bi=(()=>{const e=[];return $i.forEach(t=>{const n=t.$prefixCode$;for(;e.length<n;)e.push(void 0);e.push(t)}),e})();function wi(e){if("string"==typeof e){const t=e.charCodeAt(0);if(t<bi.length)return bi[t]}}const Si=$i.filter(e=>e.$collect$),ki=(e,t,n)=>{for(const s of Si)if(s.$test$(e))return s.$collect$(e,t,n),!0;return!1},Ti=(e,t,n,s)=>{for(const r of $i)if(r.$test$(e)){let i=r.$prefixChar$;return r.$serialize$&&(i+=r.$serialize$(e,t,n,s)),i}if("string"==typeof e)return e},Ei=(e,t)=>{const n=new Map,s=new Map;return{prepare(r){const i=wi(r);if(i){const o=i.$prepare$(r.slice(1),e,t);return i.$fill$&&n.set(o,i),i.$subs$&&s.set(o,i),o}return r},subs(t,n){const r=s.get(t);return!!r&&(r.$subs$(t,n,e),!0)},fill(t,s){const r=n.get(t);return!!r&&(r.$fill$(t,s,e),!0)}}},xi={"!":(e,t)=>t.$proxyMap$.get(e)??Pe(e,t),"~":e=>Promise.resolve(e),_:e=>Promise.reject(e)},Ci=(e,t,n)=>{if("boolean"==typeof n)return n;const s=e.$groupToManagers$.get(n);return!!(s&&s.length>0)&&(1!==s.length||s[0]!==t)},Ii=e=>":slot"===e?Xr:":fragment"===e?wt:e,Ri=new WeakSet,Oi=new WeakSet,Ai=e=>Ri.has(e),Pi=e=>Oi.has(e),Mi=e=>(null!=e&&Ri.add(e),e),Di=e=>X(e)?ji(e)??e:e,ji=e=>e[Se],Li=e=>e[Te],Ni=e=>e[ke],qi=(e,t)=>{const n=e.split(" "),s=parseInt(n[0],10);n.length;const r=t(n[1]);if(!r)return;if(wn(r)&&!r.$el$)return;const i=[s,r];return 0===s?(n.length,i.push(Ui(n[2]))):s<=2?(5===n.length||n.length,i.push(t(n[2]),t(n[3]),n[4],Ui(n[5]))):s<=4&&(4===n.length||n.length,i.push(t(n[2]),t(n[3]),Ui(n[4]))),i},Ui=e=>{if(void 0!==e)return decodeURI(e)},Fi=e=>{const t=new Map;return{$groupToManagers$:t,$createManager$:n=>new Bi(t,e,n),$clearSub$:e=>{const n=t.get(e);if(n){for(const t of n)t.$unsubGroup$(e);t.delete(e),n.length=0}},$clearSignal$:e=>{const n=t.get(e[1]);if(n)for(const t of n)t.$unsubEntry$(e)}}};class Bi{constructor(e,t,n){r(this,"$groupToManagers$"),r(this,"$containerState$"),r(this,"$subs$"),this.$groupToManagers$=e,this.$containerState$=t,this.$subs$=[],n&&this.$addSubs$(n)}$addSubs$(e){this.$subs$.push(...e);for(const t of this.$subs$)this.$addToGroup$(t[1],this)}$addToGroup$(e,t){let n=this.$groupToManagers$.get(e);n||this.$groupToManagers$.set(e,n=[]),n.includes(t)||n.push(t)}$unsubGroup$(e){const t=this.$subs$;for(let n=0;n<t.length;n++){t[n][1]===e&&(t.splice(n,1),n--)}}$unsubEntry$(e){const[t,n,s,r]=e,i=this.$subs$;if(1===t||2===t){const o=e[4];for(let e=0;e<i.length;e++){const a=i[e];a[0]===t&&a[1]===n&&a[2]===s&&a[3]===r&&a[4]===o&&(i.splice(e,1),e--)}}else if(3===t||4===t)for(let o=0;o<i.length;o++){const e=i[o];e[0]===t&&e[1]===n&&e[2]===s&&e[3]===r&&(i.splice(o,1),o--)}}$addSub$(e,t){const n=this.$subs$,s=e[1];0===e[0]&&n.some(([e,n,r])=>0===e&&n===s&&r===t)||(n.push(zi=[...e,t]),this.$addToGroup$(s,this))}$notifySubs$(e){const t=this.$subs$;for(const n of t){const t=n[n.length-1];e&&t&&t!==e||Bt(n,this.$containerState$)}}}let zi;const Wi=e=>"function"==typeof e&&"function"==typeof e.getSymbol,Hi="<sync>",Vi=e=>Wi(e)&&e.$symbol$==Hi,Ji=(e,t,n,s,r,i,o)=>{let a;const c=async function(...e){const t=p.call(this,Dn());return await t(...e)},l=e=>(a||(a=e),a),u=e=>"function"!=typeof e||!r?.length&&!i?.length?e:function(...t){let n=Dn();if(n){const s=n.$qrl$;n.$qrl$=c;const r=n.$event$;void 0===n.$event$&&(n.$event$=this);try{return e.apply(this,t)}finally{n.$qrl$=s,n.$event$=r}}return n=Wn(),n.$qrl$=c,n.$event$=this,Un.call(this,n,e,...t)},d=async r=>{if(null!==n)return n;if(r&&l(r),""===e){const e=a.getAttribute(ge),s=a.ownerDocument,r=ye(s,e);return c.resolved=n=r[Number(t)]}e&&$(e,1);const i=Qi(),o=Dn();if(null!==s)n=s().then(e=>c.resolved=n=u(e[t]));else{const s=K().importSymbol(a,e,t);n=se(s,e=>c.resolved=n=u(e))}return"object"==typeof n&&te(n)&&n.then(()=>Yi(t,o?.$element$,i),e=>{n=null}),n},h=e=>null!==n?n:d(e);function p(e,t){return(...n)=>se(h(),s=>{if(!ee(s))throw W(10);if(t&&!1===t())return;const r=f(e);return Un.call(this,r,s,...n)})}const f=e=>null==e?Wn():Q(e)?zn(e):e,m=o??t,g=Ki(m);return Object.assign(c,{getSymbol:()=>m,getHash:()=>g,getCaptured:()=>i,resolve:d,$resolveLazy$:h,$setContainer$:l,$chunk$:e,$symbol$:t,$refSymbol$:o,$hash$:g,getFn:p,$capture$:r,$captureRef$:i,dev:null,resolved:void 0}),n&&(n=se(n,e=>c.resolved=n=u(e))),m&&$(m,.8),c},Ki=e=>{const t=e.lastIndexOf("_");return t>-1?e.slice(t+1):e};const Gi=new Set,Yi=(e,t,n)=>{Gi.has(e)||(Gi.add(e),Xi("qsymbol",{symbol:e,element:t,reqTime:n}))},Xi=(e,t)=>{G()||"object"!=typeof document||document.dispatchEvent(new CustomEvent(e,{bubbles:!1,detail:t}))},Qi=()=>G()?0:"object"==typeof performance?performance.now():0;let Zi=0;const eo=e=>Ji(null,"s"+Zi++,e,null,null,null,null),to=function(e,t){return void 0===t&&(t=e.toString()),e.serialized=t,Ji("",Hi,e,null,null,null,null)},no=e=>{function t(t,n,s){const r=e.$hash$.slice(0,4)+":"+(n||"");return gt($t,{[de]:e,[he]:t[he],[Ee]:t[Ee],children:t.children,props:t},s,r)}return t[ci]=[e],t},so=e=>"function"==typeof e&&void 0!==e[ci],ro=(e,t)=>{const{val:n,set:s,iCtx:r}=Ge();if(null!=n)return n;const i=ee(e)?Un(void 0,e):e;if(!1===t?.reactive)return s(i),i;{const e=r.$renderCtx$.$static$.$containerState$,n=Pe(i,e,t?.deep??!0?1:0);return s(n),n}};function io(e,t){const n=Dn();return n?.$renderCtx$?.$static$.$containerState$.$serverData$[e]??t}const oo=(e,t,n)=>{const{val:s,set:r,iCtx:i,i:o,elCtx:a}=Ge();if(s)return s;const c=Ke(e,o),l=i.$renderCtx$.$static$.$containerState$;if(r(c),a.$appendStyles$||(a.$appendStyles$=[]),a.$scopeIds$||(a.$scopeIds$=[]),l.$styleIds$.has(c))return c;l.$styleIds$.add(c);const u=e.$resolveLazy$(l.$containerEl$),d=e=>{a.$appendStyles$,a.$appendStyles$.push({styleId:c,content:t(e,c)})};return te(u)?i.$waitOn$.push(u.then(d)):d(u),c},ao=Ye("qc-s"),co=Ye("qc-c"),lo=Ye("qc-ic"),uo=Ye("qc-h"),ho=Ye("qc-l"),po=Ye("qc-n"),fo=Ye("qc-a"),mo=Ye("qc-ir"),go=Ye("qc-p"),yo=Br(()=>i(()=>Promise.resolve().then(()=>wa),[]),"s_G5JRozgukmA"),_o=no(Br(()=>i(()=>Promise.resolve().then(()=>Pa),void 0),"s_IW497M0sx4Q")),vo=new WeakMap,$o=new Map,bo=e=>e.pathname+e.search+e.hash,wo=(e,t)=>new URL(e,t.href),So=(e,t)=>e.origin===t.origin,ko=e=>e.endsWith("/")?e:e+"/",To=({pathname:e},{pathname:t})=>{const n=Math.abs(e.length-t.length);return 0===n?e===t:1===n&&ko(e)===ko(t)},Eo=(e,t)=>((e,t)=>e.search===t.search)(e,t)&&To(e,t),xo=(e,t)=>{"string"==typeof t.title&&(e.title=t.title),Co(e.meta,t.meta),Co(e.links,t.links),Co(e.styles,t.styles),Co(e.scripts,t.scripts),Object.assign(e.frontmatter,t.frontmatter)},Co=(e,t)=>{if(Array.isArray(t))for(const n of t){if("string"==typeof n.key){const t=e.findIndex(e=>e.key===n.key);if(t>-1){e[t]=n;continue}}e.push(n)}},Io=()=>({title:"",meta:[],links:[],styles:[],scripts:[],frontmatter:{}});function Ro(e,t){return Oo(e,Do(e),Po(e),t,Do(t),Po(t))}function Oo(e,t,n,s,r,i){let o=null;for(;t<n;){const a=e.charCodeAt(t++),c=s.charCodeAt(r++);if(91===a){const a=jo(e,t),c=t+(a?3:0),l=Lo(e,c,n,93),u=e.substring(c,l),d=Lo(e,l+1,n,47),h=e.substring(l+1,d);t=l+1;const p=r-1;if(a){const r=No(u,h,s,p,i,e,t+h.length+1,n);if(r)return Object.assign(o||(o={}),r)}const f=Lo(s,p,i,47,h);if(-1==f)return null;const m=s.substring(p,f);if(!a&&!h&&!m)return null;r=f,(o||(o={}))[u]=decodeURIComponent(m)}else if(!(a===c||isNaN(c)&&Ao(e,t)))return null}return Mo(e,t)&&Mo(s,r)?o||{}:null}function Ao(e,t){return 91===e.charCodeAt(t)&&jo(e,t+1)}function Po(e){const t=e.length;return t>1&&47===e.charCodeAt(t-1)?t-1:t}function Mo(e,t){const n=e.length;return t>=n||t==n-1&&47===e.charCodeAt(t)}function Do(e){return 47===e.charCodeAt(0)?1:0}function jo(e,t){return 46===e.charCodeAt(t)&&46===e.charCodeAt(t+1)&&46===e.charCodeAt(t+2)}function Lo(e,t,n,s,r=""){for(;t<n&&e.charCodeAt(t)!==s;)t++;const i=r.length;for(let o=0;o<i;o++)if(e.charCodeAt(t-i+o)!==r.charCodeAt(o))return-1;return t-i}function No(e,t,n,s,r,i,o,a){47===n.charCodeAt(s)&&s++;let c=r;const l=t+"/";for(;c>=s;){const t=Oo(i,o,a,n,c,r);if(t){let i=n.substring(s,Math.min(c,r));return i.endsWith(l)&&(i=i.substring(0,i.length-l.length)),t[e]=decodeURIComponent(i),t}const u=qo(n,s,l,c,s-1)+l.length;if(c===u)break;c=u}return null}function qo(e,t,n,s,r){let i=e.lastIndexOf(n,s);return i==s-n.length&&(i=e.lastIndexOf(n,s-n.length-1)),i>t?i:r}const Uo=async(e,t,n,s)=>{if(!Array.isArray(e))return null;for(const r of e){const e=r[0],n=Ro(e,s);if(!n)continue;const i=r[1],o=r[3],a=new Array(i.length),c=[];i.forEach((e,t)=>{Fo(e,c,e=>a[t]=e)});const l=Bo(t,s);let u;return Fo(l,c,e=>u=e?.default),c.length>0&&await Promise.all(c),[e,n,a,u,o]}return null},Fo=(e,t,n,s)=>{if("function"==typeof e){const s=vo.get(e);if(s)n(s);else{const s=e();"function"==typeof s.then?t.push(s.then(t=>{vo.set(e,t),n(t)})):s&&n(s)}}},Bo=(e,t)=>{if(e){t=t.endsWith("/")?t:t+"/";const n=e.find(e=>e[0]===t||t.startsWith(e[0]+(t.endsWith("/")?"":"/")));if(n)return n[1]}},zo=()=>({x:0,y:0,w:0,h:0}),Wo=e=>{e=(e=e.endsWith("/")?e:e+"/").length>1&&e.startsWith("/")?e.slice(1):e,$(e,.8)},Ho=async(e,t,n)=>{const s=e.pathname,r=((e,t,n)=>{let s=t??"";return n&&(s+=(s?"&":"?")+"qaction="+encodeURIComponent(n.id)),e+(e.endsWith("/")?"":"/")+"q-data.json"+s})(s,e.search,n?.action);let i,o;if(n?.action||(i=$o.get(r)),!1!==n?.prefetchSymbols&&Wo(s),!i){const s=Vo(n?.action,n?.clearCache);n?.action&&(n.action.data=void 0),i=fetch(r,s).then(s=>{if(s.redirected){const e=new URL(s.url);if(!e.pathname.endsWith("/q-data.json")||e.origin!==location.origin)return void(location.href=e.href)}return(s.headers.get("content-type")||"").includes("json")?s.text().then(i=>{const a=At(i,t);if(a){if(n?.clearCache&&$o.delete(r),a.redirect)location.href=a.redirect;else if(n?.action){const{action:e}=n,t=a.loaders[e.id];o=()=>{e.resolve({status:s.status,result:t})}}return a}location.href=e.href}):void(!0!==n?.isPrefetch&&(location.href=e.href))}),n?.action||$o.set(r,i)}return i.then(e=>(e||$o.delete(r),o&&o(),e))},Vo=(e,t)=>{const n=e?.data;return n?n instanceof FormData?{method:"POST",body:n}:{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json, charset=UTF-8"}}:t?{cache:"no-cache",headers:{"Cache-Control":"no-cache",Pragma:"no-cache"}}:void 0},Jo=()=>Qe(uo),Ko=()=>Qe(ho),Go=()=>Qe(po),Yo=(e,t,n,s,r)=>{"popstate"===e&&r?s.scrollTo(r.x,r.y):"link"!==e&&"form"!==e||Xo(t,n)||s.scrollTo(0,0)},Xo=(e,t)=>{const n=e.hash.slice(1),s=n&&document.getElementById(n);return s?(s.scrollIntoView(),!0):!(s||!e.hash||!Eo(e,t))},Qo=e=>({x:e.scrollLeft,y:e.scrollTop,w:Math.max(e.scrollWidth,e.clientWidth),h:Math.max(e.scrollHeight,e.clientHeight)}),Zo=()=>{const e=history.state;return e?._qCityScroll},ea=e=>{const t=history.state||{};t._qCityScroll=e,history.replaceState(t,"")},ta="_qCityScroller",na={},sa={navCount:0},ra=no(Br(()=>i(()=>Promise.resolve().then(()=>ua),void 0),"s_SqKRCSVAvgI"));const ia=no(Br(()=>i(()=>Promise.resolve().then(()=>Ha),void 0),"s_FX0CToya0Mw")),oa=e=>ft("script",{nonce:os(e,"nonce")},{type:"module",dangerouslySetInnerHTML:'"serviceWorker"in navigator?navigator.serviceWorker.register("/service-worker.js").catch(r=>console.error(r)):console.log("Service worker not supported in this browser.")'},null,3,"ar_7"),aa=(e,...t)=>{const{id:n,validators:s}=ca(t,e);function r(){return Qe(ao,t=>{if(!(n in t))throw new Error(`routeLoader$ "${e.getSymbol()}" was invoked in a route where it was not declared.\n    This is because the routeLoader$ was not exported in a 'layout.tsx' or 'index.tsx' file of the existing route.\n    For more information check: https://qwik.dev/qwikcity/route-loader/\n\n    If your are managing reusable logic or a library it is essential that this function is re-exported from within 'layout.tsx' or 'index.tsx file of the existing route otherwise it will not run or throw exception.\n    For more information check: https://qwik.dev/docs/re-exporting-loaders/`);return is(t,n)})}return r.__brand="server_loader",r.__qrl=e,r.__validators=s,r.__id=n,Object.freeze(r),r},ca=(e,t)=>{let n;const s=[];if(1===e.length){const t=e[0];t&&"object"==typeof t&&("validate"in t?s.push(t):(n=t.id,t.validation&&s.push(...t.validation)))}else e.length>1&&s.push(...e.filter(e=>!!e));return n="string"==typeof n?`id_${n}`:t.getHash(),{validators:s.reverse(),id:n}},la=e=>{oo(Br(()=>i(()=>Promise.resolve().then(()=>_a),void 0),"s_lnepK54CC0s"),e=>e);const t=Mi(io("qwikcity"));if(!t?.params)throw new Error("Missing Qwik City Env Data for help visit https://github.com/QwikDev/qwik/issues/6237");const n=io("url");if(!n)throw new Error("Missing Qwik URL Env Data");const s=new URL(n),r=ro({url:s,params:t.params,isNavigating:!1,prevUrl:void 0},{deep:!1}),o={},a=(c=ro(t.response.loaders,{deep:!1}),Oi.add(c),c);var c;const l=cn({type:"initial",dest:s,forceReload:!1,replaceState:!1,scroll:!0}),u=ro(Io),d=ro({headings:void 0,menu:void 0}),h=cn(),p=t.response.action,f=p?t.response.loaders[p]:void 0,m=cn(f?{id:p,data:t.response.formData,output:{result:f,status:t.response.status}}:void 0),g=Br(()=>i(()=>Promise.resolve().then(()=>Ua),void 0),"s_od2obl07f54"),y=Br(()=>i(()=>Promise.resolve().then(()=>Oa),void 0),"s_TAuHDP8cAnk",[m,o,l,r]);return Xe(co,d),Xe(lo,h),Xe(uo,u),Xe(ho,r),Xe(po,y),Xe(ao,a),Xe(fo,m),Xe(mo,l),Xe(go,g),pn(Br(()=>i(()=>Promise.resolve().then(()=>Ia),void 0),"s_tCo8NSe3Gng",[m,d,h,u,t,y,a,o,e,l,r])),gt(Xr,null,3,"ar_3")},ua=Object.freeze(Object.defineProperty({__proto__:null,s_SqKRCSVAvgI:la},Symbol.toStringTag,{value:"Module"})),da=e=>{const[t]=Ut();if(!t.submitted)return t.submit(e)},ha=async(e,t)=>{const[n,s,r,i]=Ut();e.defaultPrevented&&(t.hasAttribute("q:nbs")?await n(location.href,{type:"popstate"}):t.href&&(t.setAttribute("aria-pressed","true"),await n(t.href,{forceReload:s,replaceState:r,scroll:i}),t.removeAttribute("aria-pressed")))},pa=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_qucHDhplgik:ha},Symbol.toStringTag,{value:"Module"})),fa=(e,t)=>{if(!navigator.connection?.saveData&&t&&t.href){const e=new URL(t.href);Wo(e.pathname),t.hasAttribute("data-prefetch")&&Ho(e,t,{prefetchSymbols:!1,isPrefetch:!0})}},ma=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_pOY4MX0HEyo:fa},Symbol.toStringTag,{value:"Module"})),ga=e=>{const t=e.url??"http://localhost/",n=new URL(t),s=ro({url:n,params:e.params??{},isNavigating:!1,prevUrl:void 0},{deep:!1}),r=cn({}),o=cn({type:"initial",dest:n}),a=e.goto??Br(()=>i(()=>Promise.resolve().then(()=>za),void 0),"s_GjYBd0GVpcg"),c=ro(Io,{deep:!1}),l=ro({headings:void 0,menu:void 0},{deep:!1}),u=cn(),d=cn();return Xe(co,l),Xe(lo,u),Xe(uo,c),Xe(ho,s),Xe(po,a),Xe(ao,r),Xe(fo,d),Xe(mo,o),gt(Xr,null,3,"ar_4")},ya=":root{view-transition-name:none}",_a=Object.freeze(Object.defineProperty({__proto__:null,s_lnepK54CC0s:ya},Symbol.toStringTag,{value:"Module"})),va=({track:e})=>{const[t,n,s,r]=Ut();e(()=>r.url.pathname);const i=s.onQVisible$;if(i){const e=new CustomEvent("qvisible");Array.isArray(i)?i.flat(10).forEach(n=>n?.(e,t.value)):i?.(e,t.value)}t.value&&n?.(void 0,t.value)},$a=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_71lGmHBg3VI:va},Symbol.toStringTag,{value:"Module"})),ba=(e,t)=>{const n=window,s="_qCitySPA",r="_qCityInitPopstate",i="_qCityInitAnchors",o="_qCityInitVisibility",a="_qCityInitScroll";if(!(n[s]||n[r]||n[i]||n[o]||n[a])){const e=location.pathname+location.search,c="_qCityHistoryPatch",l="_qCityBootstrap",u="_qCityScrollEnabled",d="_qCityScrollDebounce",h="_qCityScroll",p=e=>{e&&n.scrollTo(e.x,e.y)},f=()=>{const e=document.documentElement;return{x:e.scrollLeft,y:e.scrollTop,w:Math.max(e.scrollWidth,e.clientWidth),h:Math.max(e.scrollHeight,e.clientHeight)}},m=e=>{const t=history.state||{};t[h]=e||f(),history.replaceState(t,"")};if(m(),n[r]=()=>{if(!n[s])if(n[u]=!1,clearTimeout(n[d]),e!==location.pathname+location.search){const e=e=>e.closest("[q\\:container]"),s=e(t)?.querySelector("a[q\\:link]");if(s){const t=e(s),r=s.cloneNode();r.setAttribute("q:nbs",""),r.style.display="none",t.appendChild(r),n[l]=r,r.click()}else location.reload()}else if("manual"===history.scrollRestoration){const e=history.state?.[h];p(e),n[u]=!0}},!n[c]){n[c]=!0;const e=history.pushState,t=history.replaceState,s=e=>(null==e?e={}:e?.constructor!==Object&&(e={_data:e}),e._qCityScroll=e._qCityScroll||f(),e);history.pushState=(t,n,r)=>(t=s(t),e.call(history,t,n,r)),history.replaceState=(e,n,r)=>(e=s(e),t.call(history,e,n,r))}n[i]=e=>{if(n[s]||e.defaultPrevented)return;const t=e.target.closest("a[href]");if(t&&!t.hasAttribute("preventdefault:click")){const s=t.getAttribute("href"),r=new URL(location.href),i=new URL(s,r),o=i.origin===r.origin,a=i.pathname+i.search===r.pathname+r.search;if(o&&a)if(e.preventDefault(),i.href!==r.href&&history.pushState(null,"",i),i.hash){const e=i.hash.slice(1),t=document.getElementById(e);t&&t.scrollIntoView()}else i.href.endsWith("#")?window.scrollTo(0,0):(n[u]=!1,clearTimeout(n[d]),m({...f(),x:0,y:0}),location.reload())}},n[o]=()=>{!n[s]&&n[u]&&"hidden"===document.visibilityState&&m()},n[a]=()=>{!n[s]&&n[u]&&(clearTimeout(n[d]),n[d]=setTimeout(()=>{m(),n[d]=void 0},200))},n[u]=!0,setTimeout(()=>{addEventListener("popstate",n[r]),addEventListener("scroll",n[a],{passive:!0}),document.body.addEventListener("click",n[i]),n.navigation||document.addEventListener("visibilitychange",n[o],{passive:!0})},0)}},wa=Object.freeze(Object.defineProperty({__proto__:null,s_G5JRozgukmA:ba},Symbol.toStringTag,{value:"Module"})),Sa=()=>i(()=>import("./q-Bl3zUNLk.js"),[]),ka=()=>i(()=>import("./q-BeGIXpMr.js"),[]),Ta=()=>i(()=>import("./q-CSb0NZF_.js"),[]),Ea=[["/",[Ta,()=>i(()=>import("./q-CRu92-iL.js"),[])]],["api/docs/",[Ta,()=>i(()=>import("./q-C-Vwv8I7.js").then(e=>e.i),[])]],["auth/callback/",[Ta,()=>i(()=>import("./q-DAWT_rQB.js"),[])]],["dashboard/analytics/",[Ta,ka,Sa,()=>i(()=>import("./q-D3peGYRe.js"),[])]],["dashboard/components/",[Ta,ka,Sa,()=>i(()=>import("./q-BXBKrR62.js"),[])]],["dashboard/media/",[Ta,ka,Sa,()=>i(()=>import("./q-TA-9Pb1a.js").then(e=>e.i),[])]],["dashboard/pages/",[Ta,ka,Sa,()=>i(()=>import("./q-D_dUu6X9.js"),[])]],["dashboard/posts/",[Ta,ka,Sa,()=>i(()=>import("./q-CS-S8Nx0.js"),[])]],["dashboard/",[Ta,ka,Sa,()=>i(()=>import("./q-CFimUew-.js").then(e=>e.i),[])]],["login/",[Ta,()=>i(()=>import("./q-ACkpa2hX.js"),[])]],["api/[.404]",[Ta,()=>i(()=>import("./q-DRbnYsbH.js"),[])]],["[.catchall]",[Ta,()=>i(()=>import("./q-BhAqSnFt.js"),[])]],["[...slug]",[Ta,()=>i(()=>import("./q-BdYugbGr.js").then(e=>e.i),[])]]],xa=[],Ca=({track:e})=>{const[t,n,s,r,i,o,a,c,l,u,d]=Ut();!async function(){const[i,h]=e(()=>[u.value,t.value]),p=function(e){if(void 0===An){const t=Dn();return t&&t.$locale$?t.$locale$:e}return An}(""),f=d.url,m=h?"form":i.type,g=i.replaceState;let y,_,v,$=null;{y=new URL(i.dest,location),y.pathname.endsWith("/")||(y.pathname+="/");let e=Uo(Ea,xa,0,y.pathname);v=Gn();const t=_=await Ho(y,v,{action:h,clearCache:!0});if(!t)return void(u.untrackedValue={type:m,dest:y});const n=t.href,s=new URL(n,y);Eo(s,y)||(y=s,e=Uo(Ea,xa,0,y.pathname));try{$=await e}catch(b){return void(window.location.href=n)}}if($){const[e,t,h,b]=$,w=h,S=w[w.length-1],k="form"===m&&!Eo(y,f);i.dest.search&&!k&&(y.search=i.dest.search),Eo(y,f)||(d.prevUrl=f),d.url=y,d.params={...t},u.untrackedValue={type:m,dest:y};const T=((e,t,n,s)=>{const r=Io(),i={head:r,withLocale:e=>Mn(s,e),resolveValue:t=>{const n=t.__id;if("server_loader"===t.__brand&&!(n in e.loaders))throw new Error("You can not get the returned data of a loader that has not been executed for this request.");const s=e.loaders[n];if((r=s)&&"function"==typeof r.then)throw new Error("Loaders returning a promise can not be resolved for the head function.");var r;return s},...t};for(let o=n.length-1;o>=0;o--){const e=n[o]&&n[o].head;e&&("function"==typeof e?xo(r,Mn(s,()=>e(i))):"object"==typeof e&&xo(r,e))}return i.head})(_,d,w,p);n.headings=S.headings,n.menu=b,s.value=Mi(w),r.links=T.links,r.meta=T.meta,r.styles=T.styles,r.scripts=T.scripts,r.title=T.title,r.frontmatter=T.frontmatter;{let t;!1!==l.viewTransition&&(document.__q_view_transition__=!0),"popstate"===m&&(t=Zo());const n=document.getElementById(ta)??document.documentElement;(!i.scroll||i.forceReload&&Eo(y,f)||"link"!==m&&"popstate"!==m)&&!k||(document.__q_scroll_restore__=()=>Yo(m,y,f,n,t));const s=_?.loaders,r=window;if(s&&Object.assign(a,s),$o.clear(),!r._qCitySPA){if(r._qCitySPA=!0,history.scrollRestoration="manual",r.addEventListener("popstate",()=>{r._qCityScrollEnabled=!1,clearTimeout(r._qCityScrollDebounce),o(location.href,{type:"popstate"})}),r.removeEventListener("popstate",r._qCityInitPopstate),r._qCityInitPopstate=void 0,!r._qCityHistoryPatch){r._qCityHistoryPatch=!0;const e=history.pushState,t=history.replaceState,s=e=>(null==e?e={}:e?.constructor!==Object&&(e={_data:e}),e._qCityScroll=e._qCityScroll||Qo(n),e);history.pushState=(t,n,r)=>(t=s(t),e.call(history,t,n,r)),history.replaceState=(e,n,r)=>(e=s(e),t.call(history,e,n,r))}document.body.addEventListener("click",e=>{if(e.defaultPrevented)return;const t=e.target.closest("a[href]");if(t&&!t.hasAttribute("preventdefault:click")){const s=t.getAttribute("href"),i=new URL(location.href),a=new URL(s,i);if(So(a,i)&&Eo(a,i)){if(e.preventDefault(),!a.hash&&!a.href.endsWith("#"))return a.href!==i.href&&history.pushState(null,"",a),r._qCityScrollEnabled=!1,clearTimeout(r._qCityScrollDebounce),ea({...Qo(n),x:0,y:0}),void location.reload();o(t.getAttribute("href"))}}}),document.body.removeEventListener("click",r._qCityInitAnchors),r._qCityInitAnchors=void 0,window.navigation||(document.addEventListener("visibilitychange",()=>{if(r._qCityScrollEnabled&&"hidden"===document.visibilityState){const e=Qo(n);ea(e)}},{passive:!0}),document.removeEventListener("visibilitychange",r._qCityInitVisibility),r._qCityInitVisibility=void 0),r.addEventListener("scroll",()=>{r._qCityScrollEnabled&&(clearTimeout(r._qCityScrollDebounce),r._qCityScrollDebounce=setTimeout(()=>{const e=Qo(n);ea(e),r._qCityScrollDebounce=void 0},200))},{passive:!0}),removeEventListener("scroll",r._qCityInitScroll),r._qCityInitScroll=void 0,r._qCityBootstrap?.remove(),r._qCityBootstrap=void 0,yo.resolve()}if("popstate"!==m){r._qCityScrollEnabled=!1,clearTimeout(r._qCityScrollDebounce);const e=Qo(n);ea(e)}((e,t,n,s,r=!1)=>{if("popstate"!==t){const t=Eo(n,s),i=n.hash===s.hash;if(!t||!i){const t={_qCityScroll:zo()};r?e.history.replaceState(t,"",bo(s)):e.history.pushState(t,"",bo(s))}}})(window,m,f,y,g),(e=>{const t=Hn(e);return t?cs(t).$renderPromise$??Promise.resolve():Promise.resolve()})(v).then(()=>{const t=function(e){for(;e&&e.nodeType!==Node.ELEMENT_NODE;)e=e.parentElement;return e.closest("[q\\:container]")}(v);t.setAttribute("q:route",e);const s=Qo(n);ea(s),r._qCityScrollEnabled=!0,d.isNavigating=!1,c.r?.()})}}}()},Ia=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_tCo8NSe3Gng:Ca},Symbol.toStringTag,{value:"Module"})),Ra=async(e,t)=>{const[n,s,r,i]=Ut(),{type:o="link",forceReload:a=void 0===e,replaceState:c=!1,scroll:l=!0}="object"==typeof t?t:{forceReload:t};sa.navCount++;const u=r.value.dest,d=void 0===e?u:"number"==typeof e?e:wo(e,i.url);if(na.$cbs$&&(a||"number"==typeof d||!Eo(d,u)||!So(d,u))){const e=sa.navCount,t=await Promise.all([...na.$cbs$.values()].map(e=>e(d)));if(e!==sa.navCount||t.some(Boolean))return void(e===sa.navCount&&"popstate"===o&&history.pushState(null,"",u))}if("number"!=typeof d)if(So(d,u)){if(a||!Eo(d,u))return r.value={type:o,dest:d,forceReload:a,replaceState:c,scroll:l},Ho(d,Gn()),Uo(Ea,xa,0,d.pathname),n.value=void 0,i.isNavigating=!0,new Promise(e=>{s.r=e});{"link"===o&&d.href!==location.href&&history.pushState(null,"",d);const e=document.getElementById(ta)??document.documentElement;Yo(o,d,new URL(location.href),e,Zo()),"popstate"===o&&(window._qCityScrollEnabled=!0)}}else location.href=d.href;else history.go(d)},Oa=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_TAuHDP8cAnk:Ra},Symbol.toStringTag,{value:"Module"})),Aa=()=>{if(!io("containerAttributes"))throw new Error("PrefetchServiceWorker component must be rendered on the server.");Yn();const e=Qe(lo);if(e.value&&e.value.length>0){let t=null;for(let n=e.value.length-1;n>=0;n--)e.value[n].default&&(t=gt(e.value[n].default,{children:t},1,"ar_0"));return gt(wt,{children:[t,ft("script",{"document:onQCInit$":yo,"document:onQInit$":to(()=>{((e,t)=>{if(!e._qcs&&"manual"===t.scrollRestoration){e._qcs=!0;const n=t.state?._qCityScroll;n&&e.scrollTo(n.x,n.y),document.dispatchEvent(new Event("qcinit"))}})(window,history)},'()=>{((w,h)=>{if(!w._qcs&&h.scrollRestoration==="manual"){w._qcs=true;const s=h.state?._qCityScroll;if(s){w.scrollTo(s.x,s.y);}document.dispatchEvent(new Event("qcinit"));}})(window,history);}')},null,null,2,"ar_1")]},1,"ar_2")}return St},Pa=Object.freeze(Object.defineProperty({__proto__:null,s_IW497M0sx4Q:Aa},Symbol.toStringTag,{value:"Module"})),Ma=async(e,t)=>{const[n]=Ut(),s=new FormData(t),r=new URLSearchParams;s.forEach((e,t)=>{"string"==typeof e&&r.append(t,e)}),await n("?"+r.toString(),{type:"form",forceReload:!0})},Da=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_3A9q00AdLIk:Ma},Symbol.toStringTag,{value:"Module"})),ja=async function(...e){const[t,n,s,r,i]=Ut(),o=e.length>0&&e[0]instanceof AbortSignal?e.shift():void 0;{const a=Gn(),c=e.map(e=>e instanceof SubmitEvent&&e.target instanceof HTMLFormElement?new FormData(e.target):e instanceof Event||e instanceof Node?null:e),l=i.getHash();let u="";const d={...t,method:s,headers:{...n,"Content-Type":"application/qwik-json",Accept:"application/json, application/qwik-json, text/qwik-json-stream, text/plain","X-QRL":l},signal:o},h=await Rr([i,...c]);"GET"===s?u+=`&qdata=${encodeURIComponent(h)}`:d.body=h;const p=await fetch(`${r}?qfunc=${l}${u}`,d),f=p.headers.get("Content-Type");if(p.ok&&"text/qwik-json-stream"===f&&p.body)return async function*(){try{for await(const e of async function*(e,t,n){const s=e.getReader();try{let e="";const r=new TextDecoder;for(;!n?.aborted;){const n=await s.read();if(n.done)break;e+=r.decode(n.value,{stream:!0});const i=e.split(/\n/);e=i.pop();for(const e of i)yield await At(e,t)}}finally{s.releaseLock()}}(p.body,a??document.documentElement,o))yield e}finally{o?.aborted||await p.body.cancel()}}();if("application/qwik-json"===f){const e=await p.text(),t=await At(e,a??document.documentElement);if(p.status>=400)throw t;return t}if("application/json"===f){const e=await p.json();if(p.status>=400)throw e;return e}if("text/plain"===f||"text/html"===f){const e=await p.text();if(p.status>=400)throw e;return e}}},La=e=>{const[t]=Ut();t.error=e.detail.error},Na=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_b3REbKXlmZQ:La},Symbol.toStringTag,{value:"Module"})),qa=e=>(na.$handler$||(na.$handler$=e=>{if(sa.navCount++,!na.$cbs$)return;[...na.$cbs$.values()].map(e=>e.resolved?e.resolved():e()).some(Boolean)&&(e.preventDefault(),e.returnValue=!0)}),(na.$cbs$||(na.$cbs$=new Set)).add(e),e.resolve(),window.addEventListener("beforeunload",na.$handler$),()=>{na.$cbs$&&(na.$cbs$.delete(e),na.$cbs$.size||(na.$cbs$=void 0,window.removeEventListener("beforeunload",na.$handler$)))}),Ua=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_od2obl07f54:qa},Symbol.toStringTag,{value:"Module"})),Fa=(e={})=>{const[t,n,s,r]=Ut();let i,o;return e instanceof SubmitEvent?(o=e.target,i=new FormData(o),(e.submitter instanceof HTMLInputElement||e.submitter instanceof HTMLButtonElement)&&e.submitter.name&&e.submitter.name&&i.append(e.submitter.name,e.submitter.value)):i=e,new Promise(e=>{i instanceof FormData&&(r.formData=i),r.submitted=!0,r.isRunning=!0,s.isNavigating=!0,t.value={data:i,id:n,resolve:Mi(e)}}).then(({result:e,status:t})=>{if(r.isRunning=!1,r.status=t,r.value=e,o){"true"===o.getAttribute("data-spa-reset")&&o.reset();const n={status:t,value:e};o.dispatchEvent(new CustomEvent("submitcompleted",{bubbles:!1,cancelable:!1,composed:!1,detail:n}))}return{status:t,value:e}})},Ba=async()=>{},za=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_GjYBd0GVpcg:Ba},Symbol.toStringTag,{value:"Module"})),Wa=e=>{const t=Go(),n=Ko(),s=cn(),{onClick$:r,prefetch:o,reload:a,replaceState:c,scroll:l,...u}=(()=>e)(),d=Vn(()=>((e,t)=>{const n=e.href;if("string"!=typeof n||"string"==typeof e.target||e.reload){if(e.reload)return bo(wo("",t.url))}else try{const e=wo(n.trim(),t.url),s=wo("",t.url);if(So(e,s))return bo(e)}catch(s){}return null})({...u,reload:a},n));u.href=d||e.href;const h=Vn(()=>!!d&&!1!==o&&"js"!==o||void 0),p=Vn(()=>h||!!d&&!1!==o&&((e,t)=>{if(e){const n=wo(e,t.url),s=wo("",t.url);return!To(n,s)}return!1})(d,n)),f=p?Br(()=>i(()=>Promise.resolve().then(()=>ma),void 0),"s_pOY4MX0HEyo"):void 0,m=d?to((e,t)=>{e.metaKey||e.ctrlKey||e.shiftKey||e.altKey||e.preventDefault()},"(event,target)=>{if(!(event.metaKey||event.ctrlKey||event.shiftKey||event.altKey)){event.preventDefault();}}"):void 0,g=d?Br(()=>i(()=>Promise.resolve().then(()=>pa),void 0),"s_qucHDhplgik",[t,a,c,l]):void 0;return fn(Br(()=>i(()=>Promise.resolve().then(()=>$a),void 0),"s_71lGmHBg3VI",[s,f,u,n])),mt("a",{ref:s,"q:link":!!d,...u,"data-prefetch":h,children:gt(Xr,null,3,"ar_5"),onClick$:[m,r,g],onMouseOver$:[u.onMouseOver$,f],onFocus$:[u.onFocus$,f],onQVisible$:[]},null,0,"ar_6")},Ha=Object.freeze(Object.defineProperty({__proto__:null,s_FX0CToya0Mw:Wa},Symbol.toStringTag,{value:"Module"})),Va=(e,t)=>{"true"===t.getAttribute("data-spa-reset")&&t.reset(),t.dispatchEvent(new CustomEvent("submitcompleted",{bubbles:!1,cancelable:!1,composed:!1,detail:{status:200}}))},Ja=Object.freeze(Object.defineProperty({__proto__:null,_hW:Jt,s_tFSUa4iZX9M:Va},Symbol.toStringTag,{value:"Module"})),Ka=e=>{Yn();const t=(()=>{const e=ro({error:void 0});return Xe(tt,e),e})();var n,s;return n="qerror",s=Br(()=>i(()=>Promise.resolve().then(()=>Na),void 0),"s_b3REbKXlmZQ",[t]),an(on(n,"window"),s),t.error&&e.fallback$?gt(wt,{children:e.fallback$(t.error)},1,"ar_8"):gt(Xr,null,3,"ar_9")},Ga=()=>{const[e,t]=Ut();return t(e)},Ya=e=>{const t=((e,t)=>{const n={};for(const s in e)t.includes(s)||(n[s]=e[s]);return n})(e,["action","spaReset","reloadDocument","onSubmit$"]),n=Go();return mt("form",{action:"get",get"preventdefault:submit"(){return!e.reloadDocument},get"data-spa-reset"(){return e.spaReset?"true":void 0},...t,children:gt(Xr,null,3,"ar_10"),onSubmit$:[...Array.isArray(e.onSubmit$)?e.onSubmit$:[e.onSubmit$],Br(()=>i(()=>Promise.resolve().then(()=>Da),void 0),"s_3A9q00AdLIk",[n]),Br(()=>i(()=>Promise.resolve().then(()=>Ja),void 0),"s_tFSUa4iZX9M")]},{action:Ee,"preventdefault:submit":pt(e=>!e.reloadDocument,[e]),"data-spa-reset":pt(e=>e.spaReset?"true":void 0,[e])},0,"ar_11")};class Xa extends Error{constructor(e,t="FunctionsError",n){super(e),this.name=t,this.context=n}}class Qa extends Xa{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Za extends Xa{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class ec extends Xa{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var tc,nc;(nc=tc||(tc={})).Any="any",nc.ApNortheast1="ap-northeast-1",nc.ApNortheast2="ap-northeast-2",nc.ApSouth1="ap-south-1",nc.ApSoutheast1="ap-southeast-1",nc.ApSoutheast2="ap-southeast-2",nc.CaCentral1="ca-central-1",nc.EuCentral1="eu-central-1",nc.EuWest1="eu-west-1",nc.EuWest2="eu-west-2",nc.EuWest3="eu-west-3",nc.SaEast1="sa-east-1",nc.UsEast1="us-east-1",nc.UsWest1="us-west-1",nc.UsWest2="us-west-2";var sc=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};class rc{constructor(e,{headers:t={},customFetch:n,region:s=tc.Any}={}){this.url=e,this.headers=t,this.region=s,this.fetch=(e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>i(async()=>{const{default:e}=await Promise.resolve().then(()=>vc);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)})(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,t={}){var n;return sc(this,void 0,void 0,function*(){try{const{headers:s,method:r,body:i}=t;let o,a={},{region:c}=t;c||(c=this.region),c&&"any"!==c&&(a["x-region"]=c),i&&(s&&!Object.prototype.hasOwnProperty.call(s,"Content-Type")||!s)&&("undefined"!=typeof Blob&&i instanceof Blob||i instanceof ArrayBuffer?(a["Content-Type"]="application/octet-stream",o=i):"string"==typeof i?(a["Content-Type"]="text/plain",o=i):"undefined"!=typeof FormData&&i instanceof FormData?o=i:(a["Content-Type"]="application/json",o=JSON.stringify(i)));const l=yield this.fetch(`${this.url}/${e}`,{method:r||"POST",headers:Object.assign(Object.assign(Object.assign({},a),this.headers),s),body:o}).catch(e=>{throw new Qa(e)}),u=l.headers.get("x-relay-error");if(u&&"true"===u)throw new Za(l);if(!l.ok)throw new ec(l);let d,h=(null!==(n=l.headers.get("Content-Type"))&&void 0!==n?n:"text/plain").split(";")[0].trim();return d="application/json"===h?yield l.json():"application/octet-stream"===h?yield l.blob():"text/event-stream"===h?l:"multipart/form-data"===h?yield l.formData():yield l.text(),{data:d,error:null}}catch(s){return{data:null,error:s}}})}}var ic="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};function oc(e){if(e.__esModule)return e;var t=e.default;if("function"==typeof t){var n=function e(){return this instanceof e?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(t){var s=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(n,t,s.get?s:{enumerable:!0,get:function(){return e[t]}})}),n}var ac={},cc={},lc={},uc={},dc={},hc={},pc=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw new Error("unable to locate global object")}();const fc=pc.fetch,mc=pc.fetch.bind(pc),gc=pc.Headers,yc=pc.Request,_c=pc.Response,vc=Object.freeze(Object.defineProperty({__proto__:null,Headers:gc,Request:yc,Response:_c,default:mc,fetch:fc},Symbol.toStringTag,{value:"Module"})),$c=oc(vc);var bc={};Object.defineProperty(bc,"__esModule",{value:!0});let wc=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};bc.default=wc;var Sc=ic&&ic.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(hc,"__esModule",{value:!0});const kc=Sc($c),Tc=Sc(bc);hc.default=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:"undefined"==typeof fetch?this.fetch=kc.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=Object.assign({},this.headers),this.headers[e]=t,this}then(e,t){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),"GET"!==this.method&&"HEAD"!==this.method&&(this.headers["Content-Type"]="application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async e=>{var t,n,s;let r=null,i=null,o=null,a=e.status,c=e.statusText;if(e.ok){if("HEAD"!==this.method){const t=await e.text();""===t||(i="text/csv"===this.headers.Accept||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?t:JSON.parse(t))}const s=null===(t=this.headers.Prefer)||void 0===t?void 0:t.match(/count=(exact|planned|estimated)/),l=null===(n=e.headers.get("content-range"))||void 0===n?void 0:n.split("/");s&&l&&l.length>1&&(o=parseInt(l[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(i)&&(i.length>1?(r={code:"PGRST116",details:`Results contain ${i.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},i=null,o=null,a=406,c="Not Acceptable"):i=1===i.length?i[0]:null)}else{const t=await e.text();try{r=JSON.parse(t),Array.isArray(r)&&404===e.status&&(i=[],r=null,a=200,c="OK")}catch(l){404===e.status&&""===t?(a=204,c="No Content"):r={message:t}}if(r&&this.isMaybeSingle&&(null===(s=null==r?void 0:r.details)||void 0===s?void 0:s.includes("0 rows"))&&(r=null,a=200,c="OK"),r&&this.shouldThrowOnError)throw new Tc.default(r)}return{error:r,data:i,count:o,status:a,statusText:c}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,n,s;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(n=null==e?void 0:e.stack)&&void 0!==n?n:""}`,hint:"",code:`${null!==(s=null==e?void 0:e.code)&&void 0!==s?s:""}`},data:null,count:null,status:0,statusText:""}})),n.then(e,t)}returns(){return this}overrideTypes(){return this}};var Ec=ic&&ic.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(dc,"__esModule",{value:!0});const xc=Ec(hc);let Cc=class extends xc.default{select(e){let t=!1;const n=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:t=!0,nullsFirst:n,foreignTable:s,referencedTable:r=s}={}){const i=r?`${r}.order`:"order",o=this.url.searchParams.get(i);return this.url.searchParams.set(i,`${o?`${o},`:""}${e}.${t?"asc":"desc"}${void 0===n?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:n=t}={}){const s=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this}range(e,t,{foreignTable:n,referencedTable:s=n}={}){const r=void 0===s?"offset":`${s}.offset`,i=void 0===s?"limit":`${s}.limit`;return this.url.searchParams.set(r,`${e}`),this.url.searchParams.set(i,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return"GET"===this.method?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:t=!1,settings:n=!1,buffers:s=!1,wal:r=!1,format:i="text"}={}){var o;const a=[e?"analyze":null,t?"verbose":null,n?"settings":null,s?"buffers":null,r?"wal":null].filter(Boolean).join("|"),c=null!==(o=this.headers.Accept)&&void 0!==o?o:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${i}; for="${c}"; options=${a};`,this}rollback(){var e;return(null!==(e=this.headers.Prefer)&&void 0!==e?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};dc.default=Cc;var Ic=ic&&ic.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(uc,"__esModule",{value:!0});const Rc=Ic(dc);let Oc=class extends Rc.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,t){const n=Array.from(new Set(t)).map(e=>"string"==typeof e&&new RegExp("[,()]").test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:n,type:s}={}){let r="";"plain"===s?r="pl":"phrase"===s?r="ph":"websearch"===s&&(r="w");const i=void 0===n?"":`(${n})`;return this.url.searchParams.append(e,`${r}fts${i}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,n){return this.url.searchParams.append(e,`not.${t}.${n}`),this}or(e,{foreignTable:t,referencedTable:n=t}={}){const s=n?`${n}.or`:"or";return this.url.searchParams.append(s,`(${e})`),this}filter(e,t,n){return this.url.searchParams.append(e,`${t}.${n}`),this}};uc.default=Oc;var Ac=ic&&ic.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(lc,"__esModule",{value:!0});const Pc=Ac(uc);lc.default=class{constructor(e,{headers:t={},schema:n,fetch:s}){this.url=e,this.headers=t,this.schema=n,this.fetch=s}select(e,{head:t=!1,count:n}={}){const s=t?"HEAD":"GET";let r=!1;const i=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!r?"":('"'===e&&(r=!r),e)).join("");return this.url.searchParams.set("select",i),n&&(this.headers.Prefer=`count=${n}`),new Pc.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:t,defaultToNull:n=!0}={}){const s=[];if(this.headers.Prefer&&s.push(this.headers.Prefer),t&&s.push(`count=${t}`),n||s.push("missing=default"),this.headers.Prefer=s.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Pc.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:t,ignoreDuplicates:n=!1,count:s,defaultToNull:r=!0}={}){const i=[`resolution=${n?"ignore":"merge"}-duplicates`];if(void 0!==t&&this.url.searchParams.set("on_conflict",t),this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),r||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const t=e.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(t.length>0){const e=[...new Set(t)].map(e=>`"${e}"`);this.url.searchParams.set("columns",e.join(","))}}return new Pc.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:t}={}){const n=[];return this.headers.Prefer&&n.push(this.headers.Prefer),t&&n.push(`count=${t}`),this.headers.Prefer=n.join(","),new Pc.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const t=[];return e&&t.push(`count=${e}`),this.headers.Prefer&&t.unshift(this.headers.Prefer),this.headers.Prefer=t.join(","),new Pc.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};var Mc={},Dc={};Object.defineProperty(Dc,"__esModule",{value:!0}),Dc.version=void 0,Dc.version="0.0.0-automated",Object.defineProperty(Mc,"__esModule",{value:!0}),Mc.DEFAULT_HEADERS=void 0;const jc=Dc;Mc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${jc.version}`};var Lc=ic&&ic.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(cc,"__esModule",{value:!0});const Nc=Lc(lc),qc=Lc(uc),Uc=Mc;cc.default=class e{constructor(e,{headers:t={},schema:n,fetch:s}={}){this.url=e,this.headers=Object.assign(Object.assign({},Uc.DEFAULT_HEADERS),t),this.schemaName=n,this.fetch=s}from(e){const t=new URL(`${this.url}/${e}`);return new Nc.default(t,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(t){return new e(this.url,{headers:this.headers,schema:t,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:r}={}){let i;const o=new URL(`${this.url}/rpc/${e}`);let a;n||s?(i=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{o.searchParams.append(e,t)})):(i="POST",a=t);const c=Object.assign({},this.headers);return r&&(c.Prefer=`count=${r}`),new qc.default({method:i,url:o,headers:c,schema:this.schemaName,body:a,fetch:this.fetch,allowEmpty:!1})}};var Fc=ic&&ic.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(ac,"__esModule",{value:!0}),ac.PostgrestError=ac.PostgrestBuilder=ac.PostgrestTransformBuilder=ac.PostgrestFilterBuilder=ac.PostgrestQueryBuilder=ac.PostgrestClient=void 0;const Bc=Fc(cc);ac.PostgrestClient=Bc.default;const zc=Fc(lc);ac.PostgrestQueryBuilder=zc.default;const Wc=Fc(uc);ac.PostgrestFilterBuilder=Wc.default;const Hc=Fc(dc);ac.PostgrestTransformBuilder=Hc.default;const Vc=Fc(hc);ac.PostgrestBuilder=Vc.default;const Jc=Fc(bc);ac.PostgrestError=Jc.default;var Kc=ac.default={PostgrestClient:Bc.default,PostgrestQueryBuilder:zc.default,PostgrestFilterBuilder:Wc.default,PostgrestTransformBuilder:Hc.default,PostgrestBuilder:Vc.default,PostgrestError:Jc.default};const{PostgrestClient:Gc,PostgrestQueryBuilder:Yc,PostgrestFilterBuilder:Xc,PostgrestTransformBuilder:Qc,PostgrestBuilder:Zc,PostgrestError:el}=Kc;const tl=function(){if("undefined"!=typeof WebSocket)return WebSocket;if(void 0!==global.WebSocket)return global.WebSocket;if(void 0!==window.WebSocket)return window.WebSocket;if(void 0!==self.WebSocket)return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}();var nl,sl,rl,il,ol,al,cl,ll,ul,dl,hl;(sl=nl||(nl={}))[sl.connecting=0]="connecting",sl[sl.open=1]="open",sl[sl.closing=2]="closing",sl[sl.closed=3]="closed",(il=rl||(rl={})).closed="closed",il.errored="errored",il.joined="joined",il.joining="joining",il.leaving="leaving",(al=ol||(ol={})).close="phx_close",al.error="phx_error",al.join="phx_join",al.reply="phx_reply",al.leave="phx_leave",al.access_token="access_token",(cl||(cl={})).websocket="websocket",(ul=ll||(ll={})).Connecting="connecting",ul.Open="open",ul.Closing="closing",ul.Closed="closed";class pl{constructor(){this.HEADER_LENGTH=1}decode(e,t){return e.constructor===ArrayBuffer?t(this._binaryDecode(e)):t("string"==typeof e?JSON.parse(e):{})}_binaryDecode(e){const t=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,t,n)}_decodeBroadcast(e,t,n){const s=t.getUint8(1),r=t.getUint8(2);let i=this.HEADER_LENGTH+2;const o=n.decode(e.slice(i,i+s));i+=s;const a=n.decode(e.slice(i,i+r));i+=r;return{ref:null,topic:o,event:a,payload:JSON.parse(n.decode(e.slice(i,e.byteLength)))}}}class fl{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(hl=dl||(dl={})).abstime="abstime",hl.bool="bool",hl.date="date",hl.daterange="daterange",hl.float4="float4",hl.float8="float8",hl.int2="int2",hl.int4="int4",hl.int4range="int4range",hl.int8="int8",hl.int8range="int8range",hl.json="json",hl.jsonb="jsonb",hl.money="money",hl.numeric="numeric",hl.oid="oid",hl.reltime="reltime",hl.text="text",hl.time="time",hl.timestamp="timestamp",hl.timestamptz="timestamptz",hl.timetz="timetz",hl.tsrange="tsrange",hl.tstzrange="tstzrange";const ml=(e,t,n={})=>{var s;const r=null!==(s=n.skipTypes)&&void 0!==s?s:[];return Object.keys(t).reduce((n,s)=>(n[s]=gl(s,e,t,r),n),{})},gl=(e,t,n,s)=>{const r=t.find(t=>t.name===e),i=null==r?void 0:r.type,o=n[e];return i&&!s.includes(i)?yl(i,o):_l(o)},yl=(e,t)=>{if("_"===e.charAt(0)){const n=e.slice(1,e.length);return wl(t,n)}switch(e){case dl.bool:return vl(t);case dl.float4:case dl.float8:case dl.int2:case dl.int4:case dl.int8:case dl.numeric:case dl.oid:return $l(t);case dl.json:case dl.jsonb:return bl(t);case dl.timestamp:return Sl(t);case dl.abstime:case dl.date:case dl.daterange:case dl.int4range:case dl.int8range:case dl.money:case dl.reltime:case dl.text:case dl.time:case dl.timestamptz:case dl.timetz:case dl.tsrange:case dl.tstzrange:default:return _l(t)}},_l=e=>e,vl=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},$l=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},bl=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},wl=(e,t)=>{if("string"!=typeof e)return e;const n=e.length-1,s=e[n];if("{"===e[0]&&"}"===s){let s;const i=e.slice(1,n);try{s=JSON.parse("["+i+"]")}catch(r){s=i?i.split(","):[]}return s.map(e=>yl(t,e))}return e},Sl=e=>"string"==typeof e?e.replace(" ","T"):e,kl=e=>{let t=e;return t=t.replace(/^ws/i,"http"),t=t.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),t.replace(/\/+$/,"")};class Tl{constructor(e,t,n={},s=1e4){this.channel=e,this.event=t,this.payload=n,this.timeout=s,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var n;return this._hasReceived(e)&&t(null===(n=this.receivedResp)||void 0===n?void 0:n.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var El,xl,Cl,Il,Rl,Ol,Al,Pl;(xl=El||(El={})).SYNC="sync",xl.JOIN="join",xl.LEAVE="leave";class Ml{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ml.syncState(this.state,e,t,n),this.pendingDiffs.forEach(e=>{this.state=Ml.syncDiff(this.state,e,t,n)}),this.pendingDiffs=[],s()}),this.channel._on(n.diff,{},e=>{const{onJoin:t,onLeave:n,onSync:s}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=Ml.syncDiff(this.state,e,t,n),s())}),this.onJoin((e,t,n)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:n})}),this.onLeave((e,t,n)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:n})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,n,s){const r=this.cloneDeep(e),i=this.transformState(t),o={},a={};return this.map(r,(e,t)=>{i[e]||(a[e]=t)}),this.map(i,(e,t)=>{const n=r[e];if(n){const s=t.map(e=>e.presence_ref),r=n.map(e=>e.presence_ref),i=t.filter(e=>r.indexOf(e.presence_ref)<0),c=n.filter(e=>s.indexOf(e.presence_ref)<0);i.length>0&&(o[e]=i),c.length>0&&(a[e]=c)}else o[e]=t}),this.syncDiff(r,{joins:o,leaves:a},n,s)}static syncDiff(e,t,n,s){const{joins:r,leaves:i}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return n||(n=()=>{}),s||(s=()=>{}),this.map(r,(t,s)=>{var r;const i=null!==(r=e[t])&&void 0!==r?r:[];if(e[t]=this.cloneDeep(s),i.length>0){const n=e[t].map(e=>e.presence_ref),s=i.filter(e=>n.indexOf(e.presence_ref)<0);e[t].unshift(...s)}n(t,i,s)}),this.map(i,(t,n)=>{let r=e[t];if(!r)return;const i=n.map(e=>e.presence_ref);r=r.filter(e=>i.indexOf(e.presence_ref)<0),e[t]=r,s(t,r,n),0===r.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(n=>t(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,n)=>{const s=e[n];return t[n]="metas"in s?s.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):s,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(Il=Cl||(Cl={})).ALL="*",Il.INSERT="INSERT",Il.UPDATE="UPDATE",Il.DELETE="DELETE",(Ol=Rl||(Rl={})).BROADCAST="broadcast",Ol.PRESENCE="presence",Ol.POSTGRES_CHANGES="postgres_changes",Ol.SYSTEM="system",(Pl=Al||(Al={})).SUBSCRIBED="SUBSCRIBED",Pl.TIMED_OUT="TIMED_OUT",Pl.CLOSED="CLOSED",Pl.CHANNEL_ERROR="CHANNEL_ERROR";class Dl{constructor(e,t={config:{}},n){this.topic=e,this.params=t,this.socket=n,this.bindings={},this.state=rl.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Tl(this,ol.join,this.params,this.timeout),this.rejoinTimer=new fl(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=rl.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=rl.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=rl.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=rl.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ol.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new Ml(this),this.broadcastEndpointURL=kl(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,t=this.timeout){var n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==rl.closed){const{config:{broadcast:r,presence:i,private:o}}=this.params;this._onError(t=>null==e?void 0:e(Al.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(Al.CLOSED));const a={},c={broadcast:r,presence:i,postgres_changes:null!==(s=null===(n=this.bindings.postgres_changes)||void 0===n?void 0:n.map(e=>e.filter))&&void 0!==s?s:[],private:o};this.socket.accessTokenValue&&(a.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:c},a)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var n;if(this.socket.setAuth(),void 0!==t){const s=this.bindings.postgres_changes,r=null!==(n=null==s?void 0:s.length)&&void 0!==n?n:0,i=[];for(let n=0;n<r;n++){const r=s[n],{filter:{event:o,schema:a,table:c,filter:l}}=r,u=t&&t[n];if(!u||u.event!==o||u.schema!==a||u.table!==c||u.filter!==l)return this.unsubscribe(),this.state=rl.errored,void(null==e||e(Al.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));i.push(Object.assign(Object.assign({},r),{id:u.id}))}return this.bindings.postgres_changes=i,void(e&&e(Al.SUBSCRIBED))}null==e||e(Al.SUBSCRIBED)}).receive("error",t=>{this.state=rl.errored,null==e||e(Al.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(Al.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,n){return this._on(e,t,n)}async send(e,t={}){var n,s;if(this._canPush()||"broadcast"!==e.type)return new Promise(n=>{var s,r,i;const o=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(i=null===(r=null===(s=this.params)||void 0===s?void 0:s.config)||void 0===r?void 0:r.broadcast)||void 0===i?void 0:i.ack)||n("ok"),o.receive("ok",()=>n("ok")),o.receive("error",()=>n("error")),o.receive("timeout",()=>n("timed out"))});{const{event:i,payload:o}=e,a={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=t.timeout)&&void 0!==n?n:this.timeout);return await(null===(s=e.body)||void 0===s?void 0:s.cancel()),e.ok?"ok":"error"}catch(r){return"AbortError"===r.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=rl.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ol.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(s=>{n=new Tl(this,ol.leave,{},e),n.receive("ok",()=>{t(),s("ok")}).receive("timeout",()=>{t(),s("timed out")}).receive("error",()=>{s("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{null==n||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,t,n){const s=new AbortController,r=setTimeout(()=>s.abort(),n),i=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:s.signal}));return clearTimeout(r),i}_push(e,t,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let s=new Tl(this,e,t,n);return this._canPush()?s.send():(s.startTimeout(),this.pushBuffer.push(s)),s}_onMessage(e,t,n){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,n){var s,r;const i=e.toLocaleLowerCase(),{close:o,error:a,leave:c,join:l}=ol;if(n&&[o,a,c,l].indexOf(i)>=0&&n!==this._joinRef())return;let u=this._onMessage(i,t,n);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(i)?null===(s=this.bindings.postgres_changes)||void 0===s||s.filter(e=>{var t,n,s;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(s=null===(n=e.filter)||void 0===n?void 0:n.event)||void 0===s?void 0:s.toLocaleLowerCase())===i}).map(e=>e.callback(u,n)):null===(r=this.bindings[i])||void 0===r||r.filter(e=>{var n,s,r,o,a,c;if(["broadcast","presence","postgres_changes"].includes(i)){if("id"in e){const i=e.id,o=null===(n=e.filter)||void 0===n?void 0:n.event;return i&&(null===(s=t.ids)||void 0===s?void 0:s.includes(i))&&("*"===o||(null==o?void 0:o.toLocaleLowerCase())===(null===(r=t.data)||void 0===r?void 0:r.type.toLocaleLowerCase()))}{const n=null===(a=null===(o=null==e?void 0:e.filter)||void 0===o?void 0:o.event)||void 0===a?void 0:a.toLocaleLowerCase();return"*"===n||n===(null===(c=null==t?void 0:t.event)||void 0===c?void 0:c.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===i}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:n,commit_timestamp:s,type:r,errors:i}=e,o={schema:t,table:n,commit_timestamp:s,eventType:r,new:{},old:{},errors:i};u=Object.assign(Object.assign({},o),this._getPayloadRecords(e))}e.callback(u,n)})}_isClosed(){return this.state===rl.closed}_isJoined(){return this.state===rl.joined}_isJoining(){return this.state===rl.joining}_isLeaving(){return this.state===rl.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,n){const s=e.toLocaleLowerCase(),r={type:s,filter:t,callback:n};return this.bindings[s]?this.bindings[s].push(r):this.bindings[s]=[r],this}_off(e,t){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(e=>{var s;return!((null===(s=e.type)||void 0===s?void 0:s.toLocaleLowerCase())===n&&Dl.isEqual(e.filter,t))}),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ol.close,{},e)}_onError(e){this._on(ol.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=rl.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=ml(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=ml(e.columns,e.old_record)),t}}const jl=()=>{};class Ll{constructor(e,t){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=1e4,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=jl,this.ref=0,this.logger=jl,this.conn=null,this.sendBuffer=[],this.serializer=new pl,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>i(async()=>{const{default:e}=await Promise.resolve().then(()=>vc);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},this.endPoint=`${e}/${cl.websocket}`,this.httpEndpoint=kl(e),(null==t?void 0:t.transport)?this.transport=t.transport:this.transport=null,(null==t?void 0:t.params)&&(this.params=t.params),(null==t?void 0:t.timeout)&&(this.timeout=t.timeout),(null==t?void 0:t.logger)&&(this.logger=t.logger),((null==t?void 0:t.logLevel)||(null==t?void 0:t.log_level))&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),(null==t?void 0:t.heartbeatIntervalMs)&&(this.heartbeatIntervalMs=t.heartbeatIntervalMs);const s=null===(n=null==t?void 0:t.params)||void 0===n?void 0:n.apikey;if(s&&(this.accessTokenValue=s,this.apiKey=s),this.reconnectAfterMs=(null==t?void 0:t.reconnectAfterMs)?t.reconnectAfterMs:e=>[1e3,2e3,5e3,1e4][e-1]||1e4,this.encode=(null==t?void 0:t.encode)?t.encode:(e,t)=>t(JSON.stringify(e)),this.decode=(null==t?void 0:t.decode)?t.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new fl(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(null==t?void 0:t.fetch),null==t?void 0:t.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(null==t?void 0:t.worker)||!1,this.workerUrl=null==t?void 0:t.workerUrl}this.accessToken=(null==t?void 0:t.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=tl),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:"1.0.0"}))}disconnect(e,t){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,null!=t?t:""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(e=>e.teardown()))}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,n){this.logger(e,t,n)}connectionState(){switch(this.conn&&this.conn.readyState){case nl.connecting:return ll.Connecting;case nl.open:return ll.Open;case nl.closing:return ll.Closing;default:return ll.Closed}}isConnected(){return this.connectionState()===ll.Open}channel(e,t={config:{}}){const n=`realtime:${e}`,s=this.getChannels().find(e=>e.topic===n);if(s)return s;{const n=new Dl(`realtime:${e}`,t,this);return this.channels.push(n),n}}push(e){const{topic:t,event:n,payload:s,ref:r}=e,i=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${n} (${r})`,s),this.isConnected()?i():this.sendBuffer.push(i)}async setAuth(e=null){let t=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const n={access_token:t,version:"realtime-js/2.11.15"};t&&e.updateJoinPayload(n),e.joinedOnce&&e._isJoined()&&e._push(ol.access_token,{access_token:t})}))}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef)return this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),void(null===(e=this.conn)||void 0===e||e.close(1e3,"hearbeat timeout"));this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}else this.heartbeatCallback("disconnected")}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,e=>{let{topic:t,event:n,payload:s,ref:r}=e;"phoenix"===t&&"phx_reply"===n&&this.heartbeatCallback("ok"==e.payload.status?"ok":"error"),r&&r===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${s.status||""} ${t} ${n} ${r&&"("+r+")"||""}`,s),Array.from(this.channels).filter(e=>e._isMember(t)).forEach(e=>e._trigger(n,s,r)),this.stateChangeCallbacks.message.forEach(t=>t(e))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(t=>t(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(t=>t(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ol.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const n=e.match(/\?/)?"&":"?";return`${e}${n}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}}class Nl extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ql(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class Ul extends Nl{constructor(e,t){super(e),this.name="StorageApiError",this.status=t}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Fl extends Nl{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}var Bl=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};const zl=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>i(async()=>{const{default:e}=await Promise.resolve().then(()=>vc);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Wl=e=>{if(Array.isArray(e))return e.map(e=>Wl(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,n])=>{const s=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[s]=Wl(n)}),t};var Hl=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};const Vl=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Jl=(e,t,n)=>Hl(void 0,void 0,void 0,function*(){const s=yield Bl(void 0,void 0,void 0,function*(){return"undefined"==typeof Response?(yield i(()=>Promise.resolve().then(()=>vc),void 0)).Response:Response});e instanceof s&&!(null==n?void 0:n.noResolveJson)?e.json().then(n=>{t(new Ul(Vl(n),e.status||500))}).catch(e=>{t(new Fl(Vl(e),e))}):t(new Fl(Vl(e),e))});function Kl(e,t,n,s,r,i){return Hl(this,void 0,void 0,function*(){return new Promise((o,a)=>{e(n,((e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s&&(r.body=JSON.stringify(s)),Object.assign(Object.assign({},r),n))})(t,s,r,i)).then(e=>{if(!e.ok)throw e;return(null==s?void 0:s.noResolveJson)?e:e.json()}).then(e=>o(e)).catch(e=>Jl(e,a,s))})})}function Gl(e,t,n,s){return Hl(this,void 0,void 0,function*(){return Kl(e,"GET",t,n,s)})}function Yl(e,t,n,s,r){return Hl(this,void 0,void 0,function*(){return Kl(e,"POST",t,s,r,n)})}function Xl(e,t,n,s,r){return Hl(this,void 0,void 0,function*(){return Kl(e,"DELETE",t,s,r,n)})}var Ql=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};const Zl={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},eu={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class tu{constructor(e,t={},n,s){this.url=e,this.headers=t,this.bucketId=n,this.fetch=zl(s)}uploadOrUpdate(e,t,n,s){return Ql(this,void 0,void 0,function*(){try{let r;const i=Object.assign(Object.assign({},eu),s);let o=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(i.upsert)});const a=i.metadata;"undefined"!=typeof Blob&&n instanceof Blob?(r=new FormData,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a)),r.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(r=n,r.append("cacheControl",i.cacheControl),a&&r.append("metadata",this.encodeMetadata(a))):(r=n,o["cache-control"]=`max-age=${i.cacheControl}`,o["content-type"]=i.contentType,a&&(o["x-metadata"]=this.toBase64(this.encodeMetadata(a)))),(null==s?void 0:s.headers)&&(o=Object.assign(Object.assign({},o),s.headers));const c=this._removeEmptyFolders(t),l=this._getFinalPath(c),u=yield this.fetch(`${this.url}/object/${l}`,Object.assign({method:e,body:r,headers:o},(null==i?void 0:i.duplex)?{duplex:i.duplex}:{})),d=yield u.json();if(u.ok)return{data:{path:c,id:d.Id,fullPath:d.Key},error:null};return{data:null,error:d}}catch(r){if(ql(r))return{data:null,error:r};throw r}})}upload(e,t,n){return Ql(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,n)})}uploadToSignedUrl(e,t,n,s){return Ql(this,void 0,void 0,function*(){const r=this._removeEmptyFolders(e),i=this._getFinalPath(r),o=new URL(this.url+`/object/upload/sign/${i}`);o.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:eu.upsert},s),i=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&n instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",n)):"undefined"!=typeof FormData&&n instanceof FormData?(e=n,e.append("cacheControl",t.cacheControl)):(e=n,i["cache-control"]=`max-age=${t.cacheControl}`,i["content-type"]=t.contentType);const a=yield this.fetch(o.toString(),{method:"PUT",body:e,headers:i}),c=yield a.json();if(a.ok)return{data:{path:r,fullPath:c.Key},error:null};return{data:null,error:c}}catch(a){if(ql(a))return{data:null,error:a};throw a}})}createSignedUploadUrl(e,t){return Ql(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const s=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(s["x-upsert"]="true");const r=yield Yl(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:s}),i=new URL(this.url+r.url),o=i.searchParams.get("token");if(!o)throw new Nl("No token returned by API");return{data:{signedUrl:i.toString(),path:e,token:o},error:null}}catch(n){if(ql(n))return{data:null,error:n};throw n}})}update(e,t,n){return Ql(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,n)})}move(e,t,n){return Ql(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(s){if(ql(s))return{data:null,error:s};throw s}})}copy(e,t,n){return Ql(this,void 0,void 0,function*(){try{return{data:{path:(yield Yl(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==n?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(s){if(ql(s))return{data:null,error:s};throw s}})}createSignedUrl(e,t,n){return Ql(this,void 0,void 0,function*(){try{let s=this._getFinalPath(e),r=yield Yl(this.fetch,`${this.url}/object/sign/${s}`,Object.assign({expiresIn:t},(null==n?void 0:n.transform)?{transform:n.transform}:{}),{headers:this.headers});const i=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return r={signedUrl:encodeURI(`${this.url}${r.signedURL}${i}`)},{data:r,error:null}}catch(s){if(ql(s))return{data:null,error:s};throw s}})}createSignedUrls(e,t,n){return Ql(this,void 0,void 0,function*(){try{const s=yield Yl(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),r=(null==n?void 0:n.download)?`&download=${!0===n.download?"":n.download}`:"";return{data:s.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${r}`):null})),error:null}}catch(s){if(ql(s))return{data:null,error:s};throw s}})}download(e,t){return Ql(this,void 0,void 0,function*(){const n=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",s=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),r=s?`?${s}`:"";try{const t=this._getFinalPath(e),s=yield Gl(this.fetch,`${this.url}/${n}/${t}${r}`,{headers:this.headers,noResolveJson:!0});return{data:yield s.blob(),error:null}}catch(i){if(ql(i))return{data:null,error:i};throw i}})}info(e){return Ql(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield Gl(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:Wl(e),error:null}}catch(n){if(ql(n))return{data:null,error:n};throw n}})}exists(e){return Ql(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,n,s){return Hl(this,void 0,void 0,function*(){return Kl(e,"HEAD",t,Object.assign(Object.assign({},n),{noResolveJson:!0}),s)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ql(n)&&n instanceof Fl){const e=n.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,t){const n=this._getFinalPath(e),s=[],r=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==r&&s.push(r);const i=void 0!==(null==t?void 0:t.transform)?"render/image":"object",o=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==o&&s.push(o);let a=s.join("&");return""!==a&&(a=`?${a}`),{data:{publicUrl:encodeURI(`${this.url}/${i}/public/${n}${a}`)}}}remove(e){return Ql(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(ql(t))return{data:null,error:t};throw t}})}list(e,t,n){return Ql(this,void 0,void 0,function*(){try{const s=Object.assign(Object.assign(Object.assign({},Zl),t),{prefix:e||""});return{data:yield Yl(this.fetch,`${this.url}/object/list/${this.bucketId}`,s,{headers:this.headers},n),error:null}}catch(s){if(ql(s))return{data:null,error:s};throw s}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const nu={"X-Client-Info":"storage-js/2.7.1"};var su=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};class ru{constructor(e,t={},n){this.url=e,this.headers=Object.assign(Object.assign({},nu),t),this.fetch=zl(n)}listBuckets(){return su(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ql(e))return{data:null,error:e};throw e}})}getBucket(e){return su(this,void 0,void 0,function*(){try{return{data:yield Gl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(ql(t))return{data:null,error:t};throw t}})}createBucket(e,t={public:!1}){return su(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ql(n))return{data:null,error:n};throw n}})}updateBucket(e,t){return su(this,void 0,void 0,function*(){try{const n=yield function(e,t,n,s,r){return Hl(this,void 0,void 0,function*(){return Kl(e,"PUT",t,s,r,n)})}(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers});return{data:n,error:null}}catch(n){if(ql(n))return{data:null,error:n};throw n}})}emptyBucket(e){return su(this,void 0,void 0,function*(){try{return{data:yield Yl(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(ql(t))return{data:null,error:t};throw t}})}deleteBucket(e){return su(this,void 0,void 0,function*(){try{return{data:yield Xl(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(ql(t))return{data:null,error:t};throw t}})}}class iu extends ru{constructor(e,t={},n){super(e,t,n)}from(e){return new tu(this.url,this.headers,e,this.fetch)}}let ou="";ou="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const au={headers:{"X-Client-Info":`supabase-js-${ou}/2.50.2`}},cu={schema:"public"},lu={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uu={};var du=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};const hu=(e,t,n)=>{const s=(e=>{let t;return t=e||("undefined"==typeof fetch?mc:fetch),(...e)=>t(...e)})(n),r="undefined"==typeof Headers?gc:Headers;return(n,i)=>du(void 0,void 0,void 0,function*(){var o;const a=null!==(o=yield t())&&void 0!==o?o:e;let c=new r(null==i?void 0:i.headers);return c.has("apikey")||c.set("apikey",e),c.has("Authorization")||c.set("Authorization",`Bearer ${a}`),s(n,Object.assign(Object.assign({},i),{headers:c}))})};var pu=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};const fu="2.70.0",mu=3e4,gu=9e4,yu={"X-Client-Info":`gotrue-js/${fu}`},_u="X-Supabase-Api-Version",vu={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},$u=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class bu extends Error{constructor(e,t,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=n}}function wu(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class Su extends bu{constructor(e,t,n){super(e,t,n),this.name="AuthApiError",this.status=t,this.code=n}}class ku extends bu{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class Tu extends bu{constructor(e,t,n,s){super(e,n,s),this.name=t,this.status=n}}class Eu extends Tu{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class xu extends Tu{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Cu extends Tu{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Iu extends Tu{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ru extends Tu{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ou extends Tu{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Au(e){return wu(e)&&"AuthRetryableFetchError"===e.name}class Pu extends Tu{constructor(e,t,n){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=n}}class Mu extends Tu{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Du="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),ju=" \t\n\r=".split(""),Lu=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<ju.length;t+=1)e[ju[t].charCodeAt(0)]=-2;for(let t=0;t<Du.length;t+=1)e[Du[t].charCodeAt(0)]=t;return e})();function Nu(e,t,n){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Du[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;n(Du[e]),t.queuedBits-=6}}function qu(e,t,n){const s=Lu[e];if(!(s>-1)){if(-2===s)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|s,t.queuedBits+=6;t.queuedBits>=8;)n(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function Uu(e){const t=[],n=e=>{t.push(String.fromCodePoint(e))},s={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=e=>{!function(e,t,n){if(0===t.utf8seq){if(e<=127)return void n(e);for(let n=1;n<6;n+=1)if(!(e>>7-n&1)){t.utf8seq=n;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&n(t.codepoint)}}(e,s,n)};for(let o=0;o<e.length;o+=1)qu(e.charCodeAt(o),r,i);return t.join("")}function Fu(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function Bu(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};for(let r=0;r<e.length;r+=1)qu(e.charCodeAt(r),n,s);return new Uint8Array(t)}function zu(e){const t=[];return function(e,t){for(let n=0;n<e.length;n+=1){let s=e.charCodeAt(n);if(s>55295&&s<=56319){const t=1024*(s-55296)&65535;s=65536+(e.charCodeAt(n+1)-56320&65535|t),n+=1}Fu(s,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Wu(e){const t=[],n={queue:0,queuedBits:0},s=e=>{t.push(e)};return e.forEach(e=>Nu(e,n,s)),Nu(null,n,s),t.join("")}const Hu=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Vu={tested:!1,writable:!1},Ju=()=>{if(!Hu())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Vu.tested)return Vu.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Vu.tested=!0,Vu.writable=!0}catch(t){Vu.tested=!0,Vu.writable=!1}return Vu.writable};const Ku=e=>{let t;return t=e||("undefined"==typeof fetch?(...e)=>i(async()=>{const{default:e}=await Promise.resolve().then(()=>vc);return{default:e}},void 0).then(({default:t})=>t(...e)):fetch),(...e)=>t(...e)},Gu=async(e,t,n)=>{await e.setItem(t,JSON.stringify(n))},Yu=async(e,t)=>{const n=await e.getItem(t);if(!n)return null;try{return JSON.parse(n)}catch(s){return n}},Xu=async(e,t)=>{await e.removeItem(t)};class Qu{constructor(){this.promise=new Qu.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Zu(e){const t=e.split(".");if(3!==t.length)throw new Mu("Invalid JWT structure");for(let n=0;n<t.length;n++)if(!$u.test(t[n]))throw new Mu("JWT not in base64url format");return{header:JSON.parse(Uu(t[0])),payload:JSON.parse(Uu(t[1])),signature:Bu(t[2]),raw:{header:t[0],payload:t[1]}}}function ed(e){return("0"+e.toString(16)).substr(-2)}async function td(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),n=await crypto.subtle.digest("SHA-256",t),s=new Uint8Array(n);return Array.from(s).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function nd(e,t,n=!1){const s=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let n="";for(let s=0;s<56;s++)n+=e.charAt(Math.floor(Math.random()*t));return n}return crypto.getRandomValues(e),Array.from(e,ed).join("")}();let r=s;n&&(r+="/PASSWORD_RECOVERY"),await Gu(e,`${t}-code-verifier`,r);const i=await td(s);return[i,s===i?"plain":"s256"]}Qu.promiseConstructor=Promise;const sd=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const rd=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function id(e){if(!rd.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}const od=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),ad=[502,503,504];async function cd(e){var t,n;if(!("object"==typeof(n=e)&&null!==n&&"status"in n&&"ok"in n&&"json"in n&&"function"==typeof n.json))throw new Ou(od(e),0);if(ad.includes(e.status))throw new Ou(od(e),e.status);let s,r;try{s=await e.json()}catch(o){throw new ku(od(o),o)}const i=function(e){const t=e.headers.get(_u);if(!t)return null;if(!t.match(sd))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(o){return null}}(e);if(i&&i.getTime()>=vu.timestamp&&"object"==typeof s&&s&&"string"==typeof s.code?r=s.code:"object"==typeof s&&s&&"string"==typeof s.error_code&&(r=s.error_code),r){if("weak_password"===r)throw new Pu(od(s),e.status,(null===(t=s.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===r)throw new Eu}else if("object"==typeof s&&s&&"object"==typeof s.weak_password&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Pu(od(s),e.status,s.weak_password.reasons);throw new Su(od(s),e.status||500,r)}async function ld(e,t,n,s){var r;const i=Object.assign({},null==s?void 0:s.headers);i[_u]||(i[_u]=vu.name),(null==s?void 0:s.jwt)&&(i.Authorization=`Bearer ${s.jwt}`);const o=null!==(r=null==s?void 0:s.query)&&void 0!==r?r:{};(null==s?void 0:s.redirectTo)&&(o.redirect_to=s.redirectTo);const a=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await async function(e,t,n,s,r,i){const o=((e,t,n,s)=>{const r={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),r.body=JSON.stringify(s),Object.assign(Object.assign({},r),n))})(t,s,r,i);let a;try{a=await e(n,Object.assign({},o))}catch(c){throw new Ou(od(c),0)}a.ok||await cd(a);if(null==s?void 0:s.noResolveJson)return a;try{return await a.json()}catch(c){await cd(c)}}(e,t,n+a,{headers:i,noResolveJson:null==s?void 0:s.noResolveJson},{},null==s?void 0:s.body);return(null==s?void 0:s.xform)?null==s?void 0:s.xform(c):{data:Object.assign({},c),error:null}}function ud(e){var t;let n=null;var s;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(n=Object.assign({},e),e.expires_at||(n.expires_at=(s=e.expires_in,Math.round(Date.now()/1e3)+s)));return{data:{session:n,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function dd(e){const t=ud(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function hd(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function pd(e){return{data:e,error:null}}function fd(e){const{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i}=e,o=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:n,hashed_token:s,redirect_to:r,verification_type:i},user:Object.assign({},o)},error:null}}function md(e){return e}const gd=["global","local","others"];class yd{constructor({url:e="",headers:t={},fetch:n}){this.url=e,this.headers=t,this.fetch=Ku(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,t=gd[0]){if(gd.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${gd.join(", ")}`);try{return await ld(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(wu(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,t={}){try{return await ld(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:hd})}catch(n){if(wu(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:t}=e,n=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&t.indexOf(s)<0&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(s=Object.getOwnPropertySymbols(e);r<s.length;r++)t.indexOf(s[r])<0&&Object.prototype.propertyIsEnumerable.call(e,s[r])&&(n[s[r]]=e[s[r]])}return n}(e,["options"]),s=Object.assign(Object.assign({},n),t);return"newEmail"in n&&(s.new_email=null==n?void 0:n.newEmail,delete s.newEmail),await ld(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:s,headers:this.headers,xform:fd,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(wu(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ld(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:hd})}catch(t){if(wu(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,n,s,r,i,o,a;try{const c={nextPage:null,lastPage:0,total:0},l=await ld(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(n=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==n?n:"",per_page:null!==(r=null===(s=null==e?void 0:e.perPage)||void 0===s?void 0:s.toString())&&void 0!==r?r:""},xform:md});if(l.error)throw l.error;const u=await l.json(),d=null!==(i=l.headers.get("x-total-count"))&&void 0!==i?i:0,h=null!==(a=null===(o=l.headers.get("link"))||void 0===o?void 0:o.split(","))&&void 0!==a?a:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),n=JSON.parse(e.split(";")[1].split("=")[1]);c[`${n}Page`]=t}),c.total=parseInt(d)),{data:Object.assign(Object.assign({},u),c),error:null}}catch(c){if(wu(c))return{data:{users:[]},error:c};throw c}}async getUserById(e){id(e);try{return await ld(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:hd})}catch(t){if(wu(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){id(e);try{return await ld(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:hd})}catch(n){if(wu(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,t=!1){id(e);try{return await ld(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:hd})}catch(n){if(wu(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){id(e.userId);try{const{data:t,error:n}=await ld(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:n}}catch(t){if(wu(t))return{data:null,error:t};throw t}}async _deleteFactor(e){id(e.userId),id(e.id);try{return{data:await ld(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(wu(t))return{data:null,error:t};throw t}}}const _d={getItem:e=>Ju()?globalThis.localStorage.getItem(e):null,setItem:(e,t)=>{Ju()&&globalThis.localStorage.setItem(e,t)},removeItem:e=>{Ju()&&globalThis.localStorage.removeItem(e)}};function vd(e={}){return{getItem:t=>e[t]||null,setItem:(t,n)=>{e[t]=n},removeItem:t=>{delete e[t]}}}const $d=!!(globalThis&&Ju()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class bd extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class wd extends bd{}async function Sd(e,t,n){const s=new globalThis.AbortController;return t>0&&setTimeout(()=>{s.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:s.signal},async s=>{if(!s){if(0===t)throw new wd(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if($d)try{await globalThis.navigator.locks.query()}catch(r){}return await n()}try{return await n()}finally{}}))}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const kd={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:yu,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Td(e,t,n){return await n()}class Ed{constructor(e){var t,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ed.nextInstanceID,Ed.nextInstanceID+=1,this.instanceID>0&&Hu();const s=Object.assign(Object.assign({},kd),e);if(this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.persistSession=s.persistSession,this.storageKey=s.storageKey,this.autoRefreshToken=s.autoRefreshToken,this.admin=new yd({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ku(s.fetch),this.lock=s.lock||Td,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,s.lock?this.lock=s.lock:Hu()&&(null===(t=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===t?void 0:t.locks)?this.lock=Sd:this.lock=Td,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?s.storage?this.storage=s.storage:Ju()?this.storage=_d:(this.memoryStorage={},this.storage=vd(this.memoryStorage)):(this.memoryStorage={},this.storage=vd(this.memoryStorage)),Hu()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(r){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${fu}) ${(new Date).toISOString()}`,...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{const t=function(e){const t={},n=new URL(e);if(n.hash&&"#"===n.hash[0])try{new URLSearchParams(n.hash.substring(1)).forEach((e,n)=>{t[n]=e})}catch(s){}return n.searchParams.forEach((e,n)=>{t[n]=e}),t}(window.location.href);let n="none";if(this._isImplicitGrantCallback(t)?n="implicit":await this._isPKCECallback(t)&&(n="pkce"),Hu()&&this.detectSessionInUrl&&"none"!==n){const{data:s,error:r}=await this._getSessionFromURL(t,n);if(r){if(this._debug("#_initialize()","error detecting session from URL",r),function(e){return wu(e)&&"AuthImplicitGrantRedirectError"===e.name}(r)){const t=null===(e=r.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:r}}return await this._removeSession(),{error:r}}const{session:i,redirectType:o}=s;return this._debug("#_initialize()","detected session in URL",i,"redirect type",o),await this._saveSession(i),setTimeout(async()=>{"recovery"===o?await this._notifyAllSubscribers("PASSWORD_RECOVERY",i):await this._notifyAllSubscribers("SIGNED_IN",i)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return wu(t)?{error:t}:{error:new ku("Unexpected error during initialization",t)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,n,s;try{const r=await ld(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(n=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==n?n:{},gotrue_meta_security:{captcha_token:null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken}},xform:ud}),{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(r){if(wu(r))return{data:{user:null,session:null},error:r};throw r}}async signUp(e){var t,n,s;try{let r;if("email"in e){const{email:n,password:s,options:i}=e;let o=null,a=null;"pkce"===this.flowType&&([o,a]=await nd(this.storage,this.storageKey)),r=await ld(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==i?void 0:i.emailRedirectTo,body:{email:n,password:s,data:null!==(t=null==i?void 0:i.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken},code_challenge:o,code_challenge_method:a},xform:ud})}else{if(!("phone"in e))throw new Cu("You must provide either an email or phone number and a password");{const{phone:t,password:i,options:o}=e;r=await ld(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:i,data:null!==(n=null==o?void 0:o.data)&&void 0!==n?n:{},channel:null!==(s=null==o?void 0:o.channel)&&void 0!==s?s:"sms",gotrue_meta_security:{captcha_token:null==o?void 0:o.captchaToken}},xform:ud})}}const{data:i,error:o}=r;if(o||!i)return{data:{user:null,session:null},error:o};const a=i.session,c=i.user;return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(r){if(wu(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithPassword(e){try{let t;if("email"in e){const{email:n,password:s,options:r}=e;t=await ld(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:dd})}else{if(!("phone"in e))throw new Cu("You must provide either an email or phone number and a password");{const{phone:n,password:s,options:r}=e;t=await ld(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:n,password:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},xform:dd})}}const{data:n,error:s}=t;return s?{data:{user:null,session:null},error:s}:n&&n.session&&n.user?(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:s}):{data:{user:null,session:null},error:new xu}}catch(t){if(wu(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOAuth(e){var t,n,s,r;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:null===(r=e.options)||void 0===r?void 0:r.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;if("solana"===t)return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}async signInWithSolana(e){var t,n,s,r,i,o,a,c,l,u,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let y;if(Hu())if("object"==typeof h)y=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");y=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");y=h}const _=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in y&&y.signIn){const e=await y.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in y&&"function"==typeof y.signMessage&&"publicKey"in y&&"object"==typeof y&&y.publicKey&&"toBase58"in y.publicKey&&"function"==typeof y.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,y.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${null!==(s=null===(n=null==g?void 0:g.signInWithSolana)||void 0===n?void 0:n.issuedAt)&&void 0!==s?s:(new Date).toISOString()}`,...(null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await y.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:n}=await ld(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Wu(f)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:ud});if(n)throw n;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign({},t),error:n}):{data:{user:null,session:null},error:new xu}}catch(m){if(wu(m))return{data:{user:null,session:null},error:m};throw m}}async _exchangeCodeForSession(e){const t=await Yu(this.storage,`${this.storageKey}-code-verifier`),[n,s]=(null!=t?t:"").split("/");try{const{data:t,error:r}=await ld(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:ud});if(await Xu(this.storage,`${this.storageKey}-code-verifier`),r)throw r;return t&&t.session&&t.user?(t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),{data:Object.assign(Object.assign({},t),{redirectType:null!=s?s:null}),error:r}):{data:{user:null,session:null,redirectType:null},error:new xu}}catch(r){if(wu(r))return{data:{user:null,session:null,redirectType:null},error:r};throw r}}async signInWithIdToken(e){try{const{options:t,provider:n,token:s,access_token:r,nonce:i}=e,o=await ld(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:s,access_token:r,nonce:i,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:ud}),{data:a,error:c}=o;return c?{data:{user:null,session:null},error:c}:a&&a.session&&a.user?(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:a,error:c}):{data:{user:null,session:null},error:new xu}}catch(t){if(wu(t))return{data:{user:null,session:null},error:t};throw t}}async signInWithOtp(e){var t,n,s,r,i;try{if("email"in e){const{email:s,options:r}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await nd(this.storage,this.storageKey));const{error:a}=await ld(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:s,data:null!==(t=null==r?void 0:r.data)&&void 0!==t?t:{},create_user:null===(n=null==r?void 0:r.shouldCreateUser)||void 0===n||n,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},code_challenge:i,code_challenge_method:o},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:a}}if("phone"in e){const{phone:t,options:n}=e,{data:o,error:a}=await ld(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(s=null==n?void 0:n.data)&&void 0!==s?s:{},create_user:null===(r=null==n?void 0:n.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==n?void 0:n.captchaToken},channel:null!==(i=null==n?void 0:n.channel)&&void 0!==i?i:"sms"}});return{data:{user:null,session:null,messageId:null==o?void 0:o.message_id},error:a}}throw new Cu("You must provide either an email or phone number.")}catch(o){if(wu(o))return{data:{user:null,session:null},error:o};throw o}}async verifyOtp(e){var t,n;try{let s,r;"options"in e&&(s=null===(t=e.options)||void 0===t?void 0:t.redirectTo,r=null===(n=e.options)||void 0===n?void 0:n.captchaToken);const{data:i,error:o}=await ld(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:r}}),redirectTo:s,xform:ud});if(o)throw o;if(!i)throw new Error("An error occurred on token verification.");const a=i.session,c=i.user;return(null==a?void 0:a.access_token)&&(await this._saveSession(a),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",a)),{data:{user:c,session:a},error:null}}catch(s){if(wu(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithSSO(e){var t,n,s;try{let r=null,i=null;return"pkce"===this.flowType&&([r,i]=await nd(this.storage,this.storageKey)),await ld(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==n?n:void 0}),(null===(s=null==e?void 0:e.options)||void 0===s?void 0:s.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:r,code_challenge_method:i}),headers:this.headers,xform:pd})}catch(r){if(wu(r))return{data:null,error:r};throw r}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:n}=e;if(n)throw n;if(!t)throw new Eu;const{error:s}=await ld(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return{data:{user:null,session:null},error:s}})}catch(e){if(wu(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:n,type:s,options:r}=e,{error:i}=await ld(this.fetch,"POST",t,{headers:this.headers,body:{email:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}},redirectTo:null==r?void 0:r.emailRedirectTo});return{data:{user:null,session:null},error:i}}if("phone"in e){const{phone:n,type:s,options:r}=e,{data:i,error:o}=await ld(this.fetch,"POST",t,{headers:this.headers,body:{phone:n,type:s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken}}});return{data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o}}throw new Cu("You must provide either an email or phone number and a type")}catch(t){if(wu(t))return{data:{user:null,session:null},error:t};throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),n=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await n}catch(e){}})()),n}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Yu(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=!!e.expires_at&&1e3*e.expires_at-Date.now()<gu;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let t=this.suppressGetSessionWarning;e=new Proxy(e,{get:(e,n,s)=>(t||"user"!==n||(t=!0,this.suppressGetSessionWarning=!0),Reflect.get(e,n,s))})}return{data:{session:e},error:null}}const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{session:null},error:r}:{data:{session:s},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await ld(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:hd}):await this._useSession(async e=>{var t,n,s;const{data:r,error:i}=e;if(i)throw i;return(null===(t=r.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ld(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0,xform:hd}):{data:{user:null},error:new Eu}})}catch(t){if(wu(t))return function(e){return wu(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Xu(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:t};throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async n=>{const{data:s,error:r}=n;if(r)throw r;if(!s.session)throw new Eu;const i=s.session;let o=null,a=null;"pkce"===this.flowType&&null!=e.email&&([o,a]=await nd(this.storage,this.storageKey));const{data:c,error:l}=await ld(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:o,code_challenge_method:a}),jwt:i.access_token,xform:hd});if(l)throw l;return i.user=c.user,await this._saveSession(i),await this._notifyAllSubscribers("USER_UPDATED",i),{data:{user:i.user},error:null}})}catch(n){if(wu(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Eu;const t=Date.now()/1e3;let n=t,s=!0,r=null;const{payload:i}=Zu(e.access_token);if(i.exp&&(n=i.exp,s=n<=t),s){const{session:t,error:n}=await this._callRefreshToken(e.refresh_token);if(n)return{data:{user:null,session:null},error:n};if(!t)return{data:{user:null,session:null},error:null};r=t}else{const{data:s,error:i}=await this._getUser(e.access_token);if(i)throw i;r={access_token:e.access_token,refresh_token:e.refresh_token,user:s.user,token_type:"bearer",expires_in:n-t,expires_at:n},await this._saveSession(r),await this._notifyAllSubscribers("SIGNED_IN",r)}return{data:{user:r.user,session:r},error:null}}catch(t){if(wu(t))return{data:{session:null,user:null},error:t};throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var n;if(!e){const{data:s,error:r}=t;if(r)throw r;e=null!==(n=s.session)&&void 0!==n?n:void 0}if(!(null==e?void 0:e.refresh_token))throw new Eu;const{session:s,error:r}=await this._callRefreshToken(e.refresh_token);return r?{data:{user:null,session:null},error:r}:s?{data:{user:s.user,session:s},error:null}:{data:{user:null,session:null},error:null}})}catch(t){if(wu(t))return{data:{user:null,session:null},error:t};throw t}}async _getSessionFromURL(e,t){try{if(!Hu())throw new Iu("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Iu(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Ru("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new Iu("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Ru("No code detected.");const{data:t,error:n}=await this._exchangeCodeForSession(e.code);if(n)throw n;const s=new URL(window.location.href);return s.searchParams.delete("code"),window.history.replaceState(window.history.state,"",s.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:s,access_token:r,refresh_token:i,expires_in:o,expires_at:a,token_type:c}=e;if(!(r&&o&&i&&c))throw new Iu("No session defined in URL");const l=Math.round(Date.now()/1e3),u=parseInt(o);let d=l+u;a&&(d=parseInt(a));const{data:h,error:p}=await this._getUser(r);if(p)throw p;const f={provider_token:n,provider_refresh_token:s,access_token:r,expires_in:u,expires_at:d,refresh_token:i,token_type:c,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:f,redirectType:e.type},error:null}}catch(n){if(wu(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Yu(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{error:r};const i=null===(n=s.session)||void 0===n?void 0:n.access_token;if(i){const{error:t}=await this.admin.signOut(i,e);if(t&&(!function(e){return wu(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return{error:t}}return"others"!==e&&(await this._removeSession(),await Xu(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const t="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)}),n={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,n),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async t=>{var n,s;try{const{data:{session:s},error:r}=t;if(r)throw r;await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",s)),this._debug("INITIAL_SESSION","callback id",e,"session",s)}catch(r){await(null===(s=this.stateChangeEmitters.get(e))||void 0===s?void 0:s.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",r)}})}async resetPasswordForEmail(e,t={}){let n=null,s=null;"pkce"===this.flowType&&([n,s]=await nd(this.storage,this.storageKey,!0));try{return await ld(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:s,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(r){if(wu(r))return{data:null,error:r};throw r}}async getUserIdentities(){var e;try{const{data:t,error:n}=await this.getUser();if(n)throw n;return{data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null}}catch(t){if(wu(t))return{data:null,error:t};throw t}}async linkIdentity(e){var t;try{const{data:n,error:s}=await this._useSession(async t=>{var n,s,r,i,o;const{data:a,error:c}=t;if(c)throw c;const l=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(n=e.options)||void 0===n?void 0:n.redirectTo,scopes:null===(s=e.options)||void 0===s?void 0:s.scopes,queryParams:null===(r=e.options)||void 0===r?void 0:r.queryParams,skipBrowserRedirect:!0});return await ld(this.fetch,"GET",l,{headers:this.headers,jwt:null!==(o=null===(i=a.session)||void 0===i?void 0:i.access_token)&&void 0!==o?o:void 0})});if(s)throw s;return Hu()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==n?void 0:n.url),{data:{provider:e.provider,url:null==n?void 0:n.url},error:null}}catch(n){if(wu(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:i}=t;if(i)throw i;return await ld(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(s=null===(n=r.session)||void 0===n?void 0:n.access_token)&&void 0!==s?s:void 0})})}catch(t){if(wu(t))return{data:null,error:t};throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const r=Date.now();return await(n=async n=>(n>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,n-1)),this._debug(t,"refreshing attempt",n),await ld(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:ud})),s=(e,t)=>{const n=200*Math.pow(2,e);return t&&Au(t)&&Date.now()+n-r<mu},new Promise((e,t)=>{(async()=>{for(let i=0;i<1/0;i++)try{const t=await n(i);if(!s(i,null,t))return void e(t)}catch(r){if(!s(i,r))return void t(r)}})()}))}catch(r){if(this._debug(t,"error",r),wu(r))return{data:{session:null,user:null},error:r};throw r}finally{this._debug(t,"end")}var n,s}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",n),Hu()&&!t.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const t="#_recoverAndRefresh()";this._debug(t,"begin");try{const n=await Yu(this.storage,this.storageKey);if(this._debug(t,"session from storage",n),!this._isValidSession(n))return this._debug(t,"session is not valid"),void(null!==n&&await this._removeSession());const s=1e3*(null!==(e=n.expires_at)&&void 0!==e?e:1/0)-Date.now()<gu;if(this._debug(t,`session has${s?"":" not"} expired with margin of 90000s`),s){if(this.autoRefreshToken&&n.refresh_token){const{error:e}=await this._callRefreshToken(n.refresh_token);e&&(Au(e)||(this._debug(t,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){return void this._debug(t,"error",n)}finally{this._debug(t,"end")}}async _callRefreshToken(e){var t,n;if(!e)throw new Eu;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const s=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{this.refreshingDeferred=new Qu;const{data:t,error:n}=await this._refreshAccessToken(e);if(n)throw n;if(!t.session)throw new Eu;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const s={session:t.session,error:null};return this.refreshingDeferred.resolve(s),s}catch(r){if(this._debug(s,"error",r),wu(r)){const e={session:null,error:r};return Au(r)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(n=this.refreshingDeferred)||void 0===n||n.reject(r),r}finally{this.refreshingDeferred=null,this._debug(s,"end")}}async _notifyAllSubscribers(e,t,n=!0){const s=`#_notifyAllSubscribers(${e})`;this._debug(s,"begin",t,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:t});const s=[],r=Array.from(this.stateChangeEmitters.values()).map(async n=>{try{await n.callback(e,t)}catch(r){s.push(r)}});if(await Promise.all(r),s.length>0){for(let e=0;e<s.length;e+=1);throw s[0]}}finally{this._debug(s,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Gu(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Xu(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Hu()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),mu);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:n}}=e;if(!n||!n.refresh_token||!n.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const s=Math.floor((1e3*n.expires_at-t)/mu);this._debug("#_autoRefreshTokenTick()",`access token expires in ${s} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),s<=3&&await this._callRefreshToken(n.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof bd))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Hu()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,n){const s=[`provider=${encodeURIComponent(t)}`];if((null==n?void 0:n.redirectTo)&&s.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),(null==n?void 0:n.scopes)&&s.push(`scopes=${encodeURIComponent(n.scopes)}`),"pkce"===this.flowType){const[e,t]=await nd(this.storage,this.storageKey),n=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});s.push(n.toString())}if(null==n?void 0:n.queryParams){const e=new URLSearchParams(n.queryParams);s.push(e.toString())}return(null==n?void 0:n.skipBrowserRedirect)&&s.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${s.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await ld(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(wu(t))return{data:null,error:t};throw t}}async _enroll(e){try{return await this._useSession(async t=>{var n,s;const{data:r,error:i}=t;if(i)return{data:null,error:i};const o=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:{issuer:e.issuer}),{data:a,error:c}=await ld(this.fetch,"POST",`${this.url}/factors`,{body:o,headers:this.headers,jwt:null===(n=null==r?void 0:r.session)||void 0===n?void 0:n.access_token});return c?{data:null,error:c}:("totp"===e.factorType&&(null===(s=null==a?void 0:a.totp)||void 0===s?void 0:s.qr_code)&&(a.totp.qr_code=`data:image/svg+xml;utf-8,${a.totp.qr_code}`),{data:a,error:null})})}catch(t){if(wu(t))return{data:null,error:t};throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;if(r)return{data:null,error:r};const{data:i,error:o}=await ld(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token});return o?{data:null,error:o}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),{data:i,error:o})})}catch(t){if(wu(t))return{data:null,error:t};throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var n;const{data:s,error:r}=t;return r?{data:null,error:r}:await ld(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:null===(n=null==s?void 0:s.session)||void 0===n?void 0:n.access_token})})}catch(t){if(wu(t))return{data:null,error:t};throw t}})}async _challengeAndVerify(e){const{data:t,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){const{data:{user:e},error:t}=await this.getUser();if(t)return{data:null,error:t};const n=(null==e?void 0:e.factors)||[],s=n.filter(e=>"totp"===e.factor_type&&"verified"===e.status),r=n.filter(e=>"phone"===e.factor_type&&"verified"===e.status);return{data:{all:n,totp:s,phone:r},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var t,n;const{data:{session:s},error:r}=e;if(r)return{data:null,error:r};if(!s)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:i}=Zu(s.access_token);let o=null;i.aal&&(o=i.aal);let a=o;(null!==(n=null===(t=s.user.factors)||void 0===t?void 0:t.filter(e=>"verified"===e.status))&&void 0!==n?n:[]).length>0&&(a="aal2");return{data:{currentLevel:o,nextLevel:a,currentAuthenticationMethods:i.amr||[]},error:null}}))}async fetchJwk(e,t={keys:[]}){let n=t.keys.find(t=>t.kid===e);if(n)return n;if(n=this.jwks.keys.find(t=>t.kid===e),n&&this.jwks_cached_at+6e5>Date.now())return n;const{data:s,error:r}=await ld(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(r)throw r;if(!s.keys||0===s.keys.length)throw new Mu("JWKS is empty");if(this.jwks=s,this.jwks_cached_at=Date.now(),n=s.keys.find(t=>t.kid===e),!n)throw new Mu("No matching signing key found in JWKS");return n}async getClaims(e,t={keys:[]}){try{let n=e;if(!n){const{data:e,error:t}=await this.getSession();if(t||!e.session)return{data:null,error:t};n=e.session.access_token}const{header:s,payload:r,signature:i,raw:{header:o,payload:a}}=Zu(n);if(function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(r.exp),!s.kid||"HS256"===s.alg||!("crypto"in globalThis)||!("subtle"in globalThis.crypto)){const{error:e}=await this.getUser(n);if(e)throw e;return{data:{claims:r,header:s,signature:i},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(s.alg),l=await this.fetchJwk(s.kid,t),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,i,zu(`${o}.${a}`))))throw new Mu("Invalid JWT signature");return{data:{claims:r,header:s,signature:i},error:null}}catch(n){if(wu(n))return{data:null,error:n};throw n}}}Ed.nextInstanceID=0;const xd=Ed;class Cd extends xd{constructor(e){super(e)}}var Id=function(e,t,n,s){return new(n||(n=Promise))(function(r,i){function o(e){try{c(s.next(e))}catch(t){i(t)}}function a(e){try{c(s.throw(e))}catch(t){i(t)}}function c(e){var t;e.done?r(e.value):(t=e.value,t instanceof n?t:new n(function(e){e(t)})).then(o,a)}c((s=s.apply(e,t||[])).next())})};class Rd{constructor(e,t,n){var s,r,i;if(this.supabaseUrl=e,this.supabaseKey=t,!e)throw new Error("supabaseUrl is required.");if(!t)throw new Error("supabaseKey is required.");const o=(a=e).endsWith("/")?a:a+"/";var a;const c=new URL(o);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const l=`sb-${c.hostname.split(".")[0]}-auth-token`,u=function(e,t){var n,s;const{db:r,auth:i,realtime:o,global:a}=e,{db:c,auth:l,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},l),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},d),a),{headers:Object.assign(Object.assign({},null!==(n=null==d?void 0:d.headers)&&void 0!==n?n:{}),null!==(s=null==a?void 0:a.headers)&&void 0!==s?s:{})}),accessToken:()=>pu(this,void 0,void 0,function*(){return""})};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=n?n:{},{db:cu,realtime:uu,auth:Object.assign(Object.assign({},lu),{storageKey:l}),global:au});this.storageKey=null!==(s=u.auth.storageKey)&&void 0!==s?s:"",this.headers=null!==(r=u.global.headers)&&void 0!==r?r:{},u.accessToken?(this.accessToken=u.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(i=u.auth)&&void 0!==i?i:{},this.headers,u.global.fetch),this.fetch=hu(t,this._getAccessToken.bind(this),u.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},u.realtime)),this.rest=new Gc(new URL("rest/v1",c).href,{headers:this.headers,schema:u.db.schema,fetch:this.fetch}),u.accessToken||this._listenForAuthEvents()}get functions(){return new rc(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new iu(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},n={}){return this.rest.rpc(e,t,n)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,t;return Id(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return null!==(t=null===(e=n.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,storageKey:r,flowType:i,lock:o,debug:a},c,l){const u={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Cd({url:this.authUrl.href,headers:Object.assign(Object.assign({},u),c),storageKey:r,autoRefreshToken:e,persistSession:t,detectSessionInUrl:n,storage:s,flowType:i,lock:o,debug:a,fetch:l,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new Ll(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,n){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===n?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):this.changedAccessToken=n}}const Od=(e,t,n)=>new Rd(e,t,n),Ad=Object.prototype.toString;function Pd(e){switch(Ad.call(e)){case"[object Error]":case"[object Exception]":case"[object DOMException]":return!0;default:return Wd(e,Error)}}function Md(e,t){return Ad.call(e)===`[object ${t}]`}function Dd(e){return Md(e,"ErrorEvent")}function jd(e){return Md(e,"DOMError")}function Ld(e){return Md(e,"String")}function Nd(e){return"object"==typeof e&&null!==e&&"__sentry_template_string__"in e&&"__sentry_template_values__"in e}function qd(e){return null===e||Nd(e)||"object"!=typeof e&&"function"!=typeof e}function Ud(e){return Md(e,"Object")}function Fd(e){return"undefined"!=typeof Event&&Wd(e,Event)}function Bd(e){return Boolean(e&&e.then&&"function"==typeof e.then)}function zd(e){return"number"==typeof e&&e!=e}function Wd(e,t){try{return e instanceof t}catch(n){return!1}}function Hd(e){return!("object"!=typeof e||null===e||!e.__isVue&&!e._isVue)}function Vd(e,t=0){return"string"!=typeof e||0===t||e.length<=t?e:`${e.slice(0,t)}...`}function Jd(e,t){if(!Array.isArray(e))return"";const n=[];for(let r=0;r<e.length;r++){const t=e[r];try{Hd(t)?n.push("[VueViewModel]"):n.push(String(t))}catch(s){n.push("[value cannot be serialized]")}}return n.join(t)}function Kd(e,t,n=!1){return!!Ld(e)&&(Md(t,"RegExp")?t.test(e):!!Ld(t)&&(n?e===t:e.includes(t)))}function Gd(e,t=[],n=!1){return t.some(t=>Kd(e,t,n))}function Yd(e,t,n=250,s,r,i,o){if(!(i.exception&&i.exception.values&&o&&Wd(o.originalException,Error)))return;const a=i.exception.values.length>0?i.exception.values[i.exception.values.length-1]:void 0;var c,l;a&&(i.exception.values=(c=Xd(e,t,r,o.originalException,s,i.exception.values,a,0),l=n,c.map(e=>(e.value&&(e.value=Vd(e.value,l)),e))))}function Xd(e,t,n,s,r,i,o,a){if(i.length>=n+1)return i;let c=[...i];if(Wd(s[r],Error)){Qd(o,a);const i=e(t,s[r]),l=c.length;Zd(i,r,l,a),c=Xd(e,t,n,s[r],r,[i,...c],i,l)}return Array.isArray(s.errors)&&s.errors.forEach((s,i)=>{if(Wd(s,Error)){Qd(o,a);const l=e(t,s),u=c.length;Zd(l,`errors[${i}]`,u,a),c=Xd(e,t,n,s,r,[l,...c],l,u)}}),c}function Qd(e,t){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,..."AggregateError"===e.type&&{is_exception_group:!0},exception_id:t}}function Zd(e,t,n,s){e.mechanism=e.mechanism||{type:"generic",handled:!0},e.mechanism={...e.mechanism,type:"chained",source:t,exception_id:n,parent_id:s}}function eh(e){return e&&e.Math==Math?e:void 0}const th="object"==typeof globalThis&&eh(globalThis)||"object"==typeof window&&eh(window)||"object"==typeof self&&eh(self)||"object"==typeof global&&eh(global)||function(){return this}()||{};function nh(){return th}function sh(e,t,n){const s=n||th,r=s.__SENTRY__=s.__SENTRY__||{};return r[e]||(r[e]=t())}const rh=nh();function ih(e,t={}){if(!e)return"<unknown>";try{let n=e;const s=5,r=[];let i=0,o=0;const a=" > ",c=a.length;let l;const u=Array.isArray(t)?t:t.keyAttrs,d=!Array.isArray(t)&&t.maxStringLength||80;for(;n&&i++<s&&(l=oh(n,u),!("html"===l||i>1&&o+r.length*c+l.length>=d));)r.push(l),o+=l.length,n=n.parentNode;return r.reverse().join(a)}catch(n){return"<unknown>"}}function oh(e,t){const n=e,s=[];let r,i,o,a,c;if(!n||!n.tagName)return"";if(rh.HTMLElement&&n instanceof HTMLElement&&n.dataset&&n.dataset.sentryComponent)return n.dataset.sentryComponent;s.push(n.tagName.toLowerCase());const l=t&&t.length?t.filter(e=>n.getAttribute(e)).map(e=>[e,n.getAttribute(e)]):null;if(l&&l.length)l.forEach(e=>{s.push(`[${e[0]}="${e[1]}"]`)});else if(n.id&&s.push(`#${n.id}`),r=n.className,r&&Ld(r))for(i=r.split(/\s+/),c=0;c<i.length;c++)s.push(`.${i[c]}`);const u=["aria-label","type","name","title","alt"];for(c=0;c<u.length;c++)o=u[c],a=n.getAttribute(o),a&&s.push(`[${o}="${a}"]`);return s.join("")}function ah(e){if(!rh.HTMLElement)return null;let t=e;for(let n=0;n<5;n++){if(!t)return null;if(t instanceof HTMLElement&&t.dataset.sentryComponent)return t.dataset.sentryComponent;t=t.parentNode}return null}const ch="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,lh=["debug","info","warn","error","log","assert","trace"],uh={};function dh(e){if(!("console"in th))return e();const t=th.console,n={},s=Object.keys(uh);s.forEach(e=>{const s=uh[e];n[e]=t[e],t[e]=s});try{return e()}finally{s.forEach(e=>{t[e]=n[e]})}}const hh=function(){let e=!1;const t={enable:()=>{e=!0},disable:()=>{e=!1},isEnabled:()=>e};return ch?lh.forEach(n=>{t[n]=(...t)=>{e&&dh(()=>{th.console[n](`Sentry Logger [${n}]:`,...t)})}}):lh.forEach(e=>{t[e]=()=>{}}),t}(),ph=/^(?:(\w+):)\/\/(?:(\w+)(?::(\w+)?)?@)([\w.-]+)(?::(\d+))?\/(.+)/;function fh(e,t=!1){const{host:n,path:s,pass:r,port:i,projectId:o,protocol:a,publicKey:c}=e;return`${a}://${c}${t&&r?`:${r}`:""}@${n}${i?`:${i}`:""}/${s?`${s}/`:s}${o}`}function mh(e){return{protocol:e.protocol,publicKey:e.publicKey||"",pass:e.pass||"",host:e.host,port:e.port||"",path:e.path||"",projectId:e.projectId}}function gh(e){const t="string"==typeof e?function(e){const t=ph.exec(e);if(!t)return void dh(()=>{});const[n,s,r="",i,o="",a]=t.slice(1);let c="",l=a;const u=l.split("/");if(u.length>1&&(c=u.slice(0,-1).join("/"),l=u.pop()),l){const e=l.match(/^\d+/);e&&(l=e[0])}return mh({host:i,pass:r,path:c,projectId:l,port:o,protocol:n,publicKey:s})}(e):mh(e);if(t&&function(e){if(!ch)return!0;const{port:t,projectId:n,protocol:s}=e;return!(["protocol","publicKey","host","projectId"].find(t=>!e[t]&&(hh.error(`Invalid Sentry Dsn: ${t} missing`),!0))||(n.match(/^\d+$/)?function(e){return"http"===e||"https"===e}(s)?t&&isNaN(parseInt(t,10))&&(hh.error(`Invalid Sentry Dsn: Invalid port ${t}`),1):(hh.error(`Invalid Sentry Dsn: Invalid protocol ${s}`),1):(hh.error(`Invalid Sentry Dsn: Invalid projectId ${n}`),1)))}(t))return t}class yh extends Error{constructor(e,t="warn"){super(e),this.message=e,this.name=new.target.prototype.constructor.name,Object.setPrototypeOf(this,new.target.prototype),this.logLevel=t}}function _h(e,t,n){if(!(t in e))return;const s=e[t],r=n(s);"function"==typeof r&&$h(r,s),e[t]=r}function vh(e,t,n){try{Object.defineProperty(e,t,{value:n,writable:!0,configurable:!0})}catch(s){ch&&hh.log(`Failed to add non-enumerable property "${t}" to object`,e)}}function $h(e,t){try{const n=t.prototype||{};e.prototype=t.prototype=n,vh(e,"__sentry_original__",t)}catch(n){}}function bh(e){return e.__sentry_original__}function wh(e){if(Pd(e))return{message:e.message,name:e.name,stack:e.stack,...kh(e)};if(Fd(e)){const t={type:e.type,target:Sh(e.target),currentTarget:Sh(e.currentTarget),...kh(e)};return"undefined"!=typeof CustomEvent&&Wd(e,CustomEvent)&&(t.detail=e.detail),t}return e}function Sh(e){try{return t=e,"undefined"!=typeof Element&&Wd(t,Element)?ih(e):Object.prototype.toString.call(e)}catch(n){return"<unknown>"}var t}function kh(e){if("object"==typeof e&&null!==e){const t={};for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}return{}}function Th(e){return Eh(e,new Map)}function Eh(e,t){if(function(e){if(!Ud(e))return!1;try{const t=Object.getPrototypeOf(e).constructor.name;return!t||"Object"===t}catch(t){return!0}}(e)){const n=t.get(e);if(void 0!==n)return n;const s={};t.set(e,s);for(const r of Object.keys(e))void 0!==e[r]&&(s[r]=Eh(e[r],t));return s}if(Array.isArray(e)){const n=t.get(e);if(void 0!==n)return n;const s=[];return t.set(e,s),e.forEach(e=>{s.push(Eh(e,t))}),s}return e}const xh=/\(error: (.*)\)/,Ch=/captureMessage|captureException/;function Ih(...e){const t=e.sort((e,t)=>e[0]-t[0]).map(e=>e[1]);return(e,n=0)=>{const s=[],r=e.split("\n");for(let i=n;i<r.length;i++){const e=r[i];if(e.length>1024)continue;const n=xh.test(e)?e.replace(xh,"$1"):e;if(!n.match(/\S*Error: /)){for(const e of t){const t=e(n);if(t){s.push(t);break}}if(s.length>=50)break}}return function(e){if(!e.length)return[];const t=Array.from(e);/sentryWrapped/.test(t[t.length-1].function||"")&&t.pop();t.reverse(),Ch.test(t[t.length-1].function||"")&&(t.pop(),Ch.test(t[t.length-1].function||"")&&t.pop());return t.slice(0,50).map(e=>({...e,filename:e.filename||t[t.length-1].filename,function:e.function||"?"}))}(s)}}const Rh="<anonymous>";function Oh(e){try{return e&&"function"==typeof e&&e.name||Rh}catch(t){return Rh}}const Ah={},Ph={};function Mh(e,t){Ah[e]=Ah[e]||[],Ah[e].push(t)}function Dh(e,t){Ph[e]||(t(),Ph[e]=!0)}function jh(e,t){const n=e&&Ah[e];if(n)for(const r of n)try{r(t)}catch(s){ch&&hh.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Oh(r)}\nError:`,s)}}function Lh(){"console"in th&&lh.forEach(function(e){e in th.console&&_h(th.console,e,function(t){return uh[e]=t,function(...t){jh("console",{args:t,level:e});const n=uh[e];n&&n.apply(th.console,t)}})})}function Nh(){const e=th,t=e.crypto||e.msCrypto;let n=()=>16*Math.random();try{if(t&&t.randomUUID)return t.randomUUID().replace(/-/g,"");t&&t.getRandomValues&&(n=()=>{const e=new Uint8Array(1);return t.getRandomValues(e),e[0]})}catch(s){}return"10000000100040008000100000000000".replace(/[018]/g,e=>(e^(15&n())>>e/4).toString(16))}function qh(e){return e.exception&&e.exception.values?e.exception.values[0]:void 0}function Uh(e){const{message:t,event_id:n}=e;if(t)return t;const s=qh(e);return s?s.type&&s.value?`${s.type}: ${s.value}`:s.type||s.value||n||"<unknown>":n||"<unknown>"}function Fh(e,t,n){const s=e.exception=e.exception||{},r=s.values=s.values||[],i=r[0]=r[0]||{};i.value||(i.value=t||""),i.type||(i.type="Error")}function Bh(e,t){const n=qh(e);if(!n)return;const s=n.mechanism;if(n.mechanism={type:"generic",handled:!0,...s,...t},t&&"data"in t){const e={...s&&s.data,...t.data};n.mechanism.data=e}}function zh(e){if(e&&e.__sentry_captured__)return!0;try{vh(e,"__sentry_captured__",!0)}catch(t){}return!1}function Wh(e){return Array.isArray(e)?e:[e]}const Hh=th;let Vh,Jh,Kh;function Gh(e){Mh("dom",e),Dh("dom",Yh)}function Yh(){if(!Hh.document)return;const e=jh.bind(null,"dom"),t=Xh(e,!0);Hh.document.addEventListener("click",t,!1),Hh.document.addEventListener("keypress",t,!1),["EventTarget","Node"].forEach(t=>{const n=Hh[t]&&Hh[t].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(_h(n,"addEventListener",function(t){return function(n,s,r){if("click"===n||"keypress"==n)try{const s=this,i=s.__sentry_instrumentation_handlers__=s.__sentry_instrumentation_handlers__||{},o=i[n]=i[n]||{refCount:0};if(!o.handler){const s=Xh(e);o.handler=s,t.call(this,n,s,r)}o.refCount++}catch(i){}return t.call(this,n,s,r)}}),_h(n,"removeEventListener",function(e){return function(t,n,s){if("click"===t||"keypress"==t)try{const n=this,r=n.__sentry_instrumentation_handlers__||{},i=r[t];i&&(i.refCount--,i.refCount<=0&&(e.call(this,t,i.handler,s),i.handler=void 0,delete r[t]),0===Object.keys(r).length&&delete n.__sentry_instrumentation_handlers__)}catch(r){}return e.call(this,t,n,s)}}))})}function Xh(e,t=!1){return n=>{if(!n||n._sentryCaptured)return;const s=function(e){try{return e.target}catch(t){return null}}(n);if(function(e,t){return"keypress"===e&&(!t||!t.tagName||"INPUT"!==t.tagName&&"TEXTAREA"!==t.tagName&&!t.isContentEditable)}(n.type,s))return;vh(n,"_sentryCaptured",!0),s&&!s._sentryId&&vh(s,"_sentryId",Nh());const r="keypress"===n.type?"input":n.type;if(!function(e){if(e.type!==Jh)return!1;try{if(!e.target||e.target._sentryId!==Kh)return!1}catch(t){}return!0}(n)){e({event:n,name:r,global:t}),Jh=n.type,Kh=s?s._sentryId:void 0}clearTimeout(Vh),Vh=Hh.setTimeout(()=>{Kh=void 0,Jh=void 0},1e3)}}const Qh=nh();function Zh(){if(!("fetch"in Qh))return!1;try{return new Headers,new Request("http://www.example.com"),new Response,!0}catch(e){return!1}}function ep(e){return e&&/^function fetch\(\)\s+\{\s+\[native code\]\s+\}$/.test(e.toString())}function tp(e){const t="fetch";Mh(t,e),Dh(t,np)}function np(){(function(){if("string"==typeof EdgeRuntime)return!0;if(!Zh())return!1;if(ep(Qh.fetch))return!0;let e=!1;const t=Qh.document;if(t&&"function"==typeof t.createElement)try{const n=t.createElement("iframe");n.hidden=!0,t.head.appendChild(n),n.contentWindow&&n.contentWindow.fetch&&(e=ep(n.contentWindow.fetch)),t.head.removeChild(n)}catch(n){ch&&hh.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return e})()&&_h(th,"fetch",function(e){return function(...t){const{method:n,url:s}=function(e){if(0===e.length)return{method:"GET",url:""};if(2===e.length){const[t,n]=e;return{url:rp(t),method:sp(n,"method")?String(n.method).toUpperCase():"GET"}}const t=e[0];return{url:rp(t),method:sp(t,"method")?String(t.method).toUpperCase():"GET"}}(t),r={args:t,fetchData:{method:n,url:s},startTimestamp:Date.now()};return jh("fetch",{...r}),e.apply(th,t).then(e=>(jh("fetch",{...r,endTimestamp:Date.now(),response:e}),e),e=>{throw jh("fetch",{...r,endTimestamp:Date.now(),error:e}),e})}})}function sp(e,t){return!!e&&"object"==typeof e&&!!e[t]}function rp(e){return"string"==typeof e?e:e?sp(e,"url")?e.url:e.toString?e.toString():"":""}let ip=null;function op(e){const t="error";Mh(t,e),Dh(t,ap)}function ap(){ip=th.onerror,th.onerror=function(e,t,n,s,r){return jh("error",{column:s,error:r,line:n,msg:e,url:t}),!(!ip||ip.__SENTRY_LOADER__)&&ip.apply(this,arguments)},th.onerror.__SENTRY_INSTRUMENTED__=!0}let cp=null;function lp(e){const t="unhandledrejection";Mh(t,e),Dh(t,up)}function up(){cp=th.onunhandledrejection,th.onunhandledrejection=function(e){return jh("unhandledrejection",e),!(cp&&!cp.__SENTRY_LOADER__)||cp.apply(this,arguments)},th.onunhandledrejection.__SENTRY_INSTRUMENTED__=!0}const dp=nh();const hp=th;let pp;function fp(e){const t="history";Mh(t,e),Dh(t,mp)}function mp(){if(!function(){const e=dp.chrome,t=e&&e.app&&e.app.runtime,n="history"in dp&&!!dp.history.pushState&&!!dp.history.replaceState;return!t&&n}())return;const e=hp.onpopstate;function t(e){return function(...t){const n=t.length>2?t[2]:void 0;if(n){const e=pp,t=String(n);pp=t;jh("history",{from:e,to:t})}return e.apply(this,t)}}hp.onpopstate=function(...t){const n=hp.location.href,s=pp;pp=n;if(jh("history",{from:s,to:n}),e)try{return e.apply(this,t)}catch(r){}},_h(hp.history,"pushState",t),_h(hp.history,"replaceState",t)}const gp=th,yp="__sentry_xhr_v3__";function _p(e){Mh("xhr",e),Dh("xhr",vp)}function vp(){if(!gp.XMLHttpRequest)return;const e=XMLHttpRequest.prototype;_h(e,"open",function(e){return function(...t){const n=Date.now(),s=Ld(t[0])?t[0].toUpperCase():void 0,r=function(e){if(Ld(e))return e;try{return e.toString()}catch(t){}return}(t[1]);if(!s||!r)return e.apply(this,t);this[yp]={method:s,url:r,request_headers:{}},"POST"===s&&r.match(/sentry_key/)&&(this.__sentry_own_request__=!0);const i=()=>{const e=this[yp];if(e&&4===this.readyState){try{e.status_code=this.status}catch(t){}jh("xhr",{args:[s,r],endTimestamp:Date.now(),startTimestamp:n,xhr:this})}};return"onreadystatechange"in this&&"function"==typeof this.onreadystatechange?_h(this,"onreadystatechange",function(e){return function(...t){return i(),e.apply(this,t)}}):this.addEventListener("readystatechange",i),_h(this,"setRequestHeader",function(e){return function(...t){const[n,s]=t,r=this[yp];return r&&Ld(n)&&Ld(s)&&(r.request_headers[n.toLowerCase()]=s),e.apply(this,t)}}),e.apply(this,t)}}),_h(e,"send",function(e){return function(...t){const n=this[yp];if(!n)return e.apply(this,t);void 0!==t[0]&&(n.body=t[0]);return jh("xhr",{args:[n.method,n.url],startTimestamp:Date.now(),xhr:this}),e.apply(this,t)}})}function $p(){return!("undefined"!=typeof __SENTRY_BROWSER_BUNDLE__&&__SENTRY_BROWSER_BUNDLE__)&&"[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)}function bp(){return"undefined"!=typeof window&&(!$p()||void 0!==th.process&&"renderer"===th.process.type)}function wp(e,t=100,n=1/0){try{return kp("",e,t,n)}catch(s){return{ERROR:`**non-serializable** (${s})`}}}function Sp(e,t=3,n=102400){const s=wp(e,t);return r=s,function(e){return~-encodeURI(e).split(/%..|./).length}(JSON.stringify(r))>n?Sp(e,t-1,n):s;var r}function kp(e,t,n=1/0,s=1/0,r=function(){const e="function"==typeof WeakSet,t=e?new WeakSet:[];return[function(n){if(e)return!!t.has(n)||(t.add(n),!1);for(let e=0;e<t.length;e++)if(t[e]===n)return!0;return t.push(n),!1},function(n){if(e)t.delete(n);else for(let e=0;e<t.length;e++)if(t[e]===n){t.splice(e,1);break}}]}()){const[i,o]=r;if(null==t||["number","boolean","string"].includes(typeof t)&&!zd(t))return t;const a=function(e,t){try{if("domain"===e&&t&&"object"==typeof t&&t._events)return"[Domain]";if("domainEmitter"===e)return"[DomainEmitter]";if("undefined"!=typeof global&&t===global)return"[Global]";if("undefined"!=typeof window&&t===window)return"[Window]";if("undefined"!=typeof document&&t===document)return"[Document]";if(Hd(t))return"[VueViewModel]";if(Ud(n=t)&&"nativeEvent"in n&&"preventDefault"in n&&"stopPropagation"in n)return"[SyntheticEvent]";if("number"==typeof t&&t!=t)return"[NaN]";if("function"==typeof t)return`[Function: ${Oh(t)}]`;if("symbol"==typeof t)return`[${String(t)}]`;if("bigint"==typeof t)return`[BigInt: ${String(t)}]`;const s=function(e){const t=Object.getPrototypeOf(e);return t?t.constructor.name:"null prototype"}(t);return/^HTML(\w*)Element$/.test(s)?`[HTMLElement: ${s}]`:`[object ${s}]`}catch(s){return`**non-serializable** (${s})`}var n}(e,t);if(!a.startsWith("[object "))return a;if(t.__sentry_skip_normalization__)return t;const c="number"==typeof t.__sentry_override_normalization_depth__?t.__sentry_override_normalization_depth__:n;if(0===c)return a.replace("object ","");if(i(t))return"[Circular ~]";const l=t;if(l&&"function"==typeof l.toJSON)try{return kp("",l.toJSON(),c-1,s,r)}catch(p){}const u=Array.isArray(t)?[]:{};let d=0;const h=wh(t);for(const f in h){if(!Object.prototype.hasOwnProperty.call(h,f))continue;if(d>=s){u[f]="[MaxProperties ~]";break}const e=h[f];u[f]=kp(f,e,c-1,s,r),d++}return o(t),u}var Tp;function Ep(e){return new Cp(t=>{t(e)})}function xp(e){return new Cp((t,n)=>{n(e)})}!function(e){e[e.PENDING=0]="PENDING";e[e.RESOLVED=1]="RESOLVED";e[e.REJECTED=2]="REJECTED"}(Tp||(Tp={}));class Cp{constructor(e){Cp.prototype.__init.call(this),Cp.prototype.__init2.call(this),Cp.prototype.__init3.call(this),Cp.prototype.__init4.call(this),this._state=Tp.PENDING,this._handlers=[];try{e(this._resolve,this._reject)}catch(t){this._reject(t)}}then(e,t){return new Cp((n,s)=>{this._handlers.push([!1,t=>{if(e)try{n(e(t))}catch(r){s(r)}else n(t)},e=>{if(t)try{n(t(e))}catch(r){s(r)}else s(e)}]),this._executeHandlers()})}catch(e){return this.then(e=>e,e)}finally(e){return new Cp((t,n)=>{let s,r;return this.then(t=>{r=!1,s=t,e&&e()},t=>{r=!0,s=t,e&&e()}).then(()=>{r?n(s):t(s)})})}__init(){this._resolve=e=>{this._setResult(Tp.RESOLVED,e)}}__init2(){this._reject=e=>{this._setResult(Tp.REJECTED,e)}}__init3(){this._setResult=(e,t)=>{this._state===Tp.PENDING&&(Bd(t)?t.then(this._resolve,this._reject):(this._state=e,this._value=t,this._executeHandlers()))}}__init4(){this._executeHandlers=()=>{if(this._state===Tp.PENDING)return;const e=this._handlers.slice();this._handlers=[],e.forEach(e=>{e[0]||(this._state===Tp.RESOLVED&&e[1](this._value),this._state===Tp.REJECTED&&e[2](this._value),e[0]=!0)})}}}function Ip(e){const t=[];function n(e){return t.splice(t.indexOf(e),1)[0]}return{$:t,add:function(s){if(!(void 0===e||t.length<e))return xp(new yh("Not adding Promise because buffer limit was reached."));const r=s();return-1===t.indexOf(r)&&t.push(r),r.then(()=>n(r)).then(null,()=>n(r).then(null,()=>{})),r},drain:function(e){return new Cp((n,s)=>{let r=t.length;if(!r)return n(!0);const i=setTimeout(()=>{e&&e>0&&n(!1)},e);t.forEach(e=>{Ep(e).then(()=>{--r||(clearTimeout(i),n(!0))},s)})})}}}function Rp(e){if(!e)return{};const t=e.match(/^(([^:/?#]+):)?(\/\/([^/?#]*))?([^?#]*)(\?([^#]*))?(#(.*))?$/);if(!t)return{};const n=t[6]||"",s=t[8]||"";return{host:t[4],path:t[5],protocol:t[2],search:n,hash:s,relative:t[5]+n+s}}const Op=["fatal","error","warning","log","info","debug"];function Ap(e){return"warn"===e?"warning":Op.includes(e)?e:"log"}function Pp(){return Date.now()/1e3}const Mp=function(){const{performance:e}=th;if(!e||!e.now)return Pp;const t=Date.now()-e.now(),n=null==e.timeOrigin?t:e.timeOrigin;return()=>(n+e.now())/1e3}(),Dp=(()=>{const{performance:e}=th;if(!e||!e.now)return;const t=36e5,n=e.now(),s=Date.now(),r=e.timeOrigin?Math.abs(e.timeOrigin+n-s):t,i=r<t,o=e.timing&&e.timing.navigationStart,a="number"==typeof o?Math.abs(o+n-s):t;return i||a<t?r<=a?e.timeOrigin:o:s})(),jp="baggage",Lp="sentry-",Np=/^sentry-/;function qp(e){if(!e)return;return function(e){if(0===Object.keys(e).length)return;return Object.entries(e).reduce((e,[t,n],s)=>{const r=`${encodeURIComponent(t)}=${encodeURIComponent(n)}`,i=0===s?r:`${e},${r}`;return i.length>8192?(ch&&hh.warn(`Not adding key: ${t} with val: ${n} to baggage header due to exceeding baggage size limits.`),e):i},"")}(Object.entries(e).reduce((e,[t,n])=>(n&&(e[`${Lp}${t}`]=n),e),{}))}function Up(e){return e.split(",").map(e=>e.split("=").map(e=>decodeURIComponent(e.trim()))).reduce((e,[t,n])=>(e[t]=n,e),{})}const Fp=new RegExp("^[ \\t]*([0-9a-f]{32})?-?([0-9a-f]{16})?-?([01])?[ \\t]*$");function Bp(e,t){const n=function(e){if(!e)return;const t=e.match(Fp);if(!t)return;let n;return"1"===t[3]?n=!0:"0"===t[3]&&(n=!1),{traceId:t[1],parentSampled:n,parentSpanId:t[2]}}(e),s=function(e){if(!Ld(e)&&!Array.isArray(e))return;let t={};if(Array.isArray(e))t=e.reduce((e,t)=>{const n=Up(t);for(const s of Object.keys(n))e[s]=n[s];return e},{});else{if(!e)return;t=Up(e)}const n=Object.entries(t).reduce((e,[t,n])=>(t.match(Np)&&(e[t.slice(7)]=n),e),{});return Object.keys(n).length>0?n:void 0}(t),{traceId:r,parentSpanId:i,parentSampled:o}=n||{};return n?{traceId:r||Nh(),parentSpanId:i||Nh().substring(16),spanId:Nh().substring(16),sampled:o,dsc:s||{}}:{traceId:r||Nh(),spanId:Nh().substring(16)}}function zp(e=Nh(),t=Nh().substring(16),n){let s="";return void 0!==n&&(s=n?"-1":"-0"),`${e}-${t}${s}`}function Wp(e,t=[]){return[e,t]}function Hp(e,t){const[n,s]=e;return[n,[...s,t]]}function Vp(e,t){const n=e[1];for(const s of n){if(t(s,s[0].type))return!0}return!1}function Jp(e,t){return(t||new TextEncoder).encode(e)}function Kp(e,t){const[n,s]=e;let r=JSON.stringify(n);function i(e){"string"==typeof r?r="string"==typeof e?r+e:[Jp(r,t),e]:r.push("string"==typeof e?Jp(e,t):e)}for(const a of s){const[e,t]=a;if(i(`\n${JSON.stringify(e)}\n`),"string"==typeof t||t instanceof Uint8Array)i(t);else{let e;try{e=JSON.stringify(t)}catch(o){e=JSON.stringify(wp(t))}i(e)}}return"string"==typeof r?r:function(e){const t=e.reduce((e,t)=>e+t.length,0),n=new Uint8Array(t);let s=0;for(const r of e)n.set(r,s),s+=r.length;return n}(r)}function Gp(e,t){const n="string"==typeof e.data?Jp(e.data,t):e.data;return[Th({type:"attachment",length:n.length,filename:e.filename,content_type:e.contentType,attachment_type:e.attachmentType}),n]}const Yp={session:"session",sessions:"session",attachment:"attachment",transaction:"transaction",event:"error",client_report:"internal",user_report:"default",profile:"profile",replay_event:"replay",replay_recording:"replay",check_in:"monitor",feedback:"feedback",span:"span",statsd:"metric_bucket"};function Xp(e){return Yp[e]}function Qp(e){if(!e||!e.sdk)return;const{name:t,version:n}=e.sdk;return{name:t,version:n}}function Zp(e,t,n,s){const r=e.sdkProcessingMetadata&&e.sdkProcessingMetadata.dynamicSamplingContext;return{event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&{sdk:t},...!!n&&s&&{dsn:fh(s)},...r&&{trace:Th({...r})}}}function ef(e,t,n=Date.now()){return function(e,t){return e[t]||e.all||0}(e,t)>n}function tf(e,{statusCode:t,headers:n},s=Date.now()){const r={...e},i=n&&n["x-sentry-rate-limits"],o=n&&n["retry-after"];if(i)for(const a of i.trim().split(",")){const[e,t,,,n]=a.split(":",5),i=parseInt(e,10),o=1e3*(isNaN(i)?60:i);if(t)for(const a of t.split(";"))"metric_bucket"===a&&n&&!n.split(";").includes("custom")||(r[a]=s+o);else r.all=s+o}else o?r.all=s+function(e,t=Date.now()){const n=parseInt(`${e}`,10);if(!isNaN(n))return 1e3*n;const s=Date.parse(`${e}`);return isNaN(s)?6e4:s-t}(o,s):429===t&&(r.all=s+6e4);return r}function nf(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}const sf="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,rf="production";function of(){return sh("globalEventProcessors",()=>[])}function af(e){of().push(e)}function cf(e,t,n,s=0){return new Cp((r,i)=>{const o=e[s];if(null===t||"function"!=typeof o)r(t);else{const a=o({...t},n);sf&&o.id&&null===a&&hh.log(`Event processor "${o.id}" dropped event`),Bd(a)?a.then(t=>cf(e,t,n,s+1).then(r)).then(null,i):cf(e,a,n,s+1).then(r).then(null,i)}})}function lf(e){const t=Mp(),n={sid:Nh(),init:!0,timestamp:t,started:t,duration:0,status:"ok",errors:0,ignoreDuration:!1,toJSON:()=>function(e){return Th({sid:`${e.sid}`,init:e.init,started:new Date(1e3*e.started).toISOString(),timestamp:new Date(1e3*e.timestamp).toISOString(),status:e.status,errors:e.errors,did:"number"==typeof e.did||"string"==typeof e.did?`${e.did}`:void 0,duration:e.duration,abnormal_mechanism:e.abnormal_mechanism,attrs:{release:e.release,environment:e.environment,ip_address:e.ipAddress,user_agent:e.userAgent}})}(n)};return e&&uf(n,e),n}function uf(e,t={}){if(t.user&&(!e.ipAddress&&t.user.ip_address&&(e.ipAddress=t.user.ip_address),e.did||t.did||(e.did=t.user.id||t.user.email||t.user.username)),e.timestamp=t.timestamp||Mp(),t.abnormal_mechanism&&(e.abnormal_mechanism=t.abnormal_mechanism),t.ignoreDuration&&(e.ignoreDuration=t.ignoreDuration),t.sid&&(e.sid=32===t.sid.length?t.sid:Nh()),void 0!==t.init&&(e.init=t.init),!e.did&&t.did&&(e.did=`${t.did}`),"number"==typeof t.started&&(e.started=t.started),e.ignoreDuration)e.duration=void 0;else if("number"==typeof t.duration)e.duration=t.duration;else{const t=e.timestamp-e.started;e.duration=t>=0?t:0}t.release&&(e.release=t.release),t.environment&&(e.environment=t.environment),!e.ipAddress&&t.ipAddress&&(e.ipAddress=t.ipAddress),!e.userAgent&&t.userAgent&&(e.userAgent=t.userAgent),"number"==typeof t.errors&&(e.errors=t.errors),t.status&&(e.status=t.status)}function df(e,t){let n={};"ok"===e.status&&(n={status:"exited"}),uf(e,n)}function hf(e){const{spanId:t,traceId:n}=e.spanContext(),{data:s,op:r,parent_span_id:i,status:o,tags:a,origin:c}=gf(e);return Th({data:s,op:r,parent_span_id:i,span_id:t,status:o,tags:a,trace_id:n,origin:c})}function pf(e){const{traceId:t,spanId:n}=e.spanContext();return zp(t,n,yf(e))}function ff(e){return"number"==typeof e?mf(e):Array.isArray(e)?e[0]+e[1]/1e9:e instanceof Date?mf(e.getTime()):Mp()}function mf(e){return e>9999999999?e/1e3:e}function gf(e){return function(e){return"function"==typeof e.getSpanJSON}(e)?e.getSpanJSON():"function"==typeof e.toJSON?e.toJSON():{}}function yf(e){const{traceFlags:t}=e.spanContext();return Boolean(1&t)}function _f(e,t,n,s,r,i){const{normalizeDepth:o=3,normalizeMaxBreadth:a=1e3}=e,c={...t,event_id:t.event_id||n.event_id||Nh(),timestamp:t.timestamp||Pp()},l=n.integrations||e.integrations.map(e=>e.name);!function(e,t){const{environment:n,release:s,dist:r,maxValueLength:i=250}=t;"environment"in e||(e.environment="environment"in t?n:rf);void 0===e.release&&void 0!==s&&(e.release=s);void 0===e.dist&&void 0!==r&&(e.dist=r);e.message&&(e.message=Vd(e.message,i));const o=e.exception&&e.exception.values&&e.exception.values[0];o&&o.value&&(o.value=Vd(o.value,i));const a=e.request;a&&a.url&&(a.url=Vd(a.url,i))}(c,e),function(e,t){t.length>0&&(e.sdk=e.sdk||{},e.sdk.integrations=[...e.sdk.integrations||[],...t])}(c,l),void 0===t.type&&function(e,t){const n=th._sentryDebugIds;if(!n)return;let s;const r=vf.get(t);r?s=r:(s=new Map,vf.set(t,s));const i=Object.keys(n).reduce((e,r)=>{let i;const o=s.get(r);o?i=o:(i=t(r),s.set(r,i));for(let t=i.length-1;t>=0;t--){const s=i[t];if(s.filename){e[s.filename]=n[r];break}}return e},{});try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.filename&&(e.debug_id=i[e.filename])})})}catch(o){}}(c,e.stackParser);const u=function(e,t){if(!t)return e;const n=e?e.clone():new Wf;return n.update(t),n}(s,n.captureContext);n.mechanism&&Bh(c,n.mechanism);const d=r&&r.getEventProcessors?r.getEventProcessors():[],h=function(){zf||(zf=new Wf);return zf}().getScopeData();if(i){Ff(h,i.getScopeData())}if(u){Ff(h,u.getScopeData())}const p=[...n.attachments||[],...h.attachments];p.length&&(n.attachments=p),Uf(c,h);return cf([...d,...of(),...h.eventProcessors],c,n).then(e=>(e&&function(e){const t={};try{e.exception.values.forEach(e=>{e.stacktrace.frames.forEach(e=>{e.debug_id&&(e.abs_path?t[e.abs_path]=e.debug_id:e.filename&&(t[e.filename]=e.debug_id),delete e.debug_id)})})}catch(s){}if(0===Object.keys(t).length)return;e.debug_meta=e.debug_meta||{},e.debug_meta.images=e.debug_meta.images||[];const n=e.debug_meta.images;Object.keys(t).forEach(e=>{n.push({type:"sourcemap",code_file:e,debug_id:t[e]})})}(e),"number"==typeof o&&o>0?function(e,t,n){if(!e)return null;const s={...e,...e.breadcrumbs&&{breadcrumbs:e.breadcrumbs.map(e=>({...e,...e.data&&{data:wp(e.data,t,n)}}))},...e.user&&{user:wp(e.user,t,n)},...e.contexts&&{contexts:wp(e.contexts,t,n)},...e.extra&&{extra:wp(e.extra,t,n)}};e.contexts&&e.contexts.trace&&s.contexts&&(s.contexts.trace=e.contexts.trace,e.contexts.trace.data&&(s.contexts.trace.data=wp(e.contexts.trace.data,t,n)));e.spans&&(s.spans=e.spans.map(e=>{const s=gf(e).data;return s&&(e.data=wp(s,t,n)),e}));return s}(e,o,a):e))}const vf=new WeakMap;function $f(e){if(e)return function(e){return e instanceof Wf||"function"==typeof e}(e)||function(e){return Object.keys(e).some(e=>bf.includes(e))}(e)?{captureContext:e}:e}const bf=["user","level","extra","contexts","tags","fingerprint","requestSession","propagationContext"];function wf(e,t){return Qf().captureException(e,$f(t))}function Sf(e,t){const n="string"==typeof t?t:void 0,s="string"!=typeof t?{captureContext:t}:void 0;return Qf().captureMessage(e,n,s)}function kf(e,t){return Qf().captureEvent(e,t)}function Tf(e,t){Qf().addBreadcrumb(e,t)}function Ef(e,t){Qf().setContext(e,t)}function xf(e,t){Qf().setTag(e,t)}function Cf(e){Qf().setUser(e)}function If(e,t){return Qf().startTransaction({...e},t)}function Rf(){return Qf().lastEventId()}function Of(){return Qf().getClient()}function Af(){return Qf().getScope()}function Pf(e){const t=Of(),n=Zf(),s=Af(),{release:r,environment:i=rf}=t&&t.getOptions()||{},{userAgent:o}=th.navigator||{},a=lf({release:r,environment:i,user:s.getUser()||n.getUser(),...o&&{userAgent:o},...e}),c=n.getSession();return c&&"ok"===c.status&&uf(c,{status:"exited"}),Mf(),n.setSession(a),s.setSession(a),a}function Mf(){const e=Zf(),t=Af(),n=t.getSession()||e.getSession();n&&df(n),Df(),e.setSession(),t.setSession()}function Df(){const e=Zf(),t=Af(),n=Of(),s=t.getSession()||e.getSession();s&&n&&n.captureSession&&n.captureSession(s)}function jf(e=!1){e?Mf():Df()}function Lf(e){return e.transaction}function Nf(e,t,n){const s=t.getOptions(),{publicKey:r}=t.getDsn()||{},{segment:i}=n&&n.getUser()||{},o=Th({environment:s.environment||rf,release:s.release,user_segment:i,public_key:r,trace_id:e});return t.emit&&t.emit("createDsc",o),o}function qf(e){const t=Of();if(!t)return{};const n=Nf(gf(e).trace_id||"",t,Af()),s=Lf(e);if(!s)return n;const r=s&&s._frozenDynamicSamplingContext;if(r)return r;const{sampleRate:i,source:o}=s.metadata;null!=i&&(n.sample_rate=`${i}`);const a=gf(s);return o&&"url"!==o&&(n.transaction=a.description),n.sampled=String(yf(s)),t.emit&&t.emit("createDsc",n),n}function Uf(e,t){const{fingerprint:n,span:s,breadcrumbs:r,sdkProcessingMetadata:i}=t;!function(e,t){const{extra:n,tags:s,user:r,contexts:i,level:o,transactionName:a}=t,c=Th(n);c&&Object.keys(c).length&&(e.extra={...c,...e.extra});const l=Th(s);l&&Object.keys(l).length&&(e.tags={...l,...e.tags});const u=Th(r);u&&Object.keys(u).length&&(e.user={...u,...e.user});const d=Th(i);d&&Object.keys(d).length&&(e.contexts={...d,...e.contexts});o&&(e.level=o);a&&(e.transaction=a)}(e,t),s&&function(e,t){e.contexts={trace:hf(t),...e.contexts};const n=Lf(t);if(n){e.sdkProcessingMetadata={dynamicSamplingContext:qf(t),...e.sdkProcessingMetadata};const s=gf(n).description;s&&(e.tags={transaction:s,...e.tags})}}(e,s),function(e,t){e.fingerprint=e.fingerprint?Wh(e.fingerprint):[],t&&(e.fingerprint=e.fingerprint.concat(t));e.fingerprint&&!e.fingerprint.length&&delete e.fingerprint}(e,n),function(e,t){const n=[...e.breadcrumbs||[],...t];e.breadcrumbs=n.length?n:void 0}(e,r),function(e,t){e.sdkProcessingMetadata={...e.sdkProcessingMetadata,...t}}(e,i)}function Ff(e,t){const{extra:n,tags:s,user:r,contexts:i,level:o,sdkProcessingMetadata:a,breadcrumbs:c,fingerprint:l,eventProcessors:u,attachments:d,propagationContext:h,transactionName:p,span:f}=t;Bf(e,"extra",n),Bf(e,"tags",s),Bf(e,"user",r),Bf(e,"contexts",i),Bf(e,"sdkProcessingMetadata",a),o&&(e.level=o),p&&(e.transactionName=p),f&&(e.span=f),c.length&&(e.breadcrumbs=[...e.breadcrumbs,...c]),l.length&&(e.fingerprint=[...e.fingerprint,...l]),u.length&&(e.eventProcessors=[...e.eventProcessors,...u]),d.length&&(e.attachments=[...e.attachments,...d]),e.propagationContext={...e.propagationContext,...h}}function Bf(e,t,n){if(n&&Object.keys(n).length){e[t]={...e[t]};for(const s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[t][s]=n[s])}}let zf;class Wf{constructor(){this._notifyingListeners=!1,this._scopeListeners=[],this._eventProcessors=[],this._breadcrumbs=[],this._attachments=[],this._user={},this._tags={},this._extra={},this._contexts={},this._sdkProcessingMetadata={},this._propagationContext=Hf()}static clone(e){return e?e.clone():new Wf}clone(){const e=new Wf;return e._breadcrumbs=[...this._breadcrumbs],e._tags={...this._tags},e._extra={...this._extra},e._contexts={...this._contexts},e._user=this._user,e._level=this._level,e._span=this._span,e._session=this._session,e._transactionName=this._transactionName,e._fingerprint=this._fingerprint,e._eventProcessors=[...this._eventProcessors],e._requestSession=this._requestSession,e._attachments=[...this._attachments],e._sdkProcessingMetadata={...this._sdkProcessingMetadata},e._propagationContext={...this._propagationContext},e._client=this._client,e}setClient(e){this._client=e}getClient(){return this._client}addScopeListener(e){this._scopeListeners.push(e)}addEventProcessor(e){return this._eventProcessors.push(e),this}setUser(e){return this._user=e||{email:void 0,id:void 0,ip_address:void 0,segment:void 0,username:void 0},this._session&&uf(this._session,{user:e}),this._notifyScopeListeners(),this}getUser(){return this._user}getRequestSession(){return this._requestSession}setRequestSession(e){return this._requestSession=e,this}setTags(e){return this._tags={...this._tags,...e},this._notifyScopeListeners(),this}setTag(e,t){return this._tags={...this._tags,[e]:t},this._notifyScopeListeners(),this}setExtras(e){return this._extra={...this._extra,...e},this._notifyScopeListeners(),this}setExtra(e,t){return this._extra={...this._extra,[e]:t},this._notifyScopeListeners(),this}setFingerprint(e){return this._fingerprint=e,this._notifyScopeListeners(),this}setLevel(e){return this._level=e,this._notifyScopeListeners(),this}setTransactionName(e){return this._transactionName=e,this._notifyScopeListeners(),this}setContext(e,t){return null===t?delete this._contexts[e]:this._contexts[e]=t,this._notifyScopeListeners(),this}setSpan(e){return this._span=e,this._notifyScopeListeners(),this}getSpan(){return this._span}getTransaction(){const e=this._span;return e&&e.transaction}setSession(e){return e?this._session=e:delete this._session,this._notifyScopeListeners(),this}getSession(){return this._session}update(e){if(!e)return this;const t="function"==typeof e?e(this):e;if(t instanceof Wf){const e=t.getScopeData();this._tags={...this._tags,...e.tags},this._extra={...this._extra,...e.extra},this._contexts={...this._contexts,...e.contexts},e.user&&Object.keys(e.user).length&&(this._user=e.user),e.level&&(this._level=e.level),e.fingerprint.length&&(this._fingerprint=e.fingerprint),t.getRequestSession()&&(this._requestSession=t.getRequestSession()),e.propagationContext&&(this._propagationContext=e.propagationContext)}else if(Ud(t)){const t=e;this._tags={...this._tags,...t.tags},this._extra={...this._extra,...t.extra},this._contexts={...this._contexts,...t.contexts},t.user&&(this._user=t.user),t.level&&(this._level=t.level),t.fingerprint&&(this._fingerprint=t.fingerprint),t.requestSession&&(this._requestSession=t.requestSession),t.propagationContext&&(this._propagationContext=t.propagationContext)}return this}clear(){return this._breadcrumbs=[],this._tags={},this._extra={},this._user={},this._contexts={},this._level=void 0,this._transactionName=void 0,this._fingerprint=void 0,this._requestSession=void 0,this._span=void 0,this._session=void 0,this._notifyScopeListeners(),this._attachments=[],this._propagationContext=Hf(),this}addBreadcrumb(e,t){const n="number"==typeof t?t:100;if(n<=0)return this;const s={timestamp:Pp(),...e},r=this._breadcrumbs;return r.push(s),this._breadcrumbs=r.length>n?r.slice(-n):r,this._notifyScopeListeners(),this}getLastBreadcrumb(){return this._breadcrumbs[this._breadcrumbs.length-1]}clearBreadcrumbs(){return this._breadcrumbs=[],this._notifyScopeListeners(),this}addAttachment(e){return this._attachments.push(e),this}getAttachments(){return this.getScopeData().attachments}clearAttachments(){return this._attachments=[],this}getScopeData(){const{_breadcrumbs:e,_attachments:t,_contexts:n,_tags:s,_extra:r,_user:i,_level:o,_fingerprint:a,_eventProcessors:c,_propagationContext:l,_sdkProcessingMetadata:u,_transactionName:d,_span:h}=this;return{breadcrumbs:e,attachments:t,contexts:n,tags:s,extra:r,user:i,level:o,fingerprint:a||[],eventProcessors:c,propagationContext:l,sdkProcessingMetadata:u,transactionName:d,span:h}}applyToEvent(e,t={},n=[]){Uf(e,this.getScopeData());return cf([...n,...of(),...this._eventProcessors],e,t)}setSDKProcessingMetadata(e){return this._sdkProcessingMetadata={...this._sdkProcessingMetadata,...e},this}setPropagationContext(e){return this._propagationContext=e,this}getPropagationContext(){return this._propagationContext}captureException(e,t){const n=t&&t.event_id?t.event_id:Nh();if(!this._client)return hh.warn("No client configured on scope - will not capture exception!"),n;const s=new Error("Sentry syntheticException");return this._client.captureException(e,{originalException:e,syntheticException:s,...t,event_id:n},this),n}captureMessage(e,t,n){const s=n&&n.event_id?n.event_id:Nh();if(!this._client)return hh.warn("No client configured on scope - will not capture message!"),s;const r=new Error(e);return this._client.captureMessage(e,t,{originalException:e,syntheticException:r,...n,event_id:s},this),s}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Nh();return this._client?(this._client.captureEvent(e,{...t,event_id:n},this),n):(hh.warn("No client configured on scope - will not capture event!"),n)}_notifyScopeListeners(){this._notifyingListeners||(this._notifyingListeners=!0,this._scopeListeners.forEach(e=>{e(this)}),this._notifyingListeners=!1)}}function Hf(){return{traceId:Nh(),spanId:Nh().substring(16)}}const Vf="7.120.3",Jf=parseFloat(Vf),Kf=100;class Gf{constructor(e,t,n,s=Jf){let r,i;this._version=s,t?r=t:(r=new Wf,r.setClient(e)),n?i=n:(i=new Wf,i.setClient(e)),this._stack=[{scope:r}],e&&this.bindClient(e),this._isolationScope=i}isOlderThan(e){return this._version<e}bindClient(e){const t=this.getStackTop();t.client=e,t.scope.setClient(e),e&&e.setupIntegrations&&e.setupIntegrations()}pushScope(){const e=this.getScope().clone();return this.getStack().push({client:this.getClient(),scope:e}),e}popScope(){return!(this.getStack().length<=1)&&!!this.getStack().pop()}withScope(e){const t=this.pushScope();let n;try{n=e(t)}catch(s){throw this.popScope(),s}return Bd(n)?n.then(e=>(this.popScope(),e),e=>{throw this.popScope(),e}):(this.popScope(),n)}getClient(){return this.getStackTop().client}getScope(){return this.getStackTop().scope}getIsolationScope(){return this._isolationScope}getStack(){return this._stack}getStackTop(){return this._stack[this._stack.length-1]}captureException(e,t){const n=this._lastEventId=t&&t.event_id?t.event_id:Nh(),s=new Error("Sentry syntheticException");return this.getScope().captureException(e,{originalException:e,syntheticException:s,...t,event_id:n}),n}captureMessage(e,t,n){const s=this._lastEventId=n&&n.event_id?n.event_id:Nh(),r=new Error(e);return this.getScope().captureMessage(e,t,{originalException:e,syntheticException:r,...n,event_id:s}),s}captureEvent(e,t){const n=t&&t.event_id?t.event_id:Nh();return e.type||(this._lastEventId=n),this.getScope().captureEvent(e,{...t,event_id:n}),n}lastEventId(){return this._lastEventId}addBreadcrumb(e,t){const{scope:n,client:s}=this.getStackTop();if(!s)return;const{beforeBreadcrumb:r=null,maxBreadcrumbs:i=Kf}=s.getOptions&&s.getOptions()||{};if(i<=0)return;const o={timestamp:Pp(),...e},a=r?dh(()=>r(o,t)):o;null!==a&&(s.emit&&s.emit("beforeAddBreadcrumb",a,t),n.addBreadcrumb(a,i))}setUser(e){this.getScope().setUser(e),this.getIsolationScope().setUser(e)}setTags(e){this.getScope().setTags(e),this.getIsolationScope().setTags(e)}setExtras(e){this.getScope().setExtras(e),this.getIsolationScope().setExtras(e)}setTag(e,t){this.getScope().setTag(e,t),this.getIsolationScope().setTag(e,t)}setExtra(e,t){this.getScope().setExtra(e,t),this.getIsolationScope().setExtra(e,t)}setContext(e,t){this.getScope().setContext(e,t),this.getIsolationScope().setContext(e,t)}configureScope(e){const{scope:t,client:n}=this.getStackTop();n&&e(t)}run(e){const t=Xf(this);try{e(this)}finally{Xf(t)}}getIntegration(e){const t=this.getClient();if(!t)return null;try{return t.getIntegration(e)}catch(n){return sf&&hh.warn(`Cannot retrieve integration ${e.id} from the current Hub`),null}}startTransaction(e,t){const n=this._callExtensionMethod("startTransaction",e,t);if(sf&&!n){this.getClient()?hh.warn("Tracing extension 'startTransaction' has not been added. Call 'addTracingExtensions' before calling 'init':\nSentry.addTracingExtensions();\nSentry.init({...});\n"):hh.warn("Tracing extension 'startTransaction' is missing. You should 'init' the SDK before calling 'startTransaction'")}return n}traceHeaders(){return this._callExtensionMethod("traceHeaders")}captureSession(e=!1){if(e)return this.endSession();this._sendSessionUpdate()}endSession(){const e=this.getStackTop().scope,t=e.getSession();t&&df(t),this._sendSessionUpdate(),e.setSession()}startSession(e){const{scope:t,client:n}=this.getStackTop(),{release:s,environment:r=rf}=n&&n.getOptions()||{},{userAgent:i}=th.navigator||{},o=lf({release:s,environment:r,user:t.getUser(),...i&&{userAgent:i},...e}),a=t.getSession&&t.getSession();return a&&"ok"===a.status&&uf(a,{status:"exited"}),this.endSession(),t.setSession(o),o}shouldSendDefaultPii(){const e=this.getClient(),t=e&&e.getOptions();return Boolean(t&&t.sendDefaultPii)}_sendSessionUpdate(){const{scope:e,client:t}=this.getStackTop(),n=e.getSession();n&&t&&t.captureSession&&t.captureSession(n)}_callExtensionMethod(e,...t){const n=Yf().__SENTRY__;if(n&&n.extensions&&"function"==typeof n.extensions[e])return n.extensions[e].apply(this,t);sf&&hh.warn(`Extension method ${e} couldn't be found, doing nothing.`)}}function Yf(){return th.__SENTRY__=th.__SENTRY__||{extensions:{},hub:void 0},th}function Xf(e){const t=Yf(),n=em(t);return tm(t,e),n}function Qf(){const e=Yf();if(e.__SENTRY__&&e.__SENTRY__.acs){const t=e.__SENTRY__.acs.getCurrentHub();if(t)return t}return function(e=Yf()){t=e,t&&t.__SENTRY__&&t.__SENTRY__.hub&&!em(e).isOlderThan(Jf)||tm(e,new Gf);var t;return em(e)}(e)}function Zf(){return Qf().getIsolationScope()}function em(e){return sh("hub",()=>new Gf,e)}function tm(e,t){if(!e)return!1;return(e.__SENTRY__=e.__SENTRY__||{}).hub=t,!0}function nm(e){return Qf().getScope().getTransaction()}let sm=!1;function rm(){const e=nm();if(e){const t="internal_error";sf&&hh.log(`[Tracing] Transaction: ${t} -> Global error occured`),e.setStatus(t)}}var im;function om(e,t){e.setTag("http.status_code",String(t)),e.setData("http.response.status_code",t);const n=function(e){if(e<400&&e>=100)return"ok";if(e>=400&&e<500)switch(e){case 401:return"unauthenticated";case 403:return"permission_denied";case 404:return"not_found";case 409:return"already_exists";case 413:return"failed_precondition";case 429:return"resource_exhausted";default:return"invalid_argument"}if(e>=500&&e<600)switch(e){case 501:return"unimplemented";case 503:return"unavailable";case 504:return"deadline_exceeded";default:return"internal_error"}return"unknown_error"}(t);"unknown_error"!==n&&e.setStatus(n)}function am(e){if("boolean"==typeof __SENTRY_TRACING__&&!__SENTRY_TRACING__)return!1;const t=Of(),n=e||t&&t.getOptions();return!!n&&(n.enableTracing||"tracesSampleRate"in n||"tracesSampler"in n)}function cm(e){if(!am())return;const t=function(e){if(e.startTime){const t={...e};return t.startTimestamp=ff(e.startTime),delete t.startTime,t}return e}(e),n=Qf(),s=e.scope?e.scope.getSpan():Af().getSpan();if(e.onlyIfParent&&!s)return;const r=(e.scope||Af()).clone();return function(e,{parentSpan:t,spanContext:n,forceTransaction:s,scope:r}){if(!am())return;const i=Zf();let o;if(t&&!s)o=t.startChild(n);else if(t){const s=qf(t),{traceId:r,spanId:i}=t.spanContext(),a=yf(t);o=e.startTransaction({traceId:r,parentSpanId:i,parentSampled:a,...n,metadata:{dynamicSamplingContext:s,...n.metadata}})}else{const{traceId:t,dsc:s,parentSpanId:a,sampled:c}={...i.getPropagationContext(),...r.getPropagationContext()};o=e.startTransaction({traceId:t,parentSpanId:a,parentSampled:c,...n,metadata:{dynamicSamplingContext:s,...n.metadata}})}return r.setSpan(o),function(e,t,n){e&&(vh(e,um,n),vh(e,lm,t))}(o,r,i),o}(n,{parentSpan:s,spanContext:t,forceTransaction:e.forceTransaction,scope:r})}rm.tag="sentry_tracingErrorCallback",function(e){e.Ok="ok";e.DeadlineExceeded="deadline_exceeded";e.Unauthenticated="unauthenticated";e.PermissionDenied="permission_denied";e.NotFound="not_found";e.ResourceExhausted="resource_exhausted";e.InvalidArgument="invalid_argument";e.Unimplemented="unimplemented";e.Unavailable="unavailable";e.InternalError="internal_error";e.UnknownError="unknown_error";e.Cancelled="cancelled";e.AlreadyExists="already_exists";e.FailedPrecondition="failed_precondition";e.Aborted="aborted";e.OutOfRange="out_of_range";e.DataLoss="data_loss"}(im||(im={}));const lm="_sentryScope",um="_sentryIsolationScope";const dm="sentry.source",hm="sentry.sample_rate",pm="sentry.op",fm="sentry.origin";class mm{constructor(e=1e3){this._maxlen=e,this.spans=[]}add(e){this.spans.length>this._maxlen?e.spanRecorder=void 0:this.spans.push(e)}}class gm{constructor(e={}){this._traceId=e.traceId||Nh(),this._spanId=e.spanId||Nh().substring(16),this._startTime=e.startTimestamp||Mp(),this.tags=e.tags?{...e.tags}:{},this.data=e.data?{...e.data}:{},this.instrumenter=e.instrumenter||"sentry",this._attributes={},this.setAttributes({[fm]:e.origin||"manual",[pm]:e.op,...e.attributes}),this._name=e.name||e.description,e.parentSpanId&&(this._parentSpanId=e.parentSpanId),"sampled"in e&&(this._sampled=e.sampled),e.status&&(this._status=e.status),e.endTimestamp&&(this._endTime=e.endTimestamp),void 0!==e.exclusiveTime&&(this._exclusiveTime=e.exclusiveTime),this._measurements=e.measurements?{...e.measurements}:{}}get name(){return this._name||""}set name(e){this.updateName(e)}get description(){return this._name}set description(e){this._name=e}get traceId(){return this._traceId}set traceId(e){this._traceId=e}get spanId(){return this._spanId}set spanId(e){this._spanId=e}set parentSpanId(e){this._parentSpanId=e}get parentSpanId(){return this._parentSpanId}get sampled(){return this._sampled}set sampled(e){this._sampled=e}get attributes(){return this._attributes}set attributes(e){this._attributes=e}get startTimestamp(){return this._startTime}set startTimestamp(e){this._startTime=e}get endTimestamp(){return this._endTime}set endTimestamp(e){this._endTime=e}get status(){return this._status}set status(e){this._status=e}get op(){return this._attributes[pm]}set op(e){this.setAttribute(pm,e)}get origin(){return this._attributes[fm]}set origin(e){this.setAttribute(fm,e)}spanContext(){const{_spanId:e,_traceId:t,_sampled:n}=this;return{spanId:e,traceId:t,traceFlags:n?1:0}}startChild(e){const t=new gm({...e,parentSpanId:this._spanId,sampled:this._sampled,traceId:this._traceId});t.spanRecorder=this.spanRecorder,t.spanRecorder&&t.spanRecorder.add(t);const n=Lf(this);if(t.transaction=n,sf&&n){const s=`[Tracing] Starting '${e&&e.op||"< unknown op >"}' span on transaction '${gf(t).description||"< unknown name >"}' (${n.spanContext().spanId}).`;hh.log(s),this._logMessage=s}return t}setTag(e,t){return this.tags={...this.tags,[e]:t},this}setData(e,t){return this.data={...this.data,[e]:t},this}setAttribute(e,t){void 0===t?delete this._attributes[e]:this._attributes[e]=t}setAttributes(e){Object.keys(e).forEach(t=>this.setAttribute(t,e[t]))}setStatus(e){return this._status=e,this}setHttpStatus(e){return om(this,e),this}setName(e){this.updateName(e)}updateName(e){return this._name=e,this}isSuccess(){return"ok"===this._status}finish(e){return this.end(e)}end(e){if(this._endTime)return;const t=Lf(this);if(sf&&t&&t.spanContext().spanId!==this._spanId){const e=this._logMessage;e&&hh.log(e.replace("Starting","Finishing"))}this._endTime=ff(e)}toTraceparent(){return pf(this)}toContext(){return Th({data:this._getData(),description:this._name,endTimestamp:this._endTime,op:this.op,parentSpanId:this._parentSpanId,sampled:this._sampled,spanId:this._spanId,startTimestamp:this._startTime,status:this._status,tags:this.tags,traceId:this._traceId})}updateWithContext(e){return this.data=e.data||{},this._name=e.name||e.description,this._endTime=e.endTimestamp,this.op=e.op,this._parentSpanId=e.parentSpanId,this._sampled=e.sampled,this._spanId=e.spanId||this._spanId,this._startTime=e.startTimestamp||this._startTime,this._status=e.status,this.tags=e.tags||{},this._traceId=e.traceId||this._traceId,this}getTraceContext(){return hf(this)}getSpanJSON(){return Th({data:this._getData(),description:this._name,op:this._attributes[pm],parent_span_id:this._parentSpanId,span_id:this._spanId,start_timestamp:this._startTime,status:this._status,tags:Object.keys(this.tags).length>0?this.tags:void 0,timestamp:this._endTime,trace_id:this._traceId,origin:this._attributes[fm],_metrics_summary:void 0,profile_id:this._attributes.profile_id,exclusive_time:this._exclusiveTime,measurements:Object.keys(this._measurements).length>0?this._measurements:void 0})}isRecording(){return!this._endTime&&!!this._sampled}toJSON(){return this.getSpanJSON()}_getData(){const{data:e,_attributes:t}=this,n=Object.keys(e).length>0,s=Object.keys(t).length>0;if(n||s)return n&&s?{...e,...t}:n?e:t}}class ym extends gm{constructor(e,t){super(e),this._contexts={},this._hub=t||Qf(),this._name=e.name||"",this._metadata={...e.metadata},this._trimEnd=e.trimEnd,this.transaction=this;const n=this._metadata.dynamicSamplingContext;n&&(this._frozenDynamicSamplingContext={...n})}get name(){return this._name}set name(e){this.setName(e)}get metadata(){return{source:"custom",spanMetadata:{},...this._metadata,...this._attributes[dm]&&{source:this._attributes[dm]},...this._attributes[hm]&&{sampleRate:this._attributes[hm]}}}set metadata(e){this._metadata=e}setName(e,t="custom"){this._name=e,this.setAttribute(dm,t)}updateName(e){return this._name=e,this}initSpanRecorder(e=1e3){this.spanRecorder||(this.spanRecorder=new mm(e)),this.spanRecorder.add(this)}setContext(e,t){null===t?delete this._contexts[e]:this._contexts[e]=t}setMeasurement(e,t,n=""){this._measurements[e]={value:t,unit:n}}setMetadata(e){this._metadata={...this._metadata,...e}}end(e){const t=ff(e),n=this._finishTransaction(t);if(n)return this._hub.captureEvent(n)}toContext(){return Th({...super.toContext(),name:this._name,trimEnd:this._trimEnd})}updateWithContext(e){return super.updateWithContext(e),this._name=e.name||"",this._trimEnd=e.trimEnd,this}getDynamicSamplingContext(){return qf(this)}setHub(e){this._hub=e}getProfileId(){if(void 0!==this._contexts&&void 0!==this._contexts.profile)return this._contexts.profile.profile_id}_finishTransaction(e){if(void 0!==this._endTime)return;this._name||(sf&&hh.warn("Transaction has no name, falling back to `<unlabeled transaction>`."),this._name="<unlabeled transaction>"),super.end(e);const t=this._hub.getClient();if(t&&t.emit&&t.emit("finishTransaction",this),!0!==this._sampled)return sf&&hh.log("[Tracing] Discarding transaction because its trace was not chosen to be sampled."),void(t&&t.recordDroppedEvent("sample_rate","transaction"));const n=this.spanRecorder?this.spanRecorder.spans.filter(e=>e!==this&&gf(e).timestamp):[];if(this._trimEnd&&n.length>0){const e=n.map(e=>gf(e).timestamp).filter(Boolean);this._endTime=e.reduce((e,t)=>e>t?e:t)}const{scope:s,isolationScope:r}={scope:(i=this)[lm],isolationScope:i[um]};var i;const{metadata:o}=this,{source:a}=o,c={contexts:{...this._contexts,trace:hf(this)},spans:n,start_timestamp:this._startTime,tags:this.tags,timestamp:this._endTime,transaction:this._name,type:"transaction",sdkProcessingMetadata:{...o,capturedSpanScope:s,capturedSpanIsolationScope:r,...Th({dynamicSamplingContext:qf(this)})},_metrics_summary:void 0,...a&&{transaction_info:{source:a}}};return Object.keys(this._measurements).length>0&&(sf&&hh.log("[Measurements] Adding measurements to transaction",JSON.stringify(this._measurements,void 0,2)),c.measurements=this._measurements),sf&&hh.log(`[Tracing] Finishing ${this.op} transaction: ${this._name}.`),c}}const _m={idleTimeout:1e3,finalTimeout:3e4,heartbeatInterval:5e3},vm=["heartbeatFailed","idleTimeout","documentHidden","finalTimeout","externalFinish","cancelled"];class $m extends mm{constructor(e,t,n,s){super(s),this._pushActivity=e,this._popActivity=t,this.transactionSpanId=n}add(e){if(e.spanContext().spanId!==this.transactionSpanId){const t=e.end;e.end=(...n)=>(this._popActivity(e.spanContext().spanId),t.apply(e,n)),void 0===gf(e).timestamp&&this._pushActivity(e.spanContext().spanId)}super.add(e)}}class bm extends ym{constructor(e,t,n=_m.idleTimeout,s=_m.finalTimeout,r=_m.heartbeatInterval,i=!1,o=!1){super(e,t),this._idleHub=t,this._idleTimeout=n,this._finalTimeout=s,this._heartbeatInterval=r,this._onScope=i,this.activities={},this._heartbeatCounter=0,this._finished=!1,this._idleTimeoutCanceledPermanently=!1,this._beforeFinishCallbacks=[],this._finishReason=vm[4],this._autoFinishAllowed=!o,i&&(sf&&hh.log(`Setting idle transaction on scope. Span ID: ${this.spanContext().spanId}`),t.getScope().setSpan(this)),o||this._restartIdleTimeout(),setTimeout(()=>{this._finished||(this.setStatus("deadline_exceeded"),this._finishReason=vm[3],this.end())},this._finalTimeout)}end(e){const t=ff(e);if(this._finished=!0,this.activities={},"ui.action.click"===this.op&&this.setAttribute("finishReason",this._finishReason),this.spanRecorder){sf&&hh.log("[Tracing] finishing IdleTransaction",new Date(1e3*t).toISOString(),this.op);for(const e of this._beforeFinishCallbacks)e(this,t);this.spanRecorder.spans=this.spanRecorder.spans.filter(e=>{if(e.spanContext().spanId===this.spanContext().spanId)return!0;gf(e).timestamp||(e.setStatus("cancelled"),e.end(t),sf&&hh.log("[Tracing] cancelling span since transaction ended early",JSON.stringify(e,void 0,2)));const{start_timestamp:n,timestamp:s}=gf(e),r=n&&n<t,i=(this._finalTimeout+this._idleTimeout)/1e3,o=s&&n&&s-n<i;if(sf){const t=JSON.stringify(e,void 0,2);r?o||hh.log("[Tracing] discarding Span since it finished after Transaction final timeout",t):hh.log("[Tracing] discarding Span since it happened after Transaction was finished",t)}return r&&o}),sf&&hh.log("[Tracing] flushing IdleTransaction")}else sf&&hh.log("[Tracing] No active IdleTransaction");if(this._onScope){const e=this._idleHub.getScope();e.getTransaction()===this&&e.setSpan(void 0)}return super.end(e)}registerBeforeFinishCallback(e){this._beforeFinishCallbacks.push(e)}initSpanRecorder(e){if(!this.spanRecorder){const t=e=>{this._finished||this._pushActivity(e)},n=e=>{this._finished||this._popActivity(e)};this.spanRecorder=new $m(t,n,this.spanContext().spanId,e),sf&&hh.log("Starting heartbeat"),this._pingHeartbeat()}this.spanRecorder.add(this)}cancelIdleTimeout(e,{restartOnChildSpanChange:t}={restartOnChildSpanChange:!0}){this._idleTimeoutCanceledPermanently=!1===t,this._idleTimeoutID&&(clearTimeout(this._idleTimeoutID),this._idleTimeoutID=void 0,0===Object.keys(this.activities).length&&this._idleTimeoutCanceledPermanently&&(this._finishReason=vm[5],this.end(e)))}setFinishReason(e){this._finishReason=e}sendAutoFinishSignal(){this._autoFinishAllowed||(sf&&hh.log("[Tracing] Received finish signal for idle transaction."),this._restartIdleTimeout(),this._autoFinishAllowed=!0)}_restartIdleTimeout(e){this.cancelIdleTimeout(),this._idleTimeoutID=setTimeout(()=>{this._finished||0!==Object.keys(this.activities).length||(this._finishReason=vm[1],this.end(e))},this._idleTimeout)}_pushActivity(e){this.cancelIdleTimeout(void 0,{restartOnChildSpanChange:!this._idleTimeoutCanceledPermanently}),sf&&hh.log(`[Tracing] pushActivity: ${e}`),this.activities[e]=!0,sf&&hh.log("[Tracing] new activities count",Object.keys(this.activities).length)}_popActivity(e){if(this.activities[e]&&(sf&&hh.log(`[Tracing] popActivity ${e}`),delete this.activities[e],sf&&hh.log("[Tracing] new activities count",Object.keys(this.activities).length)),0===Object.keys(this.activities).length){const e=Mp();this._idleTimeoutCanceledPermanently?this._autoFinishAllowed&&(this._finishReason=vm[5],this.end(e)):this._restartIdleTimeout(e+this._idleTimeout/1e3)}}_beat(){if(this._finished)return;const e=Object.keys(this.activities).join("");e===this._prevHeartbeatString?this._heartbeatCounter++:this._heartbeatCounter=1,this._prevHeartbeatString=e,this._heartbeatCounter>=3?this._autoFinishAllowed&&(sf&&hh.log("[Tracing] Transaction finished because of no change for 3 heart beats"),this.setStatus("deadline_exceeded"),this._finishReason=vm[0],this.end()):this._pingHeartbeat()}_pingHeartbeat(){sf&&hh.log(`pinging Heartbeat -> current counter: ${this._heartbeatCounter}`),setTimeout(()=>{this._beat()},this._heartbeatInterval)}}function wm(e,t,n){if(!am(t))return e.sampled=!1,e;if(void 0!==e.sampled)return e.setAttribute(hm,Number(e.sampled)),e;let s;return"function"==typeof t.tracesSampler?(s=t.tracesSampler(n),e.setAttribute(hm,Number(s))):void 0!==n.parentSampled?s=n.parentSampled:void 0!==t.tracesSampleRate?(s=t.tracesSampleRate,e.setAttribute(hm,Number(s))):(s=1,e.setAttribute(hm,s)),Sm(s)?s?(e.sampled=Math.random()<s,e.sampled?(sf&&hh.log(`[Tracing] starting ${e.op} transaction - ${gf(e).description}`),e):(sf&&hh.log(`[Tracing] Discarding transaction because it's not included in the random sample (sampling rate = ${Number(s)})`),e)):(sf&&hh.log("[Tracing] Discarding transaction because "+("function"==typeof t.tracesSampler?"tracesSampler returned 0 or false":"a negative sampling decision was inherited or tracesSampleRate is set to 0")),e.sampled=!1,e):(sf&&hh.warn("[Tracing] Discarding transaction because of invalid sample rate."),e.sampled=!1,e)}function Sm(e){return zd(e)||"number"!=typeof e&&"boolean"!=typeof e?(sf&&hh.warn(`[Tracing] Given sample rate is invalid. Sample rate must be a boolean or a number between 0 and 1. Got ${JSON.stringify(e)} of type ${JSON.stringify(typeof e)}.`),!1):!(e<0||e>1)||(sf&&hh.warn(`[Tracing] Given sample rate is invalid. Sample rate must be between 0 and 1. Got ${e}.`),!1)}function km(){const e=this.getScope().getSpan();return e?{"sentry-trace":pf(e)}:{}}function Tm(e,t){const n=this.getClient(),s=n&&n.getOptions()||{},r=s.instrumenter||"sentry",i=e.instrumenter||"sentry";r!==i&&(sf&&hh.error(`A transaction was started with instrumenter=\`${i}\`, but the SDK is configured with the \`${r}\` instrumenter.\nThe transaction will not be sampled. Please use the ${r} instrumentation to start transactions.`),e.sampled=!1);let o=new ym(e,this);return o=wm(o,s,{name:e.name,parentSampled:e.parentSampled,transactionContext:e,attributes:{...e.data,...e.attributes},...t}),o.isRecording()&&o.initSpanRecorder(s._experiments&&s._experiments.maxSpans),n&&n.emit&&n.emit("startTransaction",o),o}function Em(e,t,n,s,r,i,o,a=!1){const c=e.getClient(),l=c&&c.getOptions()||{};let u=new bm(t,e,n,s,o,r,a);return u=wm(u,l,{name:t.name,parentSampled:t.parentSampled,transactionContext:t,attributes:{...t.data,...t.attributes},...i}),u.isRecording()&&u.initSpanRecorder(l._experiments&&l._experiments.maxSpans),c&&c.emit&&c.emit("startTransaction",u),u}function xm(){const e=Yf();e.__SENTRY__&&(e.__SENTRY__.extensions=e.__SENTRY__.extensions||{},e.__SENTRY__.extensions.startTransaction||(e.__SENTRY__.extensions.startTransaction=Tm),e.__SENTRY__.extensions.traceHeaders||(e.__SENTRY__.extensions.traceHeaders=km),sm||(sm=!0,op(rm),lp(rm)))}function Cm(e){const t=e.protocol?`${e.protocol}:`:"",n=e.port?`:${e.port}`:"";return`${t}//${e.host}${n}${e.path?`/${e.path}`:""}/api/`}function Im(e,t){return n={sentry_key:e.publicKey,sentry_version:"7",...t&&{sentry_client:`${t.name}/${t.version}`}},Object.keys(n).map(e=>`${encodeURIComponent(e)}=${encodeURIComponent(n[e])}`).join("&");var n}function Rm(e,t={}){const n="string"==typeof t?t:t.tunnel,s="string"!=typeof t&&t._metadata?t._metadata.sdk:void 0;return n||`${function(e){return`${Cm(e)}${e.projectId}/envelope/`}(e)}?${Im(e,s)}`}const Om=[];function Am(e){const t=e.defaultIntegrations||[],n=e.integrations;let s;t.forEach(e=>{e.isDefaultInstance=!0}),s=Array.isArray(n)?[...t,...n]:"function"==typeof n?Wh(n(t)):t;const r=function(e){const t={};return e.forEach(e=>{const{name:n}=e,s=t[n];s&&!s.isDefaultInstance&&e.isDefaultInstance||(t[n]=e)}),Object.keys(t).map(e=>t[e])}(s),i=function(e,t){for(let n=0;n<e.length;n++)if(!0===t(e[n]))return n;return-1}(r,e=>"Debug"===e.name);if(-1!==i){const[e]=r.splice(i,1);r.push(e)}return r}function Pm(e,t){for(const n of t)n&&n.afterAllSetup&&n.afterAllSetup(e)}function Mm(e,t,n){if(n[t.name])sf&&hh.log(`Integration skipped because it was already installed: ${t.name}`);else{if(n[t.name]=t,-1===Om.indexOf(t.name)&&(t.setupOnce(af,Qf),Om.push(t.name)),t.setup&&"function"==typeof t.setup&&t.setup(e),e.on&&"function"==typeof t.preprocessEvent){const n=t.preprocessEvent.bind(t);e.on("preprocessEvent",(t,s)=>n(t,s,e))}if(e.addEventProcessor&&"function"==typeof t.processEvent){const n=t.processEvent.bind(t),s=Object.assign((t,s)=>n(t,s,e),{id:t.name});e.addEventProcessor(s)}sf&&hh.log(`Integration installed: ${t.name}`)}}function Dm(e,t){return Object.assign(function(...e){return t(...e)},{id:e})}function jm(e,t,n,s){const r={sent_at:(new Date).toISOString()};n&&n.sdk&&(r.sdk={name:n.sdk.name,version:n.sdk.version}),s&&t&&(r.dsn=fh(t));const i=function(e){const t=function(e){let t="";for(const n of e){const e=Object.entries(n.tags),s=e.length>0?`|#${e.map(([e,t])=>`${e}:${t}`).join(",")}`:"";t+=`${n.name}@${n.unit}:${n.metric}|${n.metricType}${s}|T${n.timestamp}\n`}return t}(e);return[{type:"statsd",length:t.length},t]}(e);return Wp(r,[i])}const Lm="Not capturing exception because it's already been captured.";class Nm{constructor(e){if(this._options=e,this._integrations={},this._integrationsInitialized=!1,this._numProcessing=0,this._outcomes={},this._hooks={},this._eventProcessors=[],e.dsn?this._dsn=gh(e.dsn):sf&&hh.warn("No DSN provided, client will not send events."),this._dsn){const t=Rm(this._dsn,e);this._transport=e.transport({tunnel:this._options.tunnel,recordDroppedEvent:this.recordDroppedEvent.bind(this),...e.transportOptions,url:t})}}captureException(e,t,n){if(zh(e))return void(sf&&hh.log(Lm));let s=t&&t.event_id;return this._process(this.eventFromException(e,t).then(e=>this._captureEvent(e,t,n)).then(e=>{s=e})),s}captureMessage(e,t,n,s){let r=n&&n.event_id;const i=Nd(e)?e:String(e),o=qd(e)?this.eventFromMessage(i,t,n):this.eventFromException(e,n);return this._process(o.then(e=>this._captureEvent(e,n,s)).then(e=>{r=e})),r}captureEvent(e,t,n){if(t&&t.originalException&&zh(t.originalException))return void(sf&&hh.log(Lm));let s=t&&t.event_id;const r=(e.sdkProcessingMetadata||{}).capturedSpanScope;return this._process(this._captureEvent(e,t,r||n).then(e=>{s=e})),s}captureSession(e){"string"!=typeof e.release?sf&&hh.warn("Discarded session because of missing or non-string release"):(this.sendSession(e),uf(e,{init:!1}))}getDsn(){return this._dsn}getOptions(){return this._options}getSdkMetadata(){return this._options._metadata}getTransport(){return this._transport}flush(e){const t=this._transport;return t?(this.metricsAggregator&&this.metricsAggregator.flush(),this._isClientDoneProcessing(e).then(n=>t.flush(e).then(e=>n&&e))):Ep(!0)}close(e){return this.flush(e).then(e=>(this.getOptions().enabled=!1,this.metricsAggregator&&this.metricsAggregator.close(),e))}getEventProcessors(){return this._eventProcessors}addEventProcessor(e){this._eventProcessors.push(e)}setupIntegrations(e){(e&&!this._integrationsInitialized||this._isEnabled()&&!this._integrationsInitialized)&&this._setupIntegrations()}init(){this._isEnabled()&&this._setupIntegrations()}getIntegrationById(e){return this.getIntegrationByName(e)}getIntegrationByName(e){return this._integrations[e]}getIntegration(e){try{return this._integrations[e.id]||null}catch(t){return sf&&hh.warn(`Cannot retrieve integration ${e.id} from the current Client`),null}}addIntegration(e){const t=this._integrations[e.name];Mm(this,e,this._integrations),t||Pm(this,[e])}sendEvent(e,t={}){this.emit("beforeSendEvent",e,t);let n=function(e,t,n,s){const r=Qp(n),i=e.type&&"replay_event"!==e.type?e.type:"event";!function(e,t){t&&(e.sdk=e.sdk||{},e.sdk.name=e.sdk.name||t.name,e.sdk.version=e.sdk.version||t.version,e.sdk.integrations=[...e.sdk.integrations||[],...t.integrations||[]],e.sdk.packages=[...e.sdk.packages||[],...t.packages||[]])}(e,n&&n.sdk);const o=Zp(e,r,s,t);return delete e.sdkProcessingMetadata,Wp(o,[[{type:i},e]])}(e,this._dsn,this._options._metadata,this._options.tunnel);for(const r of t.attachments||[])n=Hp(n,Gp(r,this._options.transportOptions&&this._options.transportOptions.textEncoder));const s=this._sendEnvelope(n);s&&s.then(t=>this.emit("afterSendEvent",e,t),null)}sendSession(e){const t=function(e,t,n,s){const r=Qp(n);return Wp({sent_at:(new Date).toISOString(),...r&&{sdk:r},...!!s&&t&&{dsn:fh(t)}},["aggregates"in e?[{type:"sessions"},e]:[{type:"session"},e.toJSON()]])}(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}recordDroppedEvent(e,t,n){if(this._options.sendClientReports){const s="number"==typeof n?n:1,r=`${e}:${t}`;sf&&hh.log(`Recording outcome: "${r}"${s>1?` (${s} times)`:""}`),this._outcomes[r]=(this._outcomes[r]||0)+s}}captureAggregateMetrics(e){sf&&hh.log(`Flushing aggregated metrics, number of metrics: ${e.length}`);const t=jm(e,this._dsn,this._options._metadata,this._options.tunnel);this._sendEnvelope(t)}on(e,t){this._hooks[e]||(this._hooks[e]=[]),this._hooks[e].push(t)}emit(e,...t){this._hooks[e]&&this._hooks[e].forEach(e=>e(...t))}_setupIntegrations(){const{integrations:e}=this._options;this._integrations=function(e,t){const n={};return t.forEach(t=>{t&&Mm(e,t,n)}),n}(this,e),Pm(this,e),this._integrationsInitialized=!0}_updateSessionFromEvent(e,t){let n=!1,s=!1;const r=t.exception&&t.exception.values;if(r){s=!0;for(const e of r){const t=e.mechanism;if(t&&!1===t.handled){n=!0;break}}}const i="ok"===e.status;(i&&0===e.errors||i&&n)&&(uf(e,{...n&&{status:"crashed"},errors:e.errors||Number(s||n)}),this.captureSession(e))}_isClientDoneProcessing(e){return new Cp(t=>{let n=0;const s=setInterval(()=>{0==this._numProcessing?(clearInterval(s),t(!0)):(n+=1,e&&n>=e&&(clearInterval(s),t(!1)))},1)})}_isEnabled(){return!1!==this.getOptions().enabled&&void 0!==this._transport}_prepareEvent(e,t,n,s=Zf()){const r=this.getOptions(),i=Object.keys(this._integrations);return!t.integrations&&i.length>0&&(t.integrations=i),this.emit("preprocessEvent",e,t),_f(r,e,t,n,this,s).then(e=>{if(null===e)return e;const t={...s.getPropagationContext(),...n?n.getPropagationContext():void 0};if(!(e.contexts&&e.contexts.trace)&&t){const{traceId:s,spanId:r,parentSpanId:i,dsc:o}=t;e.contexts={trace:{trace_id:s,span_id:r,parent_span_id:i},...e.contexts};const a=o||Nf(s,this,n);e.sdkProcessingMetadata={dynamicSamplingContext:a,...e.sdkProcessingMetadata}}return e})}_captureEvent(e,t={},n){return this._processEvent(e,t,n).then(e=>e.event_id,e=>{if(sf){const t=e;"log"===t.logLevel?hh.log(t.message):hh.warn(t)}})}_processEvent(e,t,n){const s=this.getOptions(),{sampleRate:r}=s,i=Um(e),o=qm(e),a=e.type||"error",c=`before send for type \`${a}\``;if(o&&"number"==typeof r&&Math.random()>r)return this.recordDroppedEvent("sample_rate","error",e),xp(new yh(`Discarding event because it's not included in the random sample (sampling rate = ${r})`,"log"));const l="replay_event"===a?"replay":a,u=(e.sdkProcessingMetadata||{}).capturedSpanIsolationScope;return this._prepareEvent(e,t,n,u).then(n=>{if(null===n)throw this.recordDroppedEvent("event_processor",l,e),new yh("An event processor returned `null`, will not send event.","log");if(t.data&&!0===t.data.__sentry__)return n;const r=function(e,t,n){const{beforeSend:s,beforeSendTransaction:r}=e;if(qm(t)&&s)return s(t,n);if(Um(t)&&r){if(t.spans){const e=t.spans.length;t.sdkProcessingMetadata={...t.sdkProcessingMetadata,spanCountBeforeProcessing:e}}return r(t,n)}return t}(s,n,t);return function(e,t){const n=`${t} must return \`null\` or a valid event.`;if(Bd(e))return e.then(e=>{if(!Ud(e)&&null!==e)throw new yh(n);return e},e=>{throw new yh(`${t} rejected with ${e}`)});if(!Ud(e)&&null!==e)throw new yh(n);return e}(r,c)}).then(s=>{if(null===s){if(this.recordDroppedEvent("before_send",l,e),i){const t=1+(e.spans||[]).length;this.recordDroppedEvent("before_send","span",t)}throw new yh(`${c} returned \`null\`, will not send event.`,"log")}const r=n&&n.getSession();if(!i&&r&&this._updateSessionFromEvent(r,s),i){const e=(s.sdkProcessingMetadata&&s.sdkProcessingMetadata.spanCountBeforeProcessing||0)-(s.spans?s.spans.length:0);e>0&&this.recordDroppedEvent("before_send","span",e)}const o=s.transaction_info;if(i&&o&&s.transaction!==e.transaction){const e="custom";s.transaction_info={...o,source:e}}return this.sendEvent(s,t),s}).then(null,e=>{if(e instanceof yh)throw e;throw this.captureException(e,{data:{__sentry__:!0},originalException:e}),new yh(`Event processing pipeline threw an error, original event will not be sent. Details have been sent as a new event.\nReason: ${e}`)})}_process(e){this._numProcessing++,e.then(e=>(this._numProcessing--,e),e=>(this._numProcessing--,e))}_sendEnvelope(e){if(this.emit("beforeEnvelope",e),this._isEnabled()&&this._transport)return this._transport.send(e).then(null,e=>{sf&&hh.error("Error while sending event:",e)});sf&&hh.error("Transport disabled")}_clearOutcomes(){const e=this._outcomes;return this._outcomes={},Object.keys(e).map(t=>{const[n,s]=t.split(":");return{reason:n,category:s,quantity:e[t]}})}}function qm(e){return void 0===e.type}function Um(e){return"transaction"===e.type}function Fm(e,t){!0===t.debug&&(sf?hh.enable():dh(()=>{}));Af().update(t.initialScope);const n=new e(t);!function(e){const t=Qf().getStackTop();t.client=e,t.scope.setClient(e)}(n),function(e){e.init?e.init():e.setupIntegrations&&e.setupIntegrations()}(n)}function Bm(e,t,n=Ip(e.bufferSize||30)){let s={};function r(r){const i=[];if(Vp(r,(t,n)=>{const r=Xp(n);if(ef(s,r)){const s=zm(t,n);e.recordDroppedEvent("ratelimit_backoff",r,s)}else i.push(t)}),0===i.length)return Ep();const o=Wp(r[0],i),a=t=>{Vp(o,(n,s)=>{const r=zm(n,s);e.recordDroppedEvent(t,Xp(s),r)})};return n.add(()=>t({body:Kp(o,e.textEncoder)}).then(e=>(void 0!==e.statusCode&&(e.statusCode<200||e.statusCode>=300)&&sf&&hh.warn(`Sentry responded with status code ${e.statusCode} to sent event.`),s=tf(s,e),e),e=>{throw a("network_error"),e})).then(e=>e,e=>{if(e instanceof yh)return sf&&hh.error("Skipped sending event because buffer is full."),a("queue_overflow"),Ep();throw e})}return r.__sentry__baseTransport__=!0,{send:r,flush:e=>n.drain(e)}}function zm(e,t){if("event"===t||"transaction"===t)return Array.isArray(e)?e[1]:void 0}function Wm(e){return[{type:"span"},e]}function Hm(e,t){const n=t&&function(e){return void 0!==e.getClient}(t)?t.getClient():t,s=n&&n.getDsn(),r=n&&n.getOptions().tunnel;return function(e,t){return!!t&&e.includes(t.host)}(e,s)||function(e,t){if(!t)return!1;return Vm(e)===Vm(t)}(e,r)}function Vm(e){return"/"===e[e.length-1]?e.slice(0,-1):e}const Jm=[/^Script error\.?$/,/^Javascript error: Script error\.? on line 0$/,/^ResizeObserver loop completed with undelivered notifications.$/,/^Cannot redefine property: googletag$/],Km=[/^.*\/healthcheck$/,/^.*\/healthy$/,/^.*\/live$/,/^.*\/ready$/,/^.*\/heartbeat$/,/^.*\/health$/,/^.*\/healthz$/],Gm="InboundFilters",Ym=(e={})=>({name:Gm,setupOnce(){},processEvent(t,n,s){const r=s.getOptions(),i=function(e={},t={}){return{allowUrls:[...e.allowUrls||[],...t.allowUrls||[]],denyUrls:[...e.denyUrls||[],...t.denyUrls||[]],ignoreErrors:[...e.ignoreErrors||[],...t.ignoreErrors||[],...e.disableErrorDefaults?[]:Jm],ignoreTransactions:[...e.ignoreTransactions||[],...t.ignoreTransactions||[],...e.disableTransactionDefaults?[]:Km],ignoreInternal:void 0===e.ignoreInternal||e.ignoreInternal}}(e,r);return function(e,t){if(t.ignoreInternal&&function(e){try{return"SentryError"===e.exception.values[0].type}catch(t){}return!1}(e))return sf&&hh.warn(`Event dropped due to being internal Sentry Error.\nEvent: ${Uh(e)}`),!0;if(function(e,t){if(e.type||!t||!t.length)return!1;return function(e){const t=[];e.message&&t.push(e.message);let n;try{n=e.exception.values[e.exception.values.length-1]}catch(s){}n&&n.value&&(t.push(n.value),n.type&&t.push(`${n.type}: ${n.value}`));sf&&0===t.length&&hh.error(`Could not extract message for event ${Uh(e)}`);return t}(e).some(e=>Gd(e,t))}(e,t.ignoreErrors))return sf&&hh.warn(`Event dropped due to being matched by \`ignoreErrors\` option.\nEvent: ${Uh(e)}`),!0;if(function(e,t){if("transaction"!==e.type||!t||!t.length)return!1;const n=e.transaction;return!!n&&Gd(n,t)}(e,t.ignoreTransactions))return sf&&hh.warn(`Event dropped due to being matched by \`ignoreTransactions\` option.\nEvent: ${Uh(e)}`),!0;if(function(e,t){if(!t||!t.length)return!1;const n=Xm(e);return!!n&&Gd(n,t)}(e,t.denyUrls))return sf&&hh.warn(`Event dropped due to being matched by \`denyUrls\` option.\nEvent: ${Uh(e)}.\nUrl: ${Xm(e)}`),!0;if(!function(e,t){if(!t||!t.length)return!0;const n=Xm(e);return!n||Gd(n,t)}(e,t.allowUrls))return sf&&hh.warn(`Event dropped due to not being matched by \`allowUrls\` option.\nEvent: ${Uh(e)}.\nUrl: ${Xm(e)}`),!0;return!1}(t,i)?null:t}});function Xm(e){try{let n;try{n=e.exception.values[0].stacktrace.frames}catch(t){}return n?function(e=[]){for(let t=e.length-1;t>=0;t--){const n=e[t];if(n&&"<anonymous>"!==n.filename&&"[native code]"!==n.filename)return n.filename||null}return null}(n):null}catch(n){return sf&&hh.error(`Cannot extract url for event ${Uh(e)}`),null}}let Qm;Dm(Gm,Ym);const Zm="FunctionToString",eg=new WeakMap,tg=()=>({name:Zm,setupOnce(){Qm=Function.prototype.toString;try{Function.prototype.toString=function(...e){const t=bh(this),n=eg.has(Of())&&void 0!==t?t:this;return Qm.apply(n,e)}}catch(e){}},setup(e){eg.set(e,!0)}});Dm(Zm,tg);const ng="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__,sg=th;const rg=(e,t,n)=>{let s,r;return i=>{t.value>=0&&(i||n)&&(r=t.value-(s||0),(r||void 0===s)&&(s=t.value,t.delta=r,e(t)))}},ig=()=>sg.__WEB_VITALS_POLYFILL__?sg.performance&&(performance.getEntriesByType&&performance.getEntriesByType("navigation")[0]||(()=>{const e=sg.performance.timing,t=sg.performance.navigation.type,n={entryType:"navigation",startTime:0,type:2==t?"back_forward":1===t?"reload":"navigate"};for(const s in e)"navigationStart"!==s&&"toJSON"!==s&&(n[s]=Math.max(e[s]-e.navigationStart,0));return n})()):sg.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0],og=()=>{const e=ig();return e&&e.activationStart||0},ag=(e,t)=>{const n=ig();let s="navigate";return n&&(s=sg.document&&sg.document.prerendering||og()>0?"prerender":n.type.replace(/_/g,"-")),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:`v3-${Date.now()}-${Math.floor(8999999999999*Math.random())+1e12}`,navigationType:s}},cg=(e,t,n)=>{try{if(PerformanceObserver.supportedEntryTypes.includes(e)){const s=new PerformanceObserver(e=>{t(e.getEntries())});return s.observe(Object.assign({type:e,buffered:!0},n||{})),s}}catch(s){}},lg=(e,t)=>{const n=s=>{"pagehide"!==s.type&&"hidden"!==sg.document.visibilityState||(e(s),t&&(removeEventListener("visibilitychange",n,!0),removeEventListener("pagehide",n,!0)))};sg.document&&(addEventListener("visibilitychange",n,!0),addEventListener("pagehide",n,!0))};let ug=-1;const dg=()=>(ug<0&&(sg.document&&sg.document.visibilityState&&(ug="hidden"!==sg.document.visibilityState||sg.document.prerendering?1/0:0),lg(({timeStamp:e})=>{ug=e},!0)),{get firstHiddenTime(){return ug}});let hg=0,pg=1/0,fg=0;const mg=e=>{e.forEach(e=>{e.interactionId&&(pg=Math.min(pg,e.interactionId),fg=Math.max(fg,e.interactionId),hg=fg?(fg-pg)/7+1:0)})};let gg;const yg=()=>gg?hg:performance.interactionCount||0,_g=[],vg={},$g=e=>{const t=_g[_g.length-1],n=vg[e.interactionId];if(n||_g.length<10||e.duration>t.latency){if(n)n.entries.push(e),n.latency=Math.max(n.latency,e.duration);else{const t={id:e.interactionId,latency:e.duration,entries:[e]};vg[t.id]=t,_g.push(t)}_g.sort((e,t)=>t.latency-e.latency),_g.splice(10).forEach(e=>{delete vg[e.id]})}},bg=(e,t)=>{t=t||{},"interactionCount"in performance||gg||(gg=cg("event",mg,{type:"event",buffered:!0,durationThreshold:0}));const n=ag("INP");let s;const r=e=>{e.forEach(e=>{if(e.interactionId&&$g(e),"first-input"===e.entryType){!_g.some(t=>t.entries.some(t=>e.duration===t.duration&&e.startTime===t.startTime))&&$g(e)}});const t=(()=>{const e=Math.min(_g.length-1,Math.floor(yg()/50));return _g[e]})();t&&t.latency!==n.value&&(n.value=t.latency,n.entries=t.entries,s())},i=cg("event",r,{durationThreshold:t.durationThreshold||40});s=rg(e,n,t.reportAllChanges),i&&(i.observe({type:"first-input",buffered:!0}),lg(()=>{r(i.takeRecords()),n.value<0&&yg()>0&&(n.value=0,n.entries=[]),s(!0)}))},wg={},Sg=e=>{sg.document&&(sg.document.prerendering?addEventListener("prerenderingchange",()=>Sg(e),!0):"complete"!==sg.document.readyState?addEventListener("load",()=>Sg(e),!0):setTimeout(e,0))},kg={},Tg={};let Eg,xg,Cg,Ig,Rg;function Og(e,t=!1){return qg("lcp",e,jg,Cg,t)}function Ag(e,t){return Ug(e,t),Tg[e]||(!function(e){const t={};"event"===e&&(t.durationThreshold=0);cg(e,t=>{Pg(e,{entries:t})},t)}(e),Tg[e]=!0),Fg(e,t)}function Pg(e,t){const n=kg[e];if(n&&n.length)for(const r of n)try{r(t)}catch(s){ng&&hh.error(`Error while triggering instrumentation handler.\nType: ${e}\nName: ${Oh(r)}\nError:`,s)}}function Mg(){return((e,t={})=>{const n=ag("CLS",0);let s,r=0,i=[];const o=e=>{e.forEach(e=>{if(!e.hadRecentInput){const t=i[0],o=i[i.length-1];r&&0!==i.length&&e.startTime-o.startTime<1e3&&e.startTime-t.startTime<5e3?(r+=e.value,i.push(e)):(r=e.value,i=[e]),r>n.value&&(n.value=r,n.entries=i,s&&s())}})},a=cg("layout-shift",o);if(a){s=rg(e,n,t.reportAllChanges);const r=()=>{o(a.takeRecords()),s(!0)};return lg(r),r}})(e=>{Pg("cls",{metric:e}),Eg=e},{reportAllChanges:!0})}function Dg(){return(e=>{const t=dg(),n=ag("FID");let s;const r=e=>{e.startTime<t.firstHiddenTime&&(n.value=e.processingStart-e.startTime,n.entries.push(e),s(!0))},i=e=>{e.forEach(r)},o=cg("first-input",i);s=rg(e,n),o&&lg(()=>{i(o.takeRecords()),o.disconnect()},!0)})(e=>{Pg("fid",{metric:e}),xg=e})}function jg(){return(e=>{const t=dg(),n=ag("LCP");let s;const r=e=>{const r=e[e.length-1];if(r){const e=Math.max(r.startTime-og(),0);e<t.firstHiddenTime&&(n.value=e,n.entries=[r],s())}},i=cg("largest-contentful-paint",r);if(i){s=rg(e,n);const t=()=>{wg[n.id]||(r(i.takeRecords()),i.disconnect(),wg[n.id]=!0,s(!0))};return["keydown","click"].forEach(e=>{sg.document&&addEventListener(e,t,{once:!0,capture:!0})}),lg(t,!0),t}})(e=>{Pg("lcp",{metric:e}),Cg=e})}function Lg(){return((e,t)=>{t=t||{};const n=ag("TTFB"),s=rg(e,n,t.reportAllChanges);Sg(()=>{const e=ig();if(e){if(n.value=Math.max(e.responseStart-og(),0),n.value<0||n.value>performance.now())return;n.entries=[e],s(!0)}})})(e=>{Pg("ttfb",{metric:e}),Ig=e})}function Ng(){return bg(e=>{Pg("inp",{metric:e}),Rg=e})}function qg(e,t,n,s,r=!1){let i;return Ug(e,t),Tg[e]||(i=n(),Tg[e]=!0),s&&t({metric:s}),Fg(e,t,r?i:void 0)}function Ug(e,t){kg[e]=kg[e]||[],kg[e].push(t)}function Fg(e,t,n){return()=>{n&&n();const s=kg[e];if(!s)return;const r=s.indexOf(t);-1!==r&&s.splice(r,1)}}function Bg(e){return"number"==typeof e&&isFinite(e)}function zg(e,{startTimestamp:t,...n}){return t&&e.startTimestamp>t&&(e.startTimestamp=t),e.startChild({startTimestamp:t,...n})}function Wg(e){return e/1e3}function Hg(){return sg&&sg.addEventListener&&sg.performance}let Vg,Jg,Kg=0,Gg={};function Yg(){const e=Hg();if(e&&Dp){e.mark&&sg.performance.mark("sentry-tracing-init");const t=qg("fid",({metric:e})=>{const t=e.entries[e.entries.length-1];if(!t)return;const n=Wg(Dp),s=Wg(t.startTime);ng&&hh.log("[Measurements] Adding FID"),Gg.fid={value:e.value,unit:"millisecond"},Gg["mark.fid"]={value:n+s,unit:"second"}},Dg,xg),n=function(e,t=!1){return qg("cls",e,Mg,Eg,t)}(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ng&&hh.log("[Measurements] Adding CLS"),Gg.cls={value:e.value,unit:""},Jg=t)},!0),s=Og(({metric:e})=>{const t=e.entries[e.entries.length-1];t&&(ng&&hh.log("[Measurements] Adding LCP"),Gg.lcp={value:e.value,unit:"millisecond"},Vg=t)},!0),r=function(e){return qg("ttfb",e,Lg,Ig)}(({metric:e})=>{e.entries[e.entries.length-1]&&(ng&&hh.log("[Measurements] Adding TTFB"),Gg.ttfb={value:e.value,unit:"millisecond"})});return()=>{t(),n(),s(),r()}}return()=>{}}function Xg(e,t){if(Hg()&&Dp){const n=function(e,t){return n=({metric:n})=>{if(void 0===n.value)return;const s=n.entries.find(e=>e.duration===n.value&&void 0!==Qg[e.name]),r=Of();if(!s||!r)return;const i=Qg[s.name],o=r.getOptions(),a=Wg(Dp+s.startTime),c=Wg(n.value),l=void 0!==s.interactionId?e[s.interactionId]:void 0;if(void 0===l)return;const{routeName:u,parentContext:d,activeTransaction:h,user:p,replayId:f}=l,m=void 0!==p?p.email||p.id||p.ip_address:void 0,g=void 0!==h?h.getProfileId():void 0,y=new gm({startTimestamp:a,endTimestamp:a+c,op:`ui.interaction.${i}`,name:ih(s.target),attributes:{release:o.release,environment:o.environment,transaction:u,...void 0!==m&&""!==m?{user:m}:{},...void 0!==g?{profile_id:g}:{},...void 0!==f?{replay_id:f}:{}},exclusiveTime:n.value,measurements:{inp:{value:n.value,unit:"millisecond"}}}),_=function(e,t,n){if(!am(t))return!1;let s;return s=void 0!==e&&"function"==typeof t.tracesSampler?t.tracesSampler({transactionContext:e,name:e.name,parentSampled:e.parentSampled,attributes:{...e.data,...e.attributes},location:sg.location}):void 0!==e&&void 0!==e.sampled?e.sampled:void 0!==t.tracesSampleRate?t.tracesSampleRate:1,Sm(s)?!0===s?n:!1===s?0:s*n:(ng&&hh.warn("[Tracing] Discarding interaction span because of invalid sample rate."),!1)}(d,o,t);if(_&&Math.random()<_){const e=y?function(e,t){const n={sent_at:(new Date).toISOString()};return t&&(n.dsn=fh(t)),Wp(n,e.map(Wm))}([y],r.getDsn()):void 0,t=r&&r.getTransport();return void(t&&e&&t.send(e).then(null,e=>{ng&&hh.error("Error while sending interaction:",e)}))}},qg("inp",n,Ng,Rg);var n}(e,t);return()=>{n()}}return()=>{}}const Qg={click:"click",pointerdown:"click",pointerup:"click",mousedown:"click",mouseup:"click",touchstart:"click",touchend:"click",mouseover:"hover",mouseout:"hover",mouseenter:"hover",mouseleave:"hover",pointerover:"hover",pointerout:"hover",pointerenter:"hover",pointerleave:"hover",dragstart:"drag",dragend:"drag",drag:"drag",dragenter:"drag",dragleave:"drag",dragover:"drag",drop:"drag",keydown:"press",keyup:"press",keypress:"press",input:"press"};function Zg(e){const t=Hg();if(!t||!sg.performance.getEntries||!Dp)return;ng&&hh.log("[Tracing] Adding & adjusting spans using Performance API");const n=Wg(Dp),s=t.getEntries(),{op:r,start_timestamp:i}=gf(e);if(s.slice(Kg).forEach(t=>{const s=Wg(t.startTime),r=Wg(t.duration);if(!("navigation"===e.op&&i&&n+s<i))switch(t.entryType){case"navigation":!function(e,t,n){["unloadEvent","redirect","domContentLoadedEvent","loadEvent","connect"].forEach(s=>{ey(e,t,s,n)}),ey(e,t,"secureConnection",n,"TLS/SSL","connectEnd"),ey(e,t,"fetch",n,"cache","domainLookupStart"),ey(e,t,"domainLookup",n,"DNS"),function(e,t,n){t.responseEnd&&(zg(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"request",startTimestamp:n+Wg(t.requestStart),endTimestamp:n+Wg(t.responseEnd)}),zg(e,{op:"browser",origin:"auto.browser.browser.metrics",description:"response",startTimestamp:n+Wg(t.responseStart),endTimestamp:n+Wg(t.responseEnd)}))}(e,t,n)}(e,t,n);break;case"mark":case"paint":case"measure":{!function(e,t,n,s,r){const i=r+n,o=i+s;zg(e,{description:t.name,endTimestamp:o,op:t.entryType,origin:"auto.resource.browser.metrics",startTimestamp:i})}(e,t,s,r,n);const i=dg(),o=t.startTime<i.firstHiddenTime;"first-paint"===t.name&&o&&(ng&&hh.log("[Measurements] Adding FP"),Gg.fp={value:t.startTime,unit:"millisecond"}),"first-contentful-paint"===t.name&&o&&(ng&&hh.log("[Measurements] Adding FCP"),Gg.fcp={value:t.startTime,unit:"millisecond"});break}case"resource":!function(e,t,n,s,r,i){if("xmlhttprequest"===t.initiatorType||"fetch"===t.initiatorType)return;const o=Rp(n),a={};ty(a,t,"transferSize","http.response_transfer_size"),ty(a,t,"encodedBodySize","http.response_content_length"),ty(a,t,"decodedBodySize","http.decoded_response_content_length"),"renderBlockingStatus"in t&&(a["resource.render_blocking_status"]=t.renderBlockingStatus);o.protocol&&(a["url.scheme"]=o.protocol.split(":").pop());o.host&&(a["server.address"]=o.host);a["url.same_origin"]=n.includes(sg.location.origin);const c=i+s,l=c+r;zg(e,{description:n.replace(sg.location.origin,""),endTimestamp:l,op:t.initiatorType?`resource.${t.initiatorType}`:"resource.other",origin:"auto.resource.browser.metrics",startTimestamp:c,data:a})}(e,t,t.name,s,r,n)}}),Kg=Math.max(s.length-1,0),function(e){const t=sg.navigator;if(!t)return;const n=t.connection;n&&(n.effectiveType&&e.setTag("effectiveConnectionType",n.effectiveType),n.type&&e.setTag("connectionType",n.type),Bg(n.rtt)&&(Gg["connection.rtt"]={value:n.rtt,unit:"millisecond"}));Bg(t.deviceMemory)&&e.setTag("deviceMemory",`${t.deviceMemory} GB`);Bg(t.hardwareConcurrency)&&e.setTag("hardwareConcurrency",String(t.hardwareConcurrency))}(e),"pageload"===r){!function(e){const t=ig();if(!t)return;const{responseStart:n,requestStart:s}=t;s<=n&&(ng&&hh.log("[Measurements] Adding TTFB Request Time"),e["ttfb.requestTime"]={value:n-s,unit:"millisecond"})}(Gg),["fcp","fp","lcp"].forEach(e=>{if(!Gg[e]||!i||n>=i)return;const t=Gg[e].value,s=n+Wg(t),r=Math.abs(1e3*(s-i)),o=r-t;ng&&hh.log(`[Measurements] Normalized ${e} from ${t} to ${r} (${o})`),Gg[e].value=r});const t=Gg["mark.fid"];t&&Gg.fid&&(zg(e,{description:"first input delay",endTimestamp:t.value+Wg(Gg.fid.value),op:"ui.action",origin:"auto.ui.browser.metrics",startTimestamp:t.value}),delete Gg["mark.fid"]),"fcp"in Gg||delete Gg.cls,Object.keys(Gg).forEach(e=>{!function(e,t,n){const s=nm();s&&s.setMeasurement(e,t,n)}(e,Gg[e].value,Gg[e].unit)}),function(e){Vg&&(ng&&hh.log("[Measurements] Adding LCP Data"),Vg.element&&e.setTag("lcp.element",ih(Vg.element)),Vg.id&&e.setTag("lcp.id",Vg.id),Vg.url&&e.setTag("lcp.url",Vg.url.trim().slice(0,200)),e.setTag("lcp.size",Vg.size));Jg&&Jg.sources&&(ng&&hh.log("[Measurements] Adding CLS Data"),Jg.sources.forEach((t,n)=>e.setTag(`cls.source.${n+1}`,ih(t.node))))}(e)}Vg=void 0,Jg=void 0,Gg={}}function ey(e,t,n,s,r,i){const o=i?t[i]:t[`${n}End`],a=t[`${n}Start`];a&&o&&zg(e,{op:"browser",origin:"auto.browser.browser.metrics",description:r||n,startTimestamp:s+Wg(a),endTimestamp:s+Wg(o)})}function ty(e,t,n,s){const r=t[n];null!=r&&r<2147483647&&(e[s]=r)}function ny(e,t,n,s,r="auto.http.browser"){if(!am()||!e.fetchData)return;const i=t(e.fetchData.url);if(e.endTimestamp&&i){const t=e.fetchData.__span;if(!t)return;const n=s[t];return void(n&&(!function(e,t){if(t.response){om(e,t.response.status);const n=t.response&&t.response.headers&&t.response.headers.get("content-length");if(n){const t=parseInt(n);t>0&&e.setAttribute("http.response_content_length",t)}}else t.error&&e.setStatus("internal_error");e.end()}(n,e),delete s[t]))}const o=Af(),a=Of(),{method:c,url:l}=e.fetchData,u=function(e){try{return new URL(e).href}catch(t){return}}(l),d=u?Rp(u).host:void 0,h=i?cm({name:`${c} ${l}`,onlyIfParent:!0,attributes:{url:l,type:"fetch","http.method":c,"http.url":u,"server.address":d,[fm]:r},op:"http.client"}):void 0;if(h&&(e.fetchData.__span=h.spanContext().spanId,s[h.spanContext().spanId]=h),n(e.fetchData.url)&&a){const t=e.args[0];e.args[1]=e.args[1]||{};const n=e.args[1];n.headers=function(e,t,n,s,r){const i=r||n.getSpan(),o=Zf(),{traceId:a,spanId:c,sampled:l,dsc:u}={...o.getPropagationContext(),...n.getPropagationContext()},d=i?pf(i):zp(a,c,l),h=qp(u||(i?qf(i):Nf(a,t,n))),p=s.headers||("undefined"!=typeof Request&&Wd(e,Request)?e.headers:void 0);if(p){if("undefined"!=typeof Headers&&Wd(p,Headers)){const e=new Headers(p);return e.append("sentry-trace",d),h&&e.append(jp,h),e}if(Array.isArray(p)){const e=[...p,["sentry-trace",d]];return h&&e.push([jp,h]),e}{const e="baggage"in p?p.baggage:void 0,t=[];return Array.isArray(e)?t.push(...e):e&&t.push(e),h&&t.push(h),{...p,"sentry-trace":d,baggage:t.length>0?t.join(","):void 0}}}return{"sentry-trace":d,baggage:h}}(t,a,o,n,h)}return h}const sy=["localhost",/^\/(?!\/)/],ry={traceFetch:!0,traceXHR:!0,enableHTTPTimings:!0,tracingOrigins:sy,tracePropagationTargets:sy};function iy(e){const{traceFetch:t,traceXHR:n,tracePropagationTargets:s,tracingOrigins:r,shouldCreateSpanForRequest:i,enableHTTPTimings:o}={traceFetch:ry.traceFetch,traceXHR:ry.traceXHR,...e},a="function"==typeof i?i:e=>!0,c=e=>function(e,t){return Gd(e,t||sy)}(e,s||r),l={};t&&tp(e=>{const t=ny(e,a,c,l);if(t){const n=cy(e.fetchData.url),s=n?Rp(n).host:void 0;t.setAttributes({"http.url":n,"server.address":s})}o&&t&&oy(t)}),n&&_p(e=>{const t=function(e,t,n,s){const r=e.xhr,i=r&&r[yp];if(!am()||!r||r.__sentry_own_request__||!i)return;const o=t(i.url);if(e.endTimestamp&&o){const e=r.__sentry_xhr_span_id__;if(!e)return;const t=s[e];return void(t&&void 0!==i.status_code&&(om(t,i.status_code),t.end(),delete s[e]))}const a=Af(),c=Zf(),l=cy(i.url),u=l?Rp(l).host:void 0,d=o?cm({name:`${i.method} ${i.url}`,onlyIfParent:!0,attributes:{type:"xhr","http.method":i.method,"http.url":l,url:i.url,"server.address":u,[fm]:"auto.http.browser"},op:"http.client"}):void 0;d&&(r.__sentry_xhr_span_id__=d.spanContext().spanId,s[r.__sentry_xhr_span_id__]=d);const h=Of();if(r.setRequestHeader&&n(i.url)&&h){const{traceId:e,spanId:t,sampled:n,dsc:s}={...c.getPropagationContext(),...a.getPropagationContext()};!function(e,t,n){try{e.setRequestHeader("sentry-trace",t),n&&e.setRequestHeader(jp,n)}catch(s){}}(r,d?pf(d):zp(e,t,n),qp(s||(d?qf(d):Nf(e,h,a))))}return d}(e,a,c,l);o&&t&&oy(t)})}function oy(e){const{url:t}=gf(e).data||{};if(!t||"string"!=typeof t)return;const n=Ag("resource",({entries:s})=>{s.forEach(s=>{if(function(e){return"resource"===e.entryType&&"initiatorType"in e&&"string"==typeof e.nextHopProtocol&&("fetch"===e.initiatorType||"xmlhttprequest"===e.initiatorType)}(s)&&s.name.endsWith(t)){(function(e){const{name:t,version:n}=function(e){let t="unknown",n="unknown",s="";for(const r of e){if("/"===r){[t,n]=e.split("/");break}if(!isNaN(Number(r))){t="h"===s?"http":s,n=e.split(s)[1];break}s+=r}s===e&&(t=s);return{name:t,version:n}}(e.nextHopProtocol),s=[];if(s.push(["network.protocol.version",n],["network.protocol.name",t]),!Dp)return s;return[...s,["http.request.redirect_start",ay(e.redirectStart)],["http.request.fetch_start",ay(e.fetchStart)],["http.request.domain_lookup_start",ay(e.domainLookupStart)],["http.request.domain_lookup_end",ay(e.domainLookupEnd)],["http.request.connect_start",ay(e.connectStart)],["http.request.secure_connection_start",ay(e.secureConnectionStart)],["http.request.connection_end",ay(e.connectEnd)],["http.request.request_start",ay(e.requestStart)],["http.request.response_start",ay(e.responseStart)],["http.request.response_end",ay(e.responseEnd)]]})(s).forEach(t=>e.setAttribute(...t)),setTimeout(n)}})})}function ay(e=0){return((Dp||performance.timeOrigin)+e)/1e3}function cy(e){try{return new URL(e,sg.location.origin).href}catch(t){return}}const ly={..._m,markBackgroundTransactions:!0,routingInstrumentation:function(e,t=!0,n=!0){if(!sg||!sg.location)return void(ng&&hh.warn("Could not initialize routing instrumentation due to invalid location"));let s,r=sg.location.href;t&&(s=e({name:sg.location.pathname,startTimestamp:Dp?Dp/1e3:void 0,op:"pageload",origin:"auto.pageload.browser",metadata:{source:"url"}})),n&&fp(({to:t,from:n})=>{void 0===n&&r&&-1!==r.indexOf(t)?r=void 0:n!==t&&(r=void 0,s&&(ng&&hh.log(`[Tracing] Finishing current transaction with op: ${s.op}`),s.end()),s=e({name:sg.location.pathname,op:"navigation",origin:"auto.navigation.browser",metadata:{source:"url"}}))})},startTransactionOnLocationChange:!0,startTransactionOnPageLoad:!0,enableLongTask:!0,enableInp:!1,interactionsSampleRate:1,_experiments:{},...ry};class uy{constructor(e){this.name="BrowserTracing",this._hasSetTracePropagationTargets=!1,xm(),ng&&(this._hasSetTracePropagationTargets=!(!e||!e.tracePropagationTargets&&!e.tracingOrigins)),this.options={...ly,...e},void 0!==this.options._experiments.enableLongTask&&(this.options.enableLongTask=this.options._experiments.enableLongTask),e&&!e.tracePropagationTargets&&e.tracingOrigins&&(this.options.tracePropagationTargets=e.tracingOrigins),this._collectWebVitals=Yg(),this._interactionIdToRouteNameMapping={},this.options.enableInp&&Xg(this._interactionIdToRouteNameMapping,this.options.interactionsSampleRate),this.options.enableLongTask&&Ag("longtask",({entries:e})=>{for(const t of e){const e=nm();if(!e)return;const n=Wg(Dp+t.startTime),s=Wg(t.duration);e.startChild({description:"Main UI thread blocked",op:"ui.long-task",origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+s})}}),this.options._experiments.enableInteractions&&Ag("event",({entries:e})=>{for(const t of e){const e=nm();if(!e)return;if("click"===t.name){const n=Wg(Dp+t.startTime),s=Wg(t.duration),r={description:ih(t.target),op:`ui.interaction.${t.name}`,origin:"auto.ui.browser.metrics",startTimestamp:n,endTimestamp:n+s},i=ah(t.target);i&&(r.attributes={"ui.component_name":i}),e.startChild(r)}}}),this._latestRoute={name:void 0,context:void 0}}setupOnce(e,t){this._getCurrentHub=t;const n=t().getClient(),s=n&&n.getOptions(),{routingInstrumentation:r,startTransactionOnLocationChange:i,startTransactionOnPageLoad:o,markBackgroundTransactions:a,traceFetch:c,traceXHR:l,shouldCreateSpanForRequest:u,enableHTTPTimings:d,_experiments:h}=this.options,p=s&&s.tracePropagationTargets,f=p||this.options.tracePropagationTargets;ng&&this._hasSetTracePropagationTargets&&p&&hh.warn("[Tracing] The `tracePropagationTargets` option was set in the BrowserTracing integration and top level `Sentry.init`. The top level `Sentry.init` value is being used."),r(e=>{const n=this._createRouteTransaction(e);return this.options._experiments.onStartRouteTransaction&&this.options._experiments.onStartRouteTransaction(n,e,t),n},o,i),a&&(sg.document?sg.document.addEventListener("visibilitychange",()=>{const e=nm();if(sg.document.hidden&&e){const t="cancelled",{op:n,status:s}=gf(e);ng&&hh.log(`[Tracing] Transaction: ${t} -> since tab moved to the background, op: ${n}`),s||e.setStatus(t),e.setTag("visibilitychange","document.hidden"),e.end()}}):ng&&hh.warn("[Tracing] Could not set up background tab detection due to lack of global document")),h.enableInteractions&&this._registerInteractionListener(),this.options.enableInp&&this._registerInpInteractionListener(),iy({traceFetch:c,traceXHR:l,tracePropagationTargets:f,shouldCreateSpanForRequest:u,enableHTTPTimings:d})}_createRouteTransaction(e){if(!this._getCurrentHub)return void(ng&&hh.warn(`[Tracing] Did not create ${e.op} transaction because _getCurrentHub is invalid.`));const t=this._getCurrentHub(),{beforeNavigate:n,idleTimeout:s,finalTimeout:r,heartbeatInterval:i}=this.options,o="pageload"===e.op;let a;if(o){const t=o?dy("sentry-trace"):"",n=o?dy("baggage"):void 0,{traceId:s,dsc:r,parentSpanId:i,sampled:c}=Bp(t,n);a={traceId:s,parentSpanId:i,parentSampled:c,...e,metadata:{...e.metadata,dynamicSamplingContext:r},trimEnd:!0}}else a={trimEnd:!0,...e};const c="function"==typeof n?n(a):a,l=void 0===c?{...a,sampled:!1}:c;l.metadata=l.name!==a.name?{...l.metadata,source:"custom"}:l.metadata,this._latestRoute.name=l.name,this._latestRoute.context=l,!1===l.sampled&&ng&&hh.log(`[Tracing] Will not send ${l.op} transaction because of beforeNavigate.`),ng&&hh.log(`[Tracing] Starting ${l.op} transaction on scope`);const{location:u}=sg,d=Em(t,l,s,r,!0,{location:u},i,o);return o&&sg.document&&(sg.document.addEventListener("readystatechange",()=>{["interactive","complete"].includes(sg.document.readyState)&&d.sendAutoFinishSignal()}),["interactive","complete"].includes(sg.document.readyState)&&d.sendAutoFinishSignal()),d.registerBeforeFinishCallback(e=>{this._collectWebVitals(),Zg(e)}),d}_registerInteractionListener(){let e;const t=()=>{const{idleTimeout:t,finalTimeout:n,heartbeatInterval:s}=this.options,r="ui.action.click",i=nm();if(i&&i.op&&["navigation","pageload"].includes(i.op))return void(ng&&hh.warn(`[Tracing] Did not create ${r} transaction because a pageload or navigation transaction is in progress.`));if(e&&(e.setFinishReason("interactionInterrupted"),e.end(),e=void 0),!this._getCurrentHub)return void(ng&&hh.warn(`[Tracing] Did not create ${r} transaction because _getCurrentHub is invalid.`));if(!this._latestRoute.name)return void(ng&&hh.warn(`[Tracing] Did not create ${r} transaction because _latestRouteName is missing.`));const o=this._getCurrentHub(),{location:a}=sg,c={name:this._latestRoute.name,op:r,trimEnd:!0,data:{[dm]:this._latestRoute.context?hy(this._latestRoute.context):"url"}};e=Em(o,c,t,n,!0,{location:a},s)};["click"].forEach(e=>{sg.document&&addEventListener(e,t,{once:!1,capture:!0})})}_registerInpInteractionListener(){const e=({entries:e})=>{const t=Of(),n=void 0!==t&&void 0!==t.getIntegrationByName?t.getIntegrationByName("Replay"):void 0,s=void 0!==n?n.getReplayId():void 0,r=nm(),i=Af(),o=void 0!==i?i.getUser():void 0;e.forEach(e=>{if(function(e){return"duration"in e}(e)){const t=e.interactionId;if(void 0===t)return;const n=this._interactionIdToRouteNameMapping[t],i=e.duration,a=e.startTime,c=Object.keys(this._interactionIdToRouteNameMapping),l=c.length>0?c.reduce((e,t)=>this._interactionIdToRouteNameMapping[e].duration<this._interactionIdToRouteNameMapping[t].duration?e:t):void 0;if("first-input"===e.entryType){if(c.map(e=>this._interactionIdToRouteNameMapping[e]).some(e=>e.duration===i&&e.startTime===a))return}if(!t)return;if(n)n.duration=Math.max(n.duration,i);else if(c.length<10||void 0===l||i>this._interactionIdToRouteNameMapping[l].duration){const e=this._latestRoute.name,n=this._latestRoute.context;e&&n&&(l&&Object.keys(this._interactionIdToRouteNameMapping).length>=10&&delete this._interactionIdToRouteNameMapping[l],this._interactionIdToRouteNameMapping[t]={routeName:e,duration:i,parentContext:n,user:o,activeTransaction:r,replayId:s,startTime:a})}}})};Ag("event",e),Ag("first-input",e)}}function dy(e){const t=(n=`meta[name=${e}]`,rh.document&&rh.document.querySelector?rh.document.querySelector(n):null);var n;return t?t.getAttribute("content"):void 0}function hy(e){const t=e.attributes&&e.attributes[dm],n=e.data&&e.data[dm],s=e.metadata&&e.metadata.source;return t||n||s}const py=th;let fy=0;function my(){return fy>0}function gy(e,t={},n){if("function"!=typeof e)return e;try{const t=e.__sentry_wrapped__;if(t)return"function"==typeof t?t:e;if(bh(e))return e}catch(r){return e}const s=function(){const n=Array.prototype.slice.call(arguments);try{const s=n.map(e=>gy(e,t));return e.apply(this,s)}catch(s){throw fy++,setTimeout(()=>{fy--}),function(...e){const t=Qf();if(2===e.length){const[n,s]=e;return n?t.withScope(()=>(t.getStackTop().scope=n,s(n))):t.withScope(s)}t.withScope(e[0])}(e=>{e.addEventProcessor(e=>(t.mechanism&&(Fh(e,void 0),Bh(e,t.mechanism)),e.extra={...e.extra,arguments:n},e)),wf(s)}),s}};try{for(const t in e)Object.prototype.hasOwnProperty.call(e,t)&&(s[t]=e[t])}catch(i){}$h(s,e),vh(e,"__sentry_wrapped__",s);try{Object.getOwnPropertyDescriptor(s,"name").configurable&&Object.defineProperty(s,"name",{get:()=>e.name})}catch(i){}return s}const yy="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function _y(e,t){const n=$y(e,t),s={type:t&&t.name,value:wy(t)};return n.length&&(s.stacktrace={frames:n}),void 0===s.type&&""===s.value&&(s.value="Unrecoverable error caught"),s}function vy(e,t){return{exception:{values:[_y(e,t)]}}}function $y(e,t){const n=t.stacktrace||t.stack||"",s=function(e){if(e){if("number"==typeof e.framesToPop)return e.framesToPop;if(by.test(e.message))return 1}return 0}(t);try{return e(n,s)}catch(r){}return[]}const by=/Minified React error #\d+;/i;function wy(e){const t=e&&e.message;return t?t.error&&"string"==typeof t.error.message?t.error.message:t:"No error message"}function Sy(e,t,n,s,r){let i;if(Dd(t)&&t.error){return vy(e,t.error)}if(jd(t)||Md(t,"DOMException")){const r=t;if("stack"in t)i=vy(e,t);else{const t=r.name||(jd(r)?"DOMError":"DOMException"),o=r.message?`${t}: ${r.message}`:t;i=ky(e,o,n,s),Fh(i,o)}return"code"in r&&(i.tags={...i.tags,"DOMException.code":`${r.code}`}),i}if(Pd(t))return vy(e,t);if(Ud(t)||Fd(t)){return i=function(e,t,n,s){const r=Of(),i=r&&r.getOptions().normalizeDepth,o={exception:{values:[{type:Fd(t)?t.constructor.name:s?"UnhandledRejection":"Error",value:Ty(t,{isUnhandledRejection:s})}]},extra:{__serialized__:Sp(t,i)}};if(n){const t=$y(e,n);t.length&&(o.exception.values[0].stacktrace={frames:t})}return o}(e,t,n,r),Bh(i,{synthetic:!0}),i}return i=ky(e,t,n,s),Fh(i,`${t}`),Bh(i,{synthetic:!0}),i}function ky(e,t,n,s){const r={};if(s&&n){const s=$y(e,n);s.length&&(r.exception={values:[{value:t,stacktrace:{frames:s}}]})}if(Nd(t)){const{__sentry_template_string__:e,__sentry_template_values__:n}=t;return r.logentry={message:e,params:n},r}return r.message=t,r}function Ty(e,{isUnhandledRejection:t}){const n=function(e,t=40){const n=Object.keys(wh(e));if(n.sort(),!n.length)return"[object has no keys]";if(n[0].length>=t)return Vd(n[0],t);for(let s=n.length;s>0;s--){const e=n.slice(0,s).join(", ");if(!(e.length>t))return s===n.length?e:Vd(e,t)}return""}(e),s=t?"promise rejection":"exception";if(Dd(e))return`Event \`ErrorEvent\` captured as ${s} with message \`${e.message}\``;if(Fd(e)){return`Event \`${function(e){try{const t=Object.getPrototypeOf(e);return t?t.constructor.name:void 0}catch(t){}}(e)}\` (type=${e.type}) captured as ${s}`}return`Object captured as ${s} with keys: ${n}`}class Ey extends Nm{constructor(e){!function(e,t,n=[t],s="npm"){const r=e._metadata||{};r.sdk||(r.sdk={name:`sentry.javascript.${t}`,packages:n.map(e=>({name:`${s}:@sentry/${e}`,version:Vf})),version:Vf}),e._metadata=r}(e,"browser",["browser"],py.SENTRY_SDK_SOURCE||"npm"),super(e),e.sendClientReports&&py.document&&py.document.addEventListener("visibilitychange",()=>{"hidden"===py.document.visibilityState&&this._flushOutcomes()})}eventFromException(e,t){return function(e,t,n,s){const r=Sy(e,t,n&&n.syntheticException||void 0,s);return Bh(r),r.level="error",n&&n.event_id&&(r.event_id=n.event_id),Ep(r)}(this._options.stackParser,e,t,this._options.attachStacktrace)}eventFromMessage(e,t="info",n){return function(e,t,n="info",s,r){const i=ky(e,t,s&&s.syntheticException||void 0,r);return i.level=n,s&&s.event_id&&(i.event_id=s.event_id),Ep(i)}(this._options.stackParser,e,t,n,this._options.attachStacktrace)}captureUserFeedback(e){if(!this._isEnabled())return void(yy&&hh.warn("SDK not enabled, will not capture user feedback."));const t=function(e,{metadata:t,tunnel:n,dsn:s}){const r={event_id:e.event_id,sent_at:(new Date).toISOString(),...t&&t.sdk&&{sdk:{name:t.sdk.name,version:t.sdk.version}},...!!n&&!!s&&{dsn:fh(s)}},i=function(e){return[{type:"user_report"},e]}(e);return Wp(r,[i])}(e,{metadata:this.getSdkMetadata(),dsn:this.getDsn(),tunnel:this.getOptions().tunnel});this._sendEnvelope(t)}_prepareEvent(e,t,n){return e.platform=e.platform||"javascript",super._prepareEvent(e,t,n)}_flushOutcomes(){const e=this._clearOutcomes();if(0===e.length)return void(yy&&hh.log("No outcomes to send"));if(!this._dsn)return void(yy&&hh.log("No dsn provided, will not send outcomes"));yy&&hh.log("Sending outcomes:",e);const t=(n=e,Wp((s=this._options.tunnel&&fh(this._dsn))?{dsn:s}:{},[[{type:"client_report"},{timestamp:Pp(),discarded_events:n}]]));var n,s;this._sendEnvelope(t)}}let xy;function Cy(e,t=function(){if(xy)return xy;if(ep(py.fetch))return xy=py.fetch.bind(py);const e=py.document;let t=py.fetch;if(e&&"function"==typeof e.createElement)try{const n=e.createElement("iframe");n.hidden=!0,e.head.appendChild(n);const s=n.contentWindow;s&&s.fetch&&(t=s.fetch),e.head.removeChild(n)}catch(n){yy&&hh.warn("Could not create sandbox iframe for pure fetch check, bailing to window.fetch: ",n)}return xy=t.bind(py)}()){let n=0,s=0;return Bm(e,function(r){const i=r.body.length;n+=i,s++;const o={body:r.body,method:"POST",referrerPolicy:"origin",headers:e.headers,keepalive:n<=6e4&&s<15,...e.fetchOptions};try{return t(e.url,o).then(e=>(n-=i,s--,{statusCode:e.status,headers:{"x-sentry-rate-limits":e.headers.get("X-Sentry-Rate-Limits"),"retry-after":e.headers.get("Retry-After")}}))}catch(a){return xy=void 0,n-=i,s--,xp(a)}})}function Iy(e){return Bm(e,function(t){return new Cp((n,s)=>{const r=new XMLHttpRequest;r.onerror=s,r.onreadystatechange=()=>{4===r.readyState&&n({statusCode:r.status,headers:{"x-sentry-rate-limits":r.getResponseHeader("X-Sentry-Rate-Limits"),"retry-after":r.getResponseHeader("Retry-After")}})},r.open("POST",e.url);for(const t in e.headers)Object.prototype.hasOwnProperty.call(e.headers,t)&&r.setRequestHeader(t,e.headers[t]);r.send(t.body)})})}const Ry="?";function Oy(e,t,n,s){const r={filename:e,function:t,in_app:!0};return void 0!==n&&(r.lineno=n),void 0!==s&&(r.colno=s),r}const Ay=/^\s*at (?:(.+?\)(?: \[.+\])?|.*?) ?\((?:address at )?)?(?:async )?((?:<anonymous>|[-a-z]+:|.*bundle|\/)?.*?)(?::(\d+))?(?::(\d+))?\)?\s*$/i,Py=/\((\S*)(?::(\d+))(?::(\d+))\)/,My=/^\s*(.*?)(?:\((.*?)\))?(?:^|@)?((?:[-a-z]+)?:\/.*?|\[native code\]|[^@]*(?:bundle|\d+\.js)|\/[\w\-. /=]+)(?::(\d+))?(?::(\d+))?\s*$/i,Dy=/(\S+) line (\d+)(?: > eval line \d+)* > eval/i,jy=/^\s*at (?:((?:\[object object\])?.+) )?\(?((?:[-a-z]+):.*?):(\d+)(?::(\d+))?\)?\s*$/i,Ly=Ih(...[[30,e=>{const t=Ay.exec(e);if(t){if(t[2]&&0===t[2].indexOf("eval")){const e=Py.exec(t[2]);e&&(t[2]=e[1],t[3]=e[2],t[4]=e[3])}const[e,n]=Ny(t[1]||Ry,t[2]);return Oy(n,e,t[3]?+t[3]:void 0,t[4]?+t[4]:void 0)}}],[50,e=>{const t=My.exec(e);if(t){if(t[3]&&t[3].indexOf(" > eval")>-1){const e=Dy.exec(t[3]);e&&(t[1]=t[1]||"eval",t[3]=e[1],t[4]=e[2],t[5]="")}let e=t[3],n=t[1]||Ry;return[n,e]=Ny(n,e),Oy(e,n,t[4]?+t[4]:void 0,t[5]?+t[5]:void 0)}}],[40,e=>{const t=jy.exec(e);return t?Oy(t[2],t[1]||Ry,+t[3],t[4]?+t[4]:void 0):void 0}]]),Ny=(e,t)=>{const n=-1!==e.indexOf("safari-extension"),s=-1!==e.indexOf("safari-web-extension");return n||s?[-1!==e.indexOf("@")?e.split("@")[0]:Ry,n?`safari-extension:${t}`:`safari-web-extension:${t}`]:[e,t]},qy=1024,Uy="Breadcrumbs",Fy=(e={})=>{const t={console:!0,dom:!0,fetch:!0,history:!0,sentry:!0,xhr:!0,...e};return{name:Uy,setupOnce(){},setup(e){t.console&&function(e){const t="console";Mh(t,e),Dh(t,Lh)}(function(e){return function(t){if(Of()!==e)return;const n={category:"console",data:{arguments:t.args,logger:"console"},level:Ap(t.level),message:Jd(t.args," ")};if("assert"===t.level){if(!1!==t.args[0])return;n.message=`Assertion failed: ${Jd(t.args.slice(1)," ")||"console.assert"}`,n.data.arguments=t.args.slice(1)}Tf(n,{input:t.args,level:t.level})}}(e)),t.dom&&Gh(function(e,t){return function(n){if(Of()!==e)return;let s,r,i="object"==typeof t?t.serializeAttribute:void 0,o="object"==typeof t&&"number"==typeof t.maxStringLength?t.maxStringLength:void 0;o&&o>qy&&(yy&&hh.warn(`\`dom.maxStringLength\` cannot exceed 1024, but a value of ${o} was configured. Sentry will use 1024 instead.`),o=qy),"string"==typeof i&&(i=[i]);try{const e=n.event,t=function(e){return!!e&&!!e.target}(e)?e.target:e;s=ih(t,{keyAttrs:i,maxStringLength:o}),r=ah(t)}catch(c){s="<unknown>"}if(0===s.length)return;const a={category:`ui.${n.name}`,message:s};r&&(a.data={"ui.component_name":r}),Tf(a,{event:n.event,name:n.name,global:n.global})}}(e,t.dom)),t.xhr&&_p(function(e){return function(t){if(Of()!==e)return;const{startTimestamp:n,endTimestamp:s}=t,r=t.xhr[yp];if(!n||!s||!r)return;const{method:i,url:o,status_code:a,body:c}=r;Tf({category:"xhr",data:{method:i,url:o,status_code:a},type:"http"},{xhr:t.xhr,input:c,startTimestamp:n,endTimestamp:s})}}(e)),t.fetch&&tp(function(e){return function(t){if(Of()!==e)return;const{startTimestamp:n,endTimestamp:s}=t;if(s&&(!t.fetchData.url.match(/sentry_key/)||"POST"!==t.fetchData.method))if(t.error){Tf({category:"fetch",data:t.fetchData,level:"error",type:"http"},{data:t.error,input:t.args,startTimestamp:n,endTimestamp:s})}else{const e=t.response;Tf({category:"fetch",data:{...t.fetchData,status_code:e&&e.status},type:"http"},{input:t.args,response:e,startTimestamp:n,endTimestamp:s})}}}(e)),t.history&&fp(function(e){return function(t){if(Of()!==e)return;let n=t.from,s=t.to;const r=Rp(py.location.href);let i=n?Rp(n):void 0;const o=Rp(s);i&&i.path||(i=r),r.protocol===o.protocol&&r.host===o.host&&(s=o.relative),r.protocol===i.protocol&&r.host===i.host&&(n=i.relative),Tf({category:"navigation",data:{from:n,to:s}})}}(e)),t.sentry&&e.on&&e.on("beforeSendEvent",function(e){return function(t){Of()===e&&Tf({category:"sentry."+("transaction"===t.type?"transaction":"event"),event_id:t.event_id,level:t.level,message:Uh(t)},{event:t})}}(e))}}};Dm(Uy,Fy);const By="Dedupe",zy=()=>{let e;return{name:By,setupOnce(){},processEvent(t){if(t.type)return t;try{if(function(e,t){if(!t)return!1;if(function(e,t){const n=e.message,s=t.message;if(!n&&!s)return!1;if(n&&!s||!n&&s)return!1;if(n!==s)return!1;if(!Hy(e,t))return!1;if(!Wy(e,t))return!1;return!0}(e,t))return!0;if(function(e,t){const n=Vy(t),s=Vy(e);if(!n||!s)return!1;if(n.type!==s.type||n.value!==s.value)return!1;if(!Hy(e,t))return!1;if(!Wy(e,t))return!1;return!0}(e,t))return!0;return!1}(t,e))return yy&&hh.warn("Event dropped due to being a duplicate of previously captured event."),null}catch(n){}return e=t}}};function Wy(e,t){let n=Jy(e),s=Jy(t);if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;if(s.length!==n.length)return!1;for(let r=0;r<s.length;r++){const e=s[r],t=n[r];if(e.filename!==t.filename||e.lineno!==t.lineno||e.colno!==t.colno||e.function!==t.function)return!1}return!0}function Hy(e,t){let n=e.fingerprint,s=t.fingerprint;if(!n&&!s)return!0;if(n&&!s||!n&&s)return!1;try{return!(n.join("")!==s.join(""))}catch(r){return!1}}function Vy(e){return e.exception&&e.exception.values&&e.exception.values[0]}function Jy(e){const t=e.exception;if(t)try{return t.values[0].stacktrace.frames}catch(n){return}}Dm(By,zy);const Ky="GlobalHandlers",Gy=(e={})=>{const t={onerror:!0,onunhandledrejection:!0,...e};return{name:Ky,setupOnce(){Error.stackTraceLimit=50},setup(e){t.onerror&&(!function(e){op(t=>{const{stackParser:n,attachStacktrace:s}=Qy();if(Of()!==e||my())return;const{msg:r,url:i,line:o,column:a,error:c}=t,l=void 0===c&&Ld(r)?function(e,t,n,s){const r=/^(?:[Uu]ncaught (?:exception: )?)?(?:((?:Eval|Internal|Range|Reference|Syntax|Type|URI|)Error): )?(.*)$/i;let i=Dd(e)?e.message:e,o="Error";const a=i.match(r);a&&(o=a[1],i=a[2]);const c={exception:{values:[{type:o,value:i}]}};return Yy(c,t,n,s)}(r,i,o,a):Yy(Sy(n,c||r,void 0,s,!1),i,o,a);l.level="error",kf(l,{originalException:c,mechanism:{handled:!1,type:"onerror"}})})}(e),Xy("onerror")),t.onunhandledrejection&&(!function(e){lp(t=>{const{stackParser:n,attachStacktrace:s}=Qy();if(Of()!==e||my())return;const r=function(e){if(qd(e))return e;const t=e;try{if("reason"in t)return t.reason;if("detail"in t&&"reason"in t.detail)return t.detail.reason}catch(n){}return e}(t),i=qd(r)?{exception:{values:[{type:"UnhandledRejection",value:`Non-Error promise rejection captured with value: ${String(r)}`}]}}:Sy(n,r,void 0,s,!0);i.level="error",kf(i,{originalException:r,mechanism:{handled:!1,type:"onunhandledrejection"}})})}(e),Xy("onunhandledrejection"))}}};function Yy(e,t,n,s){const r=e.exception=e.exception||{},i=r.values=r.values||[],o=i[0]=i[0]||{},a=o.stacktrace=o.stacktrace||{},c=a.frames=a.frames||[],l=isNaN(parseInt(s,10))?void 0:s,u=isNaN(parseInt(n,10))?void 0:n,d=Ld(t)&&t.length>0?t:function(){try{return rh.document.location.href}catch(e){return""}}();return 0===c.length&&c.push({colno:l,filename:d,function:"?",in_app:!0,lineno:u}),e}function Xy(e){yy&&hh.log(`Global Handler attached: ${e}`)}function Qy(){const e=Of();return e&&e.getOptions()||{stackParser:()=>[],attachStacktrace:!1}}Dm(Ky,Gy);const Zy="HttpContext",e_=()=>({name:Zy,setupOnce(){},preprocessEvent(e){if(!py.navigator&&!py.location&&!py.document)return;const t=e.request&&e.request.url||py.location&&py.location.href,{referrer:n}=py.document||{},{userAgent:s}=py.navigator||{},r={...e.request&&e.request.headers,...n&&{Referer:n},...s&&{"User-Agent":s}},i={...e.request,...t&&{url:t},headers:r};e.request=i}});Dm(Zy,e_);const t_="LinkedErrors",n_=(e={})=>{const t=e.limit||5,n=e.key||"cause";return{name:t_,setupOnce(){},preprocessEvent(e,s,r){const i=r.getOptions();Yd(_y,i.stackParser,i.maxValueLength,n,t,e,s)}}};Dm(t_,n_);const s_=["EventTarget","Window","Node","ApplicationCache","AudioTrackList","BroadcastChannel","ChannelMergerNode","CryptoOperation","EventSource","FileReader","HTMLUnknownElement","IDBDatabase","IDBRequest","IDBTransaction","KeyOperation","MediaController","MessagePort","ModalWindow","Notification","SVGElementInstance","Screen","SharedWorker","TextTrack","TextTrackCue","TextTrackList","WebSocket","WebSocketWorker","Worker","XMLHttpRequest","XMLHttpRequestEventTarget","XMLHttpRequestUpload"],r_="TryCatch",i_=(e={})=>{const t={XMLHttpRequest:!0,eventTarget:!0,requestAnimationFrame:!0,setInterval:!0,setTimeout:!0,...e};return{name:r_,setupOnce(){t.setTimeout&&_h(py,"setTimeout",o_),t.setInterval&&_h(py,"setInterval",o_),t.requestAnimationFrame&&_h(py,"requestAnimationFrame",a_),t.XMLHttpRequest&&"XMLHttpRequest"in py&&_h(XMLHttpRequest.prototype,"send",c_);const e=t.eventTarget;if(e){(Array.isArray(e)?e:s_).forEach(l_)}}}};function o_(e){return function(...t){const n=t[0];return t[0]=gy(n,{mechanism:{data:{function:Oh(e)},handled:!1,type:"instrument"}}),e.apply(this,t)}}function a_(e){return function(t){return e.apply(this,[gy(t,{mechanism:{data:{function:"requestAnimationFrame",handler:Oh(e)},handled:!1,type:"instrument"}})])}}function c_(e){return function(...t){const n=this;return["onload","onerror","onprogress","onreadystatechange"].forEach(e=>{e in n&&"function"==typeof n[e]&&_h(n,e,function(t){const n={mechanism:{data:{function:e,handler:Oh(t)},handled:!1,type:"instrument"}},s=bh(t);return s&&(n.mechanism.data.handler=Oh(s)),gy(t,n)})}),e.apply(this,t)}}function l_(e){const t=py,n=t[e]&&t[e].prototype;n&&n.hasOwnProperty&&n.hasOwnProperty("addEventListener")&&(_h(n,"addEventListener",function(t){return function(n,s,r){try{"function"==typeof s.handleEvent&&(s.handleEvent=gy(s.handleEvent,{mechanism:{data:{function:"handleEvent",handler:Oh(s),target:e},handled:!1,type:"instrument"}}))}catch(i){}return t.apply(this,[n,gy(s,{mechanism:{data:{function:"addEventListener",handler:Oh(s),target:e},handled:!1,type:"instrument"}}),r])}}),_h(n,"removeEventListener",function(e){return function(t,n,s){const r=n;try{const n=r&&r.__sentry_wrapped__;n&&e.call(this,t,n,s)}catch(i){}return e.call(this,t,r,s)}}))}Dm(r_,i_);const u_=[Ym(),tg(),i_(),Fy(),Gy(),n_(),zy(),e_()];function d_(e={}){void 0===e.defaultIntegrations&&(e.defaultIntegrations=[...u_]),void 0===e.release&&("string"==typeof __SENTRY_RELEASE__&&(e.release=__SENTRY_RELEASE__),py.SENTRY_RELEASE&&py.SENTRY_RELEASE.id&&(e.release=py.SENTRY_RELEASE.id)),void 0===e.autoSessionTracking&&(e.autoSessionTracking=!0),void 0===e.sendClientReports&&(e.sendClientReports=!0);const t={...e,stackParser:(n=e.stackParser||Ly,Array.isArray(n)?Ih(...n):n),integrations:Am(e),transport:e.transport||(Zh()?Cy:Iy)};var n;Fm(Ey,t),e.autoSessionTracking&&function(){if(void 0===py.document)return void(yy&&hh.warn("Session tracking in non-browser environment with @sentry/browser is not supported."));Pf({ignoreDuration:!0}),jf(),fp(({from:e,to:t})=>{void 0!==e&&e!==t&&(Pf({ignoreDuration:!0}),jf())})}()}const h_=(e={},t=Qf())=>{if(!py.document)return void(yy&&hh.error("Global document not defined in showReportDialog call"));const{client:n,scope:s}=t.getStackTop(),r=e.dsn||n&&n.getDsn();if(!r)return void(yy&&hh.error("DSN not configured for showReportDialog call"));s&&(e.user={...s.getUser(),...e.user}),e.eventId||(e.eventId=t.lastEventId());const i=py.document.createElement("script");i.async=!0,i.crossOrigin="anonymous",i.src=function(e,t){const n=gh(e);if(!n)return"";const s=`${Cm(n)}embed/error-page/`;let r=`dsn=${fh(n)}`;for(const i in t)if("dsn"!==i&&"onClose"!==i)if("user"===i){const e=t.user;if(!e)continue;e.name&&(r+=`&name=${encodeURIComponent(e.name)}`),e.email&&(r+=`&email=${encodeURIComponent(e.email)}`)}else r+=`&${encodeURIComponent(i)}=${encodeURIComponent(t[i])}`;return`${s}?${r}`}(r,e),e.onLoad&&(i.onload=e.onLoad);const{onClose:o}=e;if(o){const e=t=>{if("__sentry_reportdialog_closed__"===t.data)try{o()}finally{py.removeEventListener("message",e)}};py.addEventListener("message",e)}const a=py.document.head||py.document.body;a?a.appendChild(i):yy&&hh.error("Not injecting report dialog. No injection point found in HTML")};const p_=th,f_="sentryReplaySession",m_="Unable to send Replay",g_=15e4,y_=5e3,__=2e7,v_=36e5;function $_(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}var b_,w_;function S_(e){const t=$_([e,"optionalAccess",e=>e.host]);return Boolean($_([t,"optionalAccess",e=>e.shadowRoot])===e)}function k_(e){return"[object ShadowRoot]"===Object.prototype.toString.call(e)}function T_(e){try{const n=e.rules||e.cssRules;return n?((t=Array.from(n,E_).join("")).includes(" background-clip: text;")&&!t.includes(" -webkit-background-clip: text;")&&(t=t.replace(" background-clip: text;"," -webkit-background-clip: text; background-clip: text;")),t):null}catch(n){return null}var t}function E_(e){let t;if(function(e){return"styleSheet"in e}(e))try{t=T_(e.styleSheet)||function(e){const{cssText:t}=e;if(t.split('"').length<3)return t;const n=["@import",`url(${JSON.stringify(e.href)})`];return""===e.layerName?n.push("layer"):e.layerName&&n.push(`layer(${e.layerName})`),e.supportsText&&n.push(`supports(${e.supportsText})`),e.media.length&&n.push(e.media.mediaText),n.join(" ")+";"}(e)}catch(n){}else if(function(e){return"selectorText"in e}(e)&&e.selectorText.includes(":"))return function(e){const t=/(\[(?:[\w-]+)[^\\])(:(?:[\w-]+)\])/gm;return e.replace(t,"$1\\$2")}(e.cssText);return t||e.cssText}(w_=b_||(b_={}))[w_.Document=0]="Document",w_[w_.DocumentType=1]="DocumentType",w_[w_.Element=2]="Element",w_[w_.Text=3]="Text",w_[w_.CDATA=4]="CDATA",w_[w_.Comment=5]="Comment";class x_{constructor(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}getId(e){if(!e)return-1;const t=$_([this,"access",e=>e.getMeta,"call",t=>t(e),"optionalAccess",e=>e.id]);return s=()=>-1,null!=(n=t)?n:s();var n,s}getNode(e){return this.idNodeMap.get(e)||null}getIds(){return Array.from(this.idNodeMap.keys())}getMeta(e){return this.nodeMetaMap.get(e)||null}removeNodeFromMap(e){const t=this.getId(e);this.idNodeMap.delete(t),e.childNodes&&e.childNodes.forEach(e=>this.removeNodeFromMap(e))}has(e){return this.idNodeMap.has(e)}hasNode(e){return this.nodeMetaMap.has(e)}add(e,t){const n=t.id;this.idNodeMap.set(n,e),this.nodeMetaMap.set(e,t)}replace(e,t){const n=this.getNode(e);if(n){const e=this.nodeMetaMap.get(n);e&&this.nodeMetaMap.set(t,e)}this.idNodeMap.set(e,t)}reset(){this.idNodeMap=new Map,this.nodeMetaMap=new WeakMap}}function C_({maskInputOptions:e,tagName:t,type:n}){return"OPTION"===t&&(t="SELECT"),Boolean(e[t.toLowerCase()]||n&&e[n]||"password"===n||"INPUT"===t&&!n&&e.text)}function I_({isMasked:e,element:t,value:n,maskInputFn:s}){let r=n||"";return e?(s&&(r=s(r,t)),"*".repeat(r.length)):r}function R_(e){return e.toLowerCase()}function O_(e){return e.toUpperCase()}const A_="__rrweb_original__";function P_(e){const t=e.type;return e.hasAttribute("data-rr-is-password")?"password":t?R_(t):null}function M_(e,t,n){return"INPUT"!==t||"radio"!==n&&"checkbox"!==n?e.value:e.getAttribute("value")||""}let D_=1;const j_=new RegExp("[^a-z0-9-_:]");function L_(){return D_++}let N_,q_;const U_=/url\((?:(')([^']*)'|(")(.*?)"|([^)]*))\)/gm,F_=/^(?:[a-z+]+:)?\/\//i,B_=/^www\..*/i,z_=/^(data:)([^,]*),(.*)/i;function W_(e,t){return(e||"").replace(U_,(e,n,s,r,i,o)=>{const a=s||i||o,c=n||r||"";if(!a)return e;if(F_.test(a)||B_.test(a))return`url(${c}${a}${c})`;if(z_.test(a))return`url(${c}${a}${c})`;if("/"===a[0])return`url(${c}${function(e){let t="";return t=e.indexOf("//")>-1?e.split("/").slice(0,3).join("/"):e.split("/")[0],t=t.split("?")[0],t}(t)+a}${c})`;const l=t.split("/"),u=a.split("/");l.pop();for(const t of u)"."!==t&&(".."===t?l.pop():l.push(t));return`url(${c}${l.join("/")}${c})`})}const H_=/^[^ \t\n\r\u000c]+/,V_=/^[, \t\n\r\u000c]+/;function J_(e,t){if(!t||""===t.trim())return t;const n=e.createElement("a");return n.href=t,n.href}function K_(e){return Boolean("svg"===e.tagName||e.ownerSVGElement)}function G_(){const e=document.createElement("a");return e.href="",e.href}function Y_(e,t,n,s,r,i){return s?"src"===n||"href"===n&&("use"!==t||"#"!==s[0])||"xlink:href"===n&&"#"!==s[0]?J_(e,s):"background"!==n||"table"!==t&&"td"!==t&&"th"!==t?"srcset"===n?function(e,t){if(""===t.trim())return t;let n=0;function s(e){let s;const r=e.exec(t.substring(n));return r?(s=r[0],n+=s.length,s):""}const r=[];for(;s(V_),!(n>=t.length);){let i=s(H_);if(","===i.slice(-1))i=J_(e,i.substring(0,i.length-1)),r.push(i);else{let s="";i=J_(e,i);let o=!1;for(;;){const e=t.charAt(n);if(""===e){r.push((i+s).trim());break}if(o)")"===e&&(o=!1);else{if(","===e){n+=1,r.push((i+s).trim());break}"("===e&&(o=!0)}s+=e,n+=1}}}return r.join(", ")}(e,s):"style"===n?W_(s,G_()):"object"===t&&"data"===n?J_(e,s):"function"==typeof i?i(n,s,r):s:J_(e,s):s}function X_(e,t,n){return("video"===e||"audio"===e)&&"autoplay"===t}function Q_(e,t,n=1/0,s=0){return e?e.nodeType!==e.ELEMENT_NODE||s>n?-1:t(e)?s:Q_(e.parentNode,t,n,s+1):-1}function Z_(e,t){return n=>{const s=n;if(null===s)return!1;try{if(e)if("string"==typeof e){if(s.matches(`.${e}`))return!0}else if(function(e,t){for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}return!1}(s,e))return!0;return!(!t||!s.matches(t))}catch(r){return!1}}}function ev(e,t,n,s,r,i){try{const o=e.nodeType===e.ELEMENT_NODE?e:e.parentElement;if(null===o)return!1;if("INPUT"===o.tagName){const e=o.getAttribute("autocomplete");if(["current-password","new-password","cc-number","cc-exp","cc-exp-month","cc-exp-year","cc-csc"].includes(e))return!0}let a=-1,c=-1;if(i){if(c=Q_(o,Z_(s,r)),c<0)return!0;a=Q_(o,Z_(t,n),c>=0?c:1/0)}else{if(a=Q_(o,Z_(t,n)),a<0)return!1;c=Q_(o,Z_(s,r),a>=0?a:1/0)}return a>=0?!(c>=0)||a<=c:!(c>=0)&&!!i}catch(o){}return!!i}function tv(e,t){const{doc:n,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskAttributeFn:c,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,inlineStylesheet:p,maskInputOptions:f={},maskTextFn:m,maskInputFn:g,dataURLOptions:y={},inlineImages:_,recordCanvas:v,keepIframeSrcFn:$,newlyAddedElement:b=!1}=t,w=function(e,t){if(!t.hasNode(e))return;const n=t.getId(e);return 1===n?void 0:n}(n,s);switch(e.nodeType){case e.DOCUMENT_NODE:return"CSS1Compat"!==e.compatMode?{type:b_.Document,childNodes:[],compatMode:e.compatMode}:{type:b_.Document,childNodes:[]};case e.DOCUMENT_TYPE_NODE:return{type:b_.DocumentType,name:e.name,publicId:e.publicId,systemId:e.systemId,rootId:w};case e.ELEMENT_NODE:return function(e,t){const{doc:n,blockClass:s,blockSelector:r,unblockSelector:i,inlineStylesheet:o,maskInputOptions:a={},maskAttributeFn:c,maskInputFn:l,dataURLOptions:u={},inlineImages:d,recordCanvas:h,keepIframeSrcFn:p,newlyAddedElement:f=!1,rootId:m,maskTextClass:g,unmaskTextClass:y,maskTextSelector:_,unmaskTextSelector:v}=t,$=function(e,t,n,s){try{if(s&&e.matches(s))return!1;if("string"==typeof t){if(e.classList.contains(t))return!0}else for(let n=e.classList.length;n--;){const s=e.classList[n];if(t.test(s))return!0}if(n)return e.matches(n)}catch(r){}return!1}(e,s,r,i),b=function(e){if(e instanceof HTMLFormElement)return"form";const t=R_(e.tagName);return j_.test(t)?"div":t}(e);let w={};const S=e.attributes.length;for(let E=0;E<S;E++){const t=e.attributes[E];t.name&&!X_(b,t.name,t.value)&&(w[t.name]=Y_(n,b,R_(t.name),t.value,e,c))}if("link"===b&&o){const t=Array.from(n.styleSheets).find(t=>t.href===e.href);let s=null;t&&(s=T_(t)),s&&(delete w.rel,delete w.href,w._cssText=W_(s,t.href))}if("style"===b&&e.sheet&&!(e.innerText||e.textContent||"").trim().length){const t=T_(e.sheet);t&&(w._cssText=W_(t,G_()))}if("input"===b||"textarea"===b||"select"===b||"option"===b){const t=e,n=P_(t),s=M_(t,O_(b),n),r=t.checked;if("submit"!==n&&"button"!==n&&s){const e=ev(t,g,_,y,v,C_({type:n,tagName:O_(b),maskInputOptions:a}));w.value=I_({isMasked:e,element:t,value:s,maskInputFn:l})}r&&(w.checked=r)}"option"===b&&(e.selected&&!a.select?w.selected=!0:delete w.selected);if("canvas"===b&&h)if("2d"===e.__context)(function(e){const t=e.getContext("2d");if(!t)return!0;for(let n=0;n<e.width;n+=50)for(let s=0;s<e.height;s+=50){const r=t.getImageData,i=A_ in r?r[A_]:r;if(new Uint32Array(i.call(t,n,s,Math.min(50,e.width-n),Math.min(50,e.height-s)).data.buffer).some(e=>0!==e))return!1}return!0})(e)||(w.rr_dataURL=e.toDataURL(u.type,u.quality));else if(!("__context"in e)){const t=e.toDataURL(u.type,u.quality),n=document.createElement("canvas");n.width=e.width,n.height=e.height;t!==n.toDataURL(u.type,u.quality)&&(w.rr_dataURL=t)}if("img"===b&&d){N_||(N_=n.createElement("canvas"),q_=N_.getContext("2d"));const t=e,s=t.crossOrigin;t.crossOrigin="anonymous";const r=()=>{t.removeEventListener("load",r);try{N_.width=t.naturalWidth,N_.height=t.naturalHeight,q_.drawImage(t,0,0),w.rr_dataURL=N_.toDataURL(u.type,u.quality)}catch(e){}s?w.crossOrigin=s:t.removeAttribute("crossorigin")};t.complete&&0!==t.naturalWidth?r():t.addEventListener("load",r)}"audio"!==b&&"video"!==b||(w.rr_mediaState=e.paused?"paused":"played",w.rr_mediaCurrentTime=e.currentTime);f||(e.scrollLeft&&(w.rr_scrollLeft=e.scrollLeft),e.scrollTop&&(w.rr_scrollTop=e.scrollTop));if($){const{width:t,height:n}=e.getBoundingClientRect();w={class:w.class,rr_width:`${t}px`,rr_height:`${n}px`}}"iframe"!==b||p(w.src)||(e.contentDocument||(w.rr_src=w.src),delete w.src);let k;try{customElements.get(b)&&(k=!0)}catch(T){}return{type:b_.Element,tagName:b,attributes:w,childNodes:[],isSVG:K_(e)||void 0,needBlock:$,rootId:m,isCustom:k}}(e,{doc:n,blockClass:r,blockSelector:i,unblockSelector:o,inlineStylesheet:p,maskAttributeFn:c,maskInputOptions:f,maskInputFn:g,dataURLOptions:y,inlineImages:_,recordCanvas:v,keepIframeSrcFn:$,newlyAddedElement:b,rootId:w,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h});case e.TEXT_NODE:return function(e,t){const{maskAllText:n,maskTextClass:s,unmaskTextClass:r,maskTextSelector:i,unmaskTextSelector:o,maskTextFn:a,maskInputOptions:c,maskInputFn:l,rootId:u}=t,d=e.parentNode&&e.parentNode.tagName;let h=e.textContent;const p="STYLE"===d||void 0,f="SCRIPT"===d||void 0,m="TEXTAREA"===d||void 0;if(p&&h){try{e.nextSibling||e.previousSibling||$_([e,"access",e=>e.parentNode,"access",e=>e.sheet,"optionalAccess",e=>e.cssRules])&&(h=T_(e.parentNode.sheet))}catch(y){}h=W_(h,G_())}f&&(h="SCRIPT_PLACEHOLDER");const g=ev(e,s,i,r,o,n);p||f||m||!h||!g||(h=a?a(h,e.parentElement):h.replace(/[\S]/g,"*"));m&&h&&(c.textarea||g)&&(h=l?l(h,e.parentNode):h.replace(/[\S]/g,"*"));if("OPTION"===d&&h){h=I_({isMasked:ev(e,s,i,r,o,C_({type:null,tagName:d,maskInputOptions:c})),element:e,value:h,maskInputFn:l})}return{type:b_.Text,textContent:h||"",isStyle:p,rootId:u}}(e,{maskAllText:a,maskTextClass:l,unmaskTextClass:u,maskTextSelector:d,unmaskTextSelector:h,maskTextFn:m,maskInputOptions:f,maskInputFn:g,rootId:w});case e.CDATA_SECTION_NODE:return{type:b_.CDATA,textContent:"",rootId:w};case e.COMMENT_NODE:return{type:b_.Comment,textContent:e.textContent||"",rootId:w};default:return!1}}function nv(e){return null==e?"":e.toLowerCase()}function sv(e,t){const{doc:n,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:h=!1,inlineStylesheet:p=!0,maskInputOptions:f={},maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v={},inlineImages:$=!1,recordCanvas:b=!1,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k=5e3,onStylesheetLoad:T,stylesheetLoadTimeout:E=5e3,keepIframeSrcFn:x=()=>!1,newlyAddedElement:C=!1}=t;let{preserveWhiteSpace:I=!0}=t;const R=tv(e,{doc:n,mirror:s,blockClass:r,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,dataURLOptions:v,inlineImages:$,recordCanvas:b,keepIframeSrcFn:x,newlyAddedElement:C});if(!R)return null;let O;O=s.hasNode(e)?s.getId(e):!function(e,t){if(t.comment&&e.type===b_.Comment)return!0;if(e.type===b_.Element){if(t.script&&("script"===e.tagName||"link"===e.tagName&&("preload"===e.attributes.rel||"modulepreload"===e.attributes.rel)&&"script"===e.attributes.as||"link"===e.tagName&&"prefetch"===e.attributes.rel&&"string"==typeof e.attributes.href&&e.attributes.href.endsWith(".js")))return!0;if(t.headFavicon&&("link"===e.tagName&&"shortcut icon"===e.attributes.rel||"meta"===e.tagName&&(nv(e.attributes.name).match(/^msapplication-tile(image|color)$/)||"application-name"===nv(e.attributes.name)||"icon"===nv(e.attributes.rel)||"apple-touch-icon"===nv(e.attributes.rel)||"shortcut icon"===nv(e.attributes.rel))))return!0;if("meta"===e.tagName){if(t.headMetaDescKeywords&&nv(e.attributes.name).match(/^description|keywords$/))return!0;if(t.headMetaSocial&&(nv(e.attributes.property).match(/^(og|twitter|fb):/)||nv(e.attributes.name).match(/^(og|twitter):/)||"pinterest"===nv(e.attributes.name)))return!0;if(t.headMetaRobots&&("robots"===nv(e.attributes.name)||"googlebot"===nv(e.attributes.name)||"bingbot"===nv(e.attributes.name)))return!0;if(t.headMetaHttpEquiv&&void 0!==e.attributes["http-equiv"])return!0;if(t.headMetaAuthorship&&("author"===nv(e.attributes.name)||"generator"===nv(e.attributes.name)||"framework"===nv(e.attributes.name)||"publisher"===nv(e.attributes.name)||"progid"===nv(e.attributes.name)||nv(e.attributes.property).match(/^article:/)||nv(e.attributes.property).match(/^product:/)))return!0;if(t.headMetaVerification&&("google-site-verification"===nv(e.attributes.name)||"yandex-verification"===nv(e.attributes.name)||"csrf-token"===nv(e.attributes.name)||"p:domain_verify"===nv(e.attributes.name)||"verify-v1"===nv(e.attributes.name)||"verification"===nv(e.attributes.name)||"shopify-checkout-api-token"===nv(e.attributes.name)))return!0}}return!1}(R,_)&&(I||R.type!==b_.Text||R.isStyle||R.textContent.replace(/^\s+|\s+$/gm,"").length)?L_():-2;const A=Object.assign(R,{id:O});if(s.add(e,A),-2===O)return null;w&&w(e);let P=!h;if(A.type===b_.Element){P=P&&!A.needBlock,delete A.needBlock;const t=e.shadowRoot;t&&k_(t)&&(A.isShadowHost=!0)}if((A.type===b_.Document||A.type===b_.Element)&&P){_.headWhitespace&&A.type===b_.Element&&"head"===A.tagName&&(I=!1);const t={doc:n,mirror:s,blockClass:r,blockSelector:i,maskAllText:a,unblockSelector:o,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:h,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:$,recordCanvas:b,preserveWhiteSpace:I,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:x};for(const n of Array.from(e.childNodes)){const e=sv(n,t);e&&A.childNodes.push(e)}if(function(e){return e.nodeType===e.ELEMENT_NODE}(e)&&e.shadowRoot)for(const n of Array.from(e.shadowRoot.childNodes)){const s=sv(n,t);s&&(k_(e.shadowRoot)&&(s.isShadow=!0),A.childNodes.push(s))}}return e.parentNode&&S_(e.parentNode)&&k_(e.parentNode)&&(A.isShadow=!0),A.type===b_.Element&&"iframe"===A.tagName&&function(e,t,n){const s=e.contentWindow;if(!s)return;let r,i=!1;try{r=s.document.readyState}catch(a){return}if("complete"!==r){const s=setTimeout(()=>{i||(t(),i=!0)},n);return void e.addEventListener("load",()=>{clearTimeout(s),i=!0,t()})}const o="about:blank";if(s.location.href!==o||e.src===o||""===e.src)return setTimeout(t,0),e.addEventListener("load",t);e.addEventListener("load",t)}(e,()=>{const t=e.contentDocument;if(t&&S){const n=sv(t,{doc:t,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:$,recordCanvas:b,preserveWhiteSpace:I,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:x});n&&S(e,n)}},k),A.type===b_.Element&&"link"===A.tagName&&"stylesheet"===A.attributes.rel&&function(e,t,n){let s,r=!1;try{s=e.sheet}catch(o){return}if(s)return;const i=setTimeout(()=>{r||(t(),r=!0)},n);e.addEventListener("load",()=>{clearTimeout(i),r=!0,t()})}(e,()=>{if(T){const t=sv(e,{doc:n,mirror:s,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:a,maskTextClass:c,unmaskTextClass:l,maskTextSelector:u,unmaskTextSelector:d,skipChild:!1,inlineStylesheet:p,maskInputOptions:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:_,dataURLOptions:v,inlineImages:$,recordCanvas:b,preserveWhiteSpace:I,onSerialize:w,onIframeLoad:S,iframeLoadTimeout:k,onStylesheetLoad:T,stylesheetLoadTimeout:E,keepIframeSrcFn:x});t&&T(e,t)}},E),A}function rv(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}function iv(e,t,n=document){const s={capture:!0,passive:!0};return n.addEventListener(e,t,s),()=>n.removeEventListener(e,t,s)}let ov={map:{},getId:()=>-1,getNode:()=>null,removeNodeFromMap(){},has:()=>!1,reset(){}};function av(e,t,n={}){let s=null,r=0;return function(...i){const o=Date.now();r||!1!==n.leading||(r=o);const a=t-(o-r),c=this;a<=0||a>t?(s&&(!function(...e){xv("clearTimeout")(...e)}(s),s=null),r=o,e.apply(c,i)):s||!1===n.trailing||(s=Cv(()=>{r=!1===n.leading?0:Date.now(),s=null,e.apply(c,i)},a))}}function cv(e,t,n,s,r=window){const i=r.Object.getOwnPropertyDescriptor(e,t);return r.Object.defineProperty(e,t,s?n:{set(e){Cv(()=>{n.set.call(this,e)},0),i&&i.set&&i.set.call(this,e)}}),()=>cv(e,t,i||{},!0)}function lv(e,t,n){try{if(!(t in e))return()=>{};const s=e[t],r=n(s);return"function"==typeof r&&(r.prototype=r.prototype||{},Object.defineProperties(r,{__rrweb_original__:{enumerable:!1,value:s}})),e[t]=r,()=>{e[t]=s}}catch(s){return()=>{}}}"undefined"!=typeof window&&window.Proxy&&window.Reflect&&(ov=new Proxy(ov,{get:(e,t,n)=>Reflect.get(e,t,n)}));let uv=Date.now;function dv(e){const t=e.document;return{left:t.scrollingElement?t.scrollingElement.scrollLeft:void 0!==e.pageXOffset?e.pageXOffset:rv([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollLeft])||rv([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollLeft])||rv([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollLeft])||0,top:t.scrollingElement?t.scrollingElement.scrollTop:void 0!==e.pageYOffset?e.pageYOffset:rv([t,"optionalAccess",e=>e.documentElement,"access",e=>e.scrollTop])||rv([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.parentElement,"optionalAccess",e=>e.scrollTop])||rv([t,"optionalAccess",e=>e.body,"optionalAccess",e=>e.scrollTop])||0}}function hv(){return window.innerHeight||document.documentElement&&document.documentElement.clientHeight||document.body&&document.body.clientHeight}function pv(){return window.innerWidth||document.documentElement&&document.documentElement.clientWidth||document.body&&document.body.clientWidth}function fv(e){if(!e)return null;return e.nodeType===e.ELEMENT_NODE?e:e.parentElement}function mv(e,t,n,s,r){if(!e)return!1;const i=fv(e);if(!i)return!1;const o=Z_(t,n);if(!r){const e=s&&i.matches(s);return o(i)&&!e}const a=Q_(i,o);let c=-1;return!(a<0)&&(s&&(c=Q_(i,Z_(null,s))),a>-1&&c<0||a<c)}function gv(e,t){return-2===t.getId(e)}function yv(e,t){if(S_(e))return!1;const n=t.getId(e);return!t.has(n)||(!e.parentNode||e.parentNode.nodeType!==e.DOCUMENT_NODE)&&(!e.parentNode||yv(e.parentNode,t))}function _v(e){return Boolean(e.changedTouches)}function vv(e,t){return Boolean("IFRAME"===e.nodeName&&t.getMeta(e))}function $v(e,t){return Boolean("LINK"===e.nodeName&&e.nodeType===e.ELEMENT_NODE&&e.getAttribute&&"stylesheet"===e.getAttribute("rel")&&t.getMeta(e))}function bv(e){return Boolean(rv([e,"optionalAccess",e=>e.shadowRoot]))}/[1-9][0-9]{12}/.test(Date.now().toString())||(uv=()=>(new Date).getTime());class wv{constructor(){this.id=1,this.styleIDMap=new WeakMap,this.idStyleMap=new Map}getId(e){return t=this.styleIDMap.get(e),n=()=>-1,null!=t?t:n();var t,n}has(e){return this.styleIDMap.has(e)}add(e,t){if(this.has(e))return this.getId(e);let n;return n=void 0===t?this.id++:t,this.styleIDMap.set(e,n),this.idStyleMap.set(n,e),n}getStyle(e){return this.idStyleMap.get(e)||null}reset(){this.styleIDMap=new WeakMap,this.idStyleMap=new Map,this.id=1}generateId(){return this.id++}}function Sv(e){let t=null;return rv([e,"access",e=>e.getRootNode,"optionalCall",e=>e(),"optionalAccess",e=>e.nodeType])===Node.DOCUMENT_FRAGMENT_NODE&&e.getRootNode().host&&(t=e.getRootNode().host),t}function kv(e){const t=e.ownerDocument;if(!t)return!1;const n=function(e){let t,n=e;for(;t=Sv(n);)n=t;return n}(e);return t.contains(n)}function Tv(e){const t=e.ownerDocument;return!!t&&(t.contains(e)||kv(e))}const Ev={};function xv(e){const t=Ev[e];if(t)return t;const n=window.document;let s=window[e];if(n&&"function"==typeof n.createElement)try{const t=n.createElement("iframe");t.hidden=!0,n.head.appendChild(t);const r=t.contentWindow;r&&r[e]&&(s=r[e]),n.head.removeChild(t)}catch(r){}return Ev[e]=s.bind(window)}function Cv(...e){return xv("setTimeout")(...e)}var Iv=(e=>(e[e.DomContentLoaded=0]="DomContentLoaded",e[e.Load=1]="Load",e[e.FullSnapshot=2]="FullSnapshot",e[e.IncrementalSnapshot=3]="IncrementalSnapshot",e[e.Meta=4]="Meta",e[e.Custom=5]="Custom",e[e.Plugin=6]="Plugin",e))(Iv||{}),Rv=(e=>(e[e.Mutation=0]="Mutation",e[e.MouseMove=1]="MouseMove",e[e.MouseInteraction=2]="MouseInteraction",e[e.Scroll=3]="Scroll",e[e.ViewportResize=4]="ViewportResize",e[e.Input=5]="Input",e[e.TouchMove=6]="TouchMove",e[e.MediaInteraction=7]="MediaInteraction",e[e.StyleSheetRule=8]="StyleSheetRule",e[e.CanvasMutation=9]="CanvasMutation",e[e.Font=10]="Font",e[e.Log=11]="Log",e[e.Drag=12]="Drag",e[e.StyleDeclaration=13]="StyleDeclaration",e[e.Selection=14]="Selection",e[e.AdoptedStyleSheet=15]="AdoptedStyleSheet",e[e.CustomElement=16]="CustomElement",e))(Rv||{}),Ov=(e=>(e[e.MouseUp=0]="MouseUp",e[e.MouseDown=1]="MouseDown",e[e.Click=2]="Click",e[e.ContextMenu=3]="ContextMenu",e[e.DblClick=4]="DblClick",e[e.Focus=5]="Focus",e[e.Blur=6]="Blur",e[e.TouchStart=7]="TouchStart",e[e.TouchMove_Departed=8]="TouchMove_Departed",e[e.TouchEnd=9]="TouchEnd",e[e.TouchCancel=10]="TouchCancel",e))(Ov||{}),Av=(e=>(e[e.Mouse=0]="Mouse",e[e.Pen=1]="Pen",e[e.Touch=2]="Touch",e))(Av||{});function Pv(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}function Mv(e){return"__ln"in e}class Dv{constructor(){this.length=0,this.head=null,this.tail=null}get(e){if(e>=this.length)throw new Error("Position outside of list range");let t=this.head;for(let n=0;n<e;n++)t=Pv([t,"optionalAccess",e=>e.next])||null;return t}addNode(e){const t={value:e,previous:null,next:null};if(e.__ln=t,e.previousSibling&&Mv(e.previousSibling)){const n=e.previousSibling.__ln.next;t.next=n,t.previous=e.previousSibling.__ln,e.previousSibling.__ln.next=t,n&&(n.previous=t)}else if(e.nextSibling&&Mv(e.nextSibling)&&e.nextSibling.__ln.previous){const n=e.nextSibling.__ln.previous;t.previous=n,t.next=e.nextSibling.__ln,e.nextSibling.__ln.previous=t,n&&(n.next=t)}else this.head&&(this.head.previous=t),t.next=this.head,this.head=t;null===t.next&&(this.tail=t),this.length++}removeNode(e){const t=e.__ln;this.head&&(t.previous?(t.previous.next=t.next,t.next?t.next.previous=t.previous:this.tail=t.previous):(this.head=t.next,this.head?this.head.previous=null:this.tail=null),e.__ln&&delete e.__ln,this.length--)}}const jv=(e,t)=>`${e}@${t}`;class Lv{constructor(){this.frozen=!1,this.locked=!1,this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.mapRemoves=[],this.movedMap={},this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.processMutations=e=>{e.forEach(this.processMutation),this.emit()},this.emit=()=>{if(this.frozen||this.locked)return;const e=[],t=new Set,n=new Dv,s=e=>{let t=e,n=-2;for(;-2===n;)t=t&&t.nextSibling,n=t&&this.mirror.getId(t);return n},r=r=>{if(!r.parentNode||!Tv(r))return;const i=S_(r.parentNode)?this.mirror.getId(Sv(r)):this.mirror.getId(r.parentNode),o=s(r);if(-1===i||-1===o)return n.addNode(r);const a=sv(r,{doc:this.doc,mirror:this.mirror,blockClass:this.blockClass,blockSelector:this.blockSelector,maskAllText:this.maskAllText,unblockSelector:this.unblockSelector,maskTextClass:this.maskTextClass,unmaskTextClass:this.unmaskTextClass,maskTextSelector:this.maskTextSelector,unmaskTextSelector:this.unmaskTextSelector,skipChild:!0,newlyAddedElement:!0,inlineStylesheet:this.inlineStylesheet,maskInputOptions:this.maskInputOptions,maskAttributeFn:this.maskAttributeFn,maskTextFn:this.maskTextFn,maskInputFn:this.maskInputFn,slimDOMOptions:this.slimDOMOptions,dataURLOptions:this.dataURLOptions,recordCanvas:this.recordCanvas,inlineImages:this.inlineImages,onSerialize:e=>{vv(e,this.mirror)&&this.iframeManager.addIframe(e),$v(e,this.mirror)&&this.stylesheetManager.trackLinkElement(e),bv(r)&&this.shadowDomManager.addShadowRoot(r.shadowRoot,this.doc)},onIframeLoad:(e,t)=>{this.iframeManager.attachIframe(e,t),this.shadowDomManager.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{this.stylesheetManager.attachLinkElement(e,t)}});a&&(e.push({parentId:i,nextId:o,node:a}),t.add(a.id))};for(;this.mapRemoves.length;)this.mirror.removeNodeFromMap(this.mapRemoves.shift());for(const a of this.movedSet)qv(this.removes,a,this.mirror)&&!this.movedSet.has(a.parentNode)||r(a);for(const a of this.addedSet)Fv(this.droppedSet,a)||qv(this.removes,a,this.mirror)?Fv(this.movedSet,a)?r(a):this.droppedSet.add(a):r(a);let i=null;for(;n.length;){let e=null;if(i){const t=this.mirror.getId(i.value.parentNode),n=s(i.value);-1!==t&&-1!==n&&(e=i)}if(!e){let t=n.tail;for(;t;){const n=t;if(t=t.previous,n){const t=this.mirror.getId(n.value.parentNode);if(-1===s(n.value))continue;if(-1!==t){e=n;break}{const t=n.value;if(t.parentNode&&t.parentNode.nodeType===Node.DOCUMENT_FRAGMENT_NODE){const s=t.parentNode.host;if(-1!==this.mirror.getId(s)){e=n;break}}}}}}if(!e){for(;n.head;)n.removeNode(n.head.value);break}i=e.previous,n.removeNode(e.value),r(e.value)}const o={texts:this.texts.map(e=>({id:this.mirror.getId(e.node),value:e.value})).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),attributes:this.attributes.map(e=>{const{attributes:t}=e;if("string"==typeof t.style){const n=JSON.stringify(e.styleDiff),s=JSON.stringify(e._unchangedStyles);n.length<t.style.length&&(n+s).split("var(").length===t.style.split("var(").length&&(t.style=e.styleDiff)}return{id:this.mirror.getId(e.node),attributes:t}}).filter(e=>!t.has(e.id)).filter(e=>this.mirror.has(e.id)),removes:this.removes,adds:e};(o.texts.length||o.attributes.length||o.removes.length||o.adds.length)&&(this.texts=[],this.attributes=[],this.attributeMap=new WeakMap,this.removes=[],this.addedSet=new Set,this.movedSet=new Set,this.droppedSet=new Set,this.movedMap={},this.mutationCb(o))},this.processMutation=e=>{if(!gv(e.target,this.mirror))switch(e.type){case"characterData":{const t=e.target.textContent;mv(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||t===e.oldValue||this.texts.push({value:ev(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,this.maskAllText)&&t?this.maskTextFn?this.maskTextFn(t,fv(e.target)):t.replace(/[\S]/g,"*"):t,node:e.target});break}case"attributes":{const n=e.target;let s=e.attributeName,r=e.target.getAttribute(s);if("value"===s){const t=P_(n),s=n.tagName;r=M_(n,s,t);const i=C_({maskInputOptions:this.maskInputOptions,tagName:s,type:t});r=I_({isMasked:ev(e.target,this.maskTextClass,this.maskTextSelector,this.unmaskTextClass,this.unmaskTextSelector,i),element:n,value:r,maskInputFn:this.maskInputFn})}if(mv(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||r===e.oldValue)return;let i=this.attributeMap.get(e.target);if("IFRAME"===n.tagName&&"src"===s&&!this.keepIframeSrcFn(r)){if(n.contentDocument)return;s="rr_src"}if(i||(i={node:e.target,attributes:{},styleDiff:{},_unchangedStyles:{}},this.attributes.push(i),this.attributeMap.set(e.target,i)),"type"===s&&"INPUT"===n.tagName&&"password"===(e.oldValue||"").toLowerCase()&&n.setAttribute("data-rr-is-password","true"),!X_(n.tagName,s)&&(i.attributes[s]=Y_(this.doc,R_(n.tagName),R_(s),r,n,this.maskAttributeFn),"style"===s)){if(!this.unattachedDoc)try{this.unattachedDoc=document.implementation.createHTMLDocument()}catch(t){this.unattachedDoc=this.doc}const s=this.unattachedDoc.createElement("span");e.oldValue&&s.setAttribute("style",e.oldValue);for(const e of Array.from(n.style)){const t=n.style.getPropertyValue(e),r=n.style.getPropertyPriority(e);t!==s.style.getPropertyValue(e)||r!==s.style.getPropertyPriority(e)?i.styleDiff[e]=""===r?t:[t,r]:i._unchangedStyles[e]=[t,r]}for(const e of Array.from(s.style))""===n.style.getPropertyValue(e)&&(i.styleDiff[e]=!1)}break}case"childList":if(mv(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!0))return;e.addedNodes.forEach(t=>this.genAdds(t,e.target)),e.removedNodes.forEach(t=>{const n=this.mirror.getId(t),s=S_(e.target)?this.mirror.getId(e.target.host):this.mirror.getId(e.target);mv(e.target,this.blockClass,this.blockSelector,this.unblockSelector,!1)||gv(t,this.mirror)||!function(e,t){return-1!==t.getId(e)}(t,this.mirror)||(this.addedSet.has(t)?(Nv(this.addedSet,t),this.droppedSet.add(t)):this.addedSet.has(e.target)&&-1===n||yv(e.target,this.mirror)||(this.movedSet.has(t)&&this.movedMap[jv(n,s)]?Nv(this.movedSet,t):this.removes.push({parentId:s,id:n,isShadow:!(!S_(e.target)||!k_(e.target))||void 0})),this.mapRemoves.push(t))})}},this.genAdds=(e,t)=>{if(!this.processedNodeManager.inOtherBuffer(e,this)&&!this.addedSet.has(e)&&!this.movedSet.has(e)){if(this.mirror.hasNode(e)){if(gv(e,this.mirror))return;this.movedSet.add(e);let n=null;t&&this.mirror.hasNode(t)&&(n=this.mirror.getId(t)),n&&-1!==n&&(this.movedMap[jv(this.mirror.getId(e),n)]=!0)}else this.addedSet.add(e),this.droppedSet.delete(e);mv(e,this.blockClass,this.blockSelector,this.unblockSelector,!1)||(e.childNodes.forEach(e=>this.genAdds(e)),bv(e)&&e.shadowRoot.childNodes.forEach(t=>{this.processedNodeManager.add(t,this),this.genAdds(t,e)}))}}}init(e){["mutationCb","blockClass","blockSelector","unblockSelector","maskAllText","maskTextClass","unmaskTextClass","maskTextSelector","unmaskTextSelector","inlineStylesheet","maskInputOptions","maskAttributeFn","maskTextFn","maskInputFn","keepIframeSrcFn","recordCanvas","inlineImages","slimDOMOptions","dataURLOptions","doc","mirror","iframeManager","stylesheetManager","shadowDomManager","canvasManager","processedNodeManager"].forEach(t=>{this[t]=e[t]})}freeze(){this.frozen=!0,this.canvasManager.freeze()}unfreeze(){this.frozen=!1,this.canvasManager.unfreeze(),this.emit()}isFrozen(){return this.frozen}lock(){this.locked=!0,this.canvasManager.lock()}unlock(){this.locked=!1,this.canvasManager.unlock(),this.emit()}reset(){this.shadowDomManager.reset(),this.canvasManager.reset()}}function Nv(e,t){e.delete(t),t.childNodes.forEach(t=>Nv(e,t))}function qv(e,t,n){return 0!==e.length&&Uv(e,t,n)}function Uv(e,t,n){const{parentNode:s}=t;if(!s)return!1;const r=n.getId(s);return!!e.some(e=>e.id===r)||Uv(e,s,n)}function Fv(e,t){return 0!==e.size&&Bv(e,t)}function Bv(e,t){const{parentNode:n}=t;return!!n&&(!!e.has(n)||Bv(e,n))}let zv;const Wv=e=>{if(!zv)return e;return(...t)=>{try{return e(...t)}catch(n){if(zv&&!0===zv(n))return()=>{};throw n}}};function Hv(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}const Vv=[];function Jv(e){try{if("composedPath"in e){const t=e.composedPath();if(t.length)return t[0]}else if("path"in e&&e.path.length)return e.path[0]}catch(t){}return e&&e.target}function Kv(e,t){const n=new Lv;Vv.push(n),n.init(e);let s=window.MutationObserver||window.__rrMutationObserver;const r=Hv([window,"optionalAccess",e=>e.Zone,"optionalAccess",e=>e.__symbol__,"optionalCall",e=>e("MutationObserver")]);r&&window[r]&&(s=window[r]);const i=new s(Wv(t=>{e.onMutation&&!1===e.onMutation(t)||n.processMutations.bind(n)(t)}));return i.observe(t,{attributes:!0,attributeOldValue:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0}),i}function Gv({mouseInteractionCb:e,doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,sampling:o}){if(!1===o.mouseInteraction)return()=>{};const a=!0===o.mouseInteraction||void 0===o.mouseInteraction?{}:o.mouseInteraction,c=[];let l=null;return Object.keys(Ov).filter(e=>Number.isNaN(Number(e))&&!e.endsWith("_Departed")&&!1!==a[e]).forEach(o=>{let a=R_(o);const u=(t=>o=>{const a=Jv(o);if(mv(a,s,r,i,!0))return;let c=null,u=t;if("pointerType"in o){switch(o.pointerType){case"mouse":c=Av.Mouse;break;case"touch":c=Av.Touch;break;case"pen":c=Av.Pen}c===Av.Touch?Ov[t]===Ov.MouseDown?u="TouchStart":Ov[t]===Ov.MouseUp&&(u="TouchEnd"):Av.Pen}else _v(o)&&(c=Av.Touch);null!==c?(l=c,(u.startsWith("Touch")&&c===Av.Touch||u.startsWith("Mouse")&&c===Av.Mouse)&&(c=null)):Ov[t]===Ov.Click&&(c=l,l=null);const d=_v(o)?o.changedTouches[0]:o;if(!d)return;const h=n.getId(a),{clientX:p,clientY:f}=d;Wv(e)({type:Ov[u],id:h,x:p,y:f,...null!==c&&{pointerType:c}})})(o);if(window.PointerEvent)switch(Ov[o]){case Ov.MouseDown:case Ov.MouseUp:a=a.replace("mouse","pointer");break;case Ov.TouchStart:case Ov.TouchEnd:return}c.push(iv(a,u,t))}),Wv(()=>{c.forEach(e=>e())})}function Yv({scrollCb:e,doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,sampling:o}){return iv("scroll",Wv(av(Wv(o=>{const a=Jv(o);if(!a||mv(a,s,r,i,!0))return;const c=n.getId(a);if(a===t&&t.defaultView){const n=dv(t.defaultView);e({id:c,x:n.left,y:n.top})}else e({id:c,x:a.scrollLeft,y:a.scrollTop})}),o.scroll||100)),t)}const Xv=["INPUT","TEXTAREA","SELECT"],Qv=new WeakMap;function Zv({inputCb:e,doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,ignoreClass:o,ignoreSelector:a,maskInputOptions:c,maskInputFn:l,sampling:u,userTriggeredOnInput:d,maskTextClass:h,unmaskTextClass:p,maskTextSelector:f,unmaskTextSelector:m}){function g(e){let n=Jv(e);const u=e.isTrusted,g=n&&O_(n.tagName);if("OPTION"===g&&(n=n.parentElement),!n||!g||Xv.indexOf(g)<0||mv(n,s,r,i,!0))return;const _=n;if(_.classList.contains(o)||a&&_.matches(a))return;const v=P_(n);let $=M_(_,g,v),b=!1;const w=C_({maskInputOptions:c,tagName:g,type:v}),S=ev(n,h,f,p,m,w);"radio"!==v&&"checkbox"!==v||(b=n.checked),$=I_({isMasked:S,element:n,value:$,maskInputFn:l}),y(n,d?{text:$,isChecked:b,userTriggered:u}:{text:$,isChecked:b});const k=n.name;"radio"===v&&k&&b&&t.querySelectorAll(`input[type="radio"][name="${k}"]`).forEach(e=>{if(e!==n){const t=I_({isMasked:S,element:e,value:M_(e,g,v),maskInputFn:l});y(e,d?{text:t,isChecked:!b,userTriggered:!1}:{text:t,isChecked:!b})}})}function y(t,s){const r=Qv.get(t);if(!r||r.text!==s.text||r.isChecked!==s.isChecked){Qv.set(t,s);const r=n.getId(t);Wv(e)({...s,id:r})}}const _=("last"===u.input?["change"]:["input","change"]).map(e=>iv(e,Wv(g),t)),v=t.defaultView;if(!v)return()=>{_.forEach(e=>e())};const $=v.Object.getOwnPropertyDescriptor(v.HTMLInputElement.prototype,"value"),b=[[v.HTMLInputElement.prototype,"value"],[v.HTMLInputElement.prototype,"checked"],[v.HTMLSelectElement.prototype,"value"],[v.HTMLTextAreaElement.prototype,"value"],[v.HTMLSelectElement.prototype,"selectedIndex"],[v.HTMLOptionElement.prototype,"selected"]];return $&&$.set&&_.push(...b.map(e=>cv(e[0],e[1],{set(){Wv(g)({target:this,isTrusted:!1})}},!1,v))),Wv(()=>{_.forEach(e=>e())})}function e$(e){return function(e,t){if(r$("CSSGroupingRule")&&e.parentRule instanceof CSSGroupingRule||r$("CSSMediaRule")&&e.parentRule instanceof CSSMediaRule||r$("CSSSupportsRule")&&e.parentRule instanceof CSSSupportsRule||r$("CSSConditionRule")&&e.parentRule instanceof CSSConditionRule){const n=Array.from(e.parentRule.cssRules).indexOf(e);t.unshift(n)}else if(e.parentStyleSheet){const n=Array.from(e.parentStyleSheet.cssRules).indexOf(e);t.unshift(n)}return t}(e,[])}function t$(e,t,n){let s,r;return e?(e.ownerNode?s=t.getId(e.ownerNode):r=n.getId(e),{styleId:r,id:s}):{}}function n$({mirror:e,stylesheetManager:t},n){let s=null;s="#document"===n.nodeName?e.getId(n):e.getId(n.host);const r="#document"===n.nodeName?Hv([n,"access",e=>e.defaultView,"optionalAccess",e=>e.Document]):Hv([n,"access",e=>e.ownerDocument,"optionalAccess",e=>e.defaultView,"optionalAccess",e=>e.ShadowRoot]),i=Hv([r,"optionalAccess",e=>e.prototype])?Object.getOwnPropertyDescriptor(Hv([r,"optionalAccess",e=>e.prototype]),"adoptedStyleSheets"):void 0;return null!==s&&-1!==s&&r&&i?(Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get(){return Hv([i,"access",e=>e.get,"optionalAccess",e=>e.call,"call",e=>e(this)])},set(e){const n=Hv([i,"access",e=>e.set,"optionalAccess",e=>e.call,"call",t=>t(this,e)]);if(null!==s&&-1!==s)try{t.adoptStyleSheets(e,s)}catch(r){}return n}}),Wv(()=>{Object.defineProperty(n,"adoptedStyleSheets",{configurable:i.configurable,enumerable:i.enumerable,get:i.get,set:i.set})})):()=>{}}function s$(e,t={}){const n=e.doc.defaultView;if(!n)return()=>{};const s=Kv(e,e.doc),r=function({mousemoveCb:e,sampling:t,doc:n,mirror:s}){if(!1===t.mousemove)return()=>{};const r="number"==typeof t.mousemove?t.mousemove:50,i="number"==typeof t.mousemoveCallback?t.mousemoveCallback:500;let o,a=[];const c=av(Wv(t=>{const n=Date.now()-o;e(a.map(e=>(e.timeOffset-=n,e)),t),a=[],o=null}),i),l=Wv(av(Wv(e=>{const t=Jv(e),{clientX:n,clientY:r}=_v(e)?e.changedTouches[0]:e;o||(o=uv()),a.push({x:n,y:r,id:s.getId(t),timeOffset:uv()-o}),c("undefined"!=typeof DragEvent&&e instanceof DragEvent?Rv.Drag:e instanceof MouseEvent?Rv.MouseMove:Rv.TouchMove)}),r,{trailing:!1})),u=[iv("mousemove",l,n),iv("touchmove",l,n),iv("drag",l,n)];return Wv(()=>{u.forEach(e=>e())})}(e),i=Gv(e),o=Yv(e),a=function({viewportResizeCb:e},{win:t}){let n=-1,s=-1;return iv("resize",Wv(av(Wv(()=>{const t=hv(),r=pv();n===t&&s===r||(e({width:Number(r),height:Number(t)}),n=t,s=r)}),200)),t)}(e,{win:n}),c=Zv(e),l=function({mediaInteractionCb:e,blockClass:t,blockSelector:n,unblockSelector:s,mirror:r,sampling:i,doc:o}){const a=Wv(o=>av(Wv(i=>{const a=Jv(i);if(!a||mv(a,t,n,s,!0))return;const{currentTime:c,volume:l,muted:u,playbackRate:d}=a;e({type:o,id:r.getId(a),currentTime:c,volume:l,muted:u,playbackRate:d})}),i.media||500)),c=[iv("play",a(0),o),iv("pause",a(1),o),iv("seeked",a(2),o),iv("volumechange",a(3),o),iv("ratechange",a(4),o)];return Wv(()=>{c.forEach(e=>e())})}(e),u=function({styleSheetRuleCb:e,mirror:t,stylesheetManager:n},{win:s}){if(!s.CSSStyleSheet||!s.CSSStyleSheet.prototype)return()=>{};const r=s.CSSStyleSheet.prototype.insertRule;s.CSSStyleSheet.prototype.insertRule=new Proxy(r,{apply:Wv((s,r,i)=>{const[o,a]=i,{id:c,styleId:l}=t$(r,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:o,index:a}]}),s.apply(r,i)})});const i=s.CSSStyleSheet.prototype.deleteRule;let o,a;s.CSSStyleSheet.prototype.deleteRule=new Proxy(i,{apply:Wv((s,r,i)=>{const[o]=i,{id:a,styleId:c}=t$(r,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:o}]}),s.apply(r,i)})}),s.CSSStyleSheet.prototype.replace&&(o=s.CSSStyleSheet.prototype.replace,s.CSSStyleSheet.prototype.replace=new Proxy(o,{apply:Wv((s,r,i)=>{const[o]=i,{id:a,styleId:c}=t$(r,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replace:o}),s.apply(r,i)})})),s.CSSStyleSheet.prototype.replaceSync&&(a=s.CSSStyleSheet.prototype.replaceSync,s.CSSStyleSheet.prototype.replaceSync=new Proxy(a,{apply:Wv((s,r,i)=>{const[o]=i,{id:a,styleId:c}=t$(r,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,replaceSync:o}),s.apply(r,i)})}));const c={};i$("CSSGroupingRule")?c.CSSGroupingRule=s.CSSGroupingRule:(i$("CSSMediaRule")&&(c.CSSMediaRule=s.CSSMediaRule),i$("CSSConditionRule")&&(c.CSSConditionRule=s.CSSConditionRule),i$("CSSSupportsRule")&&(c.CSSSupportsRule=s.CSSSupportsRule));const l={};return Object.entries(c).forEach(([s,r])=>{l[s]={insertRule:r.prototype.insertRule,deleteRule:r.prototype.deleteRule},r.prototype.insertRule=new Proxy(l[s].insertRule,{apply:Wv((s,r,i)=>{const[o,a]=i,{id:c,styleId:l}=t$(r.parentStyleSheet,t,n.styleMirror);return(c&&-1!==c||l&&-1!==l)&&e({id:c,styleId:l,adds:[{rule:o,index:[...e$(r),a||0]}]}),s.apply(r,i)})}),r.prototype.deleteRule=new Proxy(l[s].deleteRule,{apply:Wv((s,r,i)=>{const[o]=i,{id:a,styleId:c}=t$(r.parentStyleSheet,t,n.styleMirror);return(a&&-1!==a||c&&-1!==c)&&e({id:a,styleId:c,removes:[{index:[...e$(r),o]}]}),s.apply(r,i)})})}),Wv(()=>{s.CSSStyleSheet.prototype.insertRule=r,s.CSSStyleSheet.prototype.deleteRule=i,o&&(s.CSSStyleSheet.prototype.replace=o),a&&(s.CSSStyleSheet.prototype.replaceSync=a),Object.entries(c).forEach(([e,t])=>{t.prototype.insertRule=l[e].insertRule,t.prototype.deleteRule=l[e].deleteRule})})}(e,{win:n}),d=n$(e,e.doc),h=function({styleDeclarationCb:e,mirror:t,ignoreCSSAttributes:n,stylesheetManager:s},{win:r}){const i=r.CSSStyleDeclaration.prototype.setProperty;r.CSSStyleDeclaration.prototype.setProperty=new Proxy(i,{apply:Wv((r,o,a)=>{const[c,l,u]=a;if(n.has(c))return i.apply(o,[c,l,u]);const{id:d,styleId:h}=t$(Hv([o,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,s.styleMirror);return(d&&-1!==d||h&&-1!==h)&&e({id:d,styleId:h,set:{property:c,value:l,priority:u},index:e$(o.parentRule)}),r.apply(o,a)})});const o=r.CSSStyleDeclaration.prototype.removeProperty;return r.CSSStyleDeclaration.prototype.removeProperty=new Proxy(o,{apply:Wv((r,i,a)=>{const[c]=a;if(n.has(c))return o.apply(i,[c]);const{id:l,styleId:u}=t$(Hv([i,"access",e=>e.parentRule,"optionalAccess",e=>e.parentStyleSheet]),t,s.styleMirror);return(l&&-1!==l||u&&-1!==u)&&e({id:l,styleId:u,remove:{property:c},index:e$(i.parentRule)}),r.apply(i,a)})}),Wv(()=>{r.CSSStyleDeclaration.prototype.setProperty=i,r.CSSStyleDeclaration.prototype.removeProperty=o})}(e,{win:n}),p=e.collectFonts?function({fontCb:e,doc:t}){const n=t.defaultView;if(!n)return()=>{};const s=[],r=new WeakMap,i=n.FontFace;n.FontFace=function(e,t,n){const s=new i(e,t,n);return r.set(s,{family:e,buffer:"string"!=typeof t,descriptors:n,fontSource:"string"==typeof t?t:JSON.stringify(Array.from(new Uint8Array(t)))}),s};const o=lv(t.fonts,"add",function(t){return function(n){return Cv(Wv(()=>{const t=r.get(n);t&&(e(t),r.delete(n))}),0),t.apply(this,[n])}});return s.push(()=>{n.FontFace=i}),s.push(o),Wv(()=>{s.forEach(e=>e())})}(e):()=>{},f=function(e){const{doc:t,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,selectionCb:o}=e;let a=!0;const c=Wv(()=>{const e=t.getSelection();if(!e||a&&Hv([e,"optionalAccess",e=>e.isCollapsed]))return;a=e.isCollapsed||!1;const c=[],l=e.rangeCount||0;for(let t=0;t<l;t++){const o=e.getRangeAt(t),{startContainer:a,startOffset:l,endContainer:u,endOffset:d}=o;mv(a,s,r,i,!0)||mv(u,s,r,i,!0)||c.push({start:n.getId(a),startOffset:l,end:n.getId(u),endOffset:d})}o({ranges:c})});return c(),iv("selectionchange",c)}(e),m=function({doc:e,customElementCb:t}){const n=e.defaultView;return n&&n.customElements?lv(n.customElements,"define",function(e){return function(n,s,r){try{t({define:{name:n}})}catch(i){}return e.apply(this,[n,s,r])}}):()=>{}}(e),g=[];for(const y of e.plugins)g.push(y.observer(y.callback,n,y.options));return Wv(()=>{Vv.forEach(e=>e.reset()),s.disconnect(),r(),i(),o(),a(),c(),l(),u(),d(),h(),p(),f(),m(),g.forEach(e=>e())})}function r$(e){return void 0!==window[e]}function i$(e){return Boolean(void 0!==window[e]&&window[e].prototype&&"insertRule"in window[e].prototype&&"deleteRule"in window[e].prototype)}class o${constructor(e){this.generateIdFn=e,this.iframeIdToRemoteIdMap=new WeakMap,this.iframeRemoteIdToIdMap=new WeakMap}getId(e,t,n,s){const r=n||this.getIdToRemoteIdMap(e),i=s||this.getRemoteIdToIdMap(e);let o=r.get(t);return o||(o=this.generateIdFn(),r.set(t,o),i.set(o,t)),o}getIds(e,t){const n=this.getIdToRemoteIdMap(e),s=this.getRemoteIdToIdMap(e);return t.map(t=>this.getId(e,t,n,s))}getRemoteId(e,t,n){const s=n||this.getRemoteIdToIdMap(e);if("number"!=typeof t)return t;const r=s.get(t);return r||-1}getRemoteIds(e,t){const n=this.getRemoteIdToIdMap(e);return t.map(t=>this.getRemoteId(e,t,n))}reset(e){if(!e)return this.iframeIdToRemoteIdMap=new WeakMap,void(this.iframeRemoteIdToIdMap=new WeakMap);this.iframeIdToRemoteIdMap.delete(e),this.iframeRemoteIdToIdMap.delete(e)}getIdToRemoteIdMap(e){let t=this.iframeIdToRemoteIdMap.get(e);return t||(t=new Map,this.iframeIdToRemoteIdMap.set(e,t)),t}getRemoteIdToIdMap(e){let t=this.iframeRemoteIdToIdMap.get(e);return t||(t=new Map,this.iframeRemoteIdToIdMap.set(e,t)),t}}function a$(e){let t,n=e[0],s=1;for(;s<e.length;){const r=e[s],i=e[s+1];if(s+=2,("optionalAccess"===r||"optionalCall"===r)&&null==n)return;"access"===r||"optionalAccess"===r?(t=n,n=i(n)):"call"!==r&&"optionalCall"!==r||(n=i((...e)=>n.call(t,...e)),t=void 0)}return n}class c${constructor(){this.crossOriginIframeMirror=new o$(L_),this.crossOriginIframeRootIdMap=new WeakMap}addIframe(){}addLoadListener(){}attachIframe(){}}class l${constructor(e){this.iframes=new WeakMap,this.crossOriginIframeMap=new WeakMap,this.crossOriginIframeMirror=new o$(L_),this.crossOriginIframeRootIdMap=new WeakMap,this.mutationCb=e.mutationCb,this.wrappedEmit=e.wrappedEmit,this.stylesheetManager=e.stylesheetManager,this.recordCrossOriginIframes=e.recordCrossOriginIframes,this.crossOriginIframeStyleMirror=new o$(this.stylesheetManager.styleMirror.generateId.bind(this.stylesheetManager.styleMirror)),this.mirror=e.mirror,this.recordCrossOriginIframes&&window.addEventListener("message",this.handleMessage.bind(this))}addIframe(e){this.iframes.set(e,!0),e.contentWindow&&this.crossOriginIframeMap.set(e.contentWindow,e)}addLoadListener(e){this.loadListener=e}attachIframe(e,t){this.mutationCb({adds:[{parentId:this.mirror.getId(e),nextId:null,node:t}],removes:[],texts:[],attributes:[],isAttachIframe:!0}),a$([this,"access",e=>e.loadListener,"optionalCall",t=>t(e)]),e.contentDocument&&e.contentDocument.adoptedStyleSheets&&e.contentDocument.adoptedStyleSheets.length>0&&this.stylesheetManager.adoptStyleSheets(e.contentDocument.adoptedStyleSheets,this.mirror.getId(e.contentDocument))}handleMessage(e){const t=e;if("rrweb"!==t.data.type||t.origin!==t.data.origin)return;if(!e.source)return;const n=this.crossOriginIframeMap.get(e.source);if(!n)return;const s=this.transformCrossOriginEvent(n,t.data.event);s&&this.wrappedEmit(s,t.data.isCheckout)}transformCrossOriginEvent(e,t){switch(t.type){case Iv.FullSnapshot:{this.crossOriginIframeMirror.reset(e),this.crossOriginIframeStyleMirror.reset(e),this.replaceIdOnNode(t.data.node,e);const n=t.data.node.id;return this.crossOriginIframeRootIdMap.set(e,n),this.patchRootIdOnNode(t.data.node,n),{timestamp:t.timestamp,type:Iv.IncrementalSnapshot,data:{source:Rv.Mutation,adds:[{parentId:this.mirror.getId(e),nextId:null,node:t.data.node}],removes:[],texts:[],attributes:[],isAttachIframe:!0}}}case Iv.Meta:case Iv.Load:case Iv.DomContentLoaded:return!1;case Iv.Plugin:return t;case Iv.Custom:return this.replaceIds(t.data.payload,e,["id","parentId","previousId","nextId"]),t;case Iv.IncrementalSnapshot:switch(t.data.source){case Rv.Mutation:return t.data.adds.forEach(t=>{this.replaceIds(t,e,["parentId","nextId","previousId"]),this.replaceIdOnNode(t.node,e);const n=this.crossOriginIframeRootIdMap.get(e);n&&this.patchRootIdOnNode(t.node,n)}),t.data.removes.forEach(t=>{this.replaceIds(t,e,["parentId","id"])}),t.data.attributes.forEach(t=>{this.replaceIds(t,e,["id"])}),t.data.texts.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case Rv.Drag:case Rv.TouchMove:case Rv.MouseMove:return t.data.positions.forEach(t=>{this.replaceIds(t,e,["id"])}),t;case Rv.ViewportResize:return!1;case Rv.MediaInteraction:case Rv.MouseInteraction:case Rv.Scroll:case Rv.CanvasMutation:case Rv.Input:return this.replaceIds(t.data,e,["id"]),t;case Rv.StyleSheetRule:case Rv.StyleDeclaration:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleId"]),t;case Rv.Font:return t;case Rv.Selection:return t.data.ranges.forEach(t=>{this.replaceIds(t,e,["start","end"])}),t;case Rv.AdoptedStyleSheet:return this.replaceIds(t.data,e,["id"]),this.replaceStyleIds(t.data,e,["styleIds"]),a$([t,"access",e=>e.data,"access",e=>e.styles,"optionalAccess",e=>e.forEach,"call",t=>t(t=>{this.replaceStyleIds(t,e,["styleId"])})]),t}}return!1}replace(e,t,n,s){for(const r of s)(Array.isArray(t[r])||"number"==typeof t[r])&&(Array.isArray(t[r])?t[r]=e.getIds(n,t[r]):t[r]=e.getId(n,t[r]));return t}replaceIds(e,t,n){return this.replace(this.crossOriginIframeMirror,e,t,n)}replaceStyleIds(e,t,n){return this.replace(this.crossOriginIframeStyleMirror,e,t,n)}replaceIdOnNode(e,t){this.replaceIds(e,t,["id","rootId"]),"childNodes"in e&&e.childNodes.forEach(e=>{this.replaceIdOnNode(e,t)})}patchRootIdOnNode(e,t){e.type===b_.Document||e.rootId||(e.rootId=t),"childNodes"in e&&e.childNodes.forEach(e=>{this.patchRootIdOnNode(e,t)})}}class u${init(){}addShadowRoot(){}observeAttachShadow(){}reset(){}}class d${constructor(e){this.shadowDoms=new WeakSet,this.restoreHandlers=[],this.mutationCb=e.mutationCb,this.scrollCb=e.scrollCb,this.bypassOptions=e.bypassOptions,this.mirror=e.mirror,this.init()}init(){this.reset(),this.patchAttachShadow(Element,document)}addShadowRoot(e,t){if(!k_(e))return;if(this.shadowDoms.has(e))return;this.shadowDoms.add(e);const n=Kv({...this.bypassOptions,doc:t,mutationCb:this.mutationCb,mirror:this.mirror,shadowDomManager:this},e);this.restoreHandlers.push(()=>n.disconnect()),this.restoreHandlers.push(Yv({...this.bypassOptions,scrollCb:this.scrollCb,doc:e,mirror:this.mirror})),Cv(()=>{e.adoptedStyleSheets&&e.adoptedStyleSheets.length>0&&this.bypassOptions.stylesheetManager.adoptStyleSheets(e.adoptedStyleSheets,this.mirror.getId(e.host)),this.restoreHandlers.push(n$({mirror:this.mirror,stylesheetManager:this.bypassOptions.stylesheetManager},e))},0)}observeAttachShadow(e){e.contentWindow&&e.contentDocument&&this.patchAttachShadow(e.contentWindow.Element,e.contentDocument)}patchAttachShadow(e,t){const n=this;this.restoreHandlers.push(lv(e.prototype,"attachShadow",function(e){return function(s){const r=e.call(this,s);return this.shadowRoot&&Tv(this)&&n.addShadowRoot(this.shadowRoot,t),r}}))}reset(){this.restoreHandlers.forEach(e=>{try{e()}catch(t){}}),this.restoreHandlers=[],this.shadowDoms=new WeakSet}}class h${reset(){}freeze(){}unfreeze(){}lock(){}unlock(){}snapshot(){}}class p${constructor(e){this.trackedLinkElements=new WeakSet,this.styleMirror=new wv,this.mutationCb=e.mutationCb,this.adoptedStyleSheetCb=e.adoptedStyleSheetCb}attachLinkElement(e,t){"_cssText"in t.attributes&&this.mutationCb({adds:[],removes:[],texts:[],attributes:[{id:t.id,attributes:t.attributes}]}),this.trackLinkElement(e)}trackLinkElement(e){this.trackedLinkElements.has(e)||(this.trackedLinkElements.add(e),this.trackStylesheetInLinkElement(e))}adoptStyleSheets(e,t){if(0===e.length)return;const n={id:t,styleIds:[]},s=[];for(const r of e){let e;this.styleMirror.has(r)?e=this.styleMirror.getId(r):(e=this.styleMirror.add(r),s.push({styleId:e,rules:Array.from(r.rules||CSSRule,(e,t)=>({rule:E_(e),index:t}))})),n.styleIds.push(e)}s.length>0&&(n.styles=s),this.adoptedStyleSheetCb(n)}reset(){this.styleMirror.reset(),this.trackedLinkElements=new WeakSet}trackStylesheetInLinkElement(e){}}class f${constructor(){this.nodeMap=new WeakMap,this.loop=!0,this.periodicallyClear()}periodicallyClear(){!function(...e){xv("requestAnimationFrame")(...e)}(()=>{this.clear(),this.loop&&this.periodicallyClear()})}inOtherBuffer(e,t){const n=this.nodeMap.get(e);return n&&Array.from(n).some(e=>e!==t)}add(e,t){this.nodeMap.set(e,(this.nodeMap.get(e)||new Set).add(t))}clear(){this.nodeMap=new WeakMap}destroy(){this.loop=!1}}let m$,g$;const y$=new x_;function _$(e={}){const{emit:t,checkoutEveryNms:n,checkoutEveryNth:s,blockClass:r="rr-block",blockSelector:i=null,unblockSelector:o=null,ignoreClass:a="rr-ignore",ignoreSelector:c=null,maskAllText:l=!1,maskTextClass:u="rr-mask",unmaskTextClass:d=null,maskTextSelector:h=null,unmaskTextSelector:p=null,inlineStylesheet:f=!0,maskAllInputs:m,maskInputOptions:g,slimDOMOptions:y,maskAttributeFn:_,maskInputFn:v,maskTextFn:$,maxCanvasSize:b=null,packFn:w,sampling:S={},dataURLOptions:k={},mousemoveWait:T,recordCanvas:E=!1,recordCrossOriginIframes:x=!1,recordAfter:C=("DOMContentLoaded"===e.recordAfter?e.recordAfter:"load"),userTriggeredOnInput:I=!1,collectFonts:R=!1,inlineImages:O=!1,plugins:A,keepIframeSrcFn:P=()=>!1,ignoreCSSAttributes:M=new Set([]),errorHandler:D,onMutation:j,getCanvasManager:L}=e;zv=D;const N=!x||window.parent===window;let q=!1;if(!N)try{window.parent.document&&(q=!1)}catch(ee){q=!0}if(N&&!t)throw new Error("emit function is required");void 0!==T&&void 0===S.mousemove&&(S.mousemove=T),y$.reset();const U=!0===m?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0,radio:!0,checkbox:!0}:void 0!==g?g:{},F=!0===y||"all"===y?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaVerification:!0,headMetaAuthorship:"all"===y,headMetaDescKeywords:"all"===y}:y||{};let B;!function(e=window){"NodeList"in e&&!e.NodeList.prototype.forEach&&(e.NodeList.prototype.forEach=Array.prototype.forEach),"DOMTokenList"in e&&!e.DOMTokenList.prototype.forEach&&(e.DOMTokenList.prototype.forEach=Array.prototype.forEach),Node.prototype.contains||(Node.prototype.contains=(...e)=>{let t=e[0];if(!(0 in e))throw new TypeError("1 argument is required");do{if(this===t)return!0}while(t=t&&t.parentNode);return!1})}();let z=0;const W=e=>{for(const t of A||[])t.eventProcessor&&(e=t.eventProcessor(e));return w&&!q&&(e=w(e)),e};m$=(e,r)=>{const i=e;if(i.timestamp=uv(),!nf([Vv,"access",e=>e[0],"optionalAccess",e=>e.isFrozen,"call",e=>e()])||i.type===Iv.FullSnapshot||i.type===Iv.IncrementalSnapshot&&i.data.source===Rv.Mutation||Vv.forEach(e=>e.unfreeze()),N)nf([t,"optionalCall",e=>e(W(i),r)]);else if(q){const e={type:"rrweb",event:W(i),origin:window.location.origin,isCheckout:r};window.parent.postMessage(e,"*")}if(i.type===Iv.FullSnapshot)B=i,z=0;else if(i.type===Iv.IncrementalSnapshot){if(i.data.source===Rv.Mutation&&i.data.isAttachIframe)return;z++;const e=s&&z>=s,t=n&&B&&i.timestamp-B.timestamp>n;(e||t)&&Z(!0)}};const H=e=>{m$({type:Iv.IncrementalSnapshot,data:{source:Rv.Mutation,...e}})},V=e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.Scroll,...e}}),J=e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.CanvasMutation,...e}}),K=new p$({mutationCb:H,adoptedStyleSheetCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.AdoptedStyleSheet,...e}})}),G="boolean"==typeof __RRWEB_EXCLUDE_IFRAME__&&__RRWEB_EXCLUDE_IFRAME__?new c$:new l$({mirror:y$,mutationCb:H,stylesheetManager:K,recordCrossOriginIframes:x,wrappedEmit:m$});for(const ne of A||[])ne.getMirror&&ne.getMirror({nodeMirror:y$,crossOriginIframeMirror:G.crossOriginIframeMirror,crossOriginIframeStyleMirror:G.crossOriginIframeStyleMirror});const Y=new f$,X=function(e,t){try{return e?e(t):new h$}catch(ee){return new h$}}(L,{mirror:y$,win:window,mutationCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.CanvasMutation,...e}}),recordCanvas:E,blockClass:r,blockSelector:i,unblockSelector:o,maxCanvasSize:b,sampling:S.canvas,dataURLOptions:k,errorHandler:D}),Q="boolean"==typeof __RRWEB_EXCLUDE_SHADOW_DOM__&&__RRWEB_EXCLUDE_SHADOW_DOM__?new u$:new d$({mutationCb:H,scrollCb:V,bypassOptions:{onMutation:j,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskInputOptions:U,dataURLOptions:k,maskAttributeFn:_,maskTextFn:$,maskInputFn:v,recordCanvas:E,inlineImages:O,sampling:S,slimDOMOptions:F,iframeManager:G,stylesheetManager:K,canvasManager:X,keepIframeSrcFn:P,processedNodeManager:Y},mirror:y$}),Z=(e=!1)=>{m$({type:Iv.Meta,data:{href:window.location.href,width:pv(),height:hv()}},e),K.reset(),Q.init(),Vv.forEach(e=>e.lock());const t=function(e,t){const{mirror:n=new x_,blockClass:s="rr-block",blockSelector:r=null,unblockSelector:i=null,maskAllText:o=!1,maskTextClass:a="rr-mask",unmaskTextClass:c=null,maskTextSelector:l=null,unmaskTextSelector:u=null,inlineStylesheet:d=!0,inlineImages:h=!1,recordCanvas:p=!1,maskAllInputs:f=!1,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOM:_=!1,dataURLOptions:v,preserveWhiteSpace:$,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S,onStylesheetLoad:k,stylesheetLoadTimeout:T,keepIframeSrcFn:E=()=>!1}=t||{};return sv(e,{doc:e,mirror:n,blockClass:s,blockSelector:r,unblockSelector:i,maskAllText:o,maskTextClass:a,unmaskTextClass:c,maskTextSelector:l,unmaskTextSelector:u,skipChild:!1,inlineStylesheet:d,maskInputOptions:!0===f?{color:!0,date:!0,"datetime-local":!0,email:!0,month:!0,number:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0,textarea:!0,select:!0}:!1===f?{}:f,maskAttributeFn:m,maskTextFn:g,maskInputFn:y,slimDOMOptions:!0===_||"all"===_?{script:!0,comment:!0,headFavicon:!0,headWhitespace:!0,headMetaDescKeywords:"all"===_,headMetaSocial:!0,headMetaRobots:!0,headMetaHttpEquiv:!0,headMetaAuthorship:!0,headMetaVerification:!0}:!1===_?{}:_,dataURLOptions:v,inlineImages:h,recordCanvas:p,preserveWhiteSpace:$,onSerialize:b,onIframeLoad:w,iframeLoadTimeout:S,onStylesheetLoad:k,stylesheetLoadTimeout:T,keepIframeSrcFn:E,newlyAddedElement:!1})}(document,{mirror:y$,blockClass:r,blockSelector:i,unblockSelector:o,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,inlineStylesheet:f,maskAllInputs:U,maskAttributeFn:_,maskInputFn:v,maskTextFn:$,slimDOM:F,dataURLOptions:k,recordCanvas:E,inlineImages:O,onSerialize:e=>{vv(e,y$)&&G.addIframe(e),$v(e,y$)&&K.trackLinkElement(e),bv(e)&&Q.addShadowRoot(e.shadowRoot,document)},onIframeLoad:(e,t)=>{G.attachIframe(e,t),Q.observeAttachShadow(e)},onStylesheetLoad:(e,t)=>{K.attachLinkElement(e,t)},keepIframeSrcFn:P});t&&(m$({type:Iv.FullSnapshot,data:{node:t,initialOffset:dv(window)}}),Vv.forEach(e=>e.unlock()),document.adoptedStyleSheets&&document.adoptedStyleSheets.length>0&&K.adoptStyleSheets(document.adoptedStyleSheets,y$.getId(document)))};g$=Z;try{const e=[],t=e=>Wv(s$)({onMutation:j,mutationCb:H,mousemoveCb:(e,t)=>m$({type:Iv.IncrementalSnapshot,data:{source:t,positions:e}}),mouseInteractionCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.MouseInteraction,...e}}),scrollCb:V,viewportResizeCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.ViewportResize,...e}}),inputCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.Input,...e}}),mediaInteractionCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.MediaInteraction,...e}}),styleSheetRuleCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.StyleSheetRule,...e}}),styleDeclarationCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.StyleDeclaration,...e}}),canvasMutationCb:J,fontCb:e=>m$({type:Iv.IncrementalSnapshot,data:{source:Rv.Font,...e}}),selectionCb:e=>{m$({type:Iv.IncrementalSnapshot,data:{source:Rv.Selection,...e}})},customElementCb:e=>{m$({type:Iv.IncrementalSnapshot,data:{source:Rv.CustomElement,...e}})},blockClass:r,ignoreClass:a,ignoreSelector:c,maskAllText:l,maskTextClass:u,unmaskTextClass:d,maskTextSelector:h,unmaskTextSelector:p,maskInputOptions:U,inlineStylesheet:f,sampling:S,recordCanvas:E,inlineImages:O,userTriggeredOnInput:I,collectFonts:R,doc:e,maskAttributeFn:_,maskInputFn:v,maskTextFn:$,keepIframeSrcFn:P,blockSelector:i,unblockSelector:o,slimDOMOptions:F,dataURLOptions:k,mirror:y$,iframeManager:G,stylesheetManager:K,shadowDomManager:Q,processedNodeManager:Y,canvasManager:X,ignoreCSSAttributes:M,plugins:nf([A,"optionalAccess",e=>e.filter,"call",e=>e(e=>e.observer),"optionalAccess",e=>e.map,"call",e=>e(e=>({observer:e.observer,options:e.options,callback:t=>m$({type:Iv.Plugin,data:{plugin:e.name,payload:t}})}))])||[]},{});G.addLoadListener(n=>{try{e.push(t(n.contentDocument))}catch(s){}});const n=()=>{Z(),e.push(t(document))};return"interactive"===document.readyState||"complete"===document.readyState?n():(e.push(iv("DOMContentLoaded",()=>{m$({type:Iv.DomContentLoaded,data:{}}),"DOMContentLoaded"===C&&n()})),e.push(iv("load",()=>{m$({type:Iv.Load,data:{}}),"load"===C&&n()},window))),()=>{e.forEach(e=>e()),Y.destroy(),g$=void 0,zv=void 0}}catch(te){}}_$.mirror=y$,_$.takeFullSnapshot=function(e){if(!g$)throw new Error("please take full snapshot after start recording");g$(e)};function v$(e){return e>9999999999?e:1e3*e}function $$(e){return e>9999999999?e/1e3:e}function b$(e,t){"sentry.transaction"!==t.category&&(["ui.click","ui.input"].includes(t.category)?e.triggerUserActivity():e.checkAndHandleExpiredSession(),e.addUpdate(()=>(e.throttledAddEvent({type:Iv.Custom,timestamp:1e3*(t.timestamp||0),data:{tag:"breadcrumb",payload:wp(t,10,1e3)}}),"console"===t.category)))}function w$(e){return e.closest("button,a")||e}function S$(e){const t=k$(e);return t&&t instanceof Element?w$(t):t}function k$(e){return function(e){return"object"==typeof e&&!!e&&"target"in e}(e)?e.target:e}let T$;function E$(e){return T$||(T$=[],_h(p_,"open",function(e){return function(...t){if(T$)try{T$.forEach(e=>e())}catch(n){}return e.apply(p_,t)}})),T$.push(e),()=>{const t=T$?T$.indexOf(e):-1;t>-1&&T$.splice(t,1)}}class x${constructor(e,t,n=b$){this._lastMutation=0,this._lastScroll=0,this._clicks=[],this._timeout=t.timeout/1e3,this._threshold=t.threshold/1e3,this._scollTimeout=t.scrollTimeout/1e3,this._replay=e,this._ignoreSelector=t.ignoreSelector,this._addBreadcrumbEvent=n}addListeners(){const e=E$(()=>{this._lastMutation=I$()});this._teardown=()=>{e(),this._clicks=[],this._lastMutation=0,this._lastScroll=0}}removeListeners(){this._teardown&&this._teardown(),this._checkClickTimeout&&clearTimeout(this._checkClickTimeout)}handleClick(e,t){if(function(e,t){if(!C$.includes(e.tagName))return!0;if("INPUT"===e.tagName&&!["submit","button"].includes(e.getAttribute("type")||""))return!0;if("A"===e.tagName&&(e.hasAttribute("download")||e.hasAttribute("target")&&"_self"!==e.getAttribute("target")))return!0;if(t&&e.matches(t))return!0;return!1}(t,this._ignoreSelector)||!function(e){return!(!e.data||"number"!=typeof e.data.nodeId||!e.timestamp)}(e))return;const n={timestamp:$$(e.timestamp),clickBreadcrumb:e,clickCount:0,node:t};this._clicks.some(e=>e.node===n.node&&Math.abs(e.timestamp-n.timestamp)<1)||(this._clicks.push(n),1===this._clicks.length&&this._scheduleCheckClicks())}registerMutation(e=Date.now()){this._lastMutation=$$(e)}registerScroll(e=Date.now()){this._lastScroll=$$(e)}registerClick(e){const t=w$(e);this._handleMultiClick(t)}_handleMultiClick(e){this._getClicks(e).forEach(e=>{e.clickCount++})}_getClicks(e){return this._clicks.filter(t=>t.node===e)}_checkClicks(){const e=[],t=I$();this._clicks.forEach(n=>{!n.mutationAfter&&this._lastMutation&&(n.mutationAfter=n.timestamp<=this._lastMutation?this._lastMutation-n.timestamp:void 0),!n.scrollAfter&&this._lastScroll&&(n.scrollAfter=n.timestamp<=this._lastScroll?this._lastScroll-n.timestamp:void 0),n.timestamp+this._timeout<=t&&e.push(n)});for(const n of e){const e=this._clicks.indexOf(n);e>-1&&(this._generateBreadcrumbs(n),this._clicks.splice(e,1))}this._clicks.length&&this._scheduleCheckClicks()}_generateBreadcrumbs(e){const t=this._replay,n=e.scrollAfter&&e.scrollAfter<=this._scollTimeout,s=e.mutationAfter&&e.mutationAfter<=this._threshold,r=!n&&!s,{clickCount:i,clickBreadcrumb:o}=e;if(r){const n=1e3*Math.min(e.mutationAfter||this._timeout,this._timeout),s=n<1e3*this._timeout?"mutation":"timeout",r={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.slowClickDetected",data:{...o.data,url:p_.location.href,route:t.getCurrentRoute(),timeAfterClickMs:n,endReason:s,clickCount:i||1}};return void this._addBreadcrumbEvent(t,r)}if(i>1){const e={type:"default",message:o.message,timestamp:o.timestamp,category:"ui.multiClick",data:{...o.data,url:p_.location.href,route:t.getCurrentRoute(),clickCount:i,metric:!0}};this._addBreadcrumbEvent(t,e)}}_scheduleCheckClicks(){this._checkClickTimeout&&clearTimeout(this._checkClickTimeout),this._checkClickTimeout=setTimeout(()=>this._checkClicks(),1e3)}}const C$=["A","BUTTON","INPUT"];function I$(){return Date.now()/1e3}function R$(e,t){try{if(!function(e){return 3===e.type}(t))return;const{source:n}=t.data;if(n===Rv.Mutation&&e.registerMutation(t.timestamp),n===Rv.Scroll&&e.registerScroll(t.timestamp),function(e){return e.data.source===Rv.MouseInteraction}(t)){const{type:n,id:s}=t.data,r=_$.mirror.getNode(s);r instanceof HTMLElement&&n===Ov.Click&&e.registerClick(r)}}catch(n){}}function O$(e){return{timestamp:Date.now()/1e3,type:"default",...e}}var A$;!function(e){e[e.Document=0]="Document",e[e.DocumentType=1]="DocumentType",e[e.Element=2]="Element",e[e.Text=3]="Text",e[e.CDATA=4]="CDATA",e[e.Comment=5]="Comment"}(A$||(A$={}));const P$=new Set(["id","class","aria-label","role","name","alt","title","data-test-id","data-testid","disabled","aria-disabled","data-sentry-component"]);function M$(e){const t={};for(const n in e)if(P$.has(n)){let s=n;"data-testid"!==n&&"data-test-id"!==n||(s="testId"),t[s]=e[n]}return t}const D$=e=>t=>{if(!e.isEnabled())return;const n=function(e){const{target:t,message:n}=function(e){const t="click"===e.name;let n,s=null;try{s=t?S$(e.event):k$(e.event),n=ih(s,{maxStringLength:200})||"<unknown>"}catch(r){n="<unknown>"}return{target:s,message:n}}(e);return O$({category:`ui.${e.name}`,...j$(t,n)})}(t);if(!n)return;const s="click"===t.name,r=s?t.event:void 0;var i,o,a;!(s&&e.clickDetector&&r&&r.target)||r.altKey||r.metaKey||r.ctrlKey||r.shiftKey||(i=e.clickDetector,o=n,a=S$(t.event),i.handleClick(o,a)),b$(e,n)};function j$(e,t){const n=_$.mirror.getId(e),s=n&&_$.mirror.getNode(n),r=s&&_$.mirror.getMeta(s),i=r&&function(e){return e.type===A$.Element}(r)?r:null;return{message:t,data:i?{nodeId:n,node:{id:n,tagName:i.tagName,textContent:Array.from(i.childNodes).map(e=>e.type===A$.Text&&e.textContent).filter(Boolean).map(e=>e.trim()).join(""),attributes:M$(i.attributes)}}:{}}}function L$(e,t){if(!e.isEnabled())return;e.updateUserActivity();const n=function(e){const{metaKey:t,shiftKey:n,ctrlKey:s,altKey:r,key:i,target:o}=e;if(!o||function(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||e.isContentEditable}(o)||!i)return null;const a=t||s||r,c=1===i.length;if(!a&&c)return null;const l=ih(o,{maxStringLength:200})||"<unknown>",u=j$(o,l);return O$({category:"ui.keyDown",message:l,data:{...u.data,metaKey:t,shiftKey:n,ctrlKey:s,altKey:r,key:i}})}(t);n&&b$(e,n)}const N$={resource:function(e){const{entryType:t,initiatorType:n,name:s,responseEnd:r,startTime:i,decodedBodySize:o,encodedBodySize:a,responseStatus:c,transferSize:l}=e;if(["fetch","xmlhttprequest"].includes(n))return null;return{type:`${t}.${n}`,start:U$(i),end:U$(r),name:s,data:{size:l,statusCode:c,decodedBodySize:o,encodedBodySize:a}}},paint:function(e){const{duration:t,entryType:n,name:s,startTime:r}=e,i=U$(r);return{type:n,name:s,start:i,end:i+t,data:void 0}},navigation:function(e){const{entryType:t,name:n,decodedBodySize:s,duration:r,domComplete:i,encodedBodySize:o,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,domInteractive:l,loadEventStart:u,loadEventEnd:d,redirectCount:h,startTime:p,transferSize:f,type:m}=e;if(0===r)return null;return{type:`${t}.${m}`,start:U$(p),end:U$(i),name:n,data:{size:f,decodedBodySize:s,encodedBodySize:o,duration:r,domInteractive:l,domContentLoadedEventStart:a,domContentLoadedEventEnd:c,loadEventStart:u,loadEventEnd:d,domComplete:i,redirectCount:h}}}};function q$(e){return N$[e.entryType]?N$[e.entryType](e):null}function U$(e){return((Dp||p_.performance.timeOrigin)+e)/1e3}function F$(e){function t(t){e.performanceEntries.includes(t)||e.performanceEntries.push(t)}function n({entries:e}){e.forEach(t)}const s=[];return["navigation","paint","resource"].forEach(e=>{s.push(Ag(e,n))}),s.push(Og(({metric:t})=>{e.replayPerformanceEntries.push(function(e){const t=e.entries,n=t[t.length-1],s=n?n.element:void 0,r=e.value,i=U$(r);return{type:"largest-contentful-paint",name:"largest-contentful-paint",start:i,end:i,data:{value:r,size:r,nodeId:s?_$.mirror.getId(s):void 0}}}(t))})),()=>{s.forEach(e=>e())}}const B$="undefined"==typeof __SENTRY_DEBUG__||__SENTRY_DEBUG__;function z$(e,t){B$&&(hh.info(e),t&&H$(e))}function W$(e,t){B$&&(hh.info(e),t&&setTimeout(()=>{H$(e)},0))}function H$(e){Tf({category:"console",data:{logger:"replay"},level:"info",message:e},{level:"info"})}class V$ extends Error{constructor(){super("Event buffer exceeded maximum size of 20000000.")}}class J${constructor(){this.events=[],this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return this.events.length>0}get type(){return"sync"}destroy(){this.events=[]}async addEvent(e){const t=JSON.stringify(e).length;if(this._totalSize+=t,this._totalSize>__)throw new V$;this.events.push(e)}finish(){return new Promise(e=>{const t=this.events;this.clear(),e(JSON.stringify(t))})}clear(){this.events=[],this._totalSize=0,this.hasCheckout=!1}getEarliestTimestamp(){const e=this.events.map(e=>e.timestamp).sort()[0];return e?v$(e):null}}class K${constructor(e){this._worker=e,this._id=0}ensureReady(){return this._ensureReadyPromise||(this._ensureReadyPromise=new Promise((e,t)=>{this._worker.addEventListener("message",({data:n})=>{n.success?e():t()},{once:!0}),this._worker.addEventListener("error",e=>{t(e)},{once:!0})})),this._ensureReadyPromise}destroy(){z$("[Replay] Destroying compression worker"),this._worker.terminate()}postMessage(e,t){const n=this._getAndIncrementId();return new Promise((s,r)=>{const i=({data:t})=>{const o=t;if(o.method===e&&o.id===n){if(this._worker.removeEventListener("message",i),!o.success)return B$&&hh.error("[Replay]",o.response),void r(new Error("Error in compression worker"));s(o.response)}};this._worker.addEventListener("message",i),this._worker.postMessage({id:n,method:e,arg:t})})}_getAndIncrementId(){return this._id++}}class G${constructor(e){this._worker=new K$(e),this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1}get hasEvents(){return!!this._earliestTimestamp}get type(){return"worker"}ensureReady(){return this._worker.ensureReady()}destroy(){this._worker.destroy()}addEvent(e){const t=v$(e.timestamp);(!this._earliestTimestamp||t<this._earliestTimestamp)&&(this._earliestTimestamp=t);const n=JSON.stringify(e);return this._totalSize+=n.length,this._totalSize>__?Promise.reject(new V$):this._sendEventToWorker(n)}finish(){return this._finishRequest()}clear(){this._earliestTimestamp=null,this._totalSize=0,this.hasCheckout=!1,this._worker.postMessage("clear").then(null,e=>{B$&&hh.warn('[Replay] Sending "clear" message to worker failed',e)})}getEarliestTimestamp(){return this._earliestTimestamp}_sendEventToWorker(e){return this._worker.postMessage("addEvent",e)}async _finishRequest(){const e=await this._worker.postMessage("finish");return this._earliestTimestamp=null,this._totalSize=0,e}}class Y${constructor(e){this._fallback=new J$,this._compression=new G$(e),this._used=this._fallback,this._ensureWorkerIsLoadedPromise=this._ensureWorkerIsLoaded()}get type(){return this._used.type}get hasEvents(){return this._used.hasEvents}get hasCheckout(){return this._used.hasCheckout}set hasCheckout(e){this._used.hasCheckout=e}destroy(){this._fallback.destroy(),this._compression.destroy()}clear(){return this._used.clear()}getEarliestTimestamp(){return this._used.getEarliestTimestamp()}addEvent(e){return this._used.addEvent(e)}async finish(){return await this.ensureWorkerIsLoaded(),this._used.finish()}ensureWorkerIsLoaded(){return this._ensureWorkerIsLoadedPromise}async _ensureWorkerIsLoaded(){try{await this._compression.ensureReady()}catch(e){return void z$("[Replay] Failed to load the compression worker, falling back to simple buffer")}await this._switchToCompressionWorker()}async _switchToCompressionWorker(){const{events:e,hasCheckout:t}=this._fallback,n=[];for(const r of e)n.push(this._compression.addEvent(r));this._compression.hasCheckout=t,this._used=this._compression;try{await Promise.all(n)}catch(s){B$&&hh.warn("[Replay] Failed to add events when switching buffers.",s)}}}function X$({useCompression:e,workerUrl:t}){if(e&&window.Worker){const e=function(e){try{const t=e||function(){if("undefined"==typeof __SENTRY_EXCLUDE_REPLAY_WORKER__||!__SENTRY_EXCLUDE_REPLAY_WORKER__)return function(){const e=new Blob(['var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if("function"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G="undefined"!=typeof TextEncoder&&new TextEncoder,H="undefined"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error("Adding invalid event");const n=this._hasEvents?",":"";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push("]",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push("[")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener("message",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&"function"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:"init",success:!0,response:void 0});']);return URL.createObjectURL(e)}();return""}();if(!t)return;z$("[Replay] Using compression worker"+(e?` from ${e}`:""));const n=new Worker(t);return new Y$(n)}catch(t){z$("[Replay] Failed to create compression worker")}}(t);if(e)return e}return z$("[Replay] Using simple buffer"),new J$}function Q$(){try{return"sessionStorage"in p_&&!!p_.sessionStorage}catch(e){return!1}}function Z$(e){!function(){if(!Q$())return;try{p_.sessionStorage.removeItem(f_)}catch(e){}}(),e.session=void 0}function eb(e){return void 0!==e&&Math.random()<e}function tb(e){const t=Date.now();return{id:e.id||Nh(),started:e.started||t,lastActivity:e.lastActivity||t,segmentId:e.segmentId||0,sampled:e.sampled,previousSessionId:e.previousSessionId}}function nb(e){if(Q$())try{p_.sessionStorage.setItem(f_,JSON.stringify(e))}catch(t){}}function sb({sessionSampleRate:e,allowBuffering:t,stickySession:n=!1},{previousSessionId:s}={}){const r=function(e,t){return eb(e)?"session":!!t&&"buffer"}(e,t),i=tb({sampled:r,previousSessionId:s});return n&&nb(i),i}function rb(e,t,n=+new Date){return null===e||void 0===t||t<0||0!==t&&e+t<=n}function ib(e,{maxReplayDuration:t,sessionIdleExpire:n,targetTime:s=Date.now()}){return rb(e.started,t,s)||rb(e.lastActivity,n,s)}function ob(e,{sessionIdleExpire:t,maxReplayDuration:n}){return!!ib(e,{sessionIdleExpire:t,maxReplayDuration:n})&&("buffer"!==e.sampled||0!==e.segmentId)}function ab({traceInternals:e,sessionIdleExpire:t,maxReplayDuration:n,previousSessionId:s},r){const i=r.stickySession&&function(e){if(!Q$())return null;try{const t=p_.sessionStorage.getItem(f_);if(!t)return null;const n=JSON.parse(t);return W$("[Replay] Loading existing session",e),tb(n)}catch(t){return null}}(e);return i?ob(i,{sessionIdleExpire:t,maxReplayDuration:n})?(W$("[Replay] Session in sessionStorage is expired, creating new one..."),sb(r,{previousSessionId:i.id})):i:(W$("[Replay] Creating new session",e),sb(r,{previousSessionId:s}))}function cb(e,t,n){return!!ub(e,t)&&(lb(e,t,n),!0)}async function lb(e,t,n){if(!e.eventBuffer)return null;try{n&&"buffer"===e.recordingMode&&e.eventBuffer.clear(),n&&(e.eventBuffer.hasCheckout=!0);const s=function(e,t){try{if("function"==typeof t&&function(e){return e.type===Iv.Custom}(e))return t(e)}catch(n){return B$&&hh.error("[Replay] An error occured in the `beforeAddRecordingEvent` callback, skipping the event...",n),null}return e}(t,e.getOptions().beforeAddRecordingEvent);if(!s)return;return await e.eventBuffer.addEvent(s)}catch(s){const t=s&&s instanceof V$?"addEventSizeExceeded":"addEvent";B$&&hh.error(s),await e.stop({reason:t});const n=Of();n&&n.recordDroppedEvent("internal_sdk_error","replay")}}function ub(e,t){if(!e.eventBuffer||e.isPaused()||!e.isEnabled())return!1;const n=v$(t.timestamp);return!(n+e.timeouts.sessionIdlePause<Date.now())&&(!(n>e.getContext().initialTimestamp+e.getOptions().maxReplayDuration)||(z$(`[Replay] Skipping event with timestamp ${n} because it is after maxReplayDuration`,e.getOptions()._experiments.traceInternals),!1))}function db(e){return!e.type}function hb(e){return"transaction"===e.type}function pb(e){return"feedback"===e.type}function fb(e){const t=function(){const e=Of();if(!e)return!1;const t=e.getTransport();if(!t)return!1;return t.send.__sentry__baseTransport__||!1}();return(n,s)=>{if(!e.isEnabled()||!db(n)&&!hb(n))return;const r=s&&s.statusCode;t&&(!r||r<200||r>=300)||(hb(n)?function(e,t){const n=e.getContext();t.contexts&&t.contexts.trace&&t.contexts.trace.trace_id&&n.traceIds.size<100&&n.traceIds.add(t.contexts.trace.trace_id)}(e,n):function(e,t){const n=e.getContext();t.event_id&&n.errorIds.size<100&&n.errorIds.add(t.event_id);if("buffer"!==e.recordingMode||!t.tags||!t.tags.replayId)return;const{beforeErrorSampling:s}=e.getOptions();if("function"==typeof s&&!s(t))return;setTimeout(()=>{e.sendBufferedReplayOrFlush()})}(e,n))}}function mb(e){return t=>{e.isEnabled()&&db(t)&&function(e,t){const n=t.exception&&t.exception.values&&t.exception.values[0].value;if("string"!=typeof n)return;if(n.match(/reactjs\.org\/docs\/error-decoder\.html\?invariant=(418|419|422|423|425)/)||n.match(/(does not match server-rendered HTML|Hydration failed because)/i)){b$(e,O$({category:"replay.hydrate-error"}))}}(e,t)}}function gb(e,t=!1){const n=t?fb(e):void 0;return Object.assign((t,s)=>{if(!e.isEnabled())return t;if(function(e){return"replay_event"===e.type}(t))return delete t.breadcrumbs,t;if(!db(t)&&!hb(t)&&!pb(t))return t;if(!e.checkAndHandleExpiredSession())return t;if(pb(t))return e.flush(),t.contexts.feedback.replay_id=e.getSessionId(),function(e,t){e.triggerUserActivity(),e.addUpdate(()=>!t.timestamp||(e.throttledAddEvent({type:Iv.Custom,timestamp:1e3*t.timestamp,data:{tag:"breadcrumb",payload:{timestamp:t.timestamp,type:"default",category:"sentry.feedback",data:{feedbackId:t.event_id}}}}),!1))}(e,t),t;if(function(e,t){return!(e.type||!e.exception||!e.exception.values||!e.exception.values.length||!t.originalException||!t.originalException.__rrweb__)}(t,s)&&!e.getOptions()._experiments.captureExceptions)return B$&&hh.log("[Replay] Ignoring error from rrweb internals",t),null;const r=function(e,t){return"buffer"===e.recordingMode&&t.message!==m_&&!(!t.exception||t.type)&&eb(e.getOptions().errorSampleRate)}(e,t);return(r||"session"===e.recordingMode)&&(t.tags={...t.tags,replayId:e.getSessionId()}),n&&n(t,{statusCode:200}),t},{id:"Replay"})}function yb(e,t){return t.map(({type:t,start:n,end:s,name:r,data:i})=>{const o=e.throttledAddEvent({type:Iv.Custom,timestamp:n,data:{tag:"performanceSpan",payload:{op:t,description:r,startTimestamp:n,endTimestamp:s,data:i}}});return"string"==typeof o?Promise.resolve(null):o})}function _b(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{from:t,to:n}=e,s=Date.now()/1e3;return{type:"navigation.push",start:s,end:s,name:n,data:{previous:t}}}(t);null!==n&&(e.getContext().urls.push(n.name),e.triggerUserActivity(),e.addUpdate(()=>(yb(e,[n]),!1)))}}function vb(e,t){e.isEnabled()&&null!==t&&(function(e,t){return(!B$||!e.getOptions()._experiments.traceInternals)&&Hm(t,Of())}(e,t.name)||e.addUpdate(()=>(yb(e,[t]),!0)))}function $b(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,xhr:s}=e,r=s[yp];if(!t||!n||!r)return null;const{method:i,url:o,status_code:a}=r;return void 0===o?null:{type:"resource.xhr",name:o,start:t/1e3,end:n/1e3,data:{method:i,statusCode:a}}}(t);vb(e,n)}}function bb(e,t){if(e)try{if("string"==typeof e)return t.encode(e).length;if(e instanceof URLSearchParams)return t.encode(e.toString()).length;if(e instanceof FormData){const n=Ib(e);return t.encode(n).length}if(e instanceof Blob)return e.size;if(e instanceof ArrayBuffer)return e.byteLength}catch(n){}}function wb(e){if(!e)return;const t=parseInt(e,10);return isNaN(t)?void 0:t}function Sb(e){try{if("string"==typeof e)return[e];if(e instanceof URLSearchParams)return[e.toString()];if(e instanceof FormData)return[Ib(e)];if(!e)return[void 0]}catch(t){return B$&&hh.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return B$&&hh.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}function kb(e,t){if(!e)return{headers:{},size:void 0,_meta:{warnings:[t]}};const n={...e._meta},s=n.warnings||[];return n.warnings=[...s,t],e._meta=n,e}function Tb(e,t){if(!t)return null;const{startTimestamp:n,endTimestamp:s,url:r,method:i,statusCode:o,request:a,response:c}=t;return{type:e,start:n/1e3,end:s/1e3,name:r,data:Th({method:i,statusCode:o,request:a,response:c})}}function Eb(e){return{headers:{},size:e,_meta:{warnings:["URL_SKIPPED"]}}}function xb(e,t,n){if(!t&&0===Object.keys(e).length)return;if(!t)return{headers:e};if(!n)return{headers:e,size:t};const s={headers:e,size:t},{body:r,warnings:i}=function(e){if(!e||"string"!=typeof e)return{body:e};const t=e.length>g_,n=function(e){const t=e[0],n=e[e.length-1];return"["===t&&"]"===n||"{"===t&&"}"===n}(e);if(t){const t=e.slice(0,g_);return n?{body:t,warnings:["MAYBE_JSON_TRUNCATED"]}:{body:`${t}…`,warnings:["TEXT_TRUNCATED"]}}if(n)try{return{body:JSON.parse(e)}}catch(s){}return{body:e}}(n);return s.body=r,i&&i.length>0&&(s._meta={warnings:i}),s}function Cb(e,t){return Object.keys(e).reduce((n,s)=>{const r=s.toLowerCase();return t.includes(r)&&e[s]&&(n[r]=e[s]),n},{})}function Ib(e){return new URLSearchParams(e).toString()}function Rb(e,t){const n=function(e,t=p_.document.baseURI){if(e.startsWith("http://")||e.startsWith("https://")||e.startsWith(p_.location.origin))return e;const n=new URL(e,t);if(n.origin!==new URL(t).origin)return e;const s=n.href;if(!e.endsWith("/")&&s.endsWith("/"))return s.slice(0,-1);return s}(e);return Gd(n,t)}async function Ob(e,t,n){try{const s=await async function(e,t,n){const s=Date.now(),{startTimestamp:r=s,endTimestamp:i=s}=t,{url:o,method:a,status_code:c=0,request_body_size:l,response_body_size:u}=e.data,d=Rb(o,n.networkDetailAllowUrls)&&!Rb(o,n.networkDetailDenyUrls),h=d?function({networkCaptureBodies:e,networkRequestHeaders:t},n,s){const r=n?function(e,t){if(1===e.length&&"string"!=typeof e[0])return Mb(e[0],t);if(2===e.length)return Mb(e[1],t);return{}}(n,t):{};if(!e)return xb(r,s,void 0);const i=Ab(n),[o,a]=Sb(i),c=xb(r,s,o);if(a)return kb(c,a);return c}(n,t.input,l):Eb(l),p=await async function(e,{networkCaptureBodies:t,textEncoder:n,networkResponseHeaders:s},r,i){if(!e&&void 0!==i)return Eb(i);const o=r?Pb(r.headers,s):{};if(!r||!t&&void 0!==i)return xb(o,i,void 0);const[a,c]=await async function(e){const t=function(e){try{return e.clone()}catch(t){B$&&hh.warn("[Replay] Failed to clone response body",t)}}(e);if(!t)return[void 0,"BODY_PARSE_ERROR"];try{const e=await function(e){return new Promise((t,n)=>{const s=setTimeout(()=>n(new Error("Timeout while trying to read response body")),500);(async function(e){return await e.text()})(e).then(e=>t(e),e=>n(e)).finally(()=>clearTimeout(s))})}(t);return[e]}catch(n){return B$&&hh.warn("[Replay] Failed to get text body from response",n),[void 0,"BODY_PARSE_ERROR"]}}(r),l=function(e,{networkCaptureBodies:t,textEncoder:n,responseBodySize:s,captureDetails:r,headers:i}){try{const o=e&&e.length&&void 0===s?bb(e,n):s;return r?xb(i,o,t?e:void 0):Eb(o)}catch(o){return B$&&hh.warn("[Replay] Failed to serialize response body",o),xb(i,s,void 0)}}(a,{networkCaptureBodies:t,textEncoder:n,responseBodySize:i,captureDetails:e,headers:o});if(c)return kb(l,c);return l}(d,n,t.response,u);return{startTimestamp:r,endTimestamp:i,url:o,method:a,statusCode:c,request:h,response:p}}(e,t,n),r=Tb("resource.fetch",s);vb(n.replay,r)}catch(s){B$&&hh.error("[Replay] Failed to capture fetch breadcrumb",s)}}function Ab(e=[]){if(2===e.length&&"object"==typeof e[1])return e[1].body}function Pb(e,t){const n={};return t.forEach(t=>{e.get(t)&&(n[t]=e.get(t))}),n}function Mb(e,t){if(!e)return{};const n=e.headers;return n?n instanceof Headers?Pb(n,t):Array.isArray(n)?{}:Cb(n,t):{}}async function Db(e,t,n){try{const s=function(e,t,n){const s=Date.now(),{startTimestamp:r=s,endTimestamp:i=s,input:o,xhr:a}=t,{url:c,method:l,status_code:u=0,request_body_size:d,response_body_size:h}=e.data;if(!c)return null;if(!a||!Rb(c,n.networkDetailAllowUrls)||Rb(c,n.networkDetailDenyUrls)){return{startTimestamp:r,endTimestamp:i,url:c,method:l,statusCode:u,request:Eb(d),response:Eb(h)}}const p=a[yp],f=p?Cb(p.request_headers,n.networkRequestHeaders):{},m=Cb(function(e){const t=e.getAllResponseHeaders();if(!t)return{};return t.split("\r\n").reduce((e,t)=>{const[n,s]=t.split(": ");return e[n.toLowerCase()]=s,e},{})}(a),n.networkResponseHeaders),[g,y]=n.networkCaptureBodies?Sb(o):[void 0],[_,v]=n.networkCaptureBodies?function(e){const t=[];try{return[e.responseText]}catch(n){t.push(n)}try{return function(e,t){try{if("string"==typeof e)return[e];if(e instanceof Document)return[e.body.outerHTML];if("json"===t&&e&&"object"==typeof e)return[JSON.stringify(e)];if(!e)return[void 0]}catch(n){return B$&&hh.warn("[Replay] Failed to serialize body",e),[void 0,"BODY_PARSE_ERROR"]}return B$&&hh.info("[Replay] Skipping network body because of body type",e),[void 0,"UNPARSEABLE_BODY_TYPE"]}(e.response,e.responseType)}catch(n){t.push(n)}return B$&&hh.warn("[Replay] Failed to get xhr response body",...t),[void 0]}(a):[void 0],$=xb(f,d,g),b=xb(m,h,_);return{startTimestamp:r,endTimestamp:i,url:c,method:l,statusCode:u,request:y?kb($,y):$,response:v?kb(b,v):b}}(e,t,n),r=Tb("resource.xhr",s);vb(n.replay,r)}catch(s){B$&&hh.error("[Replay] Failed to capture xhr breadcrumb",s)}}function jb(e,t,n){const{xhr:s,input:r}=t;if(!s)return;const i=bb(r,n.textEncoder),o=s.getResponseHeader("content-length")?wb(s.getResponseHeader("content-length")):function(e,t,n){try{return bb("json"===t&&e&&"object"==typeof e?JSON.stringify(e):e,n)}catch(s){return}}(s.response,s.responseType,n.textEncoder);void 0!==i&&(e.data.request_body_size=i),void 0!==o&&(e.data.response_body_size=o)}function Lb(e){const t=Of();try{const n=new TextEncoder,{networkDetailAllowUrls:s,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a}=e.getOptions(),c={replay:e,textEncoder:n,networkDetailAllowUrls:s,networkDetailDenyUrls:r,networkCaptureBodies:i,networkRequestHeaders:o,networkResponseHeaders:a};t&&t.on?t.on("beforeAddBreadcrumb",(e,t)=>function(e,t,n){if(!t.data)return;try{(function(e){return"xhr"===e.category})(t)&&function(e){return e&&e.xhr}(n)&&(jb(t,n,e),Db(t,n,e)),function(e){return"fetch"===e.category}(t)&&function(e){return e&&e.response}(n)&&(!function(e,t,n){const{input:s,response:r}=t,i=bb(s?Ab(s):void 0,n.textEncoder),o=r?wb(r.headers.get("content-length")):void 0;void 0!==i&&(e.data.request_body_size=i),void 0!==o&&(e.data.response_body_size=o)}(t,n,e),Ob(t,n,e))}catch(s){B$&&hh.warn("Error when enriching network breadcrumb")}}(c,e,t)):(tp(function(e){return t=>{if(!e.isEnabled())return;const n=function(e){const{startTimestamp:t,endTimestamp:n,fetchData:s,response:r}=e;if(!n)return null;const{method:i,url:o}=s;return{type:"resource.fetch",start:t/1e3,end:n/1e3,name:o,data:{method:i,statusCode:r?r.status:void 0}}}(t);vb(e,n)}}(e)),_p($b(e)))}catch(n){}}let Nb=null;const qb=e=>t=>{if(!e.isEnabled())return;const n=function(e){const t=e.getLastBreadcrumb&&e.getLastBreadcrumb();if(Nb===t||!t)return null;if(Nb=t,!function(e){return!!e.category}(t)||["fetch","xhr","sentry.event","sentry.transaction"].includes(t.category)||t.category.startsWith("ui."))return null;if("console"===t.category)return function(e){const t=e.data&&e.data.arguments;if(!Array.isArray(t)||0===t.length)return O$(e);let n=!1;const s=t.map(e=>{if(!e)return e;if("string"==typeof e)return e.length>y_?(n=!0,`${e.slice(0,y_)}…`):e;if("object"==typeof e)try{const t=wp(e,7);return JSON.stringify(t).length>y_?(n=!0,`${JSON.stringify(t,null,2).slice(0,y_)}…`):t}catch(t){}return e});return O$({...e,data:{...e.data,arguments:s,...n?{_meta:{warnings:["CONSOLE_ARG_TRUNCATED"]}}:{}}})}(t);return O$(t)}(t);n&&b$(e,n)};function Ub(e){const t=Af(),n=Of();t.addScopeListener(qb(e)),Gh(D$(e)),fp(_b(e)),Lb(e);const s=gb(e,!Fb(n));n&&n.addEventProcessor?n.addEventProcessor(s):function(e){const t=Of();t&&t.addEventProcessor&&t.addEventProcessor(e)}(s),Fb(n)&&(n.on("beforeSendEvent",mb(e)),n.on("afterSendEvent",fb(e)),n.on("createDsc",t=>{const n=e.getSessionId();if(n&&e.isEnabled()&&"session"===e.recordingMode){e.checkAndHandleExpiredSession()&&(t.replay_id=n)}}),n.on("startTransaction",t=>{e.lastTransaction=t}),n.on("finishTransaction",t=>{e.lastTransaction=t}),n.on("beforeSendFeedback",(t,n)=>{const s=e.getSessionId();n&&n.includeReplay&&e.isEnabled()&&s&&t.contexts&&t.contexts.feedback&&(t.contexts.feedback.replay_id=s)}))}function Fb(e){return!(!e||!e.on)}function Bb(e){const{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:s}=e,r=Date.now()/1e3;return{type:"memory",name:"memory",start:r,end:r,data:{memory:{jsHeapSizeLimit:t,totalJSHeapSize:n,usedJSHeapSize:s}}}}function zb(e){let t=!1;return(n,s)=>{if(!e.checkAndHandleExpiredSession())return void(B$&&hh.warn("[Replay] Received replay event after session expired."));const r=s||!t;t=!0,e.clickDetector&&R$(e.clickDetector,n),e.addUpdate(()=>{if("buffer"===e.recordingMode&&r&&e.setInitialState(),!cb(e,n,r))return!0;if(!r)return!1;if(function(e,t){if(!t||!e.session||0!==e.session.segmentId)return;cb(e,function(e){const t=e.getOptions();return{type:Iv.Custom,timestamp:Date.now(),data:{tag:"options",payload:{shouldRecordCanvas:e.isRecordingCanvas(),sessionSampleRate:t.sessionSampleRate,errorSampleRate:t.errorSampleRate,useCompressionOption:t.useCompression,blockAllMedia:t.blockAllMedia,maskAllText:t.maskAllText,maskAllInputs:t.maskAllInputs,useCompression:!!e.eventBuffer&&"worker"===e.eventBuffer.type,networkDetailHasUrls:t.networkDetailAllowUrls.length>0,networkCaptureBodies:t.networkCaptureBodies,networkRequestHasHeaders:t.networkRequestHeaders.length>0,networkResponseHasHeaders:t.networkResponseHeaders.length>0}}}}(e),!1)}(e,r),e.session&&e.session.previousSessionId)return!0;if("buffer"===e.recordingMode&&e.session&&e.eventBuffer){const t=e.eventBuffer.getEarliestTimestamp();t&&(z$(`[Replay] Updating session start time to earliest event in buffer to ${new Date(t)}`,e.getOptions()._experiments.traceInternals),e.session.started=t,e.getOptions().stickySession&&nb(e.session))}return"session"===e.recordingMode&&e.flush(),!0})}}async function Wb({recordingData:e,replayId:t,segmentId:n,eventContext:s,timestamp:r,session:i}){const o=function({recordingData:e,headers:t}){let n;const s=`${JSON.stringify(t)}\n`;if("string"==typeof e)n=`${s}${e}`;else{const t=(new TextEncoder).encode(s);n=new Uint8Array(t.length+e.length),n.set(t),n.set(e,t.length)}return n}({recordingData:e,headers:{segment_id:n}}),{urls:a,errorIds:c,traceIds:l,initialTimestamp:u}=s,d=Of(),h=Af(),p=d&&d.getTransport(),f=d&&d.getDsn();if(!(d&&p&&f&&i.sampled))return;const m={type:"replay_event",replay_start_timestamp:u/1e3,timestamp:r/1e3,error_ids:c,trace_ids:l,urls:a,replay_id:t,segment_id:n,replay_type:i.sampled},g=await async function({client:e,scope:t,replayId:n,event:s}){const r={event_id:n,integrations:"object"!=typeof e._integrations||null===e._integrations||Array.isArray(e._integrations)?void 0:Object.keys(e._integrations)};e.emit&&e.emit("preprocessEvent",s,r);const i=await _f(e.getOptions(),s,r,t,e,Zf());if(!i)return null;i.platform=i.platform||"javascript";const o=e.getSdkMetadata&&e.getSdkMetadata(),{name:a,version:c}=o&&o.sdk||{};return i.sdk={...i.sdk,name:a||"sentry.javascript.unknown",version:c||"0.0.0"},i}({scope:h,client:d,replayId:t,event:m});if(!g)return d.recordDroppedEvent("event_processor","replay",m),void z$("An event processor returned `null`, will not send event.");delete g.sdkProcessingMetadata;const y=function(e,t,n,s){return Wp(Zp(e,Qp(e),s,n),[[{type:"replay_event"},e],[{type:"replay_recording",length:"string"==typeof t?(new TextEncoder).encode(t).length:t.length},t]])}(g,o,f,d.getOptions().tunnel);let _;try{_=await p.send(y)}catch($){const e=new Error(m_);try{e.cause=$}catch(b){}throw e}if(!_)return _;if("number"==typeof _.statusCode&&(_.statusCode<200||_.statusCode>=300))throw new Hb(_.statusCode);const v=tf({},_);if(ef(v,"replay"))throw new Vb(v);return _}class Hb extends Error{constructor(e){super(`Transport returned status code ${e}`)}}class Vb extends Error{constructor(e){super("Rate limit hit"),this.rateLimits=e}}async function Jb(e,t={count:0,interval:5e3}){const{recordingData:n,options:s}=e;if(n.length)try{return await Wb(e),!0}catch(r){if(r instanceof Hb||r instanceof Vb)throw r;if(Ef("Replays",{_retryCount:t.count}),B$&&s._experiments&&s._experiments.captureExceptions&&wf(r),t.count>=3){const e=new Error(`${m_} - max retries exceeded`);try{e.cause=r}catch(i){}throw e}return t.interval*=++t.count,new Promise((n,s)=>{setTimeout(async()=>{try{await Jb(e,t),n(!0)}catch(r){s(r)}},t.interval)})}}const Kb="__THROTTLED";function Gb(e,t,n){const s=new Map;let r=!1;return(...i)=>{const o=Math.floor(Date.now()/1e3);if((e=>{const t=e-n;s.forEach((e,n)=>{n<t&&s.delete(n)})})(o),[...s.values()].reduce((e,t)=>e+t,0)>=t){const e=r;return r=!0,e?"__SKIPPED":Kb}r=!1;const a=s.get(o)||0;return s.set(o,a+1),e(...i)}}class Yb{constructor({options:e,recordingOptions:t}){Yb.prototype.__init.call(this),Yb.prototype.__init2.call(this),Yb.prototype.__init3.call(this),Yb.prototype.__init4.call(this),Yb.prototype.__init5.call(this),Yb.prototype.__init6.call(this),this.eventBuffer=null,this.performanceEntries=[],this.replayPerformanceEntries=[],this.recordingMode="session",this.timeouts={sessionIdlePause:3e5,sessionIdleExpire:9e5},this._lastActivity=Date.now(),this._isEnabled=!1,this._isPaused=!1,this._hasInitializedCoreListeners=!1,this._context={errorIds:new Set,traceIds:new Set,urls:[],initialTimestamp:Date.now(),initialUrl:""},this._recordingOptions=t,this._options=e,this._debouncedFlush=function(e,t,n){let s,r,i;const o=n&&n.maxWait?Math.max(n.maxWait,t):0;function a(){return c(),s=e(),s}function c(){void 0!==r&&clearTimeout(r),void 0!==i&&clearTimeout(i),r=i=void 0}function l(){return r&&clearTimeout(r),r=setTimeout(a,t),o&&void 0===i&&(i=setTimeout(a,o)),s}return l.cancel=c,l.flush=function(){return void 0!==r||void 0!==i?a():s},l}(()=>this._flush(),this._options.flushMinDelay,{maxWait:this._options.flushMaxDelay}),this._throttledAddEvent=Gb((e,t)=>function(e,t,n){return ub(e,t)?lb(e,t,n):Promise.resolve(null)}(this,e,t),300,5);const{slowClickTimeout:n,slowClickIgnoreSelectors:s}=this.getOptions(),r=n?{threshold:Math.min(3e3,n),timeout:n,scrollTimeout:300,ignoreSelector:s?s.join(","):""}:void 0;r&&(this.clickDetector=new x$(this,r))}getContext(){return this._context}isEnabled(){return this._isEnabled}isPaused(){return this._isPaused}isRecordingCanvas(){return Boolean(this._canvas)}getOptions(){return this._options}initializeSampling(e){const{errorSampleRate:t,sessionSampleRate:n}=this._options;t<=0&&n<=0||(this._initializeSessionForSampling(e),this.session?!1!==this.session.sampled&&(this.recordingMode="buffer"===this.session.sampled&&0===this.session.segmentId?"buffer":"session",W$(`[Replay] Starting replay in ${this.recordingMode} mode`,this._options._experiments.traceInternals),this._initializeRecording()):this._handleException(new Error("Unable to initialize and create session")))}start(){if(this._isEnabled&&"session"===this.recordingMode)throw new Error("Replay recording is already in progress");if(this._isEnabled&&"buffer"===this.recordingMode)throw new Error("Replay buffering is in progress, call `flush()` to save the replay");W$("[Replay] Starting replay in session mode",this._options._experiments.traceInternals),this._updateUserActivity();const e=ab({maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:1,allowBuffering:!1});this.session=e,this._initializeRecording()}startBuffering(){if(this._isEnabled)throw new Error("Replay recording is already in progress");W$("[Replay] Starting replay in buffer mode",this._options._experiments.traceInternals);const e=ab({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals},{stickySession:this._options.stickySession,sessionSampleRate:0,allowBuffering:!0});this.session=e,this.recordingMode="buffer",this._initializeRecording()}startRecording(){try{const e=this._canvas;this._stopRecording=_$({...this._recordingOptions,..."buffer"===this.recordingMode&&{checkoutEveryNms:6e4},emit:zb(this),onMutation:this._onMutationHandler,...e?{recordCanvas:e.recordCanvas,getCanvasManager:e.getCanvasManager,sampling:e.sampling,dataURLOptions:e.dataURLOptions}:{}})}catch(e){this._handleException(e)}}stopRecording(){try{return this._stopRecording&&(this._stopRecording(),this._stopRecording=void 0),!0}catch(e){return this._handleException(e),!1}}async stop({forceFlush:e=!1,reason:t}={}){if(this._isEnabled){this._isEnabled=!1;try{z$("[Replay] Stopping Replay"+(t?` triggered by ${t}`:""),this._options._experiments.traceInternals),this._removeListeners(),this.stopRecording(),this._debouncedFlush.cancel(),e&&await this._flush({force:!0}),this.eventBuffer&&this.eventBuffer.destroy(),this.eventBuffer=null,Z$(this)}catch(n){this._handleException(n)}}}pause(){this._isPaused||(this._isPaused=!0,this.stopRecording(),z$("[Replay] Pausing replay",this._options._experiments.traceInternals))}resume(){this._isPaused&&this._checkSession()&&(this._isPaused=!1,this.startRecording(),z$("[Replay] Resuming replay",this._options._experiments.traceInternals))}async sendBufferedReplayOrFlush({continueRecording:e=!0}={}){if("session"===this.recordingMode)return this.flushImmediate();const t=Date.now();z$("[Replay] Converting buffer to session",this._options._experiments.traceInternals),await this.flushImmediate();const n=this.stopRecording();e&&n&&"session"!==this.recordingMode&&(this.recordingMode="session",this.session&&(this._updateUserActivity(t),this._updateSessionActivity(t),this._maybeSaveSession()),this.startRecording())}addUpdate(e){const t=e();"buffer"!==this.recordingMode&&!0!==t&&this._debouncedFlush()}triggerUserActivity(){if(this._updateUserActivity(),this._stopRecording)this.checkAndHandleExpiredSession(),this._updateSessionActivity();else{if(!this._checkSession())return;this.resume()}}updateUserActivity(){this._updateUserActivity(),this._updateSessionActivity()}conditionalFlush(){return"buffer"===this.recordingMode?Promise.resolve():this.flushImmediate()}flush(){return this._debouncedFlush()}flushImmediate(){return this._debouncedFlush(),this._debouncedFlush.flush()}cancelFlush(){this._debouncedFlush.cancel()}getSessionId(){return this.session&&this.session.id}checkAndHandleExpiredSession(){if(!(this._lastActivity&&rb(this._lastActivity,this.timeouts.sessionIdlePause)&&this.session&&"session"===this.session.sampled))return!!this._checkSession();this.pause()}setInitialState(){const e=`${p_.location.pathname}${p_.location.hash}${p_.location.search}`,t=`${p_.location.origin}${e}`;this.performanceEntries=[],this.replayPerformanceEntries=[],this._clearContext(),this._context.initialUrl=t,this._context.initialTimestamp=Date.now(),this._context.urls.push(t)}throttledAddEvent(e,t){const n=this._throttledAddEvent(e,t);if(n===Kb){const e=O$({category:"replay.throttled"});this.addUpdate(()=>!cb(this,{type:5,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e,metric:!0}}))}return n}getCurrentRoute(){const e=this.lastTransaction||Af().getTransaction(),t=(e&&gf(e).data||{})[dm];if(e&&t&&["route","custom"].includes(t))return gf(e).description}_initializeRecording(){this.setInitialState(),this._updateSessionActivity(),this.eventBuffer=X$({useCompression:this._options.useCompression,workerUrl:this._options.workerUrl}),this._removeListeners(),this._addListeners(),this._isEnabled=!0,this._isPaused=!1,this.startRecording()}_handleException(e){B$&&hh.error("[Replay]",e),B$&&this._options._experiments&&this._options._experiments.captureExceptions&&wf(e)}_initializeSessionForSampling(e){const t=this._options.errorSampleRate>0,n=ab({sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration,traceInternals:this._options._experiments.traceInternals,previousSessionId:e},{stickySession:this._options.stickySession,sessionSampleRate:this._options.sessionSampleRate,allowBuffering:t});this.session=n}_checkSession(){if(!this.session)return!1;const e=this.session;return!ob(e,{sessionIdleExpire:this.timeouts.sessionIdleExpire,maxReplayDuration:this._options.maxReplayDuration})||(this._refreshSession(e),!1)}async _refreshSession(e){this._isEnabled&&(await this.stop({reason:"refresh session"}),this.initializeSampling(e.id))}_addListeners(){try{p_.document.addEventListener("visibilitychange",this._handleVisibilityChange),p_.addEventListener("blur",this._handleWindowBlur),p_.addEventListener("focus",this._handleWindowFocus),p_.addEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.addListeners(),this._hasInitializedCoreListeners||(Ub(this),this._hasInitializedCoreListeners=!0)}catch(e){this._handleException(e)}this._performanceCleanupCallback=F$(this)}_removeListeners(){try{p_.document.removeEventListener("visibilitychange",this._handleVisibilityChange),p_.removeEventListener("blur",this._handleWindowBlur),p_.removeEventListener("focus",this._handleWindowFocus),p_.removeEventListener("keydown",this._handleKeyboardEvent),this.clickDetector&&this.clickDetector.removeListeners(),this._performanceCleanupCallback&&this._performanceCleanupCallback()}catch(e){this._handleException(e)}}__init(){this._handleVisibilityChange=()=>{"visible"===p_.document.visibilityState?this._doChangeToForegroundTasks():this._doChangeToBackgroundTasks()}}__init2(){this._handleWindowBlur=()=>{const e=O$({category:"ui.blur"});this._doChangeToBackgroundTasks(e)}}__init3(){this._handleWindowFocus=()=>{const e=O$({category:"ui.focus"});this._doChangeToForegroundTasks(e)}}__init4(){this._handleKeyboardEvent=e=>{L$(this,e)}}_doChangeToBackgroundTasks(e){if(!this.session)return;ib(this.session,{maxReplayDuration:this._options.maxReplayDuration,sessionIdleExpire:this.timeouts.sessionIdleExpire})||(e&&this._createCustomBreadcrumb(e),this.conditionalFlush())}_doChangeToForegroundTasks(e){if(!this.session)return;this.checkAndHandleExpiredSession()?e&&this._createCustomBreadcrumb(e):z$("[Replay] Document has become active, but session has expired")}_updateUserActivity(e=Date.now()){this._lastActivity=e}_updateSessionActivity(e=Date.now()){this.session&&(this.session.lastActivity=e,this._maybeSaveSession())}_createCustomBreadcrumb(e){this.addUpdate(()=>{this.throttledAddEvent({type:Iv.Custom,timestamp:e.timestamp||0,data:{tag:"breadcrumb",payload:e}})})}_addPerformanceEntries(){const e=(t=this.performanceEntries,t.map(q$).filter(Boolean)).concat(this.replayPerformanceEntries);var t;return this.performanceEntries=[],this.replayPerformanceEntries=[],Promise.all(yb(this,e))}_clearContext(){this._context.errorIds.clear(),this._context.traceIds.clear(),this._context.urls=[]}_updateInitialTimestampFromEventBuffer(){const{session:e,eventBuffer:t}=this;if(!e||!t)return;if(e.segmentId)return;const n=t.getEarliestTimestamp();n&&n<this._context.initialTimestamp&&(this._context.initialTimestamp=n)}_popEventContext(){const e={initialTimestamp:this._context.initialTimestamp,initialUrl:this._context.initialUrl,errorIds:Array.from(this._context.errorIds),traceIds:Array.from(this._context.traceIds),urls:this._context.urls};return this._clearContext(),e}async _runFlush(){const e=this.getSessionId();if(this.session&&this.eventBuffer&&e){if(await this._addPerformanceEntries(),this.eventBuffer&&this.eventBuffer.hasEvents&&(await async function(e){try{return Promise.all(yb(e,[Bb(p_.performance.memory)]))}catch(t){return[]}}(this),this.eventBuffer&&e===this.getSessionId()))try{this._updateInitialTimestampFromEventBuffer();const t=Date.now();if(t-this._context.initialTimestamp>this._options.maxReplayDuration+3e4)throw new Error("Session is too long, not sending replay");const n=this._popEventContext(),s=this.session.segmentId++;this._maybeSaveSession();const r=await this.eventBuffer.finish();await Jb({replayId:e,recordingData:r,segmentId:s,eventContext:n,session:this.session,options:this.getOptions(),timestamp:t})}catch(t){this._handleException(t),this.stop({reason:"sendReplay"});const e=Of();e&&e.recordDroppedEvent("send_error","replay")}}else B$&&hh.error("[Replay] No session or eventBuffer found to flush.")}__init5(){this._flush=async({force:e=!1}={})=>{if(!this._isEnabled&&!e)return;if(!this.checkAndHandleExpiredSession())return void(B$&&hh.error("[Replay] Attempting to finish replay event after session expired."));if(!this.session)return;const t=this.session.started,n=Date.now()-t;this._debouncedFlush.cancel();const s=n<this._options.minReplayDuration,r=n>this._options.maxReplayDuration+5e3;if(s||r)return z$(`[Replay] Session duration (${Math.floor(n/1e3)}s) is too ${s?"short":"long"}, not sending replay.`,this._options._experiments.traceInternals),void(s&&this._debouncedFlush());const i=this.eventBuffer;if(i&&0===this.session.segmentId&&!i.hasCheckout&&z$("[Replay] Flushing initial segment without checkout.",this._options._experiments.traceInternals),!this._flushLock)return this._flushLock=this._runFlush(),await this._flushLock,void(this._flushLock=void 0);try{await this._flushLock}catch(o){B$&&hh.error(o)}finally{this._debouncedFlush()}}}_maybeSaveSession(){this.session&&this._options.stickySession&&nb(this.session)}__init6(){this._onMutationHandler=e=>{const t=e.length,n=this._options.mutationLimit,s=n&&t>n;if(t>this._options.mutationBreadcrumbLimit||s){const e=O$({category:"replay.mutations",data:{count:t,limit:s}});this._createCustomBreadcrumb(e)}return!s||(this.stop({reason:"mutationLimit",forceFlush:"session"===this.recordingMode}),!1)}}}function Xb(e,t,n,s){const r=[...e,..."string"==typeof s?s.split(","):[],...t];return void 0!==n&&("string"==typeof n&&r.push(`.${n}`),dh(()=>{})),r.join(",")}const Qb='img,image,svg,video,object,picture,embed,map,audio,link[rel="icon"],link[rel="apple-touch-icon"]',Zb=["content-length","content-type","accept"];let ew=!1;class tw{static __initStatic(){this.id="Replay"}constructor({flushMinDelay:e=5e3,flushMaxDelay:t=5500,minReplayDuration:n=4999,maxReplayDuration:s=36e5,stickySession:r=!0,useCompression:i=!0,workerUrl:o,_experiments:a={},sessionSampleRate:c,errorSampleRate:l,maskAllText:u=!0,maskAllInputs:d=!0,blockAllMedia:h=!0,mutationBreadcrumbLimit:p=750,mutationLimit:f=1e4,slowClickTimeout:m=7e3,slowClickIgnoreSelectors:g=[],networkDetailAllowUrls:y=[],networkDetailDenyUrls:_=[],networkCaptureBodies:v=!0,networkRequestHeaders:$=[],networkResponseHeaders:b=[],mask:w=[],maskAttributes:S=["title","placeholder"],unmask:k=[],block:T=[],unblock:E=[],ignore:x=[],maskFn:C,beforeAddRecordingEvent:I,beforeErrorSampling:R,blockClass:O,blockSelector:A,maskInputOptions:P,maskTextClass:M,maskTextSelector:D,ignoreClass:j}={}){this.name=tw.id;const L=function({mask:e,unmask:t,block:n,unblock:s,ignore:r,blockClass:i,blockSelector:o,maskTextClass:a,maskTextSelector:c,ignoreClass:l}){const u={maskTextSelector:Xb(e,[".sentry-mask","[data-sentry-mask]"],a,c),unmaskTextSelector:Xb(t,[".sentry-unmask","[data-sentry-unmask]"]),blockSelector:Xb(n,[".sentry-block","[data-sentry-block]",'base[href="/"]'],i,o),unblockSelector:Xb(s,[".sentry-unblock","[data-sentry-unblock]"]),ignoreSelector:Xb(r,[".sentry-ignore","[data-sentry-ignore]",'input[type="file"]'],l)};return i instanceof RegExp&&(u.blockClass=i),a instanceof RegExp&&(u.maskTextClass=a),u}({mask:w,unmask:k,block:T,unblock:E,ignore:x,blockClass:O,blockSelector:A,maskTextClass:M,maskTextSelector:D,ignoreClass:j});if(this._recordingOptions={maskAllInputs:d,maskAllText:u,maskInputOptions:{...P||{},password:!0},maskTextFn:C,maskInputFn:C,maskAttributeFn:(e,t,n)=>function({el:e,key:t,maskAttributes:n,maskAllText:s,privacyOptions:r,value:i}){return s?r.unmaskTextSelector&&e.matches(r.unmaskTextSelector)?i:n.includes(t)||"value"===t&&"INPUT"===e.tagName&&["submit","button"].includes(e.getAttribute("type")||"")?i.replace(/[\S]/g,"*"):i:i}({maskAttributes:S,maskAllText:u,privacyOptions:L,key:e,value:t,el:n}),...L,slimDOMOptions:"all",inlineStylesheet:!0,inlineImages:!1,collectFonts:!0,errorHandler:e=>{try{e.__rrweb__=!0}catch(t){}}},this._initialOptions={flushMinDelay:e,flushMaxDelay:t,minReplayDuration:Math.min(n,15e3),maxReplayDuration:Math.min(s,v_),stickySession:r,sessionSampleRate:c,errorSampleRate:l,useCompression:i,workerUrl:o,blockAllMedia:h,maskAllInputs:d,maskAllText:u,mutationBreadcrumbLimit:p,mutationLimit:f,slowClickTimeout:m,slowClickIgnoreSelectors:g,networkDetailAllowUrls:y,networkDetailDenyUrls:_,networkCaptureBodies:v,networkRequestHeaders:nw($),networkResponseHeaders:nw(b),beforeAddRecordingEvent:I,beforeErrorSampling:R,_experiments:a},"number"==typeof c&&(this._initialOptions.sessionSampleRate=c),"number"==typeof l&&(this._initialOptions.errorSampleRate=l),this._initialOptions.blockAllMedia&&(this._recordingOptions.blockSelector=this._recordingOptions.blockSelector?`${this._recordingOptions.blockSelector},${Qb}`:Qb),this._isInitialized&&bp())throw new Error("Multiple Sentry Session Replay instances are not supported");this._isInitialized=!0}get _isInitialized(){return ew}set _isInitialized(e){ew=e}setupOnce(){bp()&&(this._setup(),setTimeout(()=>this._initialize()))}start(){this._replay&&this._replay.start()}startBuffering(){this._replay&&this._replay.startBuffering()}stop(){return this._replay?this._replay.stop({forceFlush:"session"===this._replay.recordingMode}):Promise.resolve()}flush(e){return this._replay&&this._replay.isEnabled()?this._replay.sendBufferedReplayOrFlush(e):Promise.resolve()}getReplayId(){if(this._replay&&this._replay.isEnabled())return this._replay.getSessionId()}_initialize(){this._replay&&(this._maybeLoadFromReplayCanvasIntegration(),this._replay.initializeSampling())}_setup(){const e=function(e){const t=Of(),n=t&&t.getOptions(),s={sessionSampleRate:0,errorSampleRate:0,...Th(e)};if(!n)return dh(()=>{}),s;null==e.sessionSampleRate&&null==e.errorSampleRate&&null==n.replaysSessionSampleRate&&null==n.replaysOnErrorSampleRate&&dh(()=>{});"number"==typeof n.replaysSessionSampleRate&&(s.sessionSampleRate=n.replaysSessionSampleRate);"number"==typeof n.replaysOnErrorSampleRate&&(s.errorSampleRate=n.replaysOnErrorSampleRate);return s}(this._initialOptions);this._replay=new Yb({options:e,recordingOptions:this._recordingOptions})}_maybeLoadFromReplayCanvasIntegration(){try{const e=Of().getIntegrationByName("ReplayCanvas");if(!e)return;this._replay._canvas=e.getOptions()}catch(e){}}}function nw(e){return[...Zb,...e.map(e=>e.toLowerCase())]}
/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */tw.__initStatic();const sw=globalThis,rw=sw.ShadowRoot&&(void 0===sw.ShadyCSS||sw.ShadyCSS.nativeShadow)&&"adoptedStyleSheets"in Document.prototype&&"replace"in CSSStyleSheet.prototype,iw=Symbol(),ow=new WeakMap;class aw{constructor(e,t,n){if(this._$cssResult$=!0,n!==iw)throw new Error("CSSResult is not constructable. Use `unsafeCSS` or `css` instead.");this.cssText=e,this._strings=t}get styleSheet(){let e=this._styleSheet;const t=this._strings;if(rw&&void 0===e){const n=void 0!==t&&1===t.length;n&&(e=ow.get(t)),void 0===e&&((this._styleSheet=e=new CSSStyleSheet).replaceSync(this.cssText),n&&ow.set(t,e))}return e}toString(){return this.cssText}}const cw=(e,...t)=>{const n=1===e.length?e[0]:t.reduce((t,n,s)=>t+(e=>{if(!0===e._$cssResult$)return e.cssText;if("number"==typeof e)return e;throw new Error(`Value passed to 'css' function must be a 'css' function result: ${e}. Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.`)})(n)+e[s+1],e[0]);return new aw(n,e,iw)},lw=e=>{let t="";for(const s of e.cssRules)t+=s.cssText;return new aw("string"==typeof(n=t)?n:String(n),void 0,iw);var n},uw=rw?e=>e:e=>e instanceof CSSStyleSheet?lw(e):e,{is:dw,defineProperty:hw,getOwnPropertyDescriptor:pw,getOwnPropertyNames:fw,getOwnPropertySymbols:mw,getPrototypeOf:gw}=Object,yw=globalThis;let _w;const vw=yw.trustedTypes,$w=vw?vw.emptyScript:"",bw=yw.reactiveElementPolyfillSupportDevMode;yw.litIssuedWarnings??(yw.litIssuedWarnings=new Set),_w=(e,t)=>{t+=` See https://lit.dev/msg/${e} for more information.`,yw.litIssuedWarnings.has(t)||yw.litIssuedWarnings.has(e)||yw.litIssuedWarnings.add(t)},queueMicrotask(()=>{_w("dev-mode","Lit is in dev mode. Not recommended for production!"),yw.ShadyDOM?.inUse&&void 0===bw&&_w("polyfill-support-missing","Shadow DOM is being polyfilled via `ShadyDOM` but the `polyfill-support` module has not been loaded.")});const ww=(e,t)=>e,Sw={toAttribute(e,t){switch(t){case Boolean:e=e?$w:null;break;case Object:case Array:e=null==e?e:JSON.stringify(e)}return e},fromAttribute(e,t){let n=e;switch(t){case Boolean:n=null!==e;break;case Number:n=null===e?null:Number(e);break;case Object:case Array:try{n=JSON.parse(e)}catch(s){n=null}}return n}},kw=(e,t)=>!dw(e,t),Tw={attribute:!0,type:String,converter:Sw,reflect:!1,useDefault:!1,hasChanged:kw};Symbol.metadata??(Symbol.metadata=Symbol("metadata")),yw.litPropertyMetadata??(yw.litPropertyMetadata=new WeakMap);class Ew extends HTMLElement{static addInitializer(e){this.__prepare(),(this._initializers??(this._initializers=[])).push(e)}static get observedAttributes(){return this.finalize(),this.__attributeToPropertyMap&&[...this.__attributeToPropertyMap.keys()]}static createProperty(e,t=Tw){if(t.state&&(t.attribute=!1),this.__prepare(),this.prototype.hasOwnProperty(e)&&((t=Object.create(t)).wrapped=!0),this.elementProperties.set(e,t),!t.noAccessor){const n=Symbol.for(`${String(e)} (@property() cache)`),s=this.getPropertyDescriptor(e,n,t);void 0!==s&&hw(this.prototype,e,s)}}static getPropertyDescriptor(e,t,n){const{get:s,set:r}=pw(this.prototype,e)??{get(){return this[t]},set(e){this[t]=e}};if(null==s){if("value"in(pw(this.prototype,e)??{}))throw new Error(`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it's actually declared as a value on the prototype. Usually this is due to using @property or @state on a method.`);_w("reactive-property-without-getter",`Field ${JSON.stringify(String(e))} on ${this.name} was declared as a reactive property but it does not have a getter. This will be an error in a future version of Lit.`)}return{get:s,set(t){const i=s?.call(this);r?.call(this,t),this.requestUpdate(e,i,n)},configurable:!0,enumerable:!0}}static getPropertyOptions(e){return this.elementProperties.get(e)??Tw}static __prepare(){if(this.hasOwnProperty(ww("elementProperties")))return;const e=gw(this);e.finalize(),void 0!==e._initializers&&(this._initializers=[...e._initializers]),this.elementProperties=new Map(e.elementProperties)}static finalize(){if(this.hasOwnProperty(ww("finalized")))return;if(this.finalized=!0,this.__prepare(),this.hasOwnProperty(ww("properties"))){const e=this.properties,t=[...fw(e),...mw(e)];for(const n of t)this.createProperty(n,e[n])}const e=this[Symbol.metadata];if(null!==e){const t=litPropertyMetadata.get(e);if(void 0!==t)for(const[e,n]of t)this.elementProperties.set(e,n)}this.__attributeToPropertyMap=new Map;for(const[t,n]of this.elementProperties){const e=this.__attributeNameForProperty(t,n);void 0!==e&&this.__attributeToPropertyMap.set(e,t)}this.elementStyles=this.finalizeStyles(this.styles),this.hasOwnProperty("createProperty")&&_w("no-override-create-property","Overriding ReactiveElement.createProperty() is deprecated. The override will not be called with standard decorators"),this.hasOwnProperty("getPropertyDescriptor")&&_w("no-override-get-property-descriptor","Overriding ReactiveElement.getPropertyDescriptor() is deprecated. The override will not be called with standard decorators")}static finalizeStyles(e){const t=[];if(Array.isArray(e)){const n=new Set(e.flat(1/0).reverse());for(const e of n)t.unshift(uw(e))}else void 0!==e&&t.push(uw(e));return t}static __attributeNameForProperty(e,t){const n=t.attribute;return!1===n?void 0:"string"==typeof n?n:"string"==typeof e?e.toLowerCase():void 0}constructor(){super(),this.__instanceProperties=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.__reflectingProperty=null,this.__initialize()}__initialize(){this.__updatePromise=new Promise(e=>this.enableUpdating=e),this._$changedProperties=new Map,this.__saveInstanceProperties(),this.requestUpdate(),this.constructor._initializers?.forEach(e=>e(this))}addController(e){(this.__controllers??(this.__controllers=new Set)).add(e),void 0!==this.renderRoot&&this.isConnected&&e.hostConnected?.()}removeController(e){this.__controllers?.delete(e)}__saveInstanceProperties(){const e=new Map,t=this.constructor.elementProperties;for(const n of t.keys())this.hasOwnProperty(n)&&(e.set(n,this[n]),delete this[n]);e.size>0&&(this.__instanceProperties=e)}createRenderRoot(){const e=this.shadowRoot??this.attachShadow(this.constructor.shadowRootOptions);return((e,t)=>{if(rw)e.adoptedStyleSheets=t.map(e=>e instanceof CSSStyleSheet?e:e.styleSheet);else for(const n of t){const t=document.createElement("style"),s=sw.litNonce;void 0!==s&&t.setAttribute("nonce",s),t.textContent=n.cssText,e.appendChild(t)}})(e,this.constructor.elementStyles),e}connectedCallback(){this.renderRoot??(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),this.__controllers?.forEach(e=>e.hostConnected?.())}enableUpdating(e){}disconnectedCallback(){this.__controllers?.forEach(e=>e.hostDisconnected?.())}attributeChangedCallback(e,t,n){this._$attributeToProperty(e,n)}__propertyToAttribute(e,t){const n=this.constructor.elementProperties.get(e),s=this.constructor.__attributeNameForProperty(e,n);if(void 0!==s&&!0===n.reflect){const r=(void 0!==n.converter?.toAttribute?n.converter:Sw).toAttribute(t,n.type);this.constructor.enabledWarnings.includes("migration")&&void 0===r&&_w("undefined-attribute-value",`The attribute value for the ${e} property is undefined on element ${this.localName}. The attribute will be removed, but in the previous version of \`ReactiveElement\`, the attribute would not have changed.`),this.__reflectingProperty=e,null==r?this.removeAttribute(s):this.setAttribute(s,r),this.__reflectingProperty=null}}_$attributeToProperty(e,t){const n=this.constructor,s=n.__attributeToPropertyMap.get(e);if(void 0!==s&&this.__reflectingProperty!==s){const e=n.getPropertyOptions(s),r="function"==typeof e.converter?{fromAttribute:e.converter}:void 0!==e.converter?.fromAttribute?e.converter:Sw;this.__reflectingProperty=s,this[s]=r.fromAttribute(t,e.type)??this.__defaultValues?.get(s)??null,this.__reflectingProperty=null}}requestUpdate(e,t,n){if(void 0!==e){e instanceof Event&&_w("","The requestUpdate() method was called with an Event as the property name. This is probably a mistake caused by binding this.requestUpdate as an event listener. Instead bind a function that will call it with no arguments: () => this.requestUpdate()");const s=this.constructor,r=this[e];n??(n=s.getPropertyOptions(e));if(!((n.hasChanged??kw)(r,t)||n.useDefault&&n.reflect&&r===this.__defaultValues?.get(e)&&!this.hasAttribute(s.__attributeNameForProperty(e,n))))return;this._$changeProperty(e,t,n)}!1===this.isUpdatePending&&(this.__updatePromise=this.__enqueueUpdate())}_$changeProperty(e,t,{useDefault:n,reflect:s,wrapped:r},i){n&&!(this.__defaultValues??(this.__defaultValues=new Map)).has(e)&&(this.__defaultValues.set(e,i??t??this[e]),!0!==r||void 0!==i)||(this._$changedProperties.has(e)||(this.hasUpdated||n||(t=void 0),this._$changedProperties.set(e,t)),!0===s&&this.__reflectingProperty!==e&&(this.__reflectingProperties??(this.__reflectingProperties=new Set)).add(e))}async __enqueueUpdate(){this.isUpdatePending=!0;try{await this.__updatePromise}catch(t){Promise.reject(t)}const e=this.scheduleUpdate();return null!=e&&await e,!this.isUpdatePending}scheduleUpdate(){const e=this.performUpdate();return this.constructor.enabledWarnings.includes("async-perform-update")&&"function"==typeof e?.then&&_w("async-perform-update",`Element ${this.localName} returned a Promise from performUpdate(). This behavior is deprecated and will be removed in a future version of ReactiveElement.`),e}performUpdate(){if(!this.isUpdatePending)return;var e;if(e={kind:"update"},yw.emitLitDebugLogEvents&&yw.dispatchEvent(new CustomEvent("lit-debug",{detail:e})),!this.hasUpdated){this.renderRoot??(this.renderRoot=this.createRenderRoot());{const e=[...this.constructor.elementProperties.keys()].filter(e=>this.hasOwnProperty(e)&&e in gw(this));if(e.length)throw new Error(`The following properties on element ${this.localName} will not trigger updates as expected because they are set using class fields: ${e.join(", ")}. Native class fields and some compiled output will overwrite accessors used for detecting changes. See https://lit.dev/msg/class-field-shadowing for more information.`)}if(this.__instanceProperties){for(const[e,t]of this.__instanceProperties)this[e]=t;this.__instanceProperties=void 0}const e=this.constructor.elementProperties;if(e.size>0)for(const[t,n]of e){const{wrapped:e}=n,s=this[t];!0!==e||this._$changedProperties.has(t)||void 0===s||this._$changeProperty(t,void 0,n,s)}}let t=!1;const n=this._$changedProperties;try{t=this.shouldUpdate(n),t?(this.willUpdate(n),this.__controllers?.forEach(e=>e.hostUpdate?.()),this.update(n)):this.__markUpdated()}catch(s){throw t=!1,this.__markUpdated(),s}t&&this._$didUpdate(n)}willUpdate(e){}_$didUpdate(e){this.__controllers?.forEach(e=>e.hostUpdated?.()),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(e)),this.updated(e),this.isUpdatePending&&this.constructor.enabledWarnings.includes("change-in-update")&&_w("change-in-update",`Element ${this.localName} scheduled an update (generally because a property was set) after an update completed, causing a new update to be scheduled. This is inefficient and should be avoided unless the next update can only be scheduled as a side effect of the previous update.`)}__markUpdated(){this._$changedProperties=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.__updatePromise}shouldUpdate(e){return!0}update(e){this.__reflectingProperties&&(this.__reflectingProperties=this.__reflectingProperties.forEach(e=>this.__propertyToAttribute(e,this[e]))),this.__markUpdated()}updated(e){}firstUpdated(e){}}Ew.elementStyles=[],Ew.shadowRootOptions={mode:"open"},Ew[ww("elementProperties")]=new Map,Ew[ww("finalized")]=new Map,bw?.({ReactiveElement:Ew});{Ew.enabledWarnings=["change-in-update","async-perform-update"];const e=function(e){e.hasOwnProperty(ww("enabledWarnings"))||(e.enabledWarnings=e.enabledWarnings.slice())};Ew.enableWarning=function(t){e(this),this.enabledWarnings.includes(t)||this.enabledWarnings.push(t)},Ew.disableWarning=function(t){e(this);const n=this.enabledWarnings.indexOf(t);n>=0&&this.enabledWarnings.splice(n,1)}}(yw.reactiveElementVersions??(yw.reactiveElementVersions=[])).push("2.1.0"),yw.reactiveElementVersions.length>1&&queueMicrotask(()=>{_w("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")})
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;const xw=globalThis,Cw=e=>{xw.emitLitDebugLogEvents&&xw.dispatchEvent(new CustomEvent("lit-debug",{detail:e}))};let Iw,Rw=0;xw.litIssuedWarnings??(xw.litIssuedWarnings=new Set),Iw=(e,t)=>{t+=e?` See https://lit.dev/msg/${e} for more information.`:"",xw.litIssuedWarnings.has(t)||xw.litIssuedWarnings.has(e)||xw.litIssuedWarnings.add(t)},queueMicrotask(()=>{Iw("dev-mode","Lit is in dev mode. Not recommended for production!")});const Ow=xw.ShadyDOM?.inUse&&!0===xw.ShadyDOM?.noPatch?xw.ShadyDOM.wrap:e=>e,Aw=xw.trustedTypes,Pw=Aw?Aw.createPolicy("lit-html",{createHTML:e=>e}):void 0,Mw=e=>e,Dw=(e,t,n)=>Mw,jw=e=>{if(aS!==Dw)throw new Error("Attempted to overwrite existing lit-html security policy. setSanitizeDOMValueFactory should be called at most once.");aS=e},Lw=()=>{aS=Dw},Nw=(e,t,n)=>aS(e,t,n),qw="$lit$",Uw=`lit$${Math.random().toFixed(9).slice(2)}$`,Fw="?"+Uw,Bw=`<${Fw}>`,zw=document,Ww=()=>zw.createComment(""),Hw=e=>null===e||"object"!=typeof e&&"function"!=typeof e,Vw=Array.isArray,Jw="[ \t\n\f\r]",Kw=/<(?:(!--|\/[^a-zA-Z])|(\/?[a-zA-Z][^>\s]*)|(\/?$))/g,Gw=/-->/g,Yw=/>/g,Xw=new RegExp(`>|${Jw}(?:([^\\s"'>=/]+)(${Jw}*=${Jw}*(?:[^ \t\n\f\r"'\`<>=]|("|')|))|$)`,"g"),Qw=/'/g,Zw=/"/g,eS=/^(?:script|style|textarea|title)$/i,tS=(nS=1,(e,...t)=>(e.some(e=>void 0===e),t.some(e=>e?._$litStatic$)&&Iw("","Static values 'literal' or 'unsafeStatic' cannot be used as values to non-static templates.\nPlease use the static 'html' tag function. See https://lit.dev/docs/templates/expressions/#static-expressions"),{_$litType$:nS,strings:e,values:t}));var nS;const sS=Symbol.for("lit-noChange"),rS=Symbol.for("lit-nothing"),iS=new WeakMap,oS=zw.createTreeWalker(zw,129);let aS=Dw;function cS(e,t){if(!Vw(e)||!e.hasOwnProperty("raw")){let e="invalid template strings array";throw e="\n          Internal Error: expected template strings to be an array\n          with a 'raw' field. Faking a template strings array by\n          calling html or svg like an ordinary function is effectively\n          the same as calling unsafeHtml and can lead to major security\n          issues, e.g. opening your code up to XSS attacks.\n          If you're using the html or svg tagged template functions normally\n          and still seeing this error, please file a bug at\n          https://github.com/lit/lit/issues/new?template=bug_report.md\n          and include information about your build tooling, if any.\n        ".trim().replace(/\n */g,"\n"),new Error(e)}return void 0!==Pw?Pw.createHTML(t):t}class lS{constructor({strings:e,_$litType$:t},n){let s;this.parts=[];let r=0,i=0;const o=e.length-1,a=this.parts,[c,l]=((e,t)=>{const n=e.length-1,s=[];let r,i=2===t?"<svg>":3===t?"<math>":"",o=Kw;for(let a=0;a<n;a++){const t=e[a];let n,c,l=-1,u=0;for(;u<t.length&&(o.lastIndex=u,c=o.exec(t),null!==c);)if(u=o.lastIndex,o===Kw){if("!--"===c[1])o=Gw;else if(void 0!==c[1])o=Yw;else if(void 0!==c[2])eS.test(c[2])&&(r=new RegExp(`</${c[2]}`,"g")),o=Xw;else if(void 0!==c[3])throw new Error("Bindings in tag names are not supported. Please use static templates instead. See https://lit.dev/docs/templates/expressions/#static-expressions")}else o===Xw?">"===c[0]?(o=r??Kw,l=-1):void 0===c[1]?l=-2:(l=o.lastIndex-c[2].length,n=c[1],o=void 0===c[3]?Xw:'"'===c[3]?Zw:Qw):o===Zw||o===Qw?o=Xw:o===Gw||o===Yw?o=Kw:(o=Xw,r=void 0);const d=o===Xw&&e[a+1].startsWith("/>")?" ":"";i+=o===Kw?t+Bw:l>=0?(s.push(n),t.slice(0,l)+qw+t.slice(l)+Uw+d):t+Uw+(-2===l?a:d)}return[cS(e,i+(e[n]||"<?>")+(2===t?"</svg>":3===t?"</math>":"")),s]})(e,t);if(this.el=lS.createElement(c,n),oS.currentNode=this.el.content,2===t||3===t){const e=this.el.content.firstChild;e.replaceWith(...e.childNodes)}for(;null!==(s=oS.nextNode())&&a.length<o;){if(1===s.nodeType){{const e=s.localName;if(/^(?:textarea|template)$/i.test(e)&&s.innerHTML.includes(Uw)){const t=`Expressions are not supported inside \`${e}\` elements. See https://lit.dev/msg/expression-in-${e} for more information.`;if("template"===e)throw new Error(t);Iw("",t)}}if(s.hasAttributes())for(const e of s.getAttributeNames())if(e.endsWith(qw)){const t=l[i++],n=s.getAttribute(e).split(Uw),o=/([.?@])?(.*)/.exec(t);a.push({type:1,index:r,name:o[2],strings:n,ctor:"."===o[1]?fS:"?"===o[1]?mS:"@"===o[1]?gS:pS}),s.removeAttribute(e)}else e.startsWith(Uw)&&(a.push({type:6,index:r}),s.removeAttribute(e));if(eS.test(s.tagName)){const e=s.textContent.split(Uw),t=e.length-1;if(t>0){s.textContent=Aw?Aw.emptyScript:"";for(let n=0;n<t;n++)s.append(e[n],Ww()),oS.nextNode(),a.push({type:2,index:++r});s.append(e[t],Ww())}}}else if(8===s.nodeType){if(s.data===Fw)a.push({type:2,index:r});else{let e=-1;for(;-1!==(e=s.data.indexOf(Uw,e+1));)a.push({type:7,index:r}),e+=Uw.length-1}}r++}if(l.length!==i)throw new Error('Detected duplicate attribute bindings. This occurs if your template has duplicate attributes on an element tag. For example "<input ?disabled=${true} ?disabled=${false}>" contains a duplicate "disabled" attribute. The error was detected in the following template: \n`'+e.join("${...}")+"`");Cw&&Cw({kind:"template prep",template:this,clonableTemplate:this.el,parts:this.parts,strings:e})}static createElement(e,t){const n=zw.createElement("template");return n.innerHTML=e,n}}function uS(e,t,n=e,s){if(t===sS)return t;let r=void 0!==s?n.__directives?.[s]:n.__directive;const i=Hw(t)?void 0:t._$litDirective$;return r?.constructor!==i&&(r?._$notifyDirectiveConnectionChanged?.(!1),void 0===i?r=void 0:(r=new i(e),r._$initialize(e,n,s)),void 0!==s?(n.__directives??(n.__directives=[]))[s]=r:n.__directive=r),void 0!==r&&(t=uS(e,r._$resolve(e,t.values),r,s)),t}class dS{constructor(e,t){this._$parts=[],this._$disconnectableChildren=void 0,this._$template=e,this._$parent=t}get parentNode(){return this._$parent.parentNode}get _$isConnected(){return this._$parent._$isConnected}_clone(e){const{el:{content:t},parts:n}=this._$template,s=(e?.creationScope??zw).importNode(t,!0);oS.currentNode=s;let r=oS.nextNode(),i=0,o=0,a=n[0];for(;void 0!==a;){if(i===a.index){let t;2===a.type?t=new hS(r,r.nextSibling,this,e):1===a.type?t=new a.ctor(r,a.name,a.strings,this,e):6===a.type&&(t=new yS(r,this,e)),this._$parts.push(t),a=n[++o]}i!==a?.index&&(r=oS.nextNode(),i++)}return oS.currentNode=zw,s}_update(e){let t=0;for(const n of this._$parts)void 0!==n&&(Cw&&Cw({kind:"set part",part:n,value:e[t],valueIndex:t,values:e,templateInstance:this}),void 0!==n.strings?(n._$setValue(e,n,t),t+=n.strings.length-2):n._$setValue(e[t])),t++}}class hS{get _$isConnected(){return this._$parent?._$isConnected??this.__isConnected}constructor(e,t,n,s){this.type=2,this._$committedValue=rS,this._$disconnectableChildren=void 0,this._$startNode=e,this._$endNode=t,this._$parent=n,this.options=s,this.__isConnected=s?.isConnected??!0,this._textSanitizer=void 0}get parentNode(){let e=Ow(this._$startNode).parentNode;const t=this._$parent;return void 0!==t&&11===e?.nodeType&&(e=t.parentNode),e}get startNode(){return this._$startNode}get endNode(){return this._$endNode}_$setValue(e,t=this){if(null===this.parentNode)throw new Error("This `ChildPart` has no `parentNode` and therefore cannot accept a value. This likely means the element containing the part was manipulated in an unsupported way outside of Lit's control such that the part's marker nodes were ejected from DOM. For example, setting the element's `innerHTML` or `textContent` can do this.");if(e=uS(this,e,t),Hw(e))e===rS||null==e||""===e?(this._$committedValue!==rS&&(Cw&&Cw({kind:"commit nothing to child",start:this._$startNode,end:this._$endNode,parent:this._$parent,options:this.options}),this._$clear()),this._$committedValue=rS):e!==this._$committedValue&&e!==sS&&this._commitText(e);else if(void 0!==e._$litType$)this._commitTemplateResult(e);else if(void 0!==e.nodeType){if(this.options?.host===e)return void this._commitText("[probable mistake: rendered a template's host in itself (commonly caused by writing ${this} in a template]");this._commitNode(e)}else(e=>Vw(e)||"function"==typeof e?.[Symbol.iterator])(e)?this._commitIterable(e):this._commitText(e)}_insert(e){return Ow(Ow(this._$startNode).parentNode).insertBefore(e,this._$endNode)}_commitNode(e){if(this._$committedValue!==e){if(this._$clear(),aS!==Dw){const e=this._$startNode.parentNode?.nodeName;if("STYLE"===e||"SCRIPT"===e){let t="Forbidden";throw t="STYLE"===e?"Lit does not support binding inside style nodes. This is a security risk, as style injection attacks can exfiltrate data and spoof UIs. Consider instead using css`...` literals to compose styles, and do dynamic styling with css custom properties, ::parts, <slot>s, and by mutating the DOM rather than stylesheets.":"Lit does not support binding inside script nodes. This is a security risk, as it could allow arbitrary code execution.",new Error(t)}}Cw&&Cw({kind:"commit node",start:this._$startNode,parent:this._$parent,value:e,options:this.options}),this._$committedValue=this._insert(e)}}_commitText(e){if(this._$committedValue!==rS&&Hw(this._$committedValue)){const t=Ow(this._$startNode).nextSibling;void 0===this._textSanitizer&&(this._textSanitizer=Nw(t,"data","property")),e=this._textSanitizer(e),Cw&&Cw({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}else{const t=zw.createTextNode("");this._commitNode(t),void 0===this._textSanitizer&&(this._textSanitizer=Nw(t,"data","property")),e=this._textSanitizer(e),Cw&&Cw({kind:"commit text",node:t,value:e,options:this.options}),t.data=e}this._$committedValue=e}_commitTemplateResult(e){const{values:t,_$litType$:n}=e,s="number"==typeof n?this._$getTemplate(e):(void 0===n.el&&(n.el=lS.createElement(cS(n.h,n.h[0]),this.options)),n);if(this._$committedValue?._$template===s)Cw&&Cw({kind:"template updating",template:s,instance:this._$committedValue,parts:this._$committedValue._$parts,options:this.options,values:t}),this._$committedValue._update(t);else{const e=new dS(s,this),n=e._clone(this.options);Cw&&Cw({kind:"template instantiated",template:s,instance:e,parts:e._$parts,options:this.options,fragment:n,values:t}),e._update(t),Cw&&Cw({kind:"template instantiated and updated",template:s,instance:e,parts:e._$parts,options:this.options,fragment:n,values:t}),this._commitNode(n),this._$committedValue=e}}_$getTemplate(e){let t=iS.get(e.strings);return void 0===t&&iS.set(e.strings,t=new lS(e)),t}_commitIterable(e){Vw(this._$committedValue)||(this._$committedValue=[],this._$clear());const t=this._$committedValue;let n,s=0;for(const r of e)s===t.length?t.push(n=new hS(this._insert(Ww()),this._insert(Ww()),this,this.options)):n=t[s],n._$setValue(r),s++;s<t.length&&(this._$clear(n&&Ow(n._$endNode).nextSibling,s),t.length=s)}_$clear(e=Ow(this._$startNode).nextSibling,t){for(this._$notifyConnectionChanged?.(!1,!0,t);e&&e!==this._$endNode;){const t=Ow(e).nextSibling;Ow(e).remove(),e=t}}setConnected(e){if(void 0!==this._$parent)throw new Error("part.setConnected() may only be called on a RootPart returned from render().");this.__isConnected=e,this._$notifyConnectionChanged?.(e)}}class pS{get tagName(){return this.element.tagName}get _$isConnected(){return this._$parent._$isConnected}constructor(e,t,n,s,r){this.type=1,this._$committedValue=rS,this._$disconnectableChildren=void 0,this.element=e,this.name=t,this._$parent=s,this.options=r,n.length>2||""!==n[0]||""!==n[1]?(this._$committedValue=new Array(n.length-1).fill(new String),this.strings=n):this._$committedValue=rS,this._sanitizer=void 0}_$setValue(e,t=this,n,s){const r=this.strings;let i=!1;if(void 0===r)e=uS(this,e,t,0),i=!Hw(e)||e!==this._$committedValue&&e!==sS,i&&(this._$committedValue=e);else{const s=e;let o,a;for(e=r[0],o=0;o<r.length-1;o++)a=uS(this,s[n+o],t,o),a===sS&&(a=this._$committedValue[o]),i||(i=!Hw(a)||a!==this._$committedValue[o]),a===rS?e=rS:e!==rS&&(e+=(a??"")+r[o+1]),this._$committedValue[o]=a}i&&!s&&this._commitValue(e)}_commitValue(e){e===rS?Ow(this.element).removeAttribute(this.name):(void 0===this._sanitizer&&(this._sanitizer=aS(this.element,this.name,"attribute")),e=this._sanitizer(e??""),Cw&&Cw({kind:"commit attribute",element:this.element,name:this.name,value:e,options:this.options}),Ow(this.element).setAttribute(this.name,e??""))}}class fS extends pS{constructor(){super(...arguments),this.type=3}_commitValue(e){void 0===this._sanitizer&&(this._sanitizer=aS(this.element,this.name,"property")),e=this._sanitizer(e),Cw&&Cw({kind:"commit property",element:this.element,name:this.name,value:e,options:this.options}),this.element[this.name]=e===rS?void 0:e}}class mS extends pS{constructor(){super(...arguments),this.type=4}_commitValue(e){Cw&&Cw({kind:"commit boolean attribute",element:this.element,name:this.name,value:!(!e||e===rS),options:this.options}),Ow(this.element).toggleAttribute(this.name,!!e&&e!==rS)}}class gS extends pS{constructor(e,t,n,s,r){if(super(e,t,n,s,r),this.type=5,void 0!==this.strings)throw new Error(`A \`<${e.localName}>\` has a \`@${t}=...\` listener with invalid content. Event listeners in templates must have exactly one expression and no surrounding text.`)}_$setValue(e,t=this){if((e=uS(this,e,t,0)??rS)===sS)return;const n=this._$committedValue,s=e===rS&&n!==rS||e.capture!==n.capture||e.once!==n.once||e.passive!==n.passive,r=e!==rS&&(n===rS||s);Cw&&Cw({kind:"commit event listener",element:this.element,name:this.name,value:e,options:this.options,removeListener:s,addListener:r,oldListener:n}),s&&this.element.removeEventListener(this.name,this,n),r&&this.element.addEventListener(this.name,this,e),this._$committedValue=e}handleEvent(e){"function"==typeof this._$committedValue?this._$committedValue.call(this.options?.host??this.element,e):this._$committedValue.handleEvent(e)}}class yS{constructor(e,t,n){this.element=e,this.type=6,this._$disconnectableChildren=void 0,this._$parent=t,this.options=n}get _$isConnected(){return this._$parent._$isConnected}_$setValue(e){Cw&&Cw({kind:"commit to element binding",element:this.element,value:e,options:this.options}),uS(this,e)}}const _S=xw.litHtmlPolyfillSupportDevMode;_S?.(lS,hS),(xw.litHtmlVersions??(xw.litHtmlVersions=[])).push("3.3.0"),xw.litHtmlVersions.length>1&&queueMicrotask(()=>{Iw("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")});const vS=(e,t,n)=>{if(null==t)throw new TypeError(`The container to render into may not be ${t}`);const s=Rw++,r=n?.renderBefore??t;let i=r._$litPart$;if(Cw&&Cw({kind:"begin render",id:s,value:e,container:t,options:n,part:i}),void 0===i){const e=n?.renderBefore??null;r._$litPart$=i=new hS(t.insertBefore(Ww(),e),e,void 0,n??{})}return i._$setValue(e),Cw&&Cw({kind:"end render",id:s,value:e,container:t,options:n,part:i}),i};vS.setSanitizer=jw,vS.createSanitizer=Nw,vS._testOnlyClearSanitizerFactoryDoNotCallOrElse=Lw;
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const $S=globalThis;let bS;$S.litIssuedWarnings??($S.litIssuedWarnings=new Set),bS=(e,t)=>{t+=` See https://lit.dev/msg/${e} for more information.`,$S.litIssuedWarnings.has(t)||$S.litIssuedWarnings.has(e)||$S.litIssuedWarnings.add(t)};class wS extends Ew{constructor(){super(...arguments),this.renderOptions={host:this},this.__childPart=void 0}createRenderRoot(){var e;const t=super.createRenderRoot();return(e=this.renderOptions).renderBefore??(e.renderBefore=t.firstChild),t}update(e){const t=this.render();this.hasUpdated||(this.renderOptions.isConnected=this.isConnected),super.update(e),this.__childPart=vS(t,this.renderRoot,this.renderOptions)}connectedCallback(){super.connectedCallback(),this.__childPart?.setConnected(!0)}disconnectedCallback(){super.disconnectedCallback(),this.__childPart?.setConnected(!1)}render(){return sS}}var SS;wS._$litElement$=!0,wS[(SS="finalized",SS)]=!0,$S.litElementHydrateSupport?.({LitElement:wS});const kS=$S.litElementPolyfillSupportDevMode;kS?.({LitElement:wS}),($S.litElementVersions??($S.litElementVersions=[])).push("4.2.0"),$S.litElementVersions.length>1&&queueMicrotask(()=>{bS("multiple-versions","Multiple versions of Lit loaded. Loading multiple versions is not recommended.")})
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */;const TS=e=>(t,n)=>{void 0!==n?n.addInitializer(()=>{customElements.define(e,t)}):customElements.define(e,t)};
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */let ES;globalThis.litIssuedWarnings??(globalThis.litIssuedWarnings=new Set),ES=(e,t)=>{t+=` See https://lit.dev/msg/${e} for more information.`,globalThis.litIssuedWarnings.has(t)||globalThis.litIssuedWarnings.has(e)||globalThis.litIssuedWarnings.add(t)};const xS={attribute:!0,type:String,converter:Sw,reflect:!1,hasChanged:kw},CS=(e=xS,t,n)=>{const{kind:s,metadata:r}=n;null==r&&ES("missing-class-metadata",`The class ${t} is missing decorator metadata. This could mean that you're using a compiler that supports decorators but doesn't support decorator metadata, such as TypeScript 5.1. Please update your compiler.`);let i=globalThis.litPropertyMetadata.get(r);if(void 0===i&&globalThis.litPropertyMetadata.set(r,i=new Map),"setter"===s&&((e=Object.create(e)).wrapped=!0),i.set(n.name,e),"accessor"===s){const{name:s}=n;return{set(n){const r=t.get.call(this);t.set.call(this,n),this.requestUpdate(s,r,e)},init(t){return void 0!==t&&this._$changeProperty(s,void 0,e,t),t}}}if("setter"===s){const{name:s}=n;return function(n){const r=this[s];t.call(this,n),this.requestUpdate(s,r,e)}}throw new Error(`Unsupported decorator location: ${s}`)};function IS(e){return(t,n)=>"object"==typeof n?CS(e,t,n):((e,t,n)=>{const s=t.hasOwnProperty(n);return t.constructor.createProperty(n,e),s?Object.getOwnPropertyDescriptor(t,n):void 0})(e,t,n)}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */function RS(e){return IS({...e,state:!0,attribute:!1})}
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */globalThis.litIssuedWarnings??(globalThis.litIssuedWarnings=new Set);
/**
 * @license
 * Copyright 2017 Google LLC
 * SPDX-License-Identifier: BSD-3-Clause
 */
const OS=0,AS=1,PS=2,MS=3,DS=Symbol();class jS{get taskComplete(){return this._taskComplete||(this._status===AS?this._taskComplete=new Promise((e,t)=>{this._resolveTaskComplete=e,this._rejectTaskComplete=t}):this._status===MS?this._taskComplete=Promise.reject(this._error):this._taskComplete=Promise.resolve(this._value)),this._taskComplete}constructor(e,t,n){this._callId=0,this._status=OS,(this._host=e).addController(this);const s="object"==typeof t?t:{task:t,args:n};this._task=s.task,this._argsFn=s.args,this._argsEqual=s.argsEqual??LS,this._onComplete=s.onComplete,this._onError=s.onError,this.autoRun=s.autoRun??!0,"initialValue"in s&&(this._value=s.initialValue,this._status=PS,this._previousArgs=this._getArgs?.())}hostUpdate(){!0===this.autoRun&&this._performTask()}hostUpdated(){"afterUpdate"===this.autoRun&&this._performTask()}_getArgs(){if(void 0===this._argsFn)return;const e=this._argsFn();if(!Array.isArray(e))throw new Error("The args function must return an array");return e}async _performTask(){const e=this._getArgs(),t=this._previousArgs;this._previousArgs=e,e===t||void 0===e||void 0!==t&&this._argsEqual(t,e)||await this.run(e)}async run(e){let t,n;e??(e=this._getArgs()),this._previousArgs=e,this._status===AS?this._abortController?.abort():(this._taskComplete=void 0,this._resolveTaskComplete=void 0,this._rejectTaskComplete=void 0),this._status=AS,"afterUpdate"===this.autoRun?queueMicrotask(()=>this._host.requestUpdate()):this._host.requestUpdate();const s=++this._callId;this._abortController=new AbortController;let r=!1;try{t=await this._task(e,{signal:this._abortController.signal})}catch(i){r=!0,n=i}if(this._callId===s){if(t===DS)this._status=OS;else{if(!1===r){try{this._onComplete?.(t)}catch{}this._status=PS,this._resolveTaskComplete?.(t)}else{try{this._onError?.(n)}catch{}this._status=MS,this._rejectTaskComplete?.(n)}this._value=t,this._error=n}this._host.requestUpdate()}}abort(e){this._status===AS&&this._abortController?.abort(e)}get value(){return this._value}get error(){return this._error}get status(){return this._status}render(e){switch(this._status){case OS:return e.initial?.();case AS:return e.pending?.();case PS:return e.complete?.(this.value);case MS:return e.error?.(this.error);default:throw new Error(`Unexpected status: ${this._status}`)}}}const LS=(e,t)=>e===t||e.length===t.length&&e.every((e,n)=>!kw(e,t[n]));export{h_ as A,uy as B,xf as C,_o as D,oa as E,wt as F,aa as G,zr as H,is as I,Kr as J,fn as K,ia as L,Od as M,Go as N,wS as O,tS as P,ra as Q,tw as R,Xr as S,cw as T,IS as U,TS as V,RS as W,jS as X,gt as _,Jt as _hW,Ee as a,ft as b,no as c,pt as d,Yn as e,cn as f,S as g,_ as h,pn as i,yt as j,Jo as k,T as l,Ko as m,mt as n,os as o,$ as p,Br as q,d_ as r,wf as s,Fa as s_2JDkTrnTacI,Ma as s_3A9q00AdLIk,va as s_71lGmHBg3VI,Ga as s_7wE2ujpW00Q,Wa as s_FX0CToya0Mw,ba as s_G5JRozgukmA,Ba as s_GjYBd0GVpcg,Aa as s_IW497M0sx4Q,ga as s_K0On9JINAzI,da as s_OMVY0yegPg8,la as s_SqKRCSVAvgI,Ra as s_TAuHDP8cAnk,Ya as s_YuBd54ykSfc,La as s_b3REbKXlmZQ,ja as s_bngvFl8JcZA,Ka as s_kd7Nq0HZIt0,ya as s_lnepK54CC0s,qa as s_od2obl07f54,fa as s_pOY4MX0HEyo,ha as s_qucHDhplgik,Ca as s_tCo8NSe3Gng,Va as s_tFSUa4iZX9M,Sf as t,Ut as u,Cf as v,Ef as w,Tf as x,If as y,Rf as z};
