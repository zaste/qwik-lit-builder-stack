import{_ as e}from"./q-Ccds0Gka.js";import{c as t,q as o,_ as r,a as i,S as n,j as s,_hW as l}from"./q-DFVw1sOS.js";const a=t(o(()=>e(()=>import("./q-BRCpf_Ny.js"),[]),"s_sV00tvE05gA"));const h=new class{constructor(e={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:"info",service:"qwik-lit-builder",version:"1.0.0",environment:"development",enableConsole:!0,enableRemote:!1,...e},this.startFlushTimer()}levelToNumber(e){return{debug:0,info:1,warn:2,error:3,critical:4}[e]}shouldLog(e){return this.levelToNumber(e)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(e,t,o,r){const i={timestamp:(new Date).toISOString(),level:e,message:t,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...o}};return"undefined"!=typeof window&&(i.route=window.location.pathname,i.userAgent=navigator.userAgent),r&&(i.stack=r.stack,i.context={...i.context,errorName:r.name,errorMessage:r.message}),i}logToConsole(e){if(!this.config.enableConsole)return;"critical"===e.level||"error"===e.level||e.level,e.timestamp,e.level.toUpperCase();this.config.environment}queueForRemote(e){this.config.enableRemote&&(this.logQueue.push(e),"critical"!==e.level?this.logQueue.length>=this.maxQueueSize&&this.flushLogs():this.flushLogs())}startFlushTimer(){"undefined"!=typeof window&&(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(0===this.logQueue.length)return;const e=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&"undefined"!=typeof fetch&&await fetch(this.config.remoteEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({logs:e})})}catch(t){this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...e.slice(0,this.maxQueueSize-this.logQueue.length))}}log(e,t,o,r){if(!this.shouldLog(e))return;const i=this.createLogEntry(e,t,o,r);this.logToConsole(i),this.queueForRemote(i)}debug(e,t){this.log("debug",e,t)}info(e,t){this.log("info",e,t)}warn(e,t){this.log("warn",e,t)}error(e,t,o){this.log("error",e,t,o)}critical(e,t,o){this.log("critical",e,t,o)}apiCall(e,t,o,r,i){this.info(`API ${e} ${t}`,{...i,method:e,url:t,statusCode:o,duration:r,type:"api_call"})}userAction(e,t,o){this.info(`User action: ${e}`,{...o,userId:t,action:e,type:"user_action"})}performance(e,t,o){this.info(`Performance: ${e}`,{...o,metric:e,value:t,type:"performance"})}security(e,t,o){const r="critical"===t?"critical":"high"===t?"error":"medium"===t?"warn":"info";this.log(r,`Security event: ${e}`,{...o,event:e,severity:t,type:"security"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}({level:"debug",environment:"development",enableRemote:!1,remoteEndpoint:"/api/logs"});"undefined"!=typeof window&&window.addEventListener("beforeunload",()=>{h.destroy()});const c=()=>r(a,{onError:o(()=>e(()=>Promise.resolve().then(()=>g),void 0),"s_zrc0ycdnCH0"),get fallback(){return s("div",{class:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 m-4",children:s("div",{class:"flex items-center",children:[s("svg",{class:"w-5 h-5 text-yellow-600 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("p",{class:"text-yellow-800",children:"Unable to load data. Please try refreshing the page."})]})})},children:r(n,null,3,"OV_5"),[i]:{onError:i,fallback:i}},1,"OV_6"),u=t=>{e(async()=>{const{handleUIError:e}=await import("./q-Dbpc2m3t.js");return{handleUIError:e}},[]).then(({handleUIError:e})=>{e(t,{metadata:{context:"API_REQUEST"}})}).catch(e=>{h.error("Failed to load error handler",{error:e instanceof Error?e.message:String(e)})})},g=Object.freeze(Object.defineProperty({__proto__:null,_hW:l,s_zrc0ycdnCH0:u},Symbol.toStringTag,{value:"Module"}));export{a as E,l as _hW,h as l,c as s_ZUuhSgaIrkw,u as s_zrc0ycdnCH0};
