{
  "total": 938,
  "critical": 164,
  "warning": 166,
  "info": 608,
  "findings": {
    "mocks": [
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 1367,
        "content": "const w = { type: \"placeholder\", hidden: \"\", \"q:id\": E3.$id$ };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 19183,
        "content": "return `${traceId}-${spanId}${sampledString}`;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 19711,
        "content": "return generateSentryTraceHeader(traceId, spanId, sampled);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 19748,
        "content": "return Boolean(traceFlags & TRACE_FLAG_SAMPLED);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 21656,
        "content": "return !!options && (options.enableTracing || \"tracesSampleRate\" in options || \"tracesSampler\" in options);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/temporary/i",
        "line": 21681,
        "content": "const temporaryScope = scope.clone();"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/temporary/i",
        "line": 21686,
        "content": "scope: temporaryScope"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 22023,
        "content": "return this._sampled;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 22346,
        "content": "return !this._endTime && !!this._sampled;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 23003,
        "content": "`[Tracing] Discarding transaction because ${typeof options.tracesSampler === \"function\" ? \"tracesSampler returned 0 or false\" : \"a negative sampling decision was inherited or tracesSampleRate is set to 0\"}`"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 25857,
        "content": "return interactionsSampleRate;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 25861,
        "content": "return sampleRate * interactionsSampleRate;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 29009,
        "content": "textContent = \"SCRIPT_PLACEHOLDER\";"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/shortcut/i",
        "line": 29199,
        "content": "} else if (slimDOMOptions.headFavicon && (sn2.tagName === \"link\" && sn2.attributes.rel === \"shortcut icon\" || sn2.tagName === \"meta\" && (lowerIfExists(sn2.attributes.name).match(/^msapplication-tile(image|color)$/) || lowerIfExists(sn2.attributes.name) === \"application-name\" || lowerIfExists(sn2.attributes.rel) === \"icon\" || lowerIfExists(sn2.attributes.rel) === \"apple-touch-icon\" || lowerIfExists(sn2.attributes.rel) === \"shortcut icon\"))) {"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 31567,
        "content": "return Math.random() < sampleRate;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 31599,
        "content": "return isSampled(sessionSampleRate) ? \"session\" : allowBuffering ? \"buffer\" : false;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 31903,
        "content": "return isSampled(replay.getOptions().errorSampleRate);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 36366,
        "content": "maskAttributes = [\"title\", \"placeholder\"],"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 36660,
        "content": "if (this.config.environment === \"development\") {"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 37029,
        "content": "if (t.includes(\"placeholder\") || t.includes(\"wprgiqjcabmhhmwmurcp\") || !t) return { status: \"warn\", responseTime: Date.now() - n, message: \"Database not configured for development\", provider: \"supabase\", details: { mode: \"development\", configured: false } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 37029,
        "content": "if (t.includes(\"placeholder\") || t.includes(\"wprgiqjcabmhhmwmurcp\") || !t) return { status: \"warn\", responseTime: Date.now() - n, message: \"Database not configured for development\", provider: \"supabase\", details: { mode: \"development\", configured: false } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/basic.*implementation/i",
        "line": 37458,
        "content": "const t = ql().url.pathname, l2 = [{ path: \"/dashboard\", label: \"\\u{1F3E0} Dashboard\", description: \"System overview and real-time stats\", status: \"live\" }, { path: \"/dashboard/analytics\", label: \"\\u{1F4C8} Analytics\", description: \"Real database metrics and performance\", status: \"live\" }, { path: \"/dashboard/media\", label: \"\\u{1F4C1} Media\", description: \"Cloudflare R2 file storage\", status: \"live\" }, { path: \"/dashboard/components\", label: \"\\u{1F9E9} Components\", description: \"LIT Web Components with Spectrum tokens\", status: \"live\" }, { path: \"/dashboard/posts\", label: \"\\u{1F4DD} Posts\", description: \"Content management with Supabase\", status: \"live\" }, { path: \"/dashboard/pages\", label: \"\\u{1F4C4} Pages\", description: \"Content pages (basic implementation)\", status: \"basic\" }];"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/work.*in.*progress/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/disable.*security/i",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 37543,
        "content": "nt3 = { title: \"Qwik + LIT + Supabase Production Platform - Live Demo\", meta: [{ name: \"description\", content: \"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\" }, { property: \"og:title\", content: \"Production-Ready Qwik + LIT Platform Demo\" }, { property: \"og:description\", content: \"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\" }] };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 37543,
        "content": "nt3 = { title: \"Qwik + LIT + Supabase Production Platform - Live Demo\", meta: [{ name: \"description\", content: \"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\" }, { property: \"og:title\", content: \"Production-Ready Qwik + LIT Platform Demo\" }, { property: \"og:description\", content: \"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\" }] };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 37543,
        "content": "nt3 = { title: \"Qwik + LIT + Supabase Production Platform - Live Demo\", meta: [{ name: \"description\", content: \"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\" }, { property: \"og:title\", content: \"Production-Ready Qwik + LIT Platform Demo\" }, { property: \"og:description\", content: \"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\" }] };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 38094,
        "content": "const o = await fetch(`https://jsonplaceholder.typicode.com/posts?q=${encodeURIComponent(l2)}`);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 38590,
        "content": "const n = Rt(\"ds-button\"), t = Rt({ \"ds-button\": { variant: \"primary\", size: \"medium\", text: \"Sample Button\" }, \"ds-card\": { variant: \"default\", content: \"<p>Sample card content</p>\" }, \"ds-input\": { type: \"text\", placeholder: \"Enter text...\", label: \"Sample Input\" }, \"ds-file-upload\": { accept: \"image/*\", multiple: false } }), l2 = [{ name: \"ds-button\", title: \"DS Button\", description: \"Interactive button with variants and sizes\", props: [{ name: \"variant\", type: \"select\", options: [\"primary\", \"secondary\"], default: \"primary\" }, { name: \"size\", type: \"select\", options: [\"medium\", \"large\"], default: \"medium\" }, { name: \"disabled\", type: \"boolean\", default: false }, { name: \"text\", type: \"string\", default: \"Button Text\" }] }, { name: \"ds-card\", title: \"DS Card\", description: \"Container component with variants\", props: [{ name: \"variant\", type: \"select\", options: [\"default\", \"elevated\"], default: \"default\" }, { name: \"content\", type: \"richtext\", default: \"<p>Card content</p>\" }] }, { name: \"ds-input\", title: \"DS Input\", description: \"Form input with validation\", props: [{ name: \"type\", type: \"select\", options: [\"text\", \"email\", \"password\"], default: \"text\" }, { name: \"placeholder\", type: \"string\", default: \"Enter text...\" }, { name: \"label\", type: \"string\", default: \"Input Label\" }, { name: \"required\", type: \"boolean\", default: false }] }, { name: \"ds-file-upload\", title: \"DS File Upload\", description: \"File upload with drag & drop\", props: [{ name: \"accept\", type: \"string\", default: \"image/*\" }, { name: \"multiple\", type: \"boolean\", default: false }, { name: \"maxSize\", type: \"number\", default: 10485760 }] }], s = de(Nl2, \"s_AAO897lgALA\", [t, n]), a2 = l2.find((o) => o.name === n.value), r2 = t.value[n.value];"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 38591,
        "content": "return Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"mb-8\" }, [Ie(\"h1\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"Design System Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mt-2\" }, \"Manage and preview your LIT web components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"grid lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"lg:col-span-1\" }, [Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b\" }, Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, \"Available Components\", 3, null), 3, null), Ie(\"div\", null, { class: \"divide-y\" }, l2.map((o) => Ie(\"button\", { class: `w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value === o.name ? \"bg-blue-50 border-r-2 border-blue-500\" : \"\"}`, onClick$: lo(\"s_4kuUfUZleco\", [o, n]) }, null, [Ie(\"h3\", null, { class: \"font-medium text-gray-900\" }, qc(o, \"title\"), 1, null), Ie(\"p\", null, { class: \"text-sm text-gray-500 mt-1\" }, qc(o, \"description\"), 1, null)], 0, o.name)), 1, null)], 1, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border mt-6\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b\" }, Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, \"Builder.io Registration\", 3, null), 3, null), Ie(\"div\", null, { class: \"p-6\" }, [Ie(\"div\", null, { class: \"space-y-3\" }, l2.map((o) => Ie(\"div\", null, { class: \"flex items-center justify-between\" }, [Ie(\"span\", null, { class: \"text-sm font-medium\" }, qc(o, \"title\"), 1, null), Ie(\"span\", null, { class: \"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\" }, \"\\u2705 Registered\", 3, null)], 1, o.name)), 1, null), Ie(\"button\", null, { class: \"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\" }, \"Re-register Components\", 3, null)], 1, null)], 1, null)], 1, null), Ie(\"div\", null, { class: \"lg:col-span-2 space-y-6\" }, [Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b\" }, Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, [\"Live Preview - \", a2 == null ? void 0 : a2.title], 1, null), 1, null), Ie(\"div\", null, { class: \"p-8 bg-gray-50 min-h-32 flex items-center justify-center\" }, [n.value === \"ds-button\" && Ie(\"ds-button\", { variant: qc(r2, \"variant\"), size: qc(r2, \"size\"), disabled: qc(r2, \"disabled\") }, null, qc(r2, \"text\"), 1, \"IM_0\"), n.value === \"ds-card\" && Ie(\"ds-card\", { variant: qc(r2, \"variant\") }, null, Ie(\"div\", { dangerouslySetInnerHTML: qc(r2, \"content\") }, null, null, 3, null), 1, \"IM_1\"), n.value === \"ds-input\" && Ie(\"ds-input\", { type: qc(r2, \"type\"), placeholder: qc(r2, \"placeholder\"), label: qc(r2, \"label\"), required: qc(r2, \"required\") }, null, null, 3, \"IM_2\"), n.value === \"ds-file-upload\" && Ie(\"ds-file-upload\", { accept: qc(r2, \"accept\"), multiple: qc(r2, \"multiple\"), maxSize: qc(r2, \"maxSize\") }, null, null, 3, \"IM_3\")], 1, null)], 1, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b\" }, Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, \"Properties\", 3, null), 3, null), Ie(\"div\", null, { class: \"p-6 space-y-4\" }, a2 == null ? void 0 : a2.props.map((o) => Ie(\"div\", null, null, [Ie(\"label\", null, { class: \"block text-sm font-medium text-gray-700 mb-2\" }, qc(o, \"name\"), 1, null), o.type === \"select\" ? Ie(\"select\", { value: r2[o.name], onChange$: lo(\"s_L54Edk66cBw\", [o, s]) }, { class: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" }, \"options\" in o && o.options ? o.options.map((u) => Ie(\"option\", { value: u }, null, u, 1, u)) : null, 0, \"IM_4\") : o.type === \"boolean\" ? Ie(\"input\", { checked: r2[o.name], onChange$: lo(\"s_K8Yq6FHadsE\", [o, s]) }, { type: \"checkbox\", class: \"mr-2\" }, null, 2, \"IM_5\") : o.type === \"number\" ? Ie(\"input\", { value: r2[o.name], onInput$: lo(\"s_PDNmgpeUMH0\", [o, s]) }, { type: \"number\", class: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" }, null, 2, \"IM_6\") : Ie(\"input\", { value: r2[o.name], onInput$: lo(\"s_sqkaqSKZThg\", [o, s]) }, { type: \"text\", class: \"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\" }, null, 2, null)], 1, o.name)), 1, null)], 1, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b\" }, Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, \"Generated Code\", 3, null), 3, null), Ie(\"div\", null, { class: \"p-6\" }, Ie(\"pre\", null, { class: \"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\" }, Ie(\"code\", null, null, [`<${n.value}${Object.entries(r2).map(([o, u]) => typeof u == \"boolean\" && u ? ` ${o}` : typeof u == \"boolean\" && !u ? \"\" : ` ${o}=\"${u}\"`).join(\"\")}>`, n.value === \"ds-button\" ? r2.text : \"\", n.value === \"ds-card\" ? `"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 38651,
        "content": "return Ie(\"div\", null, { class: \"space-y-8\" }, [Ie(\"div\", null, { class: \"border-b border-gray-200 pb-4\" }, [Ie(\"h1\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"Media Library\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mt-2\" }, \"Upload and manage your files with intelligent storage routing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"grid grid-cols-1 md:grid-cols-3 gap-6\" }, [Ie(\"div\", null, { class: \"bg-white p-6 rounded-lg shadow\" }, [Ie(\"h3\", null, { class: \"text-sm font-medium text-gray-500\" }, \"Total Files\", 3, null), Ie(\"p\", null, { class: \"text-3xl font-bold text-gray-900 mt-2\" }, Vl((c) => c.value.stats.totalFiles, [n], \"p0.value.stats.totalFiles\"), 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white p-6 rounded-lg shadow\" }, [Ie(\"h3\", null, { class: \"text-sm font-medium text-gray-500\" }, \"Storage Used\", 3, null), Ie(\"p\", null, { class: \"text-3xl font-bold text-gray-900 mt-2\" }, Vl((c) => c.value.stats.storageUsed, [n], \"p0.value.stats.storageUsed\"), 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white p-6 rounded-lg shadow\" }, [Ie(\"h3\", null, { class: \"text-sm font-medium text-gray-500\" }, \"Storage Type\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-2\" }, [Ie(\"span\", null, { class: \"block\" }, \"\\u2705 R2: All files (simplified architecture)\", 3, null), Ie(\"span\", null, { class: \"block text-gray-400\" }, \"Up to 5GB per file\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow p-6\" }, [Ie(\"h2\", null, { class: \"text-xl font-semibold text-gray-900 mb-4\" }, \"Upload Files\", 3, null), me(Ql2, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf,text/*,video/*\", maxSize: 52428800, multiple: true, bucket: \"uploads\", class: \"w-full\", onUploadSuccess$: o, onUploadError$: u, onUploadComplete$: i, [P]: { endpoint: P, accept: P, maxSize: P, multiple: P, bucket: P, class: P, onUploadSuccess$: P, onUploadError$: P, onUploadComplete$: P } }, 3, \"Wk_1\"), t.value && Ie(\"div\", null, { class: \"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\" }, Ie(\"p\", null, { class: \"text-blue-800 text-sm\" }, Vl((c) => c.value, [t], \"p0.value\"), 3, null), 3, \"Wk_2\"), Ie(\"div\", null, { class: \"mt-4 text-sm text-gray-600\" }, [Ie(\"p\", null, { class: \"mb-2\" }, [Ie(\"strong\", null, null, \"Simplified Storage:\", 3, null), \" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"], 3, null), Ie(\"p\", null, null, [Ie(\"strong\", null, null, \"Supported formats:\", 3, null), \" Images, PDFs, text files, videos up to 50MB\"], 3, null)], 3, null)], 1, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b border-gray-200\" }, Ie(\"h2\", null, { class: \"text-xl font-semibold text-gray-900\" }, \"Your Files\", 3, null), 3, null), Ie(\"div\", null, { class: \"p-6\" }, a2.value ? Ie(\"div\", null, { class: \"text-center py-12\" }, [Ie(\"div\", null, { class: \"text-gray-400 text-6xl mb-4\" }, \"\\u{1F504}\", 3, null), Ie(\"h3\", null, { class: \"text-lg font-medium text-gray-900 mb-2\" }, \"Loading files...\", 3, null)], 3, \"Wk_3\") : (s.value.length > 0 ? s.value : n.value.files).length === 0 ? Ie(\"div\", null, { class: \"text-center py-12\" }, [Ie(\"div\", null, { class: \"text-gray-400 text-6xl mb-4\" }, \"\\u{1F4C1}\", 3, null), Ie(\"h3\", null, { class: \"text-lg font-medium text-gray-900 mb-2\" }, \"No files yet\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Upload your first file using the upload area above\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-500\" }, \"Files will be stored securely and optimized for global delivery\", 3, null)], 3, \"Wk_4\") : Ie(\"div\", null, { class: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\" }, (s.value.length > 0 ? s.value : n.value.files).map((c) => Ie(\"div\", null, { class: \"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-3\" }, [Ie(\"div\", null, { class: \"text-sm font-medium text-gray-900 truncate\" }, qc(c, \"name\"), 1, null), Ie(\"span\", null, { class: \"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\" }, \"R2\", 3, null)], 1, null), Ie(\"div\", null, { class: \"text-sm text-gray-600 space-y-1\" }, [Ie(\"div\", null, null, [\"Size: \", (c.size / 1024 / 1024).toFixed(2), \" MB\"], 1, null), Ie(\"div\", null, null, [\"Type: \", qc(c, \"type\")], 1, null), Ie(\"div\", null, null, [\"Uploaded: \", new Date(c.uploadedAt).toLocaleDateString()], 1, null)], 1, null), Ie(\"div\", null, { class: \"mt-4 flex space-x-2\" }, [Ie(\"button\", null, { class: \"text-blue-600 hover:text-blue-800 text-sm font-medium\" }, \"Download\", 3, null), Ie(\"button\", null, { class: \"text-red-600 hover:text-red-800 text-sm font-medium\" }, \"Delete\", 3, null)], 3, null)], 1, c.id)), 1, null), 1, null)], 1, null)], 1, \"Wk_5\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 38704,
        "content": "return fc(de(us2, \"s_q3arvP17QJ0\", [i])), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"flex justify-between items-center mb-8\" }, [Ie(\"div\", null, null, [Ie(\"h1\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"Pages\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mt-2\" }, \"Manage your visual pages and landing pages\", 3, null)], 3, null), Ie(\"button\", null, { class: \"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\", disabled: Vl((d2) => d2.value, [l2], \"p0.value\"), onClick$: lo(\"s_XklD0zp44XY\", [s, a2]) }, Vl((d2) => d2.value ? \"Cancel\" : \"Create Page\", [a2], 'p0.value?\"Cancel\":\"Create Page\"'), 3, null)], 3, null), s.value && Ie(\"div\", null, { class: \"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\" }, Ie(\"div\", null, { class: \"flex\" }, [Ie(\"div\", null, { class: \"flex-shrink-0\" }, Ie(\"svg\", null, { class: \"h-5 w-5 text-red-400\", viewBox: \"0 0 20 20\", fill: \"currentColor\" }, Ie(\"path\", null, { \"fill-rule\": \"evenodd\", d: \"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\", \"clip-rule\": \"evenodd\" }, null, 3, null), 3, null), 3, null), Ie(\"div\", null, { class: \"ml-3\" }, Ie(\"p\", null, { class: \"text-sm text-red-800\" }, Vl((d2) => d2.value, [s], \"p0.value\"), 3, null), 3, null)], 3, null), 3, \"h8_0\"), a2.value && Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border p-6 mb-8\" }, [Ie(\"h2\", null, { class: \"text-xl font-semibold mb-4\" }, \"Create New Page\", 3, null), Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"div\", null, null, [Ie(\"label\", null, { class: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Page Title *\", 3, null), Ie(\"input\", null, { type: \"text\", class: \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\", placeholder: \"Enter page title\", value: Vl((d2) => d2.value, [r2], \"p0.value\"), disabled: Vl((d2) => d2.value, [l2], \"p0.value\"), onInput$: lo(\"s_iUIdYKxt004\", [r2, m2]) }, null, 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"label\", null, { class: \"block text-sm font-medium text-gray-700 mb-2\" }, [\"Page URL Slug\", Ie(\"span\", null, { class: \"text-gray-500 text-xs\" }, \"(auto-generated from title)\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex\" }, [Ie(\"span\", null, { class: \"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\" }, \"/\", 3, null), Ie(\"input\", null, { type: \"text\", class: \"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\", placeholder: \"your-page-url\", value: Vl((d2) => d2.value, [o], \"p0.value\"), disabled: Vl((d2) => d2.value, [l2], \"p0.value\"), onInput$: lo(\"s_P0uR1QIAYP0\", [o]) }, null, 3, null)], 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"label\", null, { class: \"block text-sm font-medium text-gray-700 mb-2\" }, \"Description (Optional)\", 3, null), Ie(\"textarea\", null, { class: \"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\", placeholder: \"Brief description of the page\", rows: 3, value: Vl((d2) => d2.value, [u], \"p0.value\"), disabled: Vl((d2) => d2.value, [l2], \"p0.value\"), onInput$: lo(\"s_0CoyY4fcrIQ\", [u]) }, null, 3, null)], 3, null), Ie(\"div\", null, { class: \"flex gap-2\" }, [Ie(\"button\", null, { class: \"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\", disabled: Vl((d2, b) => d2.value || !b.value.trim(), [l2, r2], \"p0.value||!p1.value.trim()\"), onClick$: c }, [l2.value && Ie(\"svg\", null, { class: \"animate-spin -ml-1 mr-2 h-4 w-4 text-white\", fill: \"none\", viewBox: \"0 0 24 24\" }, [Ie(\"circle\", null, { class: \"opacity-25\", cx: \"12\", cy: \"12\", r: \"10\", stroke: \"currentColor\", \"stroke-width\": \"4\" }, null, 3, null), Ie(\"path\", null, { class: \"opacity-75\", fill: \"currentColor\", d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" }, null, 3, null)], 3, \"h8_1\"), Vl((d2) => d2.value ? \"Creating...\" : \"Create Page\", [l2], 'p0.value?\"Creating...\":\"Create Page\"')], 1, null), Ie(\"button\", null, { class: \"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\", disabled: Vl((d2) => d2.value, [l2], \"p0.value\"), onClick$: lo(\"s_NId9t3ngBME\", [s, u, o, r2, a2]) }, \"Cancel\", 3, null)], 1, null)], 1, null)], 1, \"h8_2\"), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b flex items-center justify-between\" }, [Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, \"Your Pages\", 3, null), !t.value && n.value.length > 0 && Ie(\"span\", null, { class: \"text-sm text-gray-500\" }, [Vl((d2) => d2.value.length, [n], \"p0.value.length\"), \" page\", Vl((d2) => d2.value.length === 1 ? \"\" : \"s\", [n], 'p0.value.length===1?\"\":\"s\"')], 3, \"h8_3\")], 1, null), Ie(\"div\", null, { class: \"divide-y\" }, t.value ? Ie(\"div\", null, { class: \"px-6 py-8 text-center text-gray-500\" }, Ie(\"div\", null, { class: \"flex items-center justify-center\" }, [Ie(\"svg\", null, { class: \"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\", fill: \"none\", viewBox: \"0 0 24 24\" }, [Ie(\"circle\", null, { class: \"opacity-25\", cx: \"12\", cy: \"12\", r: \"10\", stroke: \"currentColor\", \"stroke-width\": \"4\" }, null, 3, null), Ie(\"path\", null, { class: \"opacity-75\", fill: \"currentColor\", d: \"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\" }, null, 3, null)], 3, null), \"Loading pages...\"], 3, null), 3, \"h8_4\") : n.value.length === 0 ? Ie(\"div\", null, { class: \"px-6 py-12 text-center text-gray-500\" }, [Ie(\"svg\", null, { class: \"mx-auto h-12 w-12 text-gray-400\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, Ie(\"path\", null, { \"stroke-linecap\": \"round\", \"stroke-linejoin\": \"round\", \"stroke-width\": \"2\", d: \"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\" }, null, 3, null), 3, null), Ie(\"h3\", null, { class: \"mt-2 text-sm font-medium text-gray-900\" }, \"No pages\", 3, null), Ie(\"p\", null, { class: \"mt-1 text-sm text-gray-500\" }, \"Get started by creating your first page.\", 3, null), Ie(\"div\", null, { class: \"mt-6\" }, Ie(\"button\", null, { class: \"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\", onClick$: lo(\"s_7wN6ZaymF0U\", [s, a2]) }, [Ie(\"svg\", null, { class: \"-ml-1 mr-2 h-5 w-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, Ie(\"path\", null, { \"stroke-linecap\": \"round\", \"stroke-linejoin\": \"round\", \"stroke-width\": \"2\", d: \"M12 6v6m0 0v6m0-6h6m-6 0H6\" }, null, 3, null), 3, null), \"Create Page\"], 3, null), 3, null)], 3, \"h8_5\") : n.value.map((d2) => Ie(\"div\", null, { class: \"px-6 py-4 hover:bg-gray-50 transition-colors\" }, Ie(\"div\", null, { class: \"flex items-center justify-between\" }, [Ie(\"div\", null, { class: \"min-w-0 flex-1\" }, [Ie(\"div\", null, { class: \"flex items-center\" }, [Ie(\"h3\", null, { class: \"font-medium text-gray-900 truncate\" }, qc(d2, \"title\"), 1, null), Ie(\"span\", { class: `ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d2.published ? \"bg-green-100 text-green-800\" : \"bg-gray-100 text-gray-800\"}` }, null, d2.published ? \"Published\" : \"Draft\", 1, null)], 1, null), Ie(\"div\", null, { class: \"mt-1 flex items-center text-sm text-gray-500\" }, [Ie(\"span\", null, null, [\"/\", qc(d2, \"slug\")], 1, null), d2.description && me(ct, { children: [Ie(\"span\", null, { class: \"mx-2\" }, \"\\u2022\", 3, null), Ie(\"span\", null, { class: \"truncate\" }, qc(d2, \"description\"), 1, null)] }, 1, \"h8_6\")], 1, null), Ie(\"div\", null, { class: \"mt-2 flex items-center text-xs text-gray-400\" }, [Ie(\"span\", null, null, [\"Created \", new Date(d2.created_at).toLocaleDateString()], 1, null), Ie(\"span\", null, { class: \"mx-2\" }, \"\\u2022\", 3, null), Ie(\"span\", null, null, [qc(d2, \"view_count\"), \" view\", d2.view_count === 1 ? \"\" : \"s\"], 1, null), Ie(\"span\", null, { class: \"mx-2\" }, \"\\u2022\", 3, null), Ie(\"span\", null, { class: \"capitalize\" }, [qc(d2, \"template\"), \" template\"], 1, null)], 1, null)], 1, null), Ie(\"div\", null, { class: \"ml-4 flex items-center space-x-2\" }, [Ie(\"a\", { href: `/${d2.slug}` }, { class: \"text-blue-600 hover:text-blue-800 text-sm font-medium\", target: \"_blank\", rel: \"noopener noreferrer\" }, \"View \\u2192\", 3, null), Ie(\"button\", null, { class: \"text-gray-400 hover:text-gray-600\" }, Ie(\"svg\", null, { class: \"h-5 w-5\", fill: \"none\", viewBox: \"0 0 24 24\", stroke: \"currentColor\" }, Ie(\"path\", null, { \"stroke-linecap\": \"round\", \"stroke-linejoin\": \"round\", \"stroke-width\": \"2\", d: \"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\" }, null, 3, null), 3, null), 3, null)], 1, null)], 1, null), 1, d2.id)), 1, null)], 1, null)], 1, \"h8_7\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 38861,
        "content": "return Ie(\"ds-input\", { type: t.type || \"text\", label: t.label || \"Input\", placeholder: t.placeholder || \"\", required: t.required || false, disabled: t.disabled || false }, null, null, 3, null);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 38870,
        "content": "return Ie(\"div\", null, { class: \"my-6\" }, [Ie(\"img\", { src: t.src || \"/placeholder.jpg\", alt: t.alt || \"\", class: `max-w-full h-auto ${t.className || \"\"}`, width: t.width || \"800\", height: t.height || \"600\" }, { loading: \"lazy\" }, null, 3, null), t.caption && Ie(\"p\", null, { class: \"text-sm text-gray-500 mt-2 text-center\" }, qc(t, \"caption\"), 1, \"FM_10\")], 1, null);"
      },
      {
        "file": "/CLOUDFLARE_DEPLOYMENT_GUIDE.md",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 263,
        "content": "- ✅ Environment variables are set (not hardcoded)"
      },
      {
        "file": "/CONTINUACION_PENDIENTE.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 38,
        "content": "ACCIÓN: Reemplazar mock data → Supabase real queries"
      },
      {
        "file": "/CONTINUACION_PENDIENTE.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 38,
        "content": "ACCIÓN: Reemplazar mock data → Supabase real queries"
      },
      {
        "file": "/CREATE_TABLES_STEP_BY_STEP.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 189,
        "content": "'{\"properties\": {\"type\": {\"type\": \"string\", \"enum\": [\"text\", \"email\", \"password\", \"number\"], \"default\": \"text\"}, \"label\": {\"type\": \"string\", \"default\": \"Label\"}, \"placeholder\": {\"type\": \"string\", \"default\": \"\"}, \"required\": {\"type\": \"boolean\", \"default\": false}, \"disabled\": {\"type\": \"boolean\", \"default\": false}}}',"
      },
      {
        "file": "/CREATE_TABLES_STEP_BY_STEP.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 190,
        "content": "'{\"type\": \"text\", \"label\": \"Label\", \"placeholder\": \"\", \"required\": false, \"disabled\": false}'"
      },
      {
        "file": "/DEV_SERVER_ISSUE_JULIO_2_2025.md",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 99,
        "content": "## 💡 **WORKAROUND INMEDIATO**"
      },
      {
        "file": "/ERRORES_TYPESCRIPT_REGISTRO.md",
        "type": "pattern",
        "evidence": "/todo.*real/i",
        "line": 72,
        "content": "- Método: Type guards basados en contratos reales de API"
      },
      {
        "file": "/ERRORES_TYPESCRIPT_REGISTRO.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 87,
        "content": "- Método: Mock implementations manteniendo contratos de interfaz"
      },
      {
        "file": "/ERRORES_TYPESCRIPT_REGISTRO.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 87,
        "content": "- Método: Mock implementations manteniendo contratos de interfaz"
      },
      {
        "file": "/ESLINT_CLEANUP_EXECUTION_PLAN.md",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 63,
        "content": "- Enhance if needed for development vs production logging"
      },
      {
        "file": "/ESTADO_EJECUCION_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 5,
        "content": "- **Código libre de mocks:** 4/4 archivos limpios ✅"
      },
      {
        "file": "/ESTADO_EJECUCION_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 5,
        "content": "- **Código libre de mocks:** 4/4 archivos limpios ✅"
      },
      {
        "file": "/ESTADO_EJECUCION_FINAL.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 27,
        "content": "- [ ] **3.3** Validar `/api/content/search` - sin JSONPlaceholder"
      },
      {
        "file": "/FASE_2_COMPLETA_TODOS_COMPONENTES.md",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 222,
        "content": "step2: 'Replace hardcoded values with Spectrum tokens',"
      },
      {
        "file": "/FASE_2_DIA_2_EJECUCION_EXITOSA.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 41,
        "content": "--ds-color-text-secondary: var(--gray-600, #464646);               /* Placeholder/helper */"
      },
      {
        "file": "/FASE_2_DIA_2_PREPARACION_MAXIMA.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 48,
        "content": "--ds-color-text-secondary: var(--gray-600, #464646);       /* Placeholder/helper */"
      },
      {
        "file": "/FASE_2_PREPARACION_MAXIMA.md",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 112,
        "content": "- Reemplazar colores hardcoded con var(--blue-500)"
      },
      {
        "file": "/FASE_2_PREPARACION_MAXIMA.md",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 117,
        "content": "- Reemplazar padding hardcoded con var(--size-150)"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 3,
        "content": "## ✅ ESTADO ACTUAL: 100% FUNCIONAL - ZERO MOCKS"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 3,
        "content": "## ✅ ESTADO ACTUAL: 100% FUNCIONAL - ZERO MOCKS"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 45,
        "content": "- **Real Database**: Sin mocks, todo persistente"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 45,
        "content": "- **Real Database**: Sin mocks, todo persistente"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 91,
        "content": "### **1. ZERO MOCKS POLICY ✅**"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 91,
        "content": "### **1. ZERO MOCKS POLICY ✅**"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 180,
        "content": "2. **Zero Mocks**: Everything is connected to real services"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 180,
        "content": "2. **Zero Mocks**: Everything is connected to real services"
      },
      {
        "file": "/FUNCIONALIDADES_IMPLEMENTADAS.md",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 195,
        "content": "- **Zero Simulations**: Todas las funcionalidades son reales"
      },
      {
        "file": "/IMPLEMENTATION_ACTION_PLAN.md",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 29,
        "content": "# Workaround: Playwright E2E tests fully functional"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 6,
        "content": "Los endpoints `/api/content/posts` y otros APIs están fallando con error 500 debido a que el **mockClient de Supabase no implementa el método `.from()`**."
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 6,
        "content": "Los endpoints `/api/content/posts` y otros APIs están fallando con error 500 debido a que el **mockClient de Supabase no implementa el método `.from()`**."
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 12,
        "content": "const mockClient = {"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 12,
        "content": "const mockClient = {"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 24,
        "content": ".from('posts')  // ❌ ERROR: mockClient.from is not a function"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 24,
        "content": ".from('posts')  // ❌ ERROR: mockClient.from is not a function"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 29,
        "content": "El mockClient necesita implementar el método `.from()` que retorne métodos de query mockeados:"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 29,
        "content": "El mockClient necesita implementar el método `.from()` que retorne métodos de query mockeados:"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 32,
        "content": "const mockClient = {"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 32,
        "content": "const mockClient = {"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 39,
        "content": "error: new Error('Supabase not configured - mock data'),"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 39,
        "content": "error: new Error('Supabase not configured - mock data'),"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 48,
        "content": "error: new Error('Supabase not configured - mock data')"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 48,
        "content": "error: new Error('Supabase not configured - mock data')"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 102,
        "content": "3. **Root cause**: Same mockClient issue - no `.from()` method"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 102,
        "content": "3. **Root cause**: Same mockClient issue - no `.from()` method"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 109,
        "content": "→ mockClient (sin .from())"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 109,
        "content": "→ mockClient (sin .from())"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 114,
        "content": "Misma fix que Problema #1 - implementar mockClient.from() completo."
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 114,
        "content": "Misma fix que Problema #1 - implementar mockClient.from() completo."
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 151,
        "content": "| **API 500 Errors** | mockClient.from() no implementado | 🔴 Alto | 15 mins |"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 151,
        "content": "| **API 500 Errors** | mockClient.from() no implementado | 🔴 Alto | 15 mins |"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 158,
        "content": "### 🚀 **Prioridad 1** (15 mins) - Fix mockClient"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 158,
        "content": "### 🚀 **Prioridad 1** (15 mins) - Fix mockClient"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 177,
        "content": "### ✅ **Después de Fix mockClient**:"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 177,
        "content": "### ✅ **Después de Fix mockClient**:"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 178,
        "content": "- `/api/content/posts` → 200 OK con mock data"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 178,
        "content": "- `/api/content/posts` → 200 OK con mock data"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 179,
        "content": "- `/api/analytics/dashboard` → 200 OK con mock data"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 179,
        "content": "- `/api/analytics/dashboard` → 200 OK con mock data"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 180,
        "content": "- Analytics dashboard mostrará datos mock"
      },
      {
        "file": "/INVESTIGACION_PROBLEMAS_DETALLADA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 180,
        "content": "- Analytics dashboard mostrará datos mock"
      },
      {
        "file": "/PROBLEMAS_ENCONTRADOS_COMPILACION.md",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 177,
        "content": "### 13. **OAuth Redirect - Port Hardcoded**"
      },
      {
        "file": "/PROBLEMAS_NO_RESUELTOS.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 61,
        "content": "### 3. **Supabase Placeholder Configuration**"
      },
      {
        "file": "/PROBLEMAS_NO_RESUELTOS.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 74,
        "content": "- ❌ Dashboard data es mock/vacío"
      },
      {
        "file": "/PROBLEMAS_NO_RESUELTOS.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 74,
        "content": "- ❌ Dashboard data es mock/vacío"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_REPORTE_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 34,
        "content": "- NO era un problema de mockClient (esa fue una investigación incorrecta inicial)"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_REPORTE_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 34,
        "content": "- NO era un problema de mockClient (esa fue una investigación incorrecta inicial)"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_REPORTE_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 140,
        "content": "| Database Queries | Mock/Error | Real data | ✅ Functional |"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_REPORTE_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 140,
        "content": "| Database Queries | Mock/Error | Real data | ✅ Functional |"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_REPORTE_FINAL.md",
        "type": "pattern",
        "evidence": "/todo.*real/i",
        "line": 209,
        "content": "### ✅ **TODOS LOS PROBLEMAS REALES RESUELTOS**"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_REPORTE_FINAL.md",
        "type": "pattern",
        "evidence": "/todo.*real/i",
        "line": 211,
        "content": "1. **✅ NO SE USARON SIMULACIONES**: Todo conectado a servicios reales"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_SESION.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 63,
        "content": "- Configurar placeholders específicos para dev"
      },
      {
        "file": "/PROBLEMAS_RESUELTOS_SESION.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 160,
        "content": "4. **Sentry**: Crear proyectos reales, no usar placeholders"
      },
      {
        "file": "/SESION_JULIO_2_2025_OAUTH_TROUBLESHOOTING.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 81,
        "content": "# Reemplazar mock data → Supabase queries reales"
      },
      {
        "file": "/SESION_JULIO_2_2025_OAUTH_TROUBLESHOOTING.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 81,
        "content": "# Reemplazar mock data → Supabase queries reales"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 6,
        "content": "- [x] **Análisis completo del sistema** - Identificadas todas las dependencias y mocks"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 6,
        "content": "- [x] **Análisis completo del sistema** - Identificadas todas las dependencias y mocks"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 11,
        "content": "### 🔧 ELIMINACIÓN DE MOCKS Y SIMULACIONES"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 11,
        "content": "### 🔧 ELIMINACIÓN DE MOCKS Y SIMULACIONES"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 12,
        "content": "- [x] **API de búsqueda** → Eliminado JSONPlaceholder, ahora usa Supabase real"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 13,
        "content": "- [x] **Autenticación** → Eliminados fallbacks mock, solo Supabase real"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 13,
        "content": "- [x] **Autenticación** → Eliminados fallbacks mock, solo Supabase real"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 14,
        "content": "- [x] **Analytics dashboard** → Eliminados datos mock, consultas reales a BD"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 14,
        "content": "- [x] **Analytics dashboard** → Eliminados datos mock, consultas reales a BD"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 15,
        "content": "- [x] **Clientes Supabase** → Eliminadas referencias undefined/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 15,
        "content": "- [x] **Clientes Supabase** → Eliminadas referencias undefined/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 16,
        "content": "- [x] **Archivos mock** → Eliminado completamente `lib/cms/mock-data.ts`"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 16,
        "content": "- [x] **Archivos mock** → Eliminado completamente `lib/cms/mock-data.ts`"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 69,
        "content": "| Componente | Estado | Mocks Eliminados | Real Implementado |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 69,
        "content": "| Componente | Estado | Mocks Eliminados | Real Implementado |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 71,
        "content": "| **API Search** | ✅ | JSONPlaceholder | Supabase queries |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 72,
        "content": "| **Authentication** | ✅ | Mock fallbacks | Supabase auth |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 72,
        "content": "| **Authentication** | ✅ | Mock fallbacks | Supabase auth |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 73,
        "content": "| **Analytics** | ✅ | Datos fake | DB real queries |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 73,
        "content": "| **Analytics** | ✅ | Datos fake | DB real queries |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 74,
        "content": "| **File Upload** | ✅ | Placeholders | Cloudflare R2 |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 75,
        "content": "| **CMS Pages** | ✅ | Datos mock | Supabase CRUD |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 75,
        "content": "| **CMS Pages** | ✅ | Datos mock | Supabase CRUD |"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 80,
        "content": "### ✅ **CÓDIGO 100% LIBRE DE MOCKS Y SIMULACIONES:**"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 80,
        "content": "### ✅ **CÓDIGO 100% LIBRE DE MOCKS Y SIMULACIONES:**"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 81,
        "content": "- ✅ API de búsqueda → Eliminado JSONPlaceholder completamente"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 82,
        "content": "- ✅ Analytics dashboard → Eliminados todos los datos fake/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 82,
        "content": "- ✅ Analytics dashboard → Eliminados todos los datos fake/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 82,
        "content": "- ✅ Analytics dashboard → Eliminados todos los datos fake/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 82,
        "content": "- ✅ Analytics dashboard → Eliminados todos los datos fake/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 83,
        "content": "- ✅ Autenticación → Eliminados todos los fallbacks mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 83,
        "content": "- ✅ Autenticación → Eliminados todos los fallbacks mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 84,
        "content": "- ✅ Cliente Supabase → Eliminadas referencias undefined/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 84,
        "content": "- ✅ Cliente Supabase → Eliminadas referencias undefined/mock"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 85,
        "content": "- ✅ Archivos mock → Eliminado `lib/cms/mock-data.ts` completamente"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 85,
        "content": "- ✅ Archivos mock → Eliminado `lib/cms/mock-data.ts` completamente"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 99,
        "content": "3. ✅ **SISTEMA 100% FUNCIONAL SIN MOCKS**"
      },
      {
        "file": "/SISTEMA_100_REAL_ESTADO_FINAL.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 99,
        "content": "3. ✅ **SISTEMA 100% FUNCIONAL SIN MOCKS**"
      },
      {
        "file": "/SUPABASE_CONFIGURATION_STATUS.md",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 58,
        "content": "### **Workaround Strategy:**"
      },
      {
        "file": "/SUPABASE_SETUP_INSTRUCTIONS.md",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 122,
        "content": "- Las claves actuales en `.env` son ejemplos/fake"
      },
      {
        "file": "/SUPABASE_SETUP_INSTRUCTIONS.md",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 122,
        "content": "- Las claves actuales en `.env` son ejemplos/fake"
      },
      {
        "file": "/VALIDACION_COMPLETA_SISTEMA.md",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 226,
        "content": "✅ Workaround: Build Vite funciona correctamente"
      },
      {
        "file": "/VALIDACION_COMPLETA_SISTEMA.md",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 234,
        "content": "✅ Workaround: No afecta funcionalidad"
      },
      {
        "file": "/VALIDACION_COMPLETA_SISTEMA.md",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 274,
        "content": "- ✅ Workarounds implementados"
      },
      {
        "file": "/database/migrations/002_complete_system_schema.sql",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 618,
        "content": "'{\"properties\": {\"type\": {\"type\": \"string\", \"enum\": [\"text\", \"email\", \"password\", \"number\"], \"default\": \"text\"}, \"label\": {\"type\": \"string\", \"default\": \"Label\"}, \"placeholder\": {\"type\": \"string\", \"default\": \"\"}, \"required\": {\"type\": \"boolean\", \"default\": false}, \"disabled\": {\"type\": \"boolean\", \"default\": false}}}',"
      },
      {
        "file": "/database/migrations/002_complete_system_schema.sql",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 619,
        "content": "'{\"type\": \"text\", \"label\": \"Label\", \"placeholder\": \"\", \"required\": false, \"disabled\": false}'"
      },
      {
        "file": "/database/migrations/002_complete_system_schema.sql",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 755,
        "content": "RAISE NOTICE '🚀 System is now 100% functional with ZERO mocks required!';"
      },
      {
        "file": "/database/migrations/002_complete_system_schema.sql",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 755,
        "content": "RAISE NOTICE '🚀 System is now 100% functional with ZERO mocks required!';"
      },
      {
        "file": "/database/migrations/002_create_pages_system.sql",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 274,
        "content": "'{\"properties\": {\"type\": {\"type\": \"string\", \"enum\": [\"text\", \"email\", \"password\", \"number\"], \"default\": \"text\"}, \"label\": {\"type\": \"string\", \"default\": \"Label\"}, \"placeholder\": {\"type\": \"string\", \"default\": \"\"}, \"required\": {\"type\": \"boolean\", \"default\": false}, \"disabled\": {\"type\": \"boolean\", \"default\": false}}}',"
      },
      {
        "file": "/database/migrations/002_create_pages_system.sql",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 275,
        "content": "'{\"type\": \"text\", \"label\": \"Label\", \"placeholder\": \"\", \"required\": false, \"disabled\": false}'"
      },
      {
        "file": "/deploy/q-manifest.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 682,
        "content": "\"displayName\": \"index.qwik.mjs_QwikCityMockProvider_component\","
      },
      {
        "file": "/deploy/q-manifest.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 683,
        "content": "\"canonicalFilename\": \"index.qwik.mjs_QwikCityMockProvider_component_K0On9JINAzI\","
      },
      {
        "file": "/deploy/q-manifest.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 1172,
        "content": "\"displayName\": \"index.qwik.mjs_QwikCityMockProvider_component_goto\","
      },
      {
        "file": "/deploy/q-manifest.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 1173,
        "content": "\"canonicalFilename\": \"index.qwik.mjs_QwikCityMockProvider_component_goto_GjYBd0GVpcg\","
      },
      {
        "file": "/deploy/q-manifest.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 2415,
        "content": "\"node_modules/@builder.io/qwik-city/lib/index.qwik.mjs_QwikCityMockProvider_component_K0On9JINAzI.js\","
      },
      {
        "file": "/deploy/q-manifest.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 2416,
        "content": "\"node_modules/@builder.io/qwik-city/lib/index.qwik.mjs_QwikCityMockProvider_component_goto_GjYBd0GVpcg.js\","
      },
      {
        "file": "/docs/KNOWLEDGE_DISTILLATION_JULIO_2025.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 198,
        "content": "setup: 'Custom DOM environment, shadow DOM mocking',"
      },
      {
        "file": "/docs/KNOWLEDGE_DISTILLATION_JULIO_2025.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 198,
        "content": "setup: 'Custom DOM environment, shadow DOM mocking',"
      },
      {
        "file": "/docs/KNOWLEDGE_DISTILLATION_JULIO_2025.md",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 292,
        "content": "file_permissions: 'Different from local development',"
      },
      {
        "file": "/docs/SESION_JULIO_1_2025_COMPLETA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 239,
        "content": "- [ ] **CMS Integration**: Reemplazar mock data"
      },
      {
        "file": "/docs/SESION_JULIO_1_2025_COMPLETA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 239,
        "content": "- [ ] **CMS Integration**: Reemplazar mock data"
      },
      {
        "file": "/docs/SESION_JULIO_1_2025_COMPLETA.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 275,
        "content": "# Reemplazar mock data → Supabase queries reales"
      },
      {
        "file": "/docs/SESION_JULIO_1_2025_COMPLETA.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 275,
        "content": "# Reemplazar mock data → Supabase queries reales"
      },
      {
        "file": "/docs/SPECTRUM_INTEGRATION_PLAN.md",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 544,
        "content": "if (process.env.NODE_ENV === 'development') {"
      },
      {
        "file": "/docs/SPECTRUM_INTEGRATION_PLAN.md",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 544,
        "content": "if (process.env.NODE_ENV === 'development') {"
      },
      {
        "file": "/docs/TESTING_STRATEGY.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 12,
        "content": "- **Real over Mocks**: Test against real services whenever possible"
      },
      {
        "file": "/docs/TESTING_STRATEGY.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 12,
        "content": "- **Real over Mocks**: Test against real services whenever possible"
      },
      {
        "file": "/docs/TESTING_STRATEGY.md",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 12,
        "content": "- **Real over Mocks**: Test against real services whenever possible"
      },
      {
        "file": "/docs/TESTING_STRATEGY.md",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 435,
        "content": "export class TestDatabase {"
      },
      {
        "file": "/docs/testing/hybrid-strategy.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 46,
        "content": "import { createMockUser } from '~/test/fixtures';"
      },
      {
        "file": "/docs/testing/hybrid-strategy.md",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 46,
        "content": "import { createMockUser } from '~/test/fixtures';"
      },
      {
        "file": "/docs/testing/hybrid-strategy.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 48,
        "content": "const user = createMockUser({ email: 'custom@example.com' });"
      },
      {
        "file": "/lighthouserc.js",
        "type": "pattern",
        "evidence": "/temporary/i",
        "line": 58,
        "content": "target: 'temporary-public-storage',"
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 1733,
        "content": "\"integrity\": \"sha512-QNXPTWteDclR2B4pDFpz0TNghgB33UMjUt14B+BZPmtH1MwUFAfLHBaP5If0Z5NZC+jaH8oF2glgYjrmhZWmSw==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 2021,
        "content": "\"integrity\": \"sha512-UMqleEoabYMsWoTkqyt9WAzXwZ4BlFZHO40wr3d5ZvtjKCHlD4YXLm+6OLCeIi/HkX7EXvQaz8gtAwkwwSEvcQ==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 4392,
        "content": "\"node_modules/@vitest/mocker\": {"
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 4392,
        "content": "\"node_modules/@vitest/mocker\": {"
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/test.*mock/i",
        "line": 4392,
        "content": "\"node_modules/@vitest/mocker\": {"
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 4394,
        "content": "\"resolved\": \"https://registry.npmjs.org/@vitest/mocker/-/mocker-3.2.4.tgz\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 4394,
        "content": "\"resolved\": \"https://registry.npmjs.org/@vitest/mocker/-/mocker-3.2.4.tgz\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/test.*mock/i",
        "line": 4394,
        "content": "\"resolved\": \"https://registry.npmjs.org/@vitest/mocker/-/mocker-3.2.4.tgz\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 4407,
        "content": "\"msw\": \"^2.4.9\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 4411,
        "content": "\"msw\": {"
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 6241,
        "content": "\"integrity\": \"sha512-shrVawQFojnZv6xM40anx4CkoDP+fZsw/ZerEMsW/pyzsRbElpsL/DBVW7q3ExxwusdNXI3lXpuhEZkzs8p5Eg==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 7094,
        "content": "\"integrity\": \"sha512-X7BJ2yElsnOJ30pZF4uIIDfBEVgF4XEBxL9Bxhy6dnrm5hkzqmsWHGTiHqRiITNhMyFLyAiWndIJP7Z1NTteDg==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 11191,
        "content": "\"integrity\": \"sha512-YUSOLq9VeRNAo/CTaVmhGDKG+LBtA8KF1X4K5+ykMSwWST1vDxJRB2kv2COgLb1fvpCo+A/y9A0G0znNVmdx4w==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 13058,
        "content": "\"integrity\": \"sha512-OWND8ei3VtNC9h7V60qff3SVobHr996CTwgxubgyQYEpg290h9J0buyECNNJexkFm5sOajh5G116RYA1c8ZMSw==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 14669,
        "content": "\"integrity\": \"sha512-Dh7l57ianaEoIpzbp0PC9UKAdCSVklD8E5Rpw7ETfbTl3FqcOOgq5q2LVDhgGCkaBv7p24JXikPdvhhmHvKMsw==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 14797,
        "content": "\"integrity\": \"sha512-BvE/TwpZX4FXExxOxZyRGQQv651MSwmWKZGqvmPcRIjDqWub67kTKuIMx43cZZrS/cBBzwBcNDWoFxt2XEFIpQ==\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 18306,
        "content": "\"@vitest/mocker\": \"3.2.4\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 18306,
        "content": "\"@vitest/mocker\": \"3.2.4\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/test.*mock/i",
        "line": 18306,
        "content": "\"@vitest/mocker\": \"3.2.4\","
      },
      {
        "file": "/package-lock.json",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 19532,
        "content": "\"integrity\": \"sha512-si7QWI6zUMq56bESFvagtmzMdGOtoxfR+Sez11Mobfc7tm+VkUckk9bW2UeffTGVUbOksxmSw0AA2gs8g71NCQ==\","
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 384,
        "content": "console.log('✅ No mocks required - all data is real');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 384,
        "content": "console.log('✅ No mocks required - all data is real');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 385,
        "content": "console.log('\\n🚀 Ready to eliminate mock services and connect real APIs!');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 385,
        "content": "console.log('\\n🚀 Ready to eliminate mock services and connect real APIs!');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 424,
        "content": "console.log('1. Run validation script: npm run validate:no-mocks');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 424,
        "content": "console.log('1. Run validation script: npm run validate:no-mocks');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 425,
        "content": "console.log('2. Remove mock services: npm run remove:mocks');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 425,
        "content": "console.log('2. Remove mock services: npm run remove:mocks');"
      },
      {
        "file": "/scripts/check-database-schema.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 192,
        "content": "const testData = {};"
      },
      {
        "file": "/scripts/check-database-schema.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 192,
        "content": "const testData = {};"
      },
      {
        "file": "/scripts/check-database-schema.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 195,
        "content": ".insert(testData);"
      },
      {
        "file": "/scripts/check-database-schema.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 195,
        "content": ".insert(testData);"
      },
      {
        "file": "/scripts/configure-cloudflare-env.md",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 15,
        "content": "# Si quieres conectar a Supabase real en lugar de mock data"
      },
      {
        "file": "/scripts/configure-cloudflare-env.md",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 15,
        "content": "# Si quieres conectar a Supabase real en lugar de mock data"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "filename",
        "evidence": "Mock/fake in filename",
        "line": 0,
        "content": "/workspaces/qwik-lit-builder-stack/scripts/identify-mocks-and-simulations.js"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 61,
        "content": "class MockDetector {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 61,
        "content": "class MockDetector {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 65,
        "content": "mocks: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 65,
        "content": "mocks: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 66,
        "content": "simulations: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 67,
        "content": "fakeData: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 67,
        "content": "fakeData: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeData",
        "line": 67,
        "content": "fakeData: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 68,
        "content": "simplifiedLogic: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 70,
        "content": "hardcodedValues: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 71,
        "content": "conditionalMocks: [],"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 76,
        "content": "this.mockPatterns = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 76,
        "content": "this.mockPatterns = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 78,
        "content": "/mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 78,
        "content": "/mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 79,
        "content": "/fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 79,
        "content": "/fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/stub/i",
        "line": 80,
        "content": "/stub/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bstub\\w*/i",
        "line": 80,
        "content": "/stub/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 81,
        "content": "/dummy/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulate/i",
        "line": 82,
        "content": "/simulate/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 83,
        "content": "/simulation/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 84,
        "content": "/\\bmock\\w*/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/stub/i",
        "line": 85,
        "content": "/\\bstub\\w*/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 86,
        "content": "/\\bfake\\w*/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 89,
        "content": "/jest\\.mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 89,
        "content": "/jest\\.mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 90,
        "content": "/vi\\.mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 90,
        "content": "/vi\\.mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/sinon/i",
        "line": 91,
        "content": "/sinon/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 92,
        "content": "/\\.__mocks__/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\.__mocks__/i",
        "line": 92,
        "content": "/\\.__mocks__/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 93,
        "content": "/test.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 93,
        "content": "/test.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/test.*mock/i",
        "line": 93,
        "content": "/test.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 94,
        "content": "/mock.*test/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 94,
        "content": "/mock.*test/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 94,
        "content": "/mock.*test/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 97,
        "content": "/if.*development/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/sampleData/i",
        "line": 103,
        "content": "/sampleData/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "sampleData",
        "line": 103,
        "content": "/sampleData/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 104,
        "content": "/dummyData/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummyData/i",
        "line": 104,
        "content": "/dummyData/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "dummyData",
        "line": 104,
        "content": "/dummyData/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 105,
        "content": "/testData/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 105,
        "content": "/testData/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 106,
        "content": "/hardcoded/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 109,
        "content": "/mockapi/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 109,
        "content": "/mockapi/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mockapi/i",
        "line": 109,
        "content": "/mockapi/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/json-server/i",
        "line": 110,
        "content": "/json-server/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mirage/i",
        "line": 111,
        "content": "/mirage/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 112,
        "content": "/msw/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 115,
        "content": "/mockdb/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 115,
        "content": "/mockdb/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mockdb/i",
        "line": 115,
        "content": "/mockdb/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/inmemory/i",
        "line": 116,
        "content": "/inmemory/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/sqlite.*memory/i",
        "line": 117,
        "content": "/sqlite.*memory/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 120,
        "content": "/return.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 120,
        "content": "/return.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*fake/i",
        "line": 120,
        "content": "/return.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 121,
        "content": "/return.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 121,
        "content": "/return.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 121,
        "content": "/return.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 122,
        "content": "/return.*sample/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 123,
        "content": "/return.*dummy/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*dummy/i",
        "line": 123,
        "content": "/return.*dummy/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/todo.*real/i",
        "line": 126,
        "content": "/todo.*real/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/todo.*actual/i",
        "line": 127,
        "content": "/todo.*actual/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 128,
        "content": "/fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 128,
        "content": "/fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fixme.*mock/i",
        "line": 128,
        "content": "/fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 129,
        "content": "/fixme.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 129,
        "content": "/fixme.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fixme.*fake/i",
        "line": 129,
        "content": "/fixme.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 130,
        "content": "/replace.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 130,
        "content": "/replace.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/replace.*mock/i",
        "line": 130,
        "content": "/replace.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 131,
        "content": "/replace.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 131,
        "content": "/replace.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/replace.*fake/i",
        "line": 131,
        "content": "/replace.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/temporary/i",
        "line": 134,
        "content": "/temporary/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/temp.*implementation/i",
        "line": 135,
        "content": "/temp.*implementation/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 136,
        "content": "/placeholder/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/work.*in.*progress/i",
        "line": 138,
        "content": "/work.*in.*progress/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 141,
        "content": "/simplified/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simple.*version/i",
        "line": 142,
        "content": "/simple.*version/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/basic.*implementation/i",
        "line": 143,
        "content": "/basic.*implementation/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/minimal.*implementation/i",
        "line": 144,
        "content": "/minimal.*implementation/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/skip.*validation/i",
        "line": 147,
        "content": "/skip.*validation/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/bypass.*auth/i",
        "line": 148,
        "content": "/bypass.*auth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/disable.*security/i",
        "line": 149,
        "content": "/disable.*security/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/skip.*check/i",
        "line": 150,
        "content": "/skip.*check/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dev.*shortcut/i",
        "line": 153,
        "content": "/dev.*shortcut/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/shortcut/i",
        "line": 153,
        "content": "/dev.*shortcut/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/quick.*hack/i",
        "line": 154,
        "content": "/quick.*hack/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 155,
        "content": "/workaround/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/shortcut/i",
        "line": 156,
        "content": "/shortcut/i"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 161,
        "content": "'mockData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 161,
        "content": "'mockData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockData",
        "line": 161,
        "content": "'mockData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 162,
        "content": "'fakeData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 162,
        "content": "'fakeData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeData",
        "line": 162,
        "content": "'fakeData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/sampleData/i",
        "line": 163,
        "content": "'sampleData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "sampleData",
        "line": 163,
        "content": "'sampleData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 164,
        "content": "'testData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 164,
        "content": "'testData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 165,
        "content": "'dummyData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummyData/i",
        "line": 165,
        "content": "'dummyData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "dummyData",
        "line": 165,
        "content": "'dummyData',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 166,
        "content": "'mockUser',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 166,
        "content": "'mockUser',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockUser",
        "line": 166,
        "content": "'mockUser',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 167,
        "content": "'fakeUser',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 167,
        "content": "'fakeUser',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeUser",
        "line": 167,
        "content": "'fakeUser',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 168,
        "content": "'mockResponse',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 168,
        "content": "'mockResponse',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockResponse",
        "line": 168,
        "content": "'mockResponse',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 169,
        "content": "'fakeResponse',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 169,
        "content": "'fakeResponse',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeResponse",
        "line": 169,
        "content": "'fakeResponse',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 170,
        "content": "'mockApi',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 170,
        "content": "'mockApi',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mockapi/i",
        "line": 170,
        "content": "'mockApi',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockApi",
        "line": 170,
        "content": "'mockApi',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 171,
        "content": "'fakeApi',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 171,
        "content": "'fakeApi',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeApi",
        "line": 171,
        "content": "'fakeApi',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 172,
        "content": "'mockDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 172,
        "content": "'mockDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockData",
        "line": 172,
        "content": "'mockDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockDatabase",
        "line": 172,
        "content": "'mockDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 173,
        "content": "'fakeDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 173,
        "content": "'fakeDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeData",
        "line": 173,
        "content": "'fakeDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeDatabase",
        "line": 173,
        "content": "'fakeDatabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 174,
        "content": "'mockAuth',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 174,
        "content": "'mockAuth',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockAuth",
        "line": 174,
        "content": "'mockAuth',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 175,
        "content": "'fakeAuth',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 175,
        "content": "'fakeAuth',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeAuth",
        "line": 175,
        "content": "'fakeAuth',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 176,
        "content": "'mockSupabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 176,
        "content": "'mockSupabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockSupabase",
        "line": 176,
        "content": "'mockSupabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 177,
        "content": "'fakeSupabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 177,
        "content": "'fakeSupabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeSupabase",
        "line": 177,
        "content": "'fakeSupabase',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulate/i",
        "line": 178,
        "content": "'simulateError',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "simulateError",
        "line": 178,
        "content": "'simulateError',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulate/i",
        "line": 179,
        "content": "'simulateSuccess',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "simulateSuccess",
        "line": 179,
        "content": "'simulateSuccess',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulate/i",
        "line": 180,
        "content": "'simulateDelay',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "simulateDelay",
        "line": 180,
        "content": "'simulateDelay',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulate/i",
        "line": 181,
        "content": "'simulateLoading',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "simulateLoading",
        "line": 181,
        "content": "'simulateLoading',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 182,
        "content": "'mockFetch',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 182,
        "content": "'mockFetch',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockFetch",
        "line": 182,
        "content": "'mockFetch',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 183,
        "content": "'fakeFetch',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 183,
        "content": "'fakeFetch',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeFetch",
        "line": 183,
        "content": "'fakeFetch',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 184,
        "content": "'mockAxios',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 184,
        "content": "'mockAxios',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockAxios",
        "line": 184,
        "content": "'mockAxios',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 185,
        "content": "'fakeAxios'"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 185,
        "content": "'fakeAxios'"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeAxios",
        "line": 185,
        "content": "'fakeAxios'"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 223,
        "content": "if (fileName.includes('mock') || fileName.includes('fake') || fileName.includes('stub') || fileName.includes('dummy')) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 223,
        "content": "if (fileName.includes('mock') || fileName.includes('fake') || fileName.includes('stub') || fileName.includes('dummy')) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/stub/i",
        "line": 223,
        "content": "if (fileName.includes('mock') || fileName.includes('fake') || fileName.includes('stub') || fileName.includes('dummy')) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 223,
        "content": "if (fileName.includes('mock') || fileName.includes('fake') || fileName.includes('stub') || fileName.includes('dummy')) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 223,
        "content": "if (fileName.includes('mock') || fileName.includes('fake') || fileName.includes('stub') || fileName.includes('dummy')) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bstub\\w*/i",
        "line": 223,
        "content": "if (fileName.includes('mock') || fileName.includes('fake') || fileName.includes('stub') || fileName.includes('dummy')) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 223,
        "content": "if (fileName.includes('mock') || fileName.includes('fake') || fileName.includes('stub') || fileName.includes('dummy')) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 224,
        "content": "this.findings.mocks.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 224,
        "content": "this.findings.mocks.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 227,
        "content": "evidence: 'Mock/fake in filename',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 227,
        "content": "evidence: 'Mock/fake in filename',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 227,
        "content": "evidence: 'Mock/fake in filename',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 227,
        "content": "evidence: 'Mock/fake in filename',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 243,
        "content": "this.mockPatterns.forEach(pattern => {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 243,
        "content": "this.mockPatterns.forEach(pattern => {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 245,
        "content": "this.findings.mocks.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 245,
        "content": "this.findings.mocks.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 258,
        "content": "this.findings.mocks.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 258,
        "content": "this.findings.mocks.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 269,
        "content": "if (this.isHardcodedValue(line)) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 270,
        "content": "this.findings.hardcodedValues.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 278,
        "content": "if (this.isConditionalMock(line)) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 279,
        "content": "this.findings.conditionalMocks.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 287,
        "content": "if (this.isSimplifiedLogic(line)) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 288,
        "content": "this.findings.simplifiedLogic.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 302,
        "content": "isHardcodedValue(line) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 303,
        "content": "const hardcodedPatterns = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 310,
        "content": "/return.*['\"]fake.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 310,
        "content": "/return.*['\"]fake.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*fake/i",
        "line": 310,
        "content": "/return.*['\"]fake.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 311,
        "content": "/return.*['\"]mock.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 311,
        "content": "/return.*['\"]mock.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 311,
        "content": "/return.*['\"]mock.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 313,
        "content": "/return.*['\"]dummy.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*dummy/i",
        "line": 313,
        "content": "/return.*['\"]dummy.*['\"]/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 314,
        "content": "/return.*['\"]sample.*['\"]/i"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 317,
        "content": "return hardcodedPatterns.some(pattern => pattern.test(line));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 321,
        "content": "isConditionalMock(line) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 323,
        "content": "/if.*NODE_ENV.*development/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 325,
        "content": "/if.*development.*\\{/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 326,
        "content": "/\\?.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 326,
        "content": "/\\?.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 327,
        "content": "/\\?.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 327,
        "content": "/\\?.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 336,
        "content": "isSimplifiedLogic(line) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 337,
        "content": "const simplifiedPatterns = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/todo.*real/i",
        "line": 338,
        "content": "/\\/\\/.*todo.*real/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/todo.*actual/i",
        "line": 339,
        "content": "/\\/\\/.*todo.*actual/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 340,
        "content": "/\\/\\/.*fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 340,
        "content": "/\\/\\/.*fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fixme.*mock/i",
        "line": 340,
        "content": "/\\/\\/.*fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/temporary/i",
        "line": 341,
        "content": "/\\/\\/.*temporary/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 342,
        "content": "/\\/\\/.*placeholder/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 343,
        "content": "/\\/\\/.*simplified/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 345,
        "content": "/\\/\\/.*workaround/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 347,
        "content": "/console\\.log.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 347,
        "content": "/console\\.log.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 348,
        "content": "/console\\.log.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 348,
        "content": "/console\\.log.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 353,
        "content": "return simplifiedPatterns.some(pattern => pattern.test(line));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 363,
        "content": "const mockDependencies = [];"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 363,
        "content": "const mockDependencies = [];"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 371,
        "content": "if (this.isMockDependency(dep)) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 372,
        "content": "mockDependencies.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 372,
        "content": "mockDependencies.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 375,
        "content": "type: this.getMockDependencyType(dep)"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 380,
        "content": "return mockDependencies;"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 380,
        "content": "return mockDependencies;"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 380,
        "content": "return mockDependencies;"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 388,
        "content": "isMockDependency(name) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 389,
        "content": "const mockDeps = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 389,
        "content": "const mockDeps = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/sinon/i",
        "line": 392,
        "content": "'sinon',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 394,
        "content": "'msw',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mirage/i",
        "line": 395,
        "content": "'miragejs',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/json-server/i",
        "line": 396,
        "content": "'json-server',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 397,
        "content": "'mock-fs',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 397,
        "content": "'mock-fs',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 398,
        "content": "'mock-aws-s3',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 398,
        "content": "'mock-aws-s3',"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 410,
        "content": "return mockDeps.some(mockDep => name.includes(mockDep));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 410,
        "content": "return mockDeps.some(mockDep => name.includes(mockDep));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 410,
        "content": "return mockDeps.some(mockDep => name.includes(mockDep));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 414,
        "content": "getMockDependencyType(name) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 416,
        "content": "if (name.includes('sinon') || name.includes('nock')) return 'mock-library';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 416,
        "content": "if (name.includes('sinon') || name.includes('nock')) return 'mock-library';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/sinon/i",
        "line": 416,
        "content": "if (name.includes('sinon') || name.includes('nock')) return 'mock-library';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 416,
        "content": "if (name.includes('sinon') || name.includes('nock')) return 'mock-library';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 417,
        "content": "if (name.includes('msw') || name.includes('mirage')) return 'api-mocking';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 417,
        "content": "if (name.includes('msw') || name.includes('mirage')) return 'api-mocking';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mirage/i",
        "line": 417,
        "content": "if (name.includes('msw') || name.includes('mirage')) return 'api-mocking';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 417,
        "content": "if (name.includes('msw') || name.includes('mirage')) return 'api-mocking';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 417,
        "content": "if (name.includes('msw') || name.includes('mirage')) return 'api-mocking';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 418,
        "content": "if (name.includes('json-server')) return 'fake-api';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 418,
        "content": "if (name.includes('json-server')) return 'fake-api';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/json-server/i",
        "line": 418,
        "content": "if (name.includes('json-server')) return 'fake-api';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*fake/i",
        "line": 418,
        "content": "if (name.includes('json-server')) return 'fake-api';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 421,
        "content": "if (name.includes('storybook')) return 'component-development';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 428,
        "content": "const mockEnvVars = [];"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 428,
        "content": "const mockEnvVars = [];"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 439,
        "content": "if (this.isMockEnvVar(trimmedLine)) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 440,
        "content": "mockEnvVars.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 440,
        "content": "mockEnvVars.push({"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 453,
        "content": "return mockEnvVars;"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 453,
        "content": "return mockEnvVars;"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 453,
        "content": "return mockEnvVars;"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 457,
        "content": "isMockEnvVar(line) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 458,
        "content": "const mockEnvPatterns = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 458,
        "content": "const mockEnvPatterns = ["
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 459,
        "content": "/mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 459,
        "content": "/mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 460,
        "content": "/fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 460,
        "content": "/fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 467,
        "content": "/dummy/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 471,
        "content": "return mockEnvPatterns.some(pattern => pattern.test(line));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 471,
        "content": "return mockEnvPatterns.some(pattern => pattern.test(line));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 471,
        "content": "return mockEnvPatterns.some(pattern => pattern.test(line));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 471,
        "content": "return mockEnvPatterns.some(pattern => pattern.test(line));"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 476,
        "content": "logSection('MOCK & SIMULATION DETECTION REPORT');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 476,
        "content": "logSection('MOCK & SIMULATION DETECTION REPORT');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 476,
        "content": "logSection('MOCK & SIMULATION DETECTION REPORT');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 481,
        "content": "logSuccess('No obvious mocks or simulations detected');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 481,
        "content": "logSuccess('No obvious mocks or simulations detected');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 481,
        "content": "logSuccess('No obvious mocks or simulations detected');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 485,
        "content": "logCritical(`Found ${totalFindings} potential mock/simulation issues`);"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 485,
        "content": "logCritical(`Found ${totalFindings} potential mock/simulation issues`);"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 485,
        "content": "logCritical(`Found ${totalFindings} potential mock/simulation issues`);"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 515,
        "content": "logSubSection('WARNING ISSUES - These may indicate simplified functionality');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 536,
        "content": "const mockDeps = this.analyzePackageJson();"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 536,
        "content": "const mockDeps = this.analyzePackageJson();"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 537,
        "content": "if (mockDeps.length > 0) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 537,
        "content": "if (mockDeps.length > 0) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 538,
        "content": "logSubSection('MOCK-RELATED DEPENDENCIES');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 538,
        "content": "logSubSection('MOCK-RELATED DEPENDENCIES');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 539,
        "content": "mockDeps.forEach(dep => {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 539,
        "content": "mockDeps.forEach(dep => {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 545,
        "content": "const mockEnvVars = this.analyzeEnvVars();"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 545,
        "content": "const mockEnvVars = this.analyzeEnvVars();"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 546,
        "content": "if (mockEnvVars.length > 0) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 546,
        "content": "if (mockEnvVars.length > 0) {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 547,
        "content": "logSubSection('POTENTIALLY MOCK ENVIRONMENT VARIABLES');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 547,
        "content": "logSubSection('POTENTIALLY MOCK ENVIRONMENT VARIABLES');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 548,
        "content": "mockEnvVars.forEach(envVar => {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 548,
        "content": "mockEnvVars.forEach(envVar => {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 562,
        "content": "log('  - Review and replace all critical mock/simulation code', 'red');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 562,
        "content": "log('  - Review and replace all critical mock/simulation code', 'red');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 562,
        "content": "log('  - Review and replace all critical mock/simulation code', 'red');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/replace.*mock/i",
        "line": 562,
        "content": "log('  - Review and replace all critical mock/simulation code', 'red');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 564,
        "content": "log('  - Replace hardcoded data with real API calls', 'red');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dev.*shortcut/i",
        "line": 565,
        "content": "log('  - Remove development shortcuts that bypass real logic', 'red');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/shortcut/i",
        "line": 565,
        "content": "log('  - Remove development shortcuts that bypass real logic', 'red');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 570,
        "content": "log('  - Review warning findings for simplified functionality', 'yellow');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/temporary/i",
        "line": 572,
        "content": "log('  - Replace temporary implementations with real ones', 'yellow');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/temp.*implementation/i",
        "line": 572,
        "content": "log('  - Replace temporary implementations with real ones', 'yellow');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 581,
        "content": "mockDependencies: mockDeps,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 581,
        "content": "mockDependencies: mockDeps,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 582,
        "content": "mockEnvVars: mockEnvVars"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 582,
        "content": "mockEnvVars: mockEnvVars"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 589,
        "content": "/return.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 589,
        "content": "/return.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*fake/i",
        "line": 589,
        "content": "/return.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 590,
        "content": "/return.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 590,
        "content": "/return.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 590,
        "content": "/return.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 591,
        "content": "/mockSupabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 591,
        "content": "/mockSupabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockSupabase",
        "line": 591,
        "content": "/mockSupabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 592,
        "content": "/fakeSupabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 592,
        "content": "/fakeSupabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeSupabase",
        "line": 592,
        "content": "/fakeSupabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 593,
        "content": "/mockDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 593,
        "content": "/mockDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockData",
        "line": 593,
        "content": "/mockDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockDatabase",
        "line": 593,
        "content": "/mockDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 594,
        "content": "/fakeDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 594,
        "content": "/fakeDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeData",
        "line": 594,
        "content": "/fakeDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeDatabase",
        "line": 594,
        "content": "/fakeDatabase/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 595,
        "content": "/mockAuth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 595,
        "content": "/mockAuth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "mockAuth",
        "line": 595,
        "content": "/mockAuth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 596,
        "content": "/fakeAuth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 596,
        "content": "/fakeAuth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "suspicious_name",
        "evidence": "fakeAuth",
        "line": 596,
        "content": "/fakeAuth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/bypass.*auth/i",
        "line": 597,
        "content": "/bypass.*auth/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/skip.*validation/i",
        "line": 598,
        "content": "/skip.*validation/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/disable.*security/i",
        "line": 599,
        "content": "/disable.*security/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 600,
        "content": "/mockapi/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 600,
        "content": "/mockapi/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mockapi/i",
        "line": 600,
        "content": "/mockapi/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/json-server/i",
        "line": 601,
        "content": "/json-server/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 602,
        "content": "/hardcoded.*data/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/dummy/i",
        "line": 603,
        "content": "/dummy.*data/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/todo.*real/i",
        "line": 613,
        "content": "/todo.*real/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/todo.*actual/i",
        "line": 614,
        "content": "/todo.*actual/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 615,
        "content": "/fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 615,
        "content": "/fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/fixme.*mock/i",
        "line": 615,
        "content": "/fixme.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/temporary/i",
        "line": 616,
        "content": "/temporary/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 617,
        "content": "/placeholder/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 618,
        "content": "/simplified/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/workaround/i",
        "line": 619,
        "content": "/workaround/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/shortcut/i",
        "line": 620,
        "content": "/shortcut/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 622,
        "content": "/if.*development/i"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 630,
        "content": "logSection('STARTING MOCK & SIMULATION DETECTION');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 630,
        "content": "logSection('STARTING MOCK & SIMULATION DETECTION');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 630,
        "content": "logSection('STARTING MOCK & SIMULATION DETECTION');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 651,
        "content": "const reportPath = join(this.rootPath, 'MOCK_DETECTION_REPORT.json');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 651,
        "content": "const reportPath = join(this.rootPath, 'MOCK_DETECTION_REPORT.json');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 654,
        "content": "logSuccess(`Detailed report saved to: MOCK_DETECTION_REPORT.json`);"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 654,
        "content": "logSuccess(`Detailed report saved to: MOCK_DETECTION_REPORT.json`);"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 659,
        "content": "logSection('MOCK & SIMULATION DETECTION COMPLETED');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 659,
        "content": "logSection('MOCK & SIMULATION DETECTION COMPLETED');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 659,
        "content": "logSection('MOCK & SIMULATION DETECTION COMPLETED');"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 666,
        "content": "const detector = new MockDetector();"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 666,
        "content": "const detector = new MockDetector();"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 198,
        "content": "export const createMockUser = (overrides = {}) => ({"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 203,
        "content": "export const createMockFile = (filename = 'test.txt', content = 'test', type = 'text/plain') =>"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 203,
        "content": "export const createMockFile = (filename = 'test.txt', content = 'test', type = 'text/plain') =>"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 242,
        "content": "content = `import { testUser, testFile, createMockUser } from '~/test/fixtures';\\n${content}`;"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/test.*mock/i",
        "line": 242,
        "content": "content = `import { testUser, testFile, createMockUser } from '~/test/fixtures';\\n${content}`;"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 242,
        "content": "content = `import { testUser, testFile, createMockUser } from '~/test/fixtures';\\n${content}`;"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 335,
        "content": "import { createMockUser } from '~/test/fixtures';"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 335,
        "content": "import { createMockUser } from '~/test/fixtures';"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 337,
        "content": "const user = createMockUser({ email: 'custom@example.com' });"
      },
      {
        "file": "/scripts/migration/orchestrator.ts",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 430,
        "content": "6. **Test Fixtures**: No more hardcoded test data"
      },
      {
        "file": "/scripts/test-database.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 520,
        "content": "async testDatabaseFunctions() {"
      },
      {
        "file": "/scripts/test-database.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 520,
        "content": "async testDatabaseFunctions() {"
      },
      {
        "file": "/scripts/test-database.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 662,
        "content": "await this.testDatabaseFunctions();"
      },
      {
        "file": "/scripts/test-database.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 662,
        "content": "await this.testDatabaseFunctions();"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "filename",
        "evidence": "Mock/fake in filename",
        "line": 0,
        "content": "/workspaces/qwik-lit-builder-stack/scripts/validate-no-mocks.js"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 19,
        "content": "const MOCK_PATTERNS = ["
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 19,
        "content": "const MOCK_PATTERNS = ["
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 20,
        "content": "/mock/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 20,
        "content": "/mock/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/fake/i",
        "line": 21,
        "content": "/fake/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bfake\\w*/i",
        "line": 21,
        "content": "/fake/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 22,
        "content": "/simulation/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 23,
        "content": "/placeholder/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 24,
        "content": "/jsonplaceholder\\.typicode\\.com/,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/hardcoded/i",
        "line": 25,
        "content": "/hardcoded/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 27,
        "content": "/return\\s+null.*mock/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 27,
        "content": "/return\\s+null.*mock/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 27,
        "content": "/return\\s+null.*mock/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 28,
        "content": "/MockClient/,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 28,
        "content": "/MockClient/,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 29,
        "content": "/MockService/,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 29,
        "content": "/MockService/,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 30,
        "content": "/MockData/,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 30,
        "content": "/MockData/,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 31,
        "content": "/mock.*data/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 31,
        "content": "/mock.*data/i,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 58,
        "content": "console.log('🔍 COMPREHENSIVE MOCK VALIDATION - STARTING...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 58,
        "content": "console.log('🔍 COMPREHENSIVE MOCK VALIDATION - STARTING...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 60,
        "content": "async function scanFileForMocks(filePath) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 68,
        "content": "const mockLines = [];"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 68,
        "content": "const mockLines = [];"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 76,
        "content": "for (const pattern of MOCK_PATTERNS) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 76,
        "content": "for (const pattern of MOCK_PATTERNS) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 78,
        "content": "mockLines.push({"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 78,
        "content": "mockLines.push({"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 91,
        "content": "mockLines,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 91,
        "content": "mockLines,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 92,
        "content": "hasMocks: mockLines.length > 0,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 92,
        "content": "hasMocks: mockLines.length > 0,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 103,
        "content": "async function validateMockFiles() {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 104,
        "content": "console.log('📁 SCANNING FOR MOCK FILES AND PATTERNS...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 104,
        "content": "console.log('📁 SCANNING FOR MOCK FILES AND PATTERNS...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 106,
        "content": "let totalMocks = 0;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 111,
        "content": "const result = await scanFileForMocks(fullPath);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 118,
        "content": "if (result.hasMocks) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 120,
        "content": "totalMocks += result.mockLines.length;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 120,
        "content": "totalMocks += result.mockLines.length;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 122,
        "content": "console.log(`❌ CRITICAL: ${file} contains ${result.mockLines.length} mock patterns:`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 122,
        "content": "console.log(`❌ CRITICAL: ${file} contains ${result.mockLines.length} mock patterns:`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 123,
        "content": "result.mockLines.forEach(mock => {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 123,
        "content": "result.mockLines.forEach(mock => {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 124,
        "content": "console.log(`   Line ${mock.lineNumber}: ${mock.content.substring(0, 80)}...`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 124,
        "content": "console.log(`   Line ${mock.lineNumber}: ${mock.content.substring(0, 80)}...`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 128,
        "content": "console.log(`✅ ${file} - No mocks detected`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 128,
        "content": "console.log(`✅ ${file} - No mocks detected`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 133,
        "content": "const mockDataFiles = ["
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 133,
        "content": "const mockDataFiles = ["
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "suspicious_name",
        "evidence": "mockData",
        "line": 133,
        "content": "const mockDataFiles = ["
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 134,
        "content": "'src/lib/cms/mock-data.ts',"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 134,
        "content": "'src/lib/cms/mock-data.ts',"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 135,
        "content": "'src/lib/mock-client.ts',"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 135,
        "content": "'src/lib/mock-client.ts',"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 136,
        "content": "'src/lib/mock-service.ts'"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 136,
        "content": "'src/lib/mock-service.ts'"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 139,
        "content": "console.log('\\n📄 CHECKING FOR MOCK DATA FILES...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 139,
        "content": "console.log('\\n📄 CHECKING FOR MOCK DATA FILES...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 141,
        "content": "for (const file of mockDataFiles) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 141,
        "content": "for (const file of mockDataFiles) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "suspicious_name",
        "evidence": "mockData",
        "line": 141,
        "content": "for (const file of mockDataFiles) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 144,
        "content": "console.log(`❌ CRITICAL: Mock file exists and should be removed: ${file}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 144,
        "content": "console.log(`❌ CRITICAL: Mock file exists and should be removed: ${file}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 145,
        "content": "totalMocks++;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 147,
        "content": "console.log(`✅ Mock file does not exist (good): ${file}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 147,
        "content": "console.log(`✅ Mock file does not exist (good): ${file}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 152,
        "content": "totalMocks,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 154,
        "content": "success: totalMocks === 0"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 158,
        "content": "async function testDatabaseConnectivity() {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 158,
        "content": "async function testDatabaseConnectivity() {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 216,
        "content": "const hasMockIndicators = MOCK_PATTERNS.some(pattern =>"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 216,
        "content": "const hasMockIndicators = MOCK_PATTERNS.some(pattern =>"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 220,
        "content": "if (hasMockIndicators) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 221,
        "content": "console.log(`⚠️ ${endpoint} - Returns data but contains mock indicators`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 221,
        "content": "console.log(`⚠️ ${endpoint} - Returns data but contains mock indicators`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 221,
        "content": "console.log(`⚠️ ${endpoint} - Returns data but contains mock indicators`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 267,
        "content": "const mockPages = pages.filter(page =>"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 267,
        "content": "const mockPages = pages.filter(page =>"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 268,
        "content": "page.title.includes('Mock') ||"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 268,
        "content": "page.title.includes('Mock') ||"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 273,
        "content": "if (mockPages.length > 0) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 273,
        "content": "if (mockPages.length > 0) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 274,
        "content": "console.log(`⚠️ Found ${mockPages.length} pages that might be mock data`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 274,
        "content": "console.log(`⚠️ Found ${mockPages.length} pages that might be mock data`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 275,
        "content": "mockPages.forEach(page => {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 275,
        "content": "mockPages.forEach(page => {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 326,
        "content": "const { mockScan, dbConnectivity, apiTests, dataValidation } = results;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 326,
        "content": "const { mockScan, dbConnectivity, apiTests, dataValidation } = results;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 326,
        "content": "const { mockScan, dbConnectivity, apiTests, dataValidation } = results;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 328,
        "content": "console.log(`🔍 Mock Scan: ${mockScan.success ? '✅ PASSED' : '❌ FAILED'}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 328,
        "content": "console.log(`🔍 Mock Scan: ${mockScan.success ? '✅ PASSED' : '❌ FAILED'}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 329,
        "content": "console.log(`   - Total mock patterns found: ${mockScan.totalMocks}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 329,
        "content": "console.log(`   - Total mock patterns found: ${mockScan.totalMocks}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 330,
        "content": "console.log(`   - Critical files with mocks: ${mockScan.criticalFiles}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 330,
        "content": "console.log(`   - Critical files with mocks: ${mockScan.criticalFiles}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 344,
        "content": "const overallSuccess = mockScan.success && dbConnectivity.success && apiTests.success && dataValidation.success;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 344,
        "content": "const overallSuccess = mockScan.success && dbConnectivity.success && apiTests.success && dataValidation.success;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 344,
        "content": "const overallSuccess = mockScan.success && dbConnectivity.success && apiTests.success && dataValidation.success;"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 349,
        "content": "console.log('✅ No mocks detected');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 349,
        "content": "console.log('✅ No mocks detected');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 356,
        "content": "console.log('⚠️ System still contains mocks or has connectivity issues');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 356,
        "content": "console.log('⚠️ System still contains mocks or has connectivity issues');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 359,
        "content": "if (!mockScan.success) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 359,
        "content": "if (!mockScan.success) {"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 361,
        "content": "console.log('1. Remove all mock files and patterns');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 361,
        "content": "console.log('1. Remove all mock files and patterns');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 362,
        "content": "console.log('2. Replace mock implementations with real services');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 362,
        "content": "console.log('2. Replace mock implementations with real services');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/replace.*mock/i",
        "line": 362,
        "content": "console.log('2. Replace mock implementations with real services');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 386,
        "content": "const mockScan = await validateMockFiles();"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 386,
        "content": "const mockScan = await validateMockFiles();"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/testData/i",
        "line": 387,
        "content": "const dbConnectivity = await testDatabaseConnectivity();"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "suspicious_name",
        "evidence": "testData",
        "line": 387,
        "content": "const dbConnectivity = await testDatabaseConnectivity();"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 393,
        "content": "mockScan,"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 393,
        "content": "mockScan,"
      },
      {
        "file": "/server/q-BFBoRxOI.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 8,
        "content": "`);for(const $ of c){const l=on($,t);l.$capture$&&uo(l,e),s.push([o,l])}}}return s},ui=(e,t=0)=>{for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);t=(t<<5)-t+s,t|=0}return Number(Math.abs(t)).toString(36)},fi=(e,t)=>`${ui(e.$hash$)}-${t}`,di=e=>{const t=e.join(\"|\");if(t.length>0)return t},pi=\"1.14.1\",Ae=()=>{const e=ns(),t=e.$hostElement$,n=K(t,e.$renderCtx$.$static$.$containerState$),s=n.$seq$||(n.$seq$=[]),r=e.$i$++,o=i=>s[r]=i;return{val:s[r],set:o,i:r,iCtx:e,elCtx:n}},ae=e=>(N(/^[\\w/.-]+$/.test(e),\"Context name must only contain A-Z,a-z,0-9, _\",e),Object.freeze({id:Qn(e)})),ue=(e,t)=>{const{val:n,set:s,elCtx:r}=Ae();if(n!==void 0)return;(r.$contexts$||(r.$contexts$=new Map)).set(e.id,t),s(!0)},mt=(e,t)=>{const{val:n,set:s,iCtx:r,elCtx:o}=Ae();if(n!==void 0)return n;const i=ar(e,o,r.$renderCtx$.$static$.$containerState$);if(typeof t==\"function\")return s(U(void 0,t,i));if(i!==void 0)return s(i);if(t!==void 0)return s(t);throw O(Bo,e.id)},hi=(e,t)=>{var r;let n=e,s=1;for(;n&&!((r=n.hasAttribute)!=null&&r.call(n,\"q:container\"));){for(;n=n.previousSibling;)if(Bt(n)){const o=n[st];if(o){const i=o[Xt];if(n===o.open)return i??K(o,t);if(i!=null&&i.$parentCtx$)return i.$parentCtx$;n=o;continue}if(n.data===\"/qv\")s++;else if(n.data.startsWith(\"qv \")&&(s--,s===0))return K(bt(n),t)}n=e.parentElement,e=n}return null},mi=(e,t)=>(e.$parentCtx$===void 0&&(e.$parentCtx$=hi(e.$element$,t)),e.$parentCtx$),ar=(e,t,n)=>{var o;const s=e.id;if(!t)return;let r=t;for(;r;){const i=(o=r.$contexts$)==null?void 0:o.get(s);if(i)return i;r=mi(r,n)}},gi=ae(\"qk-error\"),Hn=(e,t,n)=>{const s=te(t);if(G())throw e;{const r=ar(gi,s,n.$static$.$containerState$);if(r===void 0)throw e;r.error=e}},yi=new Set([\"animationIterationCount\",\"aspectRatio\",\"borderImageOutset\",\"borderImageSlice\",\"borderImageWidth\",\"boxFlex\",\"boxFlexGroup\",\"boxOrdinalGroup\",\"columnCount\",\"columns\",\"flex\",\"flexGrow\",\"flexShrink\",\"gridArea\",\"gridRow\",\"gridRowEnd\",\"gridRowStart\",\"gridColumn\",\"gridColumnEnd\",\"gridColumnStart\",\"fontWeight\",\"lineClamp\",\"lineHeight\",\"opacity\",\"order\",\"orphans\",\"scale\",\"tabSize\",\"widows\",\"zIndex\",\"zoom\",\"MozAnimationIterationCount\",\"MozBoxFlex\",\"msFlex\",\"msFlexPositive\",\"WebkitAnimationIterationCount\",\"WebkitBoxFlex\",\"WebkitBoxOrdinalGroup\",\"WebkitColumnCount\",\"WebkitColumns\",\"WebkitFlex\",\"WebkitFlexGrow\",\"WebkitFlexShrink\",\"WebkitLineClamp\"]),vi=e=>yi.has(e),qt=(e,t,n)=>{t.$flags$&=-2,t.$flags$|=es,t.$slots$=[],t.li.length=0;const s=t.$element$,r=t.$componentQrl$,o=t.$props$,i=X(e.$static$.$locale$,s,void 0,On),c=i.$waitOn$=[];T(r,\"render: host element to render must have a $renderQrl$:\",t),T(o,\"render: host element to render must have defined props\",t);const $=gt(e);$.$cmpCtx$=t,$.$slotCtx$=void 0,i.$subscriber$=[0,s],i.$renderCtx$=e,r.$setContainer$(e.$static$.$containerState$.$containerEl$);const l=r.getFn(i);return Nn(()=>l(o),a=>R(G()?R(De(c),()=>R(rc(e.$static$.$containerState$,e),()=>De(c))):De(c),()=>{var u;if(t.$flags$&lt)if(n&&n>100)ce(`Infinite loop detected. Element: ${(u=t.$componentQrl$)==null?void 0:u.$symbol$}`);else return qt(e,t,n?n+1:1);return{node:a,rCtx:$}}),a=>{var u;if(a===Wr)if(n&&n>100)ce(`Infinite loop detected. Element: ${(u=t.$componentQrl$)==null?void 0:u.$symbol$}`);else return R(De(c),()=>qt(e,t,n?n+1:1));return Hn(a,s,e),{node:Jn,rCtx:$}})},ur=(e,t)=>{const n={$static$:{$doc$:e,$locale$:t.$serverData$.locale,$containerState$:t,$hostElements$:new Set,$operations$:[],$postOperations$:[],$roots$:[],$addSlots$:[],$rmSlots$:[],$visited$:[]},$cmpCtx$:null,$slotCtx$:void 0};return Do(n.$static$),n},gt=e=>({$static$:e.$static$,$cmpCtx$:e.$cmpCtx$,$slotCtx$:e.$slotCtx$}),Bn=(e,t)=>{var n;return(n=t==null?void 0:t.$scopeIds$)!=null&&n.length?t.$scopeIds$.join(\" \")+\" \"+At(e):At(e)},At=e=>{if(!e)return\"\";if(ye(e))return e.trim();const t=[];if(A(e))for(const n of e){const s=At(n);s&&t.push(s)}else for(const[n,s]of Object.entries(e))s&&t.push(n.trim());return t.join(\" \")},Zt=e=>{if(e==null)return\"\";if(typeof e==\"object\"){if(A(e))throw O(Uo,e,\"style\");{const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const s=e[n];s!=null&&typeof s!=\"function\"&&(n.startsWith(\"--\")?t.push(n+\":\"+s):t.push(Qn(n)+\":\"+Si(n,s)))}return t.join(\";\")}}return String(e)},Si=(e,t)=>typeof t==\"number\"&&t!==0&&!vi(e)?t+\"px\":t,rt=e=>Re(e.$static$.$containerState$.$elementIndex$++),fr=(e,t)=>{const n=rt(e);t.$id$=n},ot=e=>Q(e)?ot(e.value):e==null||typeof e==\"boolean\"?\"\":String(e);function dr(e){return e.startsWith(\"aria-\")}const pr=(e,t)=>t.key?!Pe(e)||!J(e.type)&&e.key!=t.key:!1,bi=1,it=2,B=\"dangerouslySetInnerHTML\",It=\"<!--qkssr-f-->\",ws=1,hr=4,mr=8,Es=16,gr=1024;var Vs;Vs=Xt;class yr{constructor(t){k(this,\"nodeType\");k(this,Vs,null);this.nodeType=t}}const wi=()=>new yr(9),Bl=async(e,t)=>{var m,y,g;const n=t.containerTagName,s=Pt(1).$element$,r=rs(s,t.base??\"/\");r.$serverData$.locale=(m=t.serverData)==null?void 0:m.locale;const o=wi(),i=ur(o,r),c=t.beforeContent??[],$={$static$:{$contexts$:[],$headNodes$:n===\"html\"?c:[],$locale$:(y=t.serverData)==null?void 0:y.locale,$textNodes$:new Map},$projectedChildren$:void 0,$projectedCtxs$:void 0,$invocationContext$:void 0},l=(g=t.serverData)==null?void 0:g.locale,a=t.containerAttributes,u=a[\"q:render\"];a[\"q:container\"]=\"paused\",a[\"q:version\"]=pi,a[\"q:render\"]=(u?u+\"-\":\"\")+\"ssr\",a[\"q:base\"]=t.base||\"\",a[\"q:locale\"]=l,a[\"q:manifest-hash\"]=t.manifestHash,a[\"q:instance\"]=Ei();const f=n===\"html\"?[e]:[c,e];n!==\"html\"&&(a.class=\"qc📦\"+(a.class?\" \"+a.class:\"\"));const d=r.$serverData$={...r.$serverData$,...t.serverData};d.containerAttributes={...d.containerAttributes,...a};const v=$.$invocationContext$=X(l);v.$renderCtx$=i,$.$invocationContext$;const x=Ie(n,null,a,f,lt|yt,null);r.$hostsRendering$=new Set,await Promise.resolve().then(()=>xi(x,i,$,t.stream,r,t))},Ei=()=>Math.random().toString(36).slice(2),xi=async(e,t,n,s,r,o)=>{const i=o.beforeClose;return await Gn(e,t,n,s,0,i?c=>{const $=i(n.$static$.$contexts$,r,!1,n.$static$.$textNodes$);return ee($,t,n,c,0,void 0)}:void 0),t},_i=async(e,t,n,s,r)=>{s.write(It);const o=e.props.children;let i;if(J(o)){const c=o({write($){s.write($),s.write(It)}});if(D(c))return c;i=c}else i=o;for await(const c of i)await ee(c,t,n,s,r,void 0),s.write(It)},vr=(e,t,n,s,r,o,i,c)=>{var x;const $=e.props,l=$[Be];if(l)return t.$componentQrl$=l,Ii(s,r,o,t,e,i,c);let a=\"<!--qv\"+ki($);const u=ke in $,f=e.key!=null?String(e.key):null;u&&(T((x=s.$cmpCtx$)==null?void 0:x.$id$),a+=\" q:sref=\"+s.$cmpCtx$.$id$),f!=null&&(a+=\" q:key=\"+f),a+=\"-->\",o.write(a);const d=e.props[B];if(d){o.write(d),o.write(fn);return}if(n)for(const m of n)Vn(m.type,m.props,o);const v=Sr(e.children,s,r,o,i);return R(v,()=>{var y;if(!u&&!c){o.write(fn);return}let m;if(u){T();const g=(y=r.$projectedChildren$)==null?void 0:y[f];if(g){const[p,E]=r.$projectedCtxs$,h=gt(p);h.$slotCtx$=t,r.$projectedChildren$[f]=void 0,m=ee(g,h,E,o,i)}}return c&&(m=R(m,()=>c(o))),R(m,()=>{o.write(fn)})})},fn=\"<!--/qv-->\",Ti=e=>{let t=\"\";for(const n in e){if(n===B)continue;const s=e[n];s!=null&&(t+=\" \"+(s===\"\"?n:n+'=\"'+s+'\"'))}return t},ki=e=>{let t=\"\";for(const n in e){if(n===\"children\"||n===B)continue;const s=e[n];s!=null&&(t+=\" \"+(s===\"\"?n:n+\"=\"+s))}return t},Vn=(e,t,n)=>{if(n.write(\"<\"+e+Ti(t)+\">\"),!!Er[e])return;const r=t[B];r!=null&&n.write(r),n.write(`</${e}>`)},Ii=(e,t,n,s,r,o,i)=>{const c=r.props;return Mi(e,s,c.props),R(qt(e,s),$=>{const l=s.$element$,a=$.rCtx,u=X(t.$static$.$locale$,l,void 0);u.$subscriber$=[0,l],u.$renderCtx$=a;const f={$static$:t.$static$,$projectedChildren$:Ri(r.children,t),$projectedCtxs$:[e,t],$invocationContext$:u},d=[];if(s.$appendStyles$){const g=!!(o&hr)?t.$static$.$headNodes$:d;for(const p of s.$appendStyles$)g.push(Ie(\"style\",{[Kt]:p.styleId,[B]:p.content,hidden:\"\"},null,null,0,null))}const v=rt(e),x=s.$scopeIds$?di(s.$scopeIds$):void 0,m=me(r.type,{[sr]:x,[zn]:v,children:$.node},0,r.key);return s.$id$=v,t.$static$.$contexts$.push(s),vr(m,s,d,a,f,n,o,y=>{if(s.$flags$&yt){const E=Pt(1),h=E.li;h.push(...s.li),s.$flags$&=-3,E.$id$=rt(e);const w={type:\"placeholder\",hidden:\"\",\"q:id\":E.$id$};t.$static$.$contexts$.push(E);const _=lr(h);for(const b of _){const S=xr(b[0]);w[S]=ao(b[1],e.$static$.$containerState$,E),vn(S,e.$static$.$containerState$)}Vn(\"script\",w,y)}const g=f.$projectedChildren$;let p;if(g){const E=Object.keys(g).map(b=>{const S=g[b];if(S)return Ie(\"q:template\",{[j]:b||!0,hidden:!0,\"aria-hidden\":\"true\"},null,S,0,null)}),[h,w]=f.$projectedCtxs$,_=gt(h);_.$slotCtx$=s,p=ee(E,_,w,y,0,void 0)}return i?R(p,()=>i(y)):p})})},Ri=(e,t)=>{const n=br(e,t);if(n===null)return;const s={};for(const r of n){let o=\"\";Pe(r)&&(o=r.props[j]||\"\"),(s[o]||(s[o]=[])).push(r)}return s},Pt=e=>{const t=new yr(e);return nn(t)},Gn=(e,t,n,s,r,o)=>{var l;const i=e.type,c=t.$cmpCtx$;if(typeof i==\"string\"){const a=e.key,u=e.props,f=e.immutableProps||F,d=Pt(1),v=d.$element$,x=i===\"head\";let m=\"<\"+i,y=!1,g=!1,p=\"\",E=null;const h=(b,S,I)=>{if(b===\"ref\"){S!==void 0&&(os(S,v),g=!0);return}if(Un(b)){Wn(d.li,b,S,void 0);return}if(Q(S)&&(T(),I?S=$e(S,[1,v,S,c.$element$,b]):S=$e(S,[2,c.$element$,S,v,b]),y=!0),b===B){E=S;return}b.startsWith(Mt)&&vn(b.slice(Mt.length),t.$static$.$containerState$);let q;const L=b===\"htmlFor\"?\"for\":b;L===\"class\"||L===\"className\"?p=At(S):L===\"style\"?q=Zt(S):dr(L)||L===\"draggable\"||L===\"spellcheck\"?(q=S!=null?String(S):null,S=q):S===!1||S==null?q=null:q=String(S),q!=null&&(L===\"value\"&&i===\"textarea\"?E=Oe(q):Ci(L)||(m+=\" \"+(S===!0?L:L+'=\"'+Oe(q)+'\"')))};for(const b in u){let S=!1,I;b in f?(S=!0,I=f[b],I===P&&(I=u[b])):I=u[b],h(b,I,S)}for(const b in f){if(b in u)continue;const S=f[b];S!==P&&h(b,S,!0)}const w=d.li;if(c){if((l=c.$scopeIds$)!=null&&l.length){const b=c.$scopeIds$.join(\" \");p=p?`${b} ${p}`:b}c.$flags$&yt&&(w.push(...c.li),c.$flags$&=-3)}if(x&&(r|=ws),i in qi&&(r|=Es),i in Ai&&(r|=mr),p&&(m+=' class=\"'+Oe(p)+'\"'),w.length>0){const b=lr(w),S=(r&Es)!==0;for(const I of b){const q=S?xr(I[0]):I[0];m+=\" \"+q+'=\"'+ao(I[1],t.$static$.$containerState$,d)+'\"',vn(q,t.$static$.$containerState$)}}if(a!=null&&(m+=' q:key=\"'+Oe(a)+'\"'),g||y||w.length>0){if(g||y||Di(w)){const b=rt(t);m+=' q:id=\"'+b+'\"',d.$id$=b}n.$static$.$contexts$.push(d)}if(r&ws&&(m+=\" q:head\"),m+=\">\",s.write(m),i in Er)return;if(E!=null){s.write(String(E)),s.write(`</${i}>`);return}i===\"html\"?r|=hr:r&=-5,e.flags&it&&(r|=gr);const _=ee(e.children,t,n,s,r);return R(_,()=>{if(x){for(const b of n.$static$.$headNodes$)Vn(b.type,b.props,s);n.$static$.$headNodes$.length=0}if(!o){s.write(`</${i}>`);return}return R(o(s),()=>{s.write(`</${i}>`)})})}if(i===ve){const a=Pt(111);return t.$slotCtx$?(a.$parentCtx$=t.$slotCtx$,a.$realParentCtx$=t.$cmpCtx$):a.$parentCtx$=t.$cmpCtx$,c&&c.$flags$&ts&&Li(c,a),vr(e,a,void 0,t,n,s,r,o)}if(i===_r){s.write(e.props.data);return}if(i===Tr)return _i(e,t,n,s,r);const $=U(n.$invocationContext$,i,e.props,e.key,e.flags,e.dev);return pr($,e)?Gn(me(ve,{children:$},0,e.key),t,n,s,r,o):ee($,t,n,s,r,o)},ee=(e,t,n,s,r,o)=>{var i;if(!(e==null||typeof e==\"boolean\"))if(ye(e)||typeof e==\"number\")s.write(Oe(String(e)));else{if(Pe(e))return Gn(e,t,n,s,r,o);if(A(e))return Sr(e,t,n,s,r);if(Q(e)){const c=r&mr,$=(i=t.$cmpCtx$)==null?void 0:i.$element$;let l;if($)if(c)l=U(n.$invocationContext$,()=>e.value);else{const a=rt(t),u=r&gr?[3,\"#\"+a,e,\"#\"+a]:[4,$,e,\"#\"+a];if(l=$e(e,u),ye(l)){const f=ot(l);n.$static$.$textNodes$.set(f,a)}s.write(`<!--t=${a}-->`),ee(l,t,n,s,r,o),s.write(\"<!---->\");return}s.write(Oe(ot(l)));return}else{if(D(e))return s.write(It),e.then(c=>ee(c,t,n,s,r,o));ce(\"A unsupported value was passed to the JSX, skipping render. Value:\",e);return}}},Sr=(e,t,n,s,r)=>{if(e==null)return;if(!A(e))return ee(e,t,n,s,r);const o=e.length;if(o===1)return ee(e[0],t,n,s,r);if(o===0)return;let i=0;const c=[];return e.reduce(($,l,a)=>{const u=[];c.push(u);const d=ee(l,t,n,$?{write(v){i===a?s.write(v):u.push(v)}}:s,r);if($||D(d)){const v=()=>{i++,c.length>i&&c[i].forEach(x=>s.write(x))};return D(d)?$?Promise.all([d,$]).then(v):d.then(v):$.then(v)}else{i++;return}},void 0)},br=(e,t)=>{if(e==null)return null;const n=wr(e,t),s=A(n)?n:[n];return s.length===0?null:s},wr=(e,t)=>{if(e==null)return null;if(A(e))return e.flatMap(n=>wr(n,t));if(Pe(e)&&J(e.type)&&e.type!==_r&&e.type!==Tr&&e.type!==ve){const n=U(t.$invocationContext$,e.type,e.props,e.key,e.flags);return br(n,t)}return e},Mi=(e,t,n)=>{const s=Object.keys(n),r=Yt();if(t.$props$=ht(r,e.$static$.$containerState$),s.length===0)return;const o=r[P]=n[P]??F;for(const i of s)i===\"children\"||i===j||(Q(o[i])?r[fe+i]=o[i]:r[i]=n[i])},qi={head:!0,style:!0,script:!0,link:!0,meta:!0},Ai={title:!0,style:!0,script:!0,noframes:!0,textarea:!0},Er={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Pi=/[&<>'\"]/g,vn=(e,t)=>{t.$events$.add(Br(e))},Oe=e=>e.replace(Pi,t=>{switch(t){case\"&\":return\"&amp;\";case\"<\":return\"&lt;\";case\">\":return\"&gt;\";case'\"':return\"&quot;\";case\"'\":return\"&#39;\";default:return\"\"}}),Ni=/[>/=\"'\\u0009\\u000a\\u000c\\u0020]/,Ci=e=>Ni.test(e),Di=e=>e.some(t=>t[1].$captureRef$&&t[1].$captureRef$.length>0),Li=(e,t)=>{const n=e.$dynamicSlots$||(e.$dynamicSlots$=[]);n.includes(t)||n.push(t)},xr=e=>e===\"on:qvisible\"?\"on-document:qinit\":e,Vl=(e,t,n)=>new wn(e,t,n),Oi=e=>{const t=\"null\";T();let n=\"\";for(let s=0;s<e.$args$.length;s++)n+=`p${s},`;return`(${n})=>(${t})`},Ie=(e,t,n,s,r,o,i)=>{Vt();const c=o==null?null:String(o);return new Ke(e,t||F,n,s,r,c)},zi=(e,t,n,s,r,o)=>{let i=null;return t&&\"children\"in t&&(i=t.children,delete t.children),Ie(e,t,n,i,s,r)},me=(e,t,n,s,r)=>{const o=s==null?null:String(s),i=t??{};if(typeof e==\"string\"&&P in i){const $=i[P];delete i[P];const l=i.children;delete i.children;for(const[a,u]of Object.entries($))u!==P&&(delete i[a],i[a]=u);return Ie(e,null,i,l,n,s)}const c=new Ke(e,i,null,i.children,n,o);return typeof e==\"string\"&&t&&delete t.children,c},Qi=(e,t,n)=>{const r=Ue(()=>{const i=t.children;return typeof e==\"string\"&&delete t.children,i});return ye(e)&&\"className\"in t&&(t.class=t.className,delete t.className),new Ke(e,t,null,r,0,null)},Nt=\":skipRender\";class Ke{constructor(t,n,s,r,o,i=null){k(this,\"type\");k(this,\"props\");k(this,\"immutableProps\");k(this,\"children\");k(this,\"flags\");k(this,\"key\");k(this,\"dev\");this.type=t,this.props=n,this.immutableProps=s,this.children=r,this.flags=o,this.key=i}}const ve=e=>e.children,Pe=e=>e instanceof Ke,ct=e=>e.children,Jn=Symbol(\"skip render\"),_r=()=>null,Tr=()=>null,Kn=(e,t,n)=>{const s=!(t.$flags$&es),r=t.$element$,o=e.$static$.$containerState$;return o.$hostsStaging$.delete(t),o.$subsManager$.$clearSub$(r),R(qt(e,t),i=>{const c=e.$static$,$=i.rCtx,l=X(e.$static$.$locale$,r);if(c.$hostElements$.add(r),l.$subscriber$=[0,r],l.$renderCtx$=$,s&&t.$appendStyles$)for(const u of t.$appendStyles$)jc(c,u);const a=Se(i.node,l);return R(a,u=>{const f=Fi(r,u),d=Xn(t);return R(zt($,d,f,n),()=>{t.$vdom$=f})})})},Xn=e=>(e.$vdom$||(e.$vdom$=Qt(e.$element$)),e.$vdom$);class he{constructor(t,n,s,r,o,i){k(this,\"$type$\");k(this,\"$props$\");k(this,\"$immutableProps$\");k(this,\"$children$\");k(this,\"$flags$\");k(this,\"$key$\");k(this,\"$elm$\",null);k(this,\"$text$\",\"\");k(this,\"$signal$\",null);k(this,\"$id$\");k(this,\"$dev$\");this.$type$=t,this.$props$=n,this.$immutableProps$=s,this.$children$=r,this.$flags$=o,this.$key$=i,this.$id$=t+(i?\":\"+i:\"\")}}const kr=(e,t)=>{const{key:n,type:s,props:r,children:o,flags:i,immutableProps:c}=e;let $=\"\";if(ye(s))$=s;else if(s===ve)$=Ve;else if(J(s)){const a=U(t,s,r,n,i,e.dev);return pr(a,e)?kr(me(ve,{children:a},0,n),t):Se(a,t)}else throw O(Jo,s);let l=pe;return o!=null?R(Se(o,t),a=>(a!==void 0&&(l=A(a)?a:[a]),new he($,r,c,l,i,n))):new he($,r,c,l,i,n)},Fi=(e,t)=>{const n=t===void 0?pe:A(t)?t:[t],s=new he(\":virtual\",{},null,n,0,null);return s.$elm$=e,s},Se=(e,t)=>{if(!(e==null||typeof e==\"boolean\"))if(Ir(e)){const n=new he(\"#text\",F,null,pe,0,null);return n.$text$=String(e),n}else{if(Pe(e))return kr(e,t);if(Q(e)){const n=new he(\"#signal\",F,null,pe,0,null);return n.$signal$=e,n}else if(A(e)){const n=Cn(e.flatMap(s=>Se(s,t)));return R(n,s=>s.flat(100).filter(nr))}else{if(D(e))return e.then(n=>Se(n,t));if(e===Jn)return new he(Nt,F,null,pe,0,null);ce(\"A unsupported value was passed to the JSX, skipping render. Value:\",e);return}}},Ir=e=>ye(e)||typeof e==\"number\",Rr=e=>{le(e,Ln)===\"paused\"&&Hi(e)},Ui=e=>{const t=Jt(e),s=e===t.documentElement?t.body:e,r=Gi(s,\"type\");if(r){const o=r.firstChild.data;return JSON.parse(Vi(o)||\"{}\")}},Wi=(e,t)=>{const n=JSON.parse(e);if(typeof n!=\"object\")return null;const{_objs:s,_entry:r}=n;if(typeof s>\"u\"||typeof r>\"u\")return null;let o={},i={};if(Me(t)&&qe(t)){const l=ss(t);l&&(i=sn(l),o=l.ownerDocument)}const c=ho(i,o);for(let l=0;l<s.length;l++){const a=s[l];ye(a)&&(s[l]=a===cn?void 0:c.prepare(a))}const $=l=>s[se(l)];for(const l of s)Mr(l,$,c);return $(r)},Hi=e=>{if(!Pc(e)){ce();return}const t=e._qwikjson_??Ui(e);if(e._qwikjson_=null,!t){ce();return}const n=Jt(e),s=e.getAttribute(rr);e===n.documentElement&&n.body;const o=or(n,s),i=sn(e),c=new Map,$=new Map;let l=null,a=0;const u=n.createTreeWalker(e,Ac);for(;l=u.nextNode();){const g=l.data;if(a===0){if(g.startsWith(\"qv \")){const p=Ki(g);p>=0&&c.set(p,l)}else if(g.startsWith(\"t=\")){const p=g.slice(2),E=se(p),h=Ji(l);c.set(E,h),$.set(E,h.data)}}g===\"cq\"?a++:g===\"/cq\"&&a--}const f=e.getElementsByClassName(\"qc📦\").length!==0;e.querySelectorAll(\"[q\\\\:id]\").forEach(g=>{if(f&&g.closest(\"[q\\\\:container]\")!==e)return;const p=le(g,zn);T(p,\"resume: element missed q:id\",g);const E=se(p);c.set(E,g)});const d=ho(i,n),v=new Map,x=new Set,m=g=>(N(typeof g==\"string\"&&g.length>0,\"resume: id must be an non-empty string, got:\",g),v.has(g)?v.get(g):y(g)),y=g=>{if(g.startsWith(\"#\")){const _=g.slice(1),b=se(_);N(c.has(b),\"missing element for id:\",_);const S=c.get(b);if(T(S,\"missing element for id:\",_),Bt(S)){if(!S.isConnected){v.set(g,void 0);return}const I=bt(S);return v.set(g,I),K(I,i),I}else if(Je(S))return v.set(g,S),K(S,i),S;return v.set(g,S),S}else if(g.startsWith(\"@\")){const _=g.slice(1),b=se(_),S=o[b];return T(S,\"missing inlined function for id:\",_),S}else if(g.startsWith(\"*\")){const _=g.slice(1),b=se(_);N(c.has(b),\"missing element for id:\",_);const S=$.get(b);return T(S,\"missing element for id:\",_),v.set(g,S),S}const p=se(g),E=t.objs;N(E.length>p,\"resume: index is out of bounds\",g);let h=E[p];ye(h)&&(h=h===cn?void 0:d.prepare(h));let w=h;for(let _=g.length-1;_>=0;_--){const b=g[_],S=K$[b];if(!S)break;w=S(w,i)}return v.set(g,w),!Ir(h)&&!x.has(p)&&(x.add(p),Bi(h,p,t.subs,m,i,d),Mr(h,m,d)),w};i.$elementIndex$=1e5,i.$pauseCtx$={getObject:m,meta:t.ctx,refs:t.refs},oe(e,Ln,\"resumed\"),Qo(),oi(e,\"qresume\",void 0,!0)},Bi=(e,t,n,s,r,o)=>{const i=n[t];if(i){const c=[];let $=0;for(const l of i)if(l.startsWith(\"_\"))$=parseInt(l.slice(1),10);else{const a=tl(l,s);a&&c.push(a)}if($>0&&jt(e,$),!o.subs(e,c)){const l=r.$proxyMap$.get(e);l?V(l).$addSubs$(c):ht(e,r,c)}}},Mr=(e,t,n)=>{if(!n.fill(e,t)&&e&&typeof e==\"object\"){if(A(e))for(let s=0;s<e.length;s++)e[s]=t(e[s]);else if(pt(e))for(const s in e)e[s]=t(e[s])}},Vi=e=>e.replace(/\\\\x3C(\\/?script)/gi,\"<$1\"),Gi=(e,t)=>{let n=e.lastElementChild;for(;n;){if(n.tagName===\"SCRIPT\"&&le(n,t)===\"qwik/json\")return n;n=n.previousElementSibling}},Ji=e=>{const t=e.nextSibling;if(Ys(t))return t;{const n=e.ownerDocument.createTextNode(\"\");return e.parentElement.insertBefore(n,e),n}},Ki=e=>{const t=e.indexOf(\"q:id=\");return t>0?se(e.slice(t+5)):-1},en=()=>{const e=Qr();let t=e.$qrl$;if(t)T(t.$captureRef$,\"invoke: qrl $captureRef$ must be defined inside useLexicalScope()\",t);else{const n=e.$element$;T(n,\"invoke: element must be defined inside useLexicalScope()\",e);const s=ss(n);T(s,\"invoke: cant find parent q:container of\",n),t=on(decodeURIComponent(String(e.$url$)),s),Rr(s);const r=K(n,sn(s));uo(t,r)}return t.$captureRef$},Xi=(e,t)=>{try{const n=t[0],s=e.$static$;switch(n){case 1:case 2:{let r,o;n===1?(r=t[1],o=t[3]):(r=t[3],o=t[1]);const i=te(r);if(i==null)return;const c=t[4],$=r.namespaceURI===St;s.$containerState$.$subsManager$.$clearSignal$(t);let l=$e(t[2],t.slice(0,-1));c===\"class\"?l=Bn(l,te(o)):c===\"style\"&&(l=Zt(l));const a=Xn(i);return c in a.$props$&&a.$props$[c]===l?void 0:(a.$props$[c]=l,$s(s,r,c,l,$))}case 3:case 4:{const r=t[3];if(!s.$visited$.includes(r)){s.$containerState$.$subsManager$.$clearSignal$(t);const o=void 0;let i=$e(t[2],t.slice(0,-1));const c=rl();Array.isArray(i)&&(i=new Ke(ve,{},null,i,0,null));let $=Se(i,o);if(D($))Te(\"Rendering promises in JSX signals is not supported\");else{$===void 0&&($=Se(\"\",o));const l=Gr(r),a=Yi(t[1]);if(e.$cmpCtx$=K(a,e.$static$.$containerState$),l.$type$==$.$type$&&l.$key$==$.$key$&&l.$id$==$.$id$)Ce(e,l,$,0);else{const u=[],f=l.$elm$,d=xe(e,$,0,u);u.length&&Te(\"Rendering promises in JSX signals is not supported\"),c[3]=d,Qe(e.$static$,r.parentElement,d,f),f&&as(s,f)}}}}}}catch{}};function Yi(e){for(;e;){if(qe(e))return e;e=e.parentElement}throw new Error(\"Not found\")}const ji=(e,t)=>{if(e[0]===0){const n=e[1];Zn(n)?Yn(n,t):Zi(n,t)}else ec(e,t)},Zi=(e,t)=>{const n=G();n||Rr(t.$containerEl$);const s=K(e,t);if(T(s.$componentQrl$,\"render: notified host element must have a defined $renderQrl$\",s),s.$flags$&lt)return;if(s.$flags$|=lt,t.$hostsRendering$!==void 0)t.$hostsStaging$.add(s);else{if(n){ce();return}t.$hostsNext$.add(s),jn(t)}},ec=(e,t)=>{const n=t.$hostsRendering$!==void 0;t.$opsNext$.add(e),n||jn(t)},Yn=(e,t)=>{if(e.$flags$&Dt)return;e.$flags$|=Dt,t.$hostsRendering$!==void 0?t.$taskStaging$.add(e):(t.$taskNext$.add(e),jn(t))},jn=e=>(e.$renderPromise$===void 0&&(e.$renderPromise$=Pn().nextTick(()=>qr(e))),e.$renderPromise$),tc=()=>{const[e]=en();Yn(e,sn(ss(e.$el$)))},qr=async e=>{const t=e.$containerEl$,n=Jt(t);try{const s=ur(n,e),r=s.$static$,o=e.$hostsRendering$=new Set(e.$hostsNext$);e.$hostsNext$.clear(),await sc(e,s),e.$hostsStaging$.forEach($=>{o.add($)}),e.$hostsStaging$.clear();const i=Array.from(e.$opsNext$);e.$opsNext$.clear();const c=Array.from(o);ic(c),!e.$styleMoved$&&c.length>0&&(e.$styleMoved$=!0,(t===n.documentElement?n.body:t).querySelectorAll(\"style[q\\\\:style]\").forEach(l=>{e.$styleIds$.add(le(l,Kt)),to(r,n.head,l)}));for(const $ of c){const l=$.$element$;if(!r.$hostElements$.has(l)&&$.$componentQrl$){N(l.isConnected,\"element must be connected to the dom\"),r.$roots$.push($);try{await Kn(s,$,nc(l.parentElement))}catch(a){Te(a)}}}if(i.forEach($=>{Xi(s,$)}),r.$operations$.push(...r.$postOperations$),r.$operations$.length===0){Cs(r),await xs(e,s);return}return await Bc(r),Cs(r),xs(e,s)}catch(s){Te(s)}},nc=e=>{let t=0;return e&&(e.namespaceURI===St&&(t|=Ee),e.tagName===\"HEAD\"&&(t|=is)),t},xs=async(e,t)=>{const n=t.$static$.$hostElements$;await oc(e,t,(r,o)=>r.$flags$&Nr?o?n.has(r.$el$):!0:!1),e.$hostsStaging$.forEach(r=>{e.$hostsNext$.add(r)}),e.$hostsStaging$.clear(),e.$hostsRendering$=void 0,e.$renderPromise$=void 0,e.$hostsNext$.size+e.$taskNext$.size+e.$opsNext$.size>0&&(e.$renderPromise$=qr(e))},Sn=e=>(e.$flags$&Cr)!==0,_s=e=>(e.$flags$&Dr)!==0,sc=async(e,t)=>{const n=e.$containerEl$,s=[],r=[];e.$taskNext$.forEach(o=>{Sn(o)&&(r.push(R(o.$qrl$.$resolveLazy$(n),()=>o)),e.$taskNext$.delete(o)),_s(o)&&(s.push(R(o.$qrl$.$resolveLazy$(n),()=>o)),e.$taskNext$.delete(o))});do if(e.$taskStaging$.forEach(o=>{Sn(o)?r.push(R(o.$qrl$.$resolveLazy$(n),()=>o)):_s(o)?s.push(R(o.$qrl$.$resolveLazy$(n),()=>o)):e.$taskNext$.add(o)}),e.$taskStaging$.clear(),r.length>0){const o=await Promise.all(r);Ct(o),await Promise.all(o.map(i=>Lt(i,e,t))),r.length=0}while(e.$taskStaging$.size>0);if(s.length>0){const o=await Promise.all(s);Ct(o);for(const i of o)Lt(i,e,t)}},rc=(e,t)=>{const n=e.$containerEl$,s=e.$taskStaging$;if(!s.size)return;const r=[];let o=20;const i=()=>{if(s.forEach(c=>{Sn(c)&&r.push(R(c.$qrl$.$resolveLazy$(n),()=>c))}),s.clear(),r.length>0)return Promise.all(r).then(async c=>{if(Ct(c),await Promise.all(c.map($=>Lt($,e,t))),r.length=0,--o&&s.size>0)return i();o||ce(`Infinite task loop detected. Tasks:"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/test.*mock/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/mock.*test/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/return.*mock/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/work.*in.*progress/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/basic.*implementation/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/disable.*security/i",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/skip.*validation/i",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/skip.*check/i",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 4,
        "content": "`:\"\",g(o=>`</${o.value}>`,[n],\"`</${p0.value}>`\")],1,null),1,null),1,null)],1,null)],1,null)],1,null)],1,\"IM_7\")},Hl=O(b(Vl,\"s_r0j4X6otVtI\")),Kl={title:\"Components - Design System\",meta:[{name:\"description\",content:\"Manage and preview your design system components\"}]},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Hl,head:Kl},Symbol.toStringTag,{value:\"Module\"}));async function xe(n){const t=E();if(!t)throw new Error(\"Supabase client not available - check configuration\");const l=n.get(\"sb-auth-token\");if(!l)return null;try{const{data:{user:s}}=await t.auth.getUser(l.value);return s}catch{return null}}const Wl=n=>e(\"ds-file-upload\",{onDsUploadSuccess$:n.onUploadSuccess$,onDsUploadError$:n.onUploadError$,onDsUploadComplete$:n.onUploadComplete$},{endpoint:g(t=>t.endpoint||\"/api/upload\",[n],'p0.endpoint||\"/api/upload\"'),accept:g(t=>t.accept||\"image/*,application/pdf,text/*\",[n],'p0.accept||\"image/*,application/pdf,text/*\"'),maxSize:g(t=>t.maxSize||10485760,[n],\"p0.maxSize||10*1024*1024\"),multiple:g(t=>t.multiple||!1,[n],\"p0.multiple||false\"),bucket:g(t=>t.bucket||\"uploads\",[n],'p0.bucket||\"uploads\"'),class:g(t=>t.class,[n],\"p0.class\")},null,2,\"iB_2\"),Jl=O(b(Wl,\"s_C03Fqoboh3U\")),Zl=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{data:s}=await l.from(\"profiles\").select(\"*\").eq(\"id\",t.id).single(),{data:a,error:r}=await l.from(\"file_metadata\").select(\"*\").eq(\"user_id\",t.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1}).limit(50),{data:o}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),i=c=>{const m=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(c===0)return\"0 B\";const d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(1)} ${m[d]}`},u=(a||[]).map(c=>({id:c.id,name:c.file_name,size:c.file_size,type:c.mime_type||\"application/octet-stream\",url:`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.storage_path}`,uploadedAt:c.created_at,thumbnailUrl:c.thumbnail_path?`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.thumbnail_path}`:void 0,tags:c.tags||[]}));return{user:t,profile:s,files:u,stats:{totalFiles:(o==null?void 0:o.total_files)||0,totalSize:(o==null?void 0:o.total_size)||0,storageUsed:i((o==null?void 0:o.total_size)||0)},hasError:!!r}},we=ae(b(Zl,\"s_00pXWz0FAag\")),Yl=async()=>{var a,r;const[n,t,l,s]=T();if((a=t.value)!=null&&a.user){n.value=!0;try{const o=await fetch(\"/api/files/list?limit=50\",{headers:{Cookie:document.cookie}});if(o.ok){const i=await o.json();l.value=i.files}}catch(o){const i=o instanceof Error?o.message:\"Unknown error\";p.error(\"Failed to refresh file list\",{error:i,endpoint:\"/api/files/list\",userId:(r=t.value.user)==null?void 0:r.id}),s.value=`❌ Failed to refresh file list: ${i}`,l.value=[]}finally{n.value=!1}}},Xl=n=>{const[t,l,s]=T(),{file:a}=n.detail;s.value=`✅ Uploaded: ${a.name}`,t(),l.value+=1},es=n=>{const[t]=T(),{file:l,error:s}=n.detail;t.value=`❌ Failed: ${l.name} - ${s}`},ts=n=>{const[t]=T(),{results:l}=n.detail,s=l.filter(r=>r.status===\"success\").length,a=l.filter(r=>r.status===\"error\").length;t.value=`📊 Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{t.value=\"\"},5e3)},ls=()=>{ne();const n=we(),t=y(\"\"),l=y(0),s=y([]),a=y(!1);if(!n.value)return e(\"div\",null,{class:\"flex items-center justify-center h-64\"},e(\"div\",null,{class:\"text-gray-500\"},\"Loading...\",3,null),3,\"Wk_0\");const o=b(Xl,\"s_cdAui9V38SU\",[b(Yl,\"s_BCO4F9EvjfI\",[a,n,s,t]),l,t]),i=b(es,\"s_2VhBVnlzOS4\",[t]),u=b(ts,\"s_tUSlurN8mDc\",[t]);return e(\"div\",null,{class:\"space-y-8\"},[e(\"div\",null,{class:\"border-b border-gray-200 pb-4\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Media Library\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Upload and manage your files with intelligent storage routing\",3,null)],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-3 gap-6\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Total Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.totalFiles,[n],\"p0.value.stats.totalFiles\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Used\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.storageUsed,[n],\"p0.value.stats.storageUsed\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Type\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-2\"},[e(\"span\",null,{class:\"block\"},\"✅ R2: All files (simplified architecture)\",3,null),e(\"span\",null,{class:\"block text-gray-400\"},\"Up to 5GB per file\",3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900 mb-4\"},\"Upload Files\",3,null),M(Jl,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf,text/*,video/*\",maxSize:52428800,multiple:!0,bucket:\"uploads\",class:\"w-full\",onUploadSuccess$:o,onUploadError$:i,onUploadComplete$:u,[F]:{endpoint:F,accept:F,maxSize:F,multiple:F,bucket:F,class:F,onUploadSuccess$:F,onUploadError$:F,onUploadComplete$:F}},3,\"Wk_1\"),t.value&&e(\"div\",null,{class:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\"},e(\"p\",null,{class:\"text-blue-800 text-sm\"},g(c=>c.value,[t],\"p0.value\"),3,null),3,\"Wk_2\"),e(\"div\",null,{class:\"mt-4 text-sm text-gray-600\"},[e(\"p\",null,{class:\"mb-2\"},[e(\"strong\",null,null,\"Simplified Storage:\",3,null),\" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"],3,null),e(\"p\",null,null,[e(\"strong\",null,null,\"Supported formats:\",3,null),\" Images, PDFs, text files, videos up to 50MB\"],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900\"},\"Your Files\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},a.value?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"🔄\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"Loading files...\",3,null)],3,\"Wk_3\"):(s.value.length>0?s.value:n.value.files).length===0?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"📁\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"No files yet\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Upload your first file using the upload area above\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Files will be stored securely and optimized for global delivery\",3,null)],3,\"Wk_4\"):e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"},(s.value.length>0?s.value:n.value.files).map(c=>e(\"div\",null,{class:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-3\"},[e(\"div\",null,{class:\"text-sm font-medium text-gray-900 truncate\"},v(c,\"name\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\"},\"R2\",3,null)],1,null),e(\"div\",null,{class:\"text-sm text-gray-600 space-y-1\"},[e(\"div\",null,null,[\"Size: \",(c.size/1024/1024).toFixed(2),\" MB\"],1,null),e(\"div\",null,null,[\"Type: \",v(c,\"type\")],1,null),e(\"div\",null,null,[\"Uploaded: \",new Date(c.uploadedAt).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"mt-4 flex space-x-2\"},[e(\"button\",null,{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\"},\"Download\",3,null),e(\"button\",null,{class:\"text-red-600 hover:text-red-800 text-sm font-medium\"},\"Delete\",3,null)],3,null)],1,c.id)),1,null),1,null)],1,null)],1,\"Wk_5\")},ss=O(b(ls,\"s_BDZLd0X4JxU\")),ns={title:\"Media Library - Dashboard\",meta:[{name:\"description\",content:\"Upload and manage your media files with intelligent storage routing\"}]},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,head:ns,useMediaData:we},Symbol.toStringTag,{value:\"Module\"})),rs=async()=>{const[n,t,l]=T();try{t.value=!0,n.value=\"\";const s=await fetch(\"/api/content/pages\");if(s.ok){const a=await s.json();l.value=a.pages||[]}else{const a=await s.json();n.value=a.error||\"Failed to load pages\"}}catch{n.value=\"Network error loading pages\"}finally{t.value=!1}},os=async()=>{const[n,t,l,s,a,r,o]=T();if(!r.value.trim()){t.value=\"Page title is required\";return}try{n.value=!0,t.value=\"\";const i={title:r.value.trim(),slug:a.value.trim()||void 0,description:s.value.trim()||void 0,template:\"default\",published:!1},u=await fetch(\"/api/content/pages\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});if(u.ok)await u.json(),r.value=\"\",a.value=\"\",s.value=\"\",o.value=!1,await l();else{const c=await u.json();t.value=c.error||\"Failed to create page\"}}catch{t.value=\"Network error creating page\"}finally{n.value=!1}},is=()=>{const[n,t]=T();!n.value&&t.value&&(n.value=t.value.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"))},us=async()=>{const[n]=T();await n()},cs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y(\"\"),a=y(!1),r=y(\"\"),o=y(\"\"),i=y(\"\"),u=b(rs,\"s_RSy4z08mHuY\",[s,t,n]),c=b(os,\"s_U0vSjZxjf0g\",[l,s,u,i,o,r,a]),m=b(is,\"s_OHe4b3BmXIA\",[o,r]);return j(b(us,\"s_q3arvP17QJ0\",[u])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your visual pages and landing pages\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_XklD0zp44XY\",[s,a])},g(d=>d.value?\"Cancel\":\"Create Page\",[a],'p0.value?\"Cancel\":\"Create Page\"'),3,null)],3,null),s.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"svg\",null,{class:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),3,null),e(\"div\",null,{class:\"ml-3\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(d=>d.value,[s],\"p0.value\"),3,null),3,null)],3,null),3,\"h8_0\"),a.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Page\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Page Title *\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter page title\",value:g(d=>d.value,[r],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_iUIdYKxt004\",[r,m])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},[\"Page URL Slug\",e(\"span\",null,{class:\"text-gray-500 text-xs\"},\"(auto-generated from title)\",3,null)],3,null),e(\"div\",null,{class:\"flex\"},[e(\"span\",null,{class:\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\"},\"/\",3,null),e(\"input\",null,{type:\"text\",class:\"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"your-page-url\",value:g(d=>d.value,[o],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_P0uR1QIAYP0\",[o])},null,3,null)],3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Description (Optional)\",3,null),e(\"textarea\",null,{class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Brief description of the page\",rows:3,value:g(d=>d.value,[i],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_0CoyY4fcrIQ\",[i])},null,3,null)],3,null),e(\"div\",null,{class:\"flex gap-2\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",disabled:g((d,h)=>d.value||!h.value.trim(),[l,r],\"p0.value||!p1.value.trim()\"),onClick$:c},[l.value&&e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,\"h8_1\"),g(d=>d.value?\"Creating...\":\"Create Page\",[l],'p0.value?\"Creating...\":\"Create Page\"')],1,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_NId9t3ngBME\",[s,i,o,r,a])},\"Cancel\",3,null)],1,null)],1,null)],1,\"h8_2\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b flex items-center justify-between\"},[e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Pages\",3,null),!t.value&&n.value.length>0&&e(\"span\",null,{class:\"text-sm text-gray-500\"},[g(d=>d.value.length,[n],\"p0.value.length\"),\" page\",g(d=>d.value.length===1?\"\":\"s\",[n],'p0.value.length===1?\"\":\"s\"')],3,\"h8_3\")],1,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},e(\"div\",null,{class:\"flex items-center justify-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),\"Loading pages...\"],3,null),3,\"h8_4\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-12 text-center text-gray-500\"},[e(\"svg\",null,{class:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"},null,3,null),3,null),e(\"h3\",null,{class:\"mt-2 text-sm font-medium text-gray-900\"},\"No pages\",3,null),e(\"p\",null,{class:\"mt-1 text-sm text-gray-500\"},\"Get started by creating your first page.\",3,null),e(\"div\",null,{class:\"mt-6\"},e(\"button\",null,{class:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",onClick$:C(\"s_7wN6ZaymF0U\",[s,a])},[e(\"svg\",null,{class:\"-ml-1 mr-2 h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"},null,3,null),3,null),\"Create Page\"],3,null),3,null)],3,\"h8_5\"):n.value.map(d=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50 transition-colors\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,{class:\"min-w-0 flex-1\"},[e(\"div\",null,{class:\"flex items-center\"},[e(\"h3\",null,{class:\"font-medium text-gray-900 truncate\"},v(d,\"title\"),1,null),e(\"span\",{class:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,d.published?\"Published\":\"Draft\",1,null)],1,null),e(\"div\",null,{class:\"mt-1 flex items-center text-sm text-gray-500\"},[e(\"span\",null,null,[\"/\",v(d,\"slug\")],1,null),d.description&&M(Pe,{children:[e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"truncate\"},v(d,\"description\"),1,null)]},1,\"h8_6\")],1,null),e(\"div\",null,{class:\"mt-2 flex items-center text-xs text-gray-400\"},[e(\"span\",null,null,[\"Created \",new Date(d.created_at).toLocaleDateString()],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[v(d,\"view_count\"),\" view\",d.view_count===1?\"\":\"s\"],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"capitalize\"},[v(d,\"template\"),\" template\"],1,null)],1,null)],1,null),e(\"div\",null,{class:\"ml-4 flex items-center space-x-2\"},[e(\"a\",{href:`/${d.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",target:\"_blank\",rel:\"noopener noreferrer\"},\"View →\",3,null),e(\"button\",null,{class:\"text-gray-400 hover:text-gray-600\"},e(\"svg\",null,{class:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"},null,3,null),3,null),3,null)],1,null)],1,null),1,d.id)),1,null)],1,null)],1,\"h8_7\")},ds=O(b(cs,\"s_Z1neaZRFYyU\")),gs={title:\"Pages - Content Management\",meta:[{name:\"description\",content:\"Manage your visual pages and landing pages\"}]},ps=Object.freeze(Object.defineProperty({__proto__:null,default:ds,head:gs},Symbol.toStringTag,{value:\"Module\"})),ms=async()=>{const[n,t]=T();try{const l=await fetch(\"/api/content/posts\");if(l.ok){const s=await l.json();t.value=s.posts||[]}}catch{}finally{n.value=!1}},hs=()=>{const[n]=T();n()},fs=async()=>{const[n,t,l]=T();try{(await fetch(\"/api/content/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t.value)})).ok&&(t.value={title:\"\",content:\"\",published:!1},l.value=!1,await n())}catch{}},bs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y({title:\"\",content:\"\",published:!1}),a=b(ms,\"s_1WTH03jRCsU\",[t,n]);j(b(hs,\"s_540yPc3E2RA\",[a]));const r=b(fs,\"s_V24BuGzIqHI\",[a,s,l]);return e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your blog posts and articles\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:C(\"s_Oc2O0zQdsgE\",[l])},g(o=>o.value?\"Cancel\":\"New Post\",[l],'p0.value?\"Cancel\":\"New Post\"'),3,null)],3,null),l.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Post\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Title\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.title,[s],\"p0.value.title\"),onInput$:C(\"s_Et0psVOr3QA\",[s])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Content\",3,null),e(\"textarea\",null,{rows:6,class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.content,[s],\"p0.value.content\"),onInput$:C(\"s_RJ3Ap4n0gmY\",[s])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center\"},[e(\"input\",null,{type:\"checkbox\",id:\"published\",class:\"mr-2\",checked:g(o=>o.value.published,[s],\"p0.value.published\"),onChange$:C(\"s_q00lGzU6qCM\",[s])},null,3,null),e(\"label\",null,{for:\"published\",class:\"text-sm font-medium text-gray-700\"},\"Publish immediately\",3,null)],3,null),e(\"div\",null,{class:\"flex space-x-3\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:r},\"Create Post\",3,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\",onClick$:C(\"s_bIZQZkM05f0\",[l])},\"Cancel\",3,null)],3,null)],3,null)],3,\"J4_0\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},\"Loading posts...\",3,\"J4_1\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},[e(\"p\",null,null,\"No posts found.\",3,null),e(\"p\",null,{class:\"text-sm mt-2\"},\"Create your first blog post above.\",3,null)],3,\"J4_2\"):n.value.map(o=>{var i;return e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},[(i=o.content)==null?void 0:i.substring(0,100),\"...\"],1,null),e(\"p\",null,{class:\"text-xs text-gray-400 mt-1\"},[\"Created: \",new Date(o.created_at).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-3\"},[e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${o.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,o.published?\"Published\":\"Draft\",1,null),e(\"a\",{href:`/posts/${o.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm\"},\"View →\",3,null)],1,null)],1,null),1,o.id)}),1,null)],1,null)],1,\"J4_3\")},ys=O(b(bs,\"s_RWtIVOCEnf0\")),vs={title:\"Posts - Content Management\",meta:[{name:\"description\",content:\"Manage your blog posts and articles\"}]},xs=Object.freeze(Object.defineProperty({__proto__:null,default:ys,head:vs},Symbol.toStringTag,{value:\"Module\"})),ws=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{count:s}=await l.from(\"posts\").select(\"*\",{count:\"exact\",head:!0}).eq(\"author_id\",t.id),{data:a}=await l.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\",t.id).order(\"created_at\",{ascending:!1}).limit(5),{data:r}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),{count:o}=await l.from(\"builder_pages\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id),{count:i}=await l.from(\"design_system_components\").select(\"*\",{count:\"exact\",head:!0}).eq(\"created_by\",t.id),u=new Date(Date.now()-3e5).toISOString(),{count:c}=await l.from(\"user_sessions\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id).gte(\"last_activity\",u).eq(\"active\",!0);return{user:t,stats:{postsCount:s||0,pagesCount:o||0,componentsCount:i||0,totalFiles:(r==null?void 0:r.total_files)||0,totalSize:(r==null?void 0:r.total_size)||0,storageUsed:Se((r==null?void 0:r.total_size)||0),activeSessions:c||0},recentPosts:a||[]}},_e=ae(b(ws,\"s_rzz0Rmkfnsc\"));function Se(n){const t=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(n===0)return\"0 B\";const l=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,l)).toFixed(1)} ${t[l]}`}const _s=async()=>{const[n]=T();try{const t=await fetch(\"/api/dashboard/stats\",{headers:{Cookie:document.cookie}});if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to fetch realtime stats\",{error:t instanceof Error?t.message:String(t)})}},Ss=()=>{const n=_e(),t=y(null);return j(b(_s,\"s_FyInf7hQmPU\",[t])),n.value?e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900 mb-8\"},[\"Welcome back, \",g(l=>l.value.user.email,[n],\"p0.value.user.email\"),\"!\"],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.postsCount,[n],\"p0.value.stats.postsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.pagesCount,[n],\"p0.value.stats.pagesCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"🧩\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Components\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.componentsCount,[n],\"p0.value.stats.componentsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g((l,s)=>{var a;return((a=s.value)==null?void 0:a.totalFiles)||l.value.stats.totalFiles||0},[n,t],\"p1.value?.totalFiles||p0.value.stats.totalFiles||0\"),3,null)],3,null)],3,null),3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Quick Actions\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"a\",null,{href:\"/dashboard/pages\",class:\"block bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Create Page\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Build with Builder.io\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block bg-green-50 hover:bg-green-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Write Post\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Create blog content\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block bg-purple-50 hover:bg-purple-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Upload Media\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Add files and images\",3,null)],3,null)],3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Design System Status\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[[\"DS Button\",\"DS Card\",\"DS Input\",\"DS File Upload\"].map(l=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},l,1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Active\",3,null)],1,l)),e(\"a\",null,{href:\"/dashboard/components\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"Manage Components →\",3,null)],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Health\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Builder.io\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Supabase\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"R2 Storage\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"View Analytics →\",3,null)],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Recent Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y divide-gray-200\"},n.value.recentPosts.length===0?e(\"div\",null,{class:\"px-6 py-4 text-gray-500\"},\"No posts yet\",3,\"we_1\"):n.value.recentPosts.map(l=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-900\"},v(l,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},new Date(l.created_at).toLocaleDateString(),1,null)],1,null),e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${l.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,l.published?\"Published\":\"Draft\",1,null)],1,null),1,l.id)),1,null)],1,null)],1,\"we_2\"):e(\"div\",null,null,\"Loading...\",3,\"we_0\")},ks=O(b(Ss,\"s_tKEjWeTgiGA\")),Cs={title:\"Dashboard - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"User dashboard\"}]},Ts=Object.freeze(Object.defineProperty({__proto__:null,_auto_formatFileSize:Se,default:ks,head:Cs,useDashboardData:_e},Symbol.toStringTag,{value:\"Module\"})),Ps=async()=>{const[n,t,l,s,a]=T();l.value=!0,t.value=\"\";try{const{error:r}=await re.signIn(n.value,a.value);if(r)throw r;await s(\"/dashboard\")}catch(r){t.value=r instanceof Error?r.message:\"Login failed\"}finally{l.value=!1}},Es=async n=>{const[t,l]=T();l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithOAuth(n);if(s)throw s}catch(s){t.value=s instanceof Error?s.message:\"OAuth login failed\",l.value=!1}},Rs=async()=>{const[n,t,l]=T();if(!n.value){t.value=\"Please enter your email\";return}l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithMagicLink(n.value);if(s)throw s;t.value=\"Check your email for the login link!\"}catch(s){t.value=s instanceof Error?s.message:\"Failed to send magic link\"}finally{l.value=!1}},Fs=()=>{const n=Ee(),t=y(\"\"),l=y(\"\"),s=y(!1),a=y(\"\"),r=b(Ps,\"s_M7uVWgz5fLo\",[t,a,s,n,l]),o=b(Es,\"s_1Fz1nHxVqXo\",[a,s]),i=b(Rs,\"s_F9kiKsoYGLc\",[t,a,s]);return e(\"div\",null,{class:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\"},e(\"div\",null,{class:\"max-w-md w-full space-y-8\"},[e(\"div\",null,null,e(\"h2\",null,{class:\"mt-6 text-center text-3xl font-extrabold text-gray-900\"},\"Sign in to your account\",3,null),3,null),e(\"div\",null,{class:\"mt-8 space-y-6\"},[a.value&&e(\"div\",null,{class:\"rounded-md bg-red-50 p-4\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(u=>u.value,[a],\"p0.value\"),3,null),3,\"V7_0\"),e(\"div\",null,{class:\"space-y-3\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_DIXakIIbtmc\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",viewBox:\"0 0 24 24\"},[e(\"path\",null,{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"},null,3,null),e(\"path\",null,{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"},null,3,null),e(\"path\",null,{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"},null,3,null),e(\"path\",null,{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"},null,3,null)],3,null),\"Continue with Google\"],3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_0Ck2IrGMcgM\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),\"Continue with GitHub\"],3,null)],3,null),e(\"div\",null,{class:\"relative\"},[e(\"div\",null,{class:\"absolute inset-0 flex items-center\"},e(\"div\",null,{class:\"w-full border-t border-gray-300\"},null,3,null),3,null),e(\"div\",null,{class:\"relative flex justify-center text-sm\"},e(\"span\",null,{class:\"px-2 bg-gray-50 text-gray-500\"},\"Or continue with\",3,null),3,null)],3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{for:\"email\",class:\"block text-sm font-medium text-gray-700\"},\"Email address\",3,null),e(\"input\",null,{id:\"email\",type:\"email\",autoComplete:\"email\",required:!0,value:g(u=>u.value,[t],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_DYgs0Z65Quc\",[t])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{for:\"password\",class:\"block text-sm font-medium text-gray-700\"},\"Password\",3,null),e(\"input\",null,{id:\"password\",type:\"password\",autoComplete:\"current-password\",required:!0,value:g(u=>u.value,[l],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_oWetVDGIFg4\",[l])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 mr-2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:r},g(u=>u.value?\"Signing in...\":\"Sign in\",[s],'p0.value?\"Signing in...\":\"Sign in\"'),3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 ml-2 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:i},\"Email magic link\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},e(\"a\",null,{href:\"/signup\",class:\"text-sm text-blue-600 hover:text-blue-500\"},\"Don't have an account? Sign up\",3,null),3,null)],1,null)],1,null),1,\"V7_1\")},Ms=O(b(Fs,\"s_aJcwFH6Iesk\")),Os={title:\"Login - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"Sign in to your account\"}]},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ms,head:Os},Symbol.toStringTag,{value:\"Module\"})),H=async({json:n})=>{n(404,{error:{code:\"NOT_FOUND\",message:\"API endpoint not found\"}})},$s=H,Ds=H,Ls=H,Is=H,js=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Ls,onGet:H,onPatch:Is,onPost:$s,onPut:Ds},Symbol.toStringTag,{value:\"Module\"})),qs=()=>e(\"div\",null,{class:\"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\"},e(\"div\",null,{class:\"text-center max-w-md mx-auto p-8\"},[e(\"div\",null,{class:\"text-8xl mb-6\"},\"🚀\",3,null),e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-4\"},\"404\",3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8\"},\"This page doesn't exist in our production stack\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"a\",null,{href:\"/\",class:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🏠 Back to Home\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},\"Or explore our live features:\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-4 text-sm\"},[e(\"a\",null,{href:\"/dashboard\",class:\"text-blue-600 hover:text-blue-800\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-purple-600 hover:text-purple-800\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/api/health\",class:\"text-green-600 hover:text-green-800\"},\"💚 Health Check\",3,null)],3,null)],3,null)],3,null),3,\"q5_0\"),Us=O(b(qs,\"s_dUKnuUOG7r8\")),zs={title:\"404 - Page Not Found\",meta:[{name:\"description\",content:\"The page you are looking for does not exist\"}]},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,head:zs},Symbol.toStringTag,{value:\"Module\"})),Ns=async({params:n,status:t})=>{const l=n.slug;if(!l)return t(404),null;try{const s=await V.getPage(l,!0);return!s||!s.published?(t(404),null):(V.incrementViewCount(s.id).catch(()=>{}),s)}catch(s){return p.error(\"Error loading page\",{slug:l},s),t(500),null}},ie=ae(b(Ns,\"s_bgpN1vdANm8\")),Gs=async()=>{try{return{params:(await V.getPublishedPages({limit:100})).data.map(t=>({slug:t.slug}))}}catch(n){return p.error(\"Error generating static pages\",{},n),{params:[]}}},Vs=n=>{const t=n.block.properties||{};switch(n.block.component_name||n.block.block_type){case\"ds-button\":return e(\"ds-button\",{variant:t.variant||\"primary\",size:t.size||\"md\",disabled:t.disabled||!1},null,t.label||\"Button\",1,\"FM_0\");case\"ds-card\":return e(\"div\",null,{class:\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm\"},[t.title&&e(\"h3\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},v(t,\"title\"),1,\"FM_1\"),t.subtitle&&e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"subtitle\"),1,\"FM_2\"),t.content&&e(\"div\",{dangerouslySetInnerHTML:v(t,\"content\")},null,null,3,\"FM_3\"),n.block.children&&n.block.children.length>0&&e(\"div\",null,null,n.block.children.map((a,r)=>M(I,{block:a},3,`${n.block.id}-child-${r}`)),1,\"FM_4\")],1,null);case\"ds-input\":return e(\"ds-input\",{type:t.type||\"text\",label:t.label||\"Input\",placeholder:t.placeholder||\"\",required:t.required||!1,disabled:t.disabled||!1},null,null,3,null);case\"ds-file-upload\":return e(\"div\",null,{class:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"},[e(\"p\",null,{class:\"text-gray-600\"},t.label||\"Upload File\",1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-2\"},[t.accept||\"*/*\",\" • Max \",((t.maxSize||10485760)/1024/1024).toFixed(1),\"MB\"],1,null)],1,null);case\"heading\":const l=t.level||2,s=`font-bold text-gray-900 ${l===1?\"text-4xl\":l===2?\"text-3xl\":l===3?\"text-2xl\":l===4?\"text-xl\":l===5?\"text-lg\":\"text-base\"}`;return l===1?e(\"h1\",{class:s},null,t.text||\"Heading\",1,\"FM_5\"):l===2?e(\"h2\",{class:s},null,t.text||\"Heading\",1,\"FM_6\"):l===3?e(\"h3\",{class:s},null,t.text||\"Heading\",1,\"FM_7\"):l===4?e(\"h4\",{class:s},null,t.text||\"Heading\",1,\"FM_8\"):l===5?e(\"h5\",{class:s},null,t.text||\"Heading\",1,\"FM_9\"):e(\"h6\",{class:s},null,t.text||\"Heading\",1,null);case\"paragraph\":return e(\"p\",null,{class:\"text-gray-700 leading-relaxed\"},t.text||\"Paragraph text\",1,null);case\"image\":return e(\"div\",null,{class:\"my-6\"},[e(\"img\",{src:t.src||\"/placeholder.jpg\",alt:t.alt||\"\",class:`max-w-full h-auto ${t.className||\"\"}`,width:t.width||\"800\",height:t.height||\"600\"},{loading:\"lazy\"},null,3,null),t.caption&&e(\"p\",null,{class:\"text-sm text-gray-500 mt-2 text-center\"},v(t,\"caption\"),1,\"FM_10\")],1,null);case\"spacer\":return e(\"div\",{style:{height:`${t.height||32}px`}},{class:\"w-full\"},null,3,null);case\"html\":return e(\"div\",{class:t.className||\"\",dangerouslySetInnerHTML:t.html||\"\"},null,null,3,null);default:return e(\"div\",null,{class:\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\"},[e(\"p\",null,{class:\"text-yellow-800 text-sm\"},[\"Unknown component: \",g(a=>a.block.component_name||a.block.block_type,[n],\"p0.block.component_name||p0.block.block_type\")],3,null),process.env.NODE_ENV===\"development\"&&e(\"pre\",null,{class:\"text-xs text-yellow-600 mt-2 overflow-auto\"},JSON.stringify(t,null,2),1,\"FM_11\")],1,null)}},I=O(b(Vs,\"s_hTWVJJoJphc\")),Hs=n=>{const l=(n.page.blocks||[]).reduce((s,a)=>{const r=a.region||\"main\";return s[r]||(s[r]=[]),s[r].push(a),s},{});switch(Object.keys(l).forEach(s=>{l[s].sort((a,r)=>a.order_index-r.order_index)}),n.template){case\"landing\":return e(\"div\",null,{class:\"min-h-screen\"},[l.header&&e(\"header\",null,{class:\"bg-white shadow-sm\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"},l.header.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_12\"),e(\"main\",null,{class:\"flex-1\"},l.main&&e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},e(\"div\",null,{class:\"space-y-12\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_13\"),1,null),l.footer&&e(\"footer\",null,{class:\"bg-gray-50 border-t\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},l.footer.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_14\")],1,\"FM_15\");case\"blog\":return e(\"article\",null,{class:\"min-h-screen bg-white\"},e(\"div\",null,{class:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},[e(\"header\",null,{class:\"mb-12\"},[e(\"h1\",null,{class:\"text-4xl font-bold text-gray-900 mb-4\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-xl text-gray-600 mb-6\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_16\"),e(\"div\",null,{class:\"flex items-center text-sm text-gray-500\"},[e(\"time\",null,{dateTime:g(s=>s.page.created_at,[n],\"p0.page.created_at\")},new Date(n.page.created_at).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"}),1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[g(s=>s.page.view_count,[n],\"p0.page.view_count\"),\" views\"],3,null)],1,null)],1,null),e(\"div\",null,{class:\"prose prose-lg max-w-none\"},l.main&&l.main.map(s=>M(I,{block:s},3,s.id)),1,null)],1,null),1,null);default:return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},e(\"div\",null,{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},[e(\"header\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-gray-600 mt-2\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_17\")],1,null),e(\"div\",{class:`grid gap-8 ${l.sidebar?\"grid-cols-1 lg:grid-cols-3\":\"grid-cols-1\"}`},null,[e(\"main\",{class:l.sidebar?\"lg:col-span-2\":\"col-span-1\"},null,l.main&&e(\"div\",null,{class:\"space-y-6\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,\"FM_18\"),1,null),l.sidebar&&e(\"aside\",null,{class:\"lg:col-span-1\"},e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm p-6 space-y-6\"},l.sidebar.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_19\")],1,null)],1,null),1,null)}},ke=O(b(Hs,\"s_mzLcv8PuSf4\")),Ks=()=>{const n=ie();return M(Re,{value:n,onPending:()=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-3 h-8 w-8 text-gray-400 mx-auto\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),e(\"p\",null,{class:\"text-gray-500 mt-2\"},\"Loading page...\",3,null)],3,null),3,\"FM_20\"),onRejected:t=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_21\"),onResolved:t=>(ne(),t?M(ke,{page:t,get template(){return t.template},[F]:{template:le(t,\"template\")}},3,\"FM_23\"):e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_22\")),[F]:{value:F,onPending:F,onRejected:F,onResolved:F}},3,\"FM_24\")},Qs=O(b(Ks,\"s_O9a4FXDqDuI\")),Ws=({resolveValue:n})=>{const t=n(ie);if(!t)return{title:\"Page Not Found\",meta:[{name:\"description\",content:\"The requested page could not be found.\"}]};const l=[{name:\"description\",content:t.seo_description||t.description||`${t.title} - Learn more about this page.`},{name:\"robots\",content:t.published?\"index, follow\":\"noindex, nofollow\"},{property:\"og:title\",content:t.seo_title||t.title},{property:\"og:description\",content:t.seo_description||t.description||\"\"},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:`/${t.slug}`},{name:\"twitter:card\",content:\"summary_large_image\"},{name:\"twitter:title\",content:t.seo_title||t.title},{name:\"twitter:description\",content:t.seo_description||t.description||\"\"}];return t.featured_image&&l.push({property:\"og:image\",content:t.featured_image}),t.social_image?(l.push({property:\"og:image\",content:t.social_image}),l.push({name:\"twitter:image\",content:t.social_image})):t.featured_image&&l.push({name:\"twitter:image\",content:t.featured_image}),{title:t.seo_title||t.title,meta:l}},Js=Object.freeze(Object.defineProperty({__proto__:null,_auto_ContentBlockRenderer:I,_auto_PageLayout:ke,default:Qs,head:Ws,onStaticGenerate:Gs,usePageData:ie},Symbol.toStringTag,{value:\"Module\"})),Zs=[je],q=()=>ze,U=()=>Ge,S=()=>Ye,Ys=[[\"/\",[S,()=>at],\"/\",[\"q-CSb0NZF_.js\",\"q-CRu92-iL.js\"]],[\"manifest.json\",[S,()=>ot],\"/manifest.json\",[\"q-CSb0NZF_.js\"]],[\"api/analytics/dashboard/\",[S,()=>mt],\"/api/analytics/dashboard/\",[\"q-CSb0NZF_.js\"]],[\"api/auth/status/\",[S,()=>ft],\"/api/auth/status/\",[\"q-CSb0NZF_.js\"]],[\"api/cache/analytics/\",[S,()=>wt],\"/api/cache/analytics/\",[\"q-CSb0NZF_.js\"]],[\"api/content/media/\",[S,()=>kt],\"/api/content/media/\",[\"q-CSb0NZF_.js\"]],[\"api/content/pages/\",[S,()=>Ot],\"/api/content/pages/\",[\"q-CSb0NZF_.js\"]],[\"api/content/posts/\",[S,()=>Dt],\"/api/content/posts/\",[\"q-CSb0NZF_.js\"]],[\"api/content/search/\",[S,()=>It],\"/api/content/search/\",[\"q-CSb0NZF_.js\"]],[\"api/dashboard/stats/\",[S,()=>qt],\"/api/dashboard/stats/\",[\"q-CSb0NZF_.js\"]],[\"api/files/list/\",[S,()=>ye],\"/api/files/list/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/signed-url/\",[S,()=>Bt],\"/api/storage/signed-url/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/proxy/[.path]\",[S,()=>Ht],\"/api/storage/proxy/[.path]\",[\"q-CSb0NZF_.js\"]],[\"api/cache/\",[S,()=>Jt],\"/api/cache/\",[\"q-CSb0NZF_.js\"]],[\"api/content/\",[S,()=>Yt],\"/api/content/\",[\"q-CSb0NZF_.js\"]],[\"api/docs/\",[S,()=>ll],\"/api/docs/\",[\"q-CSb0NZF_.js\",\"q-C-Vwv8I7.js\"]],[\"api/errors/\",[S,()=>ol],\"/api/errors/\",[\"q-CSb0NZF_.js\"]],[\"api/health/\",[S,()=>vl],\"/api/health/\",[\"q-CSb0NZF_.js\"]],[\"api/logs/\",[S,()=>Cl],\"/api/logs/\",[\"q-CSb0NZF_.js\"]],[\"api/upload/\",[S,()=>ve],\"/api/upload/\",[\"q-CSb0NZF_.js\"]],[\"auth/callback/\",[S,()=>Il],\"/auth/callback/\",[\"q-CSb0NZF_.js\",\"q-DAWT_rQB.js\"]],[\"dashboard/analytics/\",[S,U,q,()=>Nl],\"/dashboard/analytics/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D3peGYRe.js\"]],[\"dashboard/components/\",[S,U,q,()=>Ql],\"/dashboard/components/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-BXBKrR62.js\"]],[\"dashboard/media/\",[S,U,q,()=>as],\"/dashboard/media/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-TA-9Pb1a.js\"]],[\"dashboard/pages/\",[S,U,q,()=>ps],\"/dashboard/pages/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D_dUu6X9.js\"]],[\"dashboard/posts/\",[S,U,q,()=>xs],\"/dashboard/posts/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CS-S8Nx0.js\"]],[\"dashboard/\",[S,U,q,()=>Ts],\"/dashboard/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CFimUew-.js\"]],[\"login/\",[S,()=>As],\"/login/\",[\"q-CSb0NZF_.js\",\"q-ACkpa2hX.js\"]],[\"api/[.404]\",[S,()=>js],\"/api/[.404]\",[\"q-CSb0NZF_.js\",\"q-DRbnYsbH.js\"]],[\"[.catchall]\",[S,()=>Bs],\"/[.catchall]\",[\"q-CSb0NZF_.js\",\"q-BhAqSnFt.js\"]],[\"[...slug]\",[S,()=>Js],\"/[...slug]\",[\"q-CSb0NZF_.js\",\"q-BdYugbGr.js\"]]],Xs=[],en=!0,tn=\"/\",ln=!0,rn={routes:Ys,serverPlugins:Zs,menus:Xs,trailingSlash:en,basePathname:tn,cacheModules:ln};export{tn as b,ln as c,p as l,Xs as m,rn as q,Ys as r,Zs as s,en as t};"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 4,
        "content": "`:\"\",g(o=>`</${o.value}>`,[n],\"`</${p0.value}>`\")],1,null),1,null),1,null)],1,null)],1,null)],1,null)],1,\"IM_7\")},Hl=O(b(Vl,\"s_r0j4X6otVtI\")),Kl={title:\"Components - Design System\",meta:[{name:\"description\",content:\"Manage and preview your design system components\"}]},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Hl,head:Kl},Symbol.toStringTag,{value:\"Module\"}));async function xe(n){const t=E();if(!t)throw new Error(\"Supabase client not available - check configuration\");const l=n.get(\"sb-auth-token\");if(!l)return null;try{const{data:{user:s}}=await t.auth.getUser(l.value);return s}catch{return null}}const Wl=n=>e(\"ds-file-upload\",{onDsUploadSuccess$:n.onUploadSuccess$,onDsUploadError$:n.onUploadError$,onDsUploadComplete$:n.onUploadComplete$},{endpoint:g(t=>t.endpoint||\"/api/upload\",[n],'p0.endpoint||\"/api/upload\"'),accept:g(t=>t.accept||\"image/*,application/pdf,text/*\",[n],'p0.accept||\"image/*,application/pdf,text/*\"'),maxSize:g(t=>t.maxSize||10485760,[n],\"p0.maxSize||10*1024*1024\"),multiple:g(t=>t.multiple||!1,[n],\"p0.multiple||false\"),bucket:g(t=>t.bucket||\"uploads\",[n],'p0.bucket||\"uploads\"'),class:g(t=>t.class,[n],\"p0.class\")},null,2,\"iB_2\"),Jl=O(b(Wl,\"s_C03Fqoboh3U\")),Zl=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{data:s}=await l.from(\"profiles\").select(\"*\").eq(\"id\",t.id).single(),{data:a,error:r}=await l.from(\"file_metadata\").select(\"*\").eq(\"user_id\",t.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1}).limit(50),{data:o}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),i=c=>{const m=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(c===0)return\"0 B\";const d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(1)} ${m[d]}`},u=(a||[]).map(c=>({id:c.id,name:c.file_name,size:c.file_size,type:c.mime_type||\"application/octet-stream\",url:`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.storage_path}`,uploadedAt:c.created_at,thumbnailUrl:c.thumbnail_path?`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.thumbnail_path}`:void 0,tags:c.tags||[]}));return{user:t,profile:s,files:u,stats:{totalFiles:(o==null?void 0:o.total_files)||0,totalSize:(o==null?void 0:o.total_size)||0,storageUsed:i((o==null?void 0:o.total_size)||0)},hasError:!!r}},we=ae(b(Zl,\"s_00pXWz0FAag\")),Yl=async()=>{var a,r;const[n,t,l,s]=T();if((a=t.value)!=null&&a.user){n.value=!0;try{const o=await fetch(\"/api/files/list?limit=50\",{headers:{Cookie:document.cookie}});if(o.ok){const i=await o.json();l.value=i.files}}catch(o){const i=o instanceof Error?o.message:\"Unknown error\";p.error(\"Failed to refresh file list\",{error:i,endpoint:\"/api/files/list\",userId:(r=t.value.user)==null?void 0:r.id}),s.value=`❌ Failed to refresh file list: ${i}`,l.value=[]}finally{n.value=!1}}},Xl=n=>{const[t,l,s]=T(),{file:a}=n.detail;s.value=`✅ Uploaded: ${a.name}`,t(),l.value+=1},es=n=>{const[t]=T(),{file:l,error:s}=n.detail;t.value=`❌ Failed: ${l.name} - ${s}`},ts=n=>{const[t]=T(),{results:l}=n.detail,s=l.filter(r=>r.status===\"success\").length,a=l.filter(r=>r.status===\"error\").length;t.value=`📊 Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{t.value=\"\"},5e3)},ls=()=>{ne();const n=we(),t=y(\"\"),l=y(0),s=y([]),a=y(!1);if(!n.value)return e(\"div\",null,{class:\"flex items-center justify-center h-64\"},e(\"div\",null,{class:\"text-gray-500\"},\"Loading...\",3,null),3,\"Wk_0\");const o=b(Xl,\"s_cdAui9V38SU\",[b(Yl,\"s_BCO4F9EvjfI\",[a,n,s,t]),l,t]),i=b(es,\"s_2VhBVnlzOS4\",[t]),u=b(ts,\"s_tUSlurN8mDc\",[t]);return e(\"div\",null,{class:\"space-y-8\"},[e(\"div\",null,{class:\"border-b border-gray-200 pb-4\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Media Library\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Upload and manage your files with intelligent storage routing\",3,null)],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-3 gap-6\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Total Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.totalFiles,[n],\"p0.value.stats.totalFiles\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Used\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.storageUsed,[n],\"p0.value.stats.storageUsed\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Type\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-2\"},[e(\"span\",null,{class:\"block\"},\"✅ R2: All files (simplified architecture)\",3,null),e(\"span\",null,{class:\"block text-gray-400\"},\"Up to 5GB per file\",3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900 mb-4\"},\"Upload Files\",3,null),M(Jl,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf,text/*,video/*\",maxSize:52428800,multiple:!0,bucket:\"uploads\",class:\"w-full\",onUploadSuccess$:o,onUploadError$:i,onUploadComplete$:u,[F]:{endpoint:F,accept:F,maxSize:F,multiple:F,bucket:F,class:F,onUploadSuccess$:F,onUploadError$:F,onUploadComplete$:F}},3,\"Wk_1\"),t.value&&e(\"div\",null,{class:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\"},e(\"p\",null,{class:\"text-blue-800 text-sm\"},g(c=>c.value,[t],\"p0.value\"),3,null),3,\"Wk_2\"),e(\"div\",null,{class:\"mt-4 text-sm text-gray-600\"},[e(\"p\",null,{class:\"mb-2\"},[e(\"strong\",null,null,\"Simplified Storage:\",3,null),\" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"],3,null),e(\"p\",null,null,[e(\"strong\",null,null,\"Supported formats:\",3,null),\" Images, PDFs, text files, videos up to 50MB\"],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900\"},\"Your Files\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},a.value?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"🔄\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"Loading files...\",3,null)],3,\"Wk_3\"):(s.value.length>0?s.value:n.value.files).length===0?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"📁\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"No files yet\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Upload your first file using the upload area above\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Files will be stored securely and optimized for global delivery\",3,null)],3,\"Wk_4\"):e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"},(s.value.length>0?s.value:n.value.files).map(c=>e(\"div\",null,{class:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-3\"},[e(\"div\",null,{class:\"text-sm font-medium text-gray-900 truncate\"},v(c,\"name\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\"},\"R2\",3,null)],1,null),e(\"div\",null,{class:\"text-sm text-gray-600 space-y-1\"},[e(\"div\",null,null,[\"Size: \",(c.size/1024/1024).toFixed(2),\" MB\"],1,null),e(\"div\",null,null,[\"Type: \",v(c,\"type\")],1,null),e(\"div\",null,null,[\"Uploaded: \",new Date(c.uploadedAt).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"mt-4 flex space-x-2\"},[e(\"button\",null,{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\"},\"Download\",3,null),e(\"button\",null,{class:\"text-red-600 hover:text-red-800 text-sm font-medium\"},\"Delete\",3,null)],3,null)],1,c.id)),1,null),1,null)],1,null)],1,\"Wk_5\")},ss=O(b(ls,\"s_BDZLd0X4JxU\")),ns={title:\"Media Library - Dashboard\",meta:[{name:\"description\",content:\"Upload and manage your media files with intelligent storage routing\"}]},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,head:ns,useMediaData:we},Symbol.toStringTag,{value:\"Module\"})),rs=async()=>{const[n,t,l]=T();try{t.value=!0,n.value=\"\";const s=await fetch(\"/api/content/pages\");if(s.ok){const a=await s.json();l.value=a.pages||[]}else{const a=await s.json();n.value=a.error||\"Failed to load pages\"}}catch{n.value=\"Network error loading pages\"}finally{t.value=!1}},os=async()=>{const[n,t,l,s,a,r,o]=T();if(!r.value.trim()){t.value=\"Page title is required\";return}try{n.value=!0,t.value=\"\";const i={title:r.value.trim(),slug:a.value.trim()||void 0,description:s.value.trim()||void 0,template:\"default\",published:!1},u=await fetch(\"/api/content/pages\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});if(u.ok)await u.json(),r.value=\"\",a.value=\"\",s.value=\"\",o.value=!1,await l();else{const c=await u.json();t.value=c.error||\"Failed to create page\"}}catch{t.value=\"Network error creating page\"}finally{n.value=!1}},is=()=>{const[n,t]=T();!n.value&&t.value&&(n.value=t.value.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"))},us=async()=>{const[n]=T();await n()},cs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y(\"\"),a=y(!1),r=y(\"\"),o=y(\"\"),i=y(\"\"),u=b(rs,\"s_RSy4z08mHuY\",[s,t,n]),c=b(os,\"s_U0vSjZxjf0g\",[l,s,u,i,o,r,a]),m=b(is,\"s_OHe4b3BmXIA\",[o,r]);return j(b(us,\"s_q3arvP17QJ0\",[u])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your visual pages and landing pages\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_XklD0zp44XY\",[s,a])},g(d=>d.value?\"Cancel\":\"Create Page\",[a],'p0.value?\"Cancel\":\"Create Page\"'),3,null)],3,null),s.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"svg\",null,{class:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),3,null),e(\"div\",null,{class:\"ml-3\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(d=>d.value,[s],\"p0.value\"),3,null),3,null)],3,null),3,\"h8_0\"),a.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Page\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Page Title *\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter page title\",value:g(d=>d.value,[r],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_iUIdYKxt004\",[r,m])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},[\"Page URL Slug\",e(\"span\",null,{class:\"text-gray-500 text-xs\"},\"(auto-generated from title)\",3,null)],3,null),e(\"div\",null,{class:\"flex\"},[e(\"span\",null,{class:\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\"},\"/\",3,null),e(\"input\",null,{type:\"text\",class:\"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"your-page-url\",value:g(d=>d.value,[o],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_P0uR1QIAYP0\",[o])},null,3,null)],3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Description (Optional)\",3,null),e(\"textarea\",null,{class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Brief description of the page\",rows:3,value:g(d=>d.value,[i],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_0CoyY4fcrIQ\",[i])},null,3,null)],3,null),e(\"div\",null,{class:\"flex gap-2\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",disabled:g((d,h)=>d.value||!h.value.trim(),[l,r],\"p0.value||!p1.value.trim()\"),onClick$:c},[l.value&&e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,\"h8_1\"),g(d=>d.value?\"Creating...\":\"Create Page\",[l],'p0.value?\"Creating...\":\"Create Page\"')],1,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_NId9t3ngBME\",[s,i,o,r,a])},\"Cancel\",3,null)],1,null)],1,null)],1,\"h8_2\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b flex items-center justify-between\"},[e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Pages\",3,null),!t.value&&n.value.length>0&&e(\"span\",null,{class:\"text-sm text-gray-500\"},[g(d=>d.value.length,[n],\"p0.value.length\"),\" page\",g(d=>d.value.length===1?\"\":\"s\",[n],'p0.value.length===1?\"\":\"s\"')],3,\"h8_3\")],1,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},e(\"div\",null,{class:\"flex items-center justify-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),\"Loading pages...\"],3,null),3,\"h8_4\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-12 text-center text-gray-500\"},[e(\"svg\",null,{class:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"},null,3,null),3,null),e(\"h3\",null,{class:\"mt-2 text-sm font-medium text-gray-900\"},\"No pages\",3,null),e(\"p\",null,{class:\"mt-1 text-sm text-gray-500\"},\"Get started by creating your first page.\",3,null),e(\"div\",null,{class:\"mt-6\"},e(\"button\",null,{class:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",onClick$:C(\"s_7wN6ZaymF0U\",[s,a])},[e(\"svg\",null,{class:\"-ml-1 mr-2 h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"},null,3,null),3,null),\"Create Page\"],3,null),3,null)],3,\"h8_5\"):n.value.map(d=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50 transition-colors\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,{class:\"min-w-0 flex-1\"},[e(\"div\",null,{class:\"flex items-center\"},[e(\"h3\",null,{class:\"font-medium text-gray-900 truncate\"},v(d,\"title\"),1,null),e(\"span\",{class:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,d.published?\"Published\":\"Draft\",1,null)],1,null),e(\"div\",null,{class:\"mt-1 flex items-center text-sm text-gray-500\"},[e(\"span\",null,null,[\"/\",v(d,\"slug\")],1,null),d.description&&M(Pe,{children:[e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"truncate\"},v(d,\"description\"),1,null)]},1,\"h8_6\")],1,null),e(\"div\",null,{class:\"mt-2 flex items-center text-xs text-gray-400\"},[e(\"span\",null,null,[\"Created \",new Date(d.created_at).toLocaleDateString()],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[v(d,\"view_count\"),\" view\",d.view_count===1?\"\":\"s\"],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"capitalize\"},[v(d,\"template\"),\" template\"],1,null)],1,null)],1,null),e(\"div\",null,{class:\"ml-4 flex items-center space-x-2\"},[e(\"a\",{href:`/${d.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",target:\"_blank\",rel:\"noopener noreferrer\"},\"View →\",3,null),e(\"button\",null,{class:\"text-gray-400 hover:text-gray-600\"},e(\"svg\",null,{class:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"},null,3,null),3,null),3,null)],1,null)],1,null),1,d.id)),1,null)],1,null)],1,\"h8_7\")},ds=O(b(cs,\"s_Z1neaZRFYyU\")),gs={title:\"Pages - Content Management\",meta:[{name:\"description\",content:\"Manage your visual pages and landing pages\"}]},ps=Object.freeze(Object.defineProperty({__proto__:null,default:ds,head:gs},Symbol.toStringTag,{value:\"Module\"})),ms=async()=>{const[n,t]=T();try{const l=await fetch(\"/api/content/posts\");if(l.ok){const s=await l.json();t.value=s.posts||[]}}catch{}finally{n.value=!1}},hs=()=>{const[n]=T();n()},fs=async()=>{const[n,t,l]=T();try{(await fetch(\"/api/content/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t.value)})).ok&&(t.value={title:\"\",content:\"\",published:!1},l.value=!1,await n())}catch{}},bs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y({title:\"\",content:\"\",published:!1}),a=b(ms,\"s_1WTH03jRCsU\",[t,n]);j(b(hs,\"s_540yPc3E2RA\",[a]));const r=b(fs,\"s_V24BuGzIqHI\",[a,s,l]);return e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your blog posts and articles\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:C(\"s_Oc2O0zQdsgE\",[l])},g(o=>o.value?\"Cancel\":\"New Post\",[l],'p0.value?\"Cancel\":\"New Post\"'),3,null)],3,null),l.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Post\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Title\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.title,[s],\"p0.value.title\"),onInput$:C(\"s_Et0psVOr3QA\",[s])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Content\",3,null),e(\"textarea\",null,{rows:6,class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.content,[s],\"p0.value.content\"),onInput$:C(\"s_RJ3Ap4n0gmY\",[s])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center\"},[e(\"input\",null,{type:\"checkbox\",id:\"published\",class:\"mr-2\",checked:g(o=>o.value.published,[s],\"p0.value.published\"),onChange$:C(\"s_q00lGzU6qCM\",[s])},null,3,null),e(\"label\",null,{for:\"published\",class:\"text-sm font-medium text-gray-700\"},\"Publish immediately\",3,null)],3,null),e(\"div\",null,{class:\"flex space-x-3\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:r},\"Create Post\",3,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\",onClick$:C(\"s_bIZQZkM05f0\",[l])},\"Cancel\",3,null)],3,null)],3,null)],3,\"J4_0\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},\"Loading posts...\",3,\"J4_1\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},[e(\"p\",null,null,\"No posts found.\",3,null),e(\"p\",null,{class:\"text-sm mt-2\"},\"Create your first blog post above.\",3,null)],3,\"J4_2\"):n.value.map(o=>{var i;return e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},[(i=o.content)==null?void 0:i.substring(0,100),\"...\"],1,null),e(\"p\",null,{class:\"text-xs text-gray-400 mt-1\"},[\"Created: \",new Date(o.created_at).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-3\"},[e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${o.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,o.published?\"Published\":\"Draft\",1,null),e(\"a\",{href:`/posts/${o.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm\"},\"View →\",3,null)],1,null)],1,null),1,o.id)}),1,null)],1,null)],1,\"J4_3\")},ys=O(b(bs,\"s_RWtIVOCEnf0\")),vs={title:\"Posts - Content Management\",meta:[{name:\"description\",content:\"Manage your blog posts and articles\"}]},xs=Object.freeze(Object.defineProperty({__proto__:null,default:ys,head:vs},Symbol.toStringTag,{value:\"Module\"})),ws=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{count:s}=await l.from(\"posts\").select(\"*\",{count:\"exact\",head:!0}).eq(\"author_id\",t.id),{data:a}=await l.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\",t.id).order(\"created_at\",{ascending:!1}).limit(5),{data:r}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),{count:o}=await l.from(\"builder_pages\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id),{count:i}=await l.from(\"design_system_components\").select(\"*\",{count:\"exact\",head:!0}).eq(\"created_by\",t.id),u=new Date(Date.now()-3e5).toISOString(),{count:c}=await l.from(\"user_sessions\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id).gte(\"last_activity\",u).eq(\"active\",!0);return{user:t,stats:{postsCount:s||0,pagesCount:o||0,componentsCount:i||0,totalFiles:(r==null?void 0:r.total_files)||0,totalSize:(r==null?void 0:r.total_size)||0,storageUsed:Se((r==null?void 0:r.total_size)||0),activeSessions:c||0},recentPosts:a||[]}},_e=ae(b(ws,\"s_rzz0Rmkfnsc\"));function Se(n){const t=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(n===0)return\"0 B\";const l=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,l)).toFixed(1)} ${t[l]}`}const _s=async()=>{const[n]=T();try{const t=await fetch(\"/api/dashboard/stats\",{headers:{Cookie:document.cookie}});if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to fetch realtime stats\",{error:t instanceof Error?t.message:String(t)})}},Ss=()=>{const n=_e(),t=y(null);return j(b(_s,\"s_FyInf7hQmPU\",[t])),n.value?e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900 mb-8\"},[\"Welcome back, \",g(l=>l.value.user.email,[n],\"p0.value.user.email\"),\"!\"],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.postsCount,[n],\"p0.value.stats.postsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.pagesCount,[n],\"p0.value.stats.pagesCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"🧩\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Components\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.componentsCount,[n],\"p0.value.stats.componentsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g((l,s)=>{var a;return((a=s.value)==null?void 0:a.totalFiles)||l.value.stats.totalFiles||0},[n,t],\"p1.value?.totalFiles||p0.value.stats.totalFiles||0\"),3,null)],3,null)],3,null),3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Quick Actions\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"a\",null,{href:\"/dashboard/pages\",class:\"block bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Create Page\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Build with Builder.io\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block bg-green-50 hover:bg-green-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Write Post\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Create blog content\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block bg-purple-50 hover:bg-purple-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Upload Media\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Add files and images\",3,null)],3,null)],3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Design System Status\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[[\"DS Button\",\"DS Card\",\"DS Input\",\"DS File Upload\"].map(l=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},l,1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Active\",3,null)],1,l)),e(\"a\",null,{href:\"/dashboard/components\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"Manage Components →\",3,null)],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Health\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Builder.io\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Supabase\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"R2 Storage\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"View Analytics →\",3,null)],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Recent Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y divide-gray-200\"},n.value.recentPosts.length===0?e(\"div\",null,{class:\"px-6 py-4 text-gray-500\"},\"No posts yet\",3,\"we_1\"):n.value.recentPosts.map(l=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-900\"},v(l,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},new Date(l.created_at).toLocaleDateString(),1,null)],1,null),e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${l.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,l.published?\"Published\":\"Draft\",1,null)],1,null),1,l.id)),1,null)],1,null)],1,\"we_2\"):e(\"div\",null,null,\"Loading...\",3,\"we_0\")},ks=O(b(Ss,\"s_tKEjWeTgiGA\")),Cs={title:\"Dashboard - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"User dashboard\"}]},Ts=Object.freeze(Object.defineProperty({__proto__:null,_auto_formatFileSize:Se,default:ks,head:Cs,useDashboardData:_e},Symbol.toStringTag,{value:\"Module\"})),Ps=async()=>{const[n,t,l,s,a]=T();l.value=!0,t.value=\"\";try{const{error:r}=await re.signIn(n.value,a.value);if(r)throw r;await s(\"/dashboard\")}catch(r){t.value=r instanceof Error?r.message:\"Login failed\"}finally{l.value=!1}},Es=async n=>{const[t,l]=T();l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithOAuth(n);if(s)throw s}catch(s){t.value=s instanceof Error?s.message:\"OAuth login failed\",l.value=!1}},Rs=async()=>{const[n,t,l]=T();if(!n.value){t.value=\"Please enter your email\";return}l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithMagicLink(n.value);if(s)throw s;t.value=\"Check your email for the login link!\"}catch(s){t.value=s instanceof Error?s.message:\"Failed to send magic link\"}finally{l.value=!1}},Fs=()=>{const n=Ee(),t=y(\"\"),l=y(\"\"),s=y(!1),a=y(\"\"),r=b(Ps,\"s_M7uVWgz5fLo\",[t,a,s,n,l]),o=b(Es,\"s_1Fz1nHxVqXo\",[a,s]),i=b(Rs,\"s_F9kiKsoYGLc\",[t,a,s]);return e(\"div\",null,{class:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\"},e(\"div\",null,{class:\"max-w-md w-full space-y-8\"},[e(\"div\",null,null,e(\"h2\",null,{class:\"mt-6 text-center text-3xl font-extrabold text-gray-900\"},\"Sign in to your account\",3,null),3,null),e(\"div\",null,{class:\"mt-8 space-y-6\"},[a.value&&e(\"div\",null,{class:\"rounded-md bg-red-50 p-4\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(u=>u.value,[a],\"p0.value\"),3,null),3,\"V7_0\"),e(\"div\",null,{class:\"space-y-3\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_DIXakIIbtmc\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",viewBox:\"0 0 24 24\"},[e(\"path\",null,{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"},null,3,null),e(\"path\",null,{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"},null,3,null),e(\"path\",null,{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"},null,3,null),e(\"path\",null,{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"},null,3,null)],3,null),\"Continue with Google\"],3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_0Ck2IrGMcgM\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),\"Continue with GitHub\"],3,null)],3,null),e(\"div\",null,{class:\"relative\"},[e(\"div\",null,{class:\"absolute inset-0 flex items-center\"},e(\"div\",null,{class:\"w-full border-t border-gray-300\"},null,3,null),3,null),e(\"div\",null,{class:\"relative flex justify-center text-sm\"},e(\"span\",null,{class:\"px-2 bg-gray-50 text-gray-500\"},\"Or continue with\",3,null),3,null)],3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{for:\"email\",class:\"block text-sm font-medium text-gray-700\"},\"Email address\",3,null),e(\"input\",null,{id:\"email\",type:\"email\",autoComplete:\"email\",required:!0,value:g(u=>u.value,[t],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_DYgs0Z65Quc\",[t])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{for:\"password\",class:\"block text-sm font-medium text-gray-700\"},\"Password\",3,null),e(\"input\",null,{id:\"password\",type:\"password\",autoComplete:\"current-password\",required:!0,value:g(u=>u.value,[l],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_oWetVDGIFg4\",[l])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 mr-2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:r},g(u=>u.value?\"Signing in...\":\"Sign in\",[s],'p0.value?\"Signing in...\":\"Sign in\"'),3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 ml-2 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:i},\"Email magic link\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},e(\"a\",null,{href:\"/signup\",class:\"text-sm text-blue-600 hover:text-blue-500\"},\"Don't have an account? Sign up\",3,null),3,null)],1,null)],1,null),1,\"V7_1\")},Ms=O(b(Fs,\"s_aJcwFH6Iesk\")),Os={title:\"Login - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"Sign in to your account\"}]},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ms,head:Os},Symbol.toStringTag,{value:\"Module\"})),H=async({json:n})=>{n(404,{error:{code:\"NOT_FOUND\",message:\"API endpoint not found\"}})},$s=H,Ds=H,Ls=H,Is=H,js=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Ls,onGet:H,onPatch:Is,onPost:$s,onPut:Ds},Symbol.toStringTag,{value:\"Module\"})),qs=()=>e(\"div\",null,{class:\"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\"},e(\"div\",null,{class:\"text-center max-w-md mx-auto p-8\"},[e(\"div\",null,{class:\"text-8xl mb-6\"},\"🚀\",3,null),e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-4\"},\"404\",3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8\"},\"This page doesn't exist in our production stack\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"a\",null,{href:\"/\",class:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🏠 Back to Home\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},\"Or explore our live features:\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-4 text-sm\"},[e(\"a\",null,{href:\"/dashboard\",class:\"text-blue-600 hover:text-blue-800\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-purple-600 hover:text-purple-800\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/api/health\",class:\"text-green-600 hover:text-green-800\"},\"💚 Health Check\",3,null)],3,null)],3,null)],3,null),3,\"q5_0\"),Us=O(b(qs,\"s_dUKnuUOG7r8\")),zs={title:\"404 - Page Not Found\",meta:[{name:\"description\",content:\"The page you are looking for does not exist\"}]},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,head:zs},Symbol.toStringTag,{value:\"Module\"})),Ns=async({params:n,status:t})=>{const l=n.slug;if(!l)return t(404),null;try{const s=await V.getPage(l,!0);return!s||!s.published?(t(404),null):(V.incrementViewCount(s.id).catch(()=>{}),s)}catch(s){return p.error(\"Error loading page\",{slug:l},s),t(500),null}},ie=ae(b(Ns,\"s_bgpN1vdANm8\")),Gs=async()=>{try{return{params:(await V.getPublishedPages({limit:100})).data.map(t=>({slug:t.slug}))}}catch(n){return p.error(\"Error generating static pages\",{},n),{params:[]}}},Vs=n=>{const t=n.block.properties||{};switch(n.block.component_name||n.block.block_type){case\"ds-button\":return e(\"ds-button\",{variant:t.variant||\"primary\",size:t.size||\"md\",disabled:t.disabled||!1},null,t.label||\"Button\",1,\"FM_0\");case\"ds-card\":return e(\"div\",null,{class:\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm\"},[t.title&&e(\"h3\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},v(t,\"title\"),1,\"FM_1\"),t.subtitle&&e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"subtitle\"),1,\"FM_2\"),t.content&&e(\"div\",{dangerouslySetInnerHTML:v(t,\"content\")},null,null,3,\"FM_3\"),n.block.children&&n.block.children.length>0&&e(\"div\",null,null,n.block.children.map((a,r)=>M(I,{block:a},3,`${n.block.id}-child-${r}`)),1,\"FM_4\")],1,null);case\"ds-input\":return e(\"ds-input\",{type:t.type||\"text\",label:t.label||\"Input\",placeholder:t.placeholder||\"\",required:t.required||!1,disabled:t.disabled||!1},null,null,3,null);case\"ds-file-upload\":return e(\"div\",null,{class:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"},[e(\"p\",null,{class:\"text-gray-600\"},t.label||\"Upload File\",1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-2\"},[t.accept||\"*/*\",\" • Max \",((t.maxSize||10485760)/1024/1024).toFixed(1),\"MB\"],1,null)],1,null);case\"heading\":const l=t.level||2,s=`font-bold text-gray-900 ${l===1?\"text-4xl\":l===2?\"text-3xl\":l===3?\"text-2xl\":l===4?\"text-xl\":l===5?\"text-lg\":\"text-base\"}`;return l===1?e(\"h1\",{class:s},null,t.text||\"Heading\",1,\"FM_5\"):l===2?e(\"h2\",{class:s},null,t.text||\"Heading\",1,\"FM_6\"):l===3?e(\"h3\",{class:s},null,t.text||\"Heading\",1,\"FM_7\"):l===4?e(\"h4\",{class:s},null,t.text||\"Heading\",1,\"FM_8\"):l===5?e(\"h5\",{class:s},null,t.text||\"Heading\",1,\"FM_9\"):e(\"h6\",{class:s},null,t.text||\"Heading\",1,null);case\"paragraph\":return e(\"p\",null,{class:\"text-gray-700 leading-relaxed\"},t.text||\"Paragraph text\",1,null);case\"image\":return e(\"div\",null,{class:\"my-6\"},[e(\"img\",{src:t.src||\"/placeholder.jpg\",alt:t.alt||\"\",class:`max-w-full h-auto ${t.className||\"\"}`,width:t.width||\"800\",height:t.height||\"600\"},{loading:\"lazy\"},null,3,null),t.caption&&e(\"p\",null,{class:\"text-sm text-gray-500 mt-2 text-center\"},v(t,\"caption\"),1,\"FM_10\")],1,null);case\"spacer\":return e(\"div\",{style:{height:`${t.height||32}px`}},{class:\"w-full\"},null,3,null);case\"html\":return e(\"div\",{class:t.className||\"\",dangerouslySetInnerHTML:t.html||\"\"},null,null,3,null);default:return e(\"div\",null,{class:\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\"},[e(\"p\",null,{class:\"text-yellow-800 text-sm\"},[\"Unknown component: \",g(a=>a.block.component_name||a.block.block_type,[n],\"p0.block.component_name||p0.block.block_type\")],3,null),process.env.NODE_ENV===\"development\"&&e(\"pre\",null,{class:\"text-xs text-yellow-600 mt-2 overflow-auto\"},JSON.stringify(t,null,2),1,\"FM_11\")],1,null)}},I=O(b(Vs,\"s_hTWVJJoJphc\")),Hs=n=>{const l=(n.page.blocks||[]).reduce((s,a)=>{const r=a.region||\"main\";return s[r]||(s[r]=[]),s[r].push(a),s},{});switch(Object.keys(l).forEach(s=>{l[s].sort((a,r)=>a.order_index-r.order_index)}),n.template){case\"landing\":return e(\"div\",null,{class:\"min-h-screen\"},[l.header&&e(\"header\",null,{class:\"bg-white shadow-sm\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"},l.header.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_12\"),e(\"main\",null,{class:\"flex-1\"},l.main&&e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},e(\"div\",null,{class:\"space-y-12\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_13\"),1,null),l.footer&&e(\"footer\",null,{class:\"bg-gray-50 border-t\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},l.footer.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_14\")],1,\"FM_15\");case\"blog\":return e(\"article\",null,{class:\"min-h-screen bg-white\"},e(\"div\",null,{class:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},[e(\"header\",null,{class:\"mb-12\"},[e(\"h1\",null,{class:\"text-4xl font-bold text-gray-900 mb-4\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-xl text-gray-600 mb-6\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_16\"),e(\"div\",null,{class:\"flex items-center text-sm text-gray-500\"},[e(\"time\",null,{dateTime:g(s=>s.page.created_at,[n],\"p0.page.created_at\")},new Date(n.page.created_at).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"}),1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[g(s=>s.page.view_count,[n],\"p0.page.view_count\"),\" views\"],3,null)],1,null)],1,null),e(\"div\",null,{class:\"prose prose-lg max-w-none\"},l.main&&l.main.map(s=>M(I,{block:s},3,s.id)),1,null)],1,null),1,null);default:return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},e(\"div\",null,{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},[e(\"header\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-gray-600 mt-2\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_17\")],1,null),e(\"div\",{class:`grid gap-8 ${l.sidebar?\"grid-cols-1 lg:grid-cols-3\":\"grid-cols-1\"}`},null,[e(\"main\",{class:l.sidebar?\"lg:col-span-2\":\"col-span-1\"},null,l.main&&e(\"div\",null,{class:\"space-y-6\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,\"FM_18\"),1,null),l.sidebar&&e(\"aside\",null,{class:\"lg:col-span-1\"},e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm p-6 space-y-6\"},l.sidebar.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_19\")],1,null)],1,null),1,null)}},ke=O(b(Hs,\"s_mzLcv8PuSf4\")),Ks=()=>{const n=ie();return M(Re,{value:n,onPending:()=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-3 h-8 w-8 text-gray-400 mx-auto\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),e(\"p\",null,{class:\"text-gray-500 mt-2\"},\"Loading page...\",3,null)],3,null),3,\"FM_20\"),onRejected:t=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_21\"),onResolved:t=>(ne(),t?M(ke,{page:t,get template(){return t.template},[F]:{template:le(t,\"template\")}},3,\"FM_23\"):e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_22\")),[F]:{value:F,onPending:F,onRejected:F,onResolved:F}},3,\"FM_24\")},Qs=O(b(Ks,\"s_O9a4FXDqDuI\")),Ws=({resolveValue:n})=>{const t=n(ie);if(!t)return{title:\"Page Not Found\",meta:[{name:\"description\",content:\"The requested page could not be found.\"}]};const l=[{name:\"description\",content:t.seo_description||t.description||`${t.title} - Learn more about this page.`},{name:\"robots\",content:t.published?\"index, follow\":\"noindex, nofollow\"},{property:\"og:title\",content:t.seo_title||t.title},{property:\"og:description\",content:t.seo_description||t.description||\"\"},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:`/${t.slug}`},{name:\"twitter:card\",content:\"summary_large_image\"},{name:\"twitter:title\",content:t.seo_title||t.title},{name:\"twitter:description\",content:t.seo_description||t.description||\"\"}];return t.featured_image&&l.push({property:\"og:image\",content:t.featured_image}),t.social_image?(l.push({property:\"og:image\",content:t.social_image}),l.push({name:\"twitter:image\",content:t.social_image})):t.featured_image&&l.push({name:\"twitter:image\",content:t.featured_image}),{title:t.seo_title||t.title,meta:l}},Js=Object.freeze(Object.defineProperty({__proto__:null,_auto_ContentBlockRenderer:I,_auto_PageLayout:ke,default:Qs,head:Ws,onStaticGenerate:Gs,usePageData:ie},Symbol.toStringTag,{value:\"Module\"})),Zs=[je],q=()=>ze,U=()=>Ge,S=()=>Ye,Ys=[[\"/\",[S,()=>at],\"/\",[\"q-CSb0NZF_.js\",\"q-CRu92-iL.js\"]],[\"manifest.json\",[S,()=>ot],\"/manifest.json\",[\"q-CSb0NZF_.js\"]],[\"api/analytics/dashboard/\",[S,()=>mt],\"/api/analytics/dashboard/\",[\"q-CSb0NZF_.js\"]],[\"api/auth/status/\",[S,()=>ft],\"/api/auth/status/\",[\"q-CSb0NZF_.js\"]],[\"api/cache/analytics/\",[S,()=>wt],\"/api/cache/analytics/\",[\"q-CSb0NZF_.js\"]],[\"api/content/media/\",[S,()=>kt],\"/api/content/media/\",[\"q-CSb0NZF_.js\"]],[\"api/content/pages/\",[S,()=>Ot],\"/api/content/pages/\",[\"q-CSb0NZF_.js\"]],[\"api/content/posts/\",[S,()=>Dt],\"/api/content/posts/\",[\"q-CSb0NZF_.js\"]],[\"api/content/search/\",[S,()=>It],\"/api/content/search/\",[\"q-CSb0NZF_.js\"]],[\"api/dashboard/stats/\",[S,()=>qt],\"/api/dashboard/stats/\",[\"q-CSb0NZF_.js\"]],[\"api/files/list/\",[S,()=>ye],\"/api/files/list/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/signed-url/\",[S,()=>Bt],\"/api/storage/signed-url/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/proxy/[.path]\",[S,()=>Ht],\"/api/storage/proxy/[.path]\",[\"q-CSb0NZF_.js\"]],[\"api/cache/\",[S,()=>Jt],\"/api/cache/\",[\"q-CSb0NZF_.js\"]],[\"api/content/\",[S,()=>Yt],\"/api/content/\",[\"q-CSb0NZF_.js\"]],[\"api/docs/\",[S,()=>ll],\"/api/docs/\",[\"q-CSb0NZF_.js\",\"q-C-Vwv8I7.js\"]],[\"api/errors/\",[S,()=>ol],\"/api/errors/\",[\"q-CSb0NZF_.js\"]],[\"api/health/\",[S,()=>vl],\"/api/health/\",[\"q-CSb0NZF_.js\"]],[\"api/logs/\",[S,()=>Cl],\"/api/logs/\",[\"q-CSb0NZF_.js\"]],[\"api/upload/\",[S,()=>ve],\"/api/upload/\",[\"q-CSb0NZF_.js\"]],[\"auth/callback/\",[S,()=>Il],\"/auth/callback/\",[\"q-CSb0NZF_.js\",\"q-DAWT_rQB.js\"]],[\"dashboard/analytics/\",[S,U,q,()=>Nl],\"/dashboard/analytics/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D3peGYRe.js\"]],[\"dashboard/components/\",[S,U,q,()=>Ql],\"/dashboard/components/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-BXBKrR62.js\"]],[\"dashboard/media/\",[S,U,q,()=>as],\"/dashboard/media/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-TA-9Pb1a.js\"]],[\"dashboard/pages/\",[S,U,q,()=>ps],\"/dashboard/pages/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D_dUu6X9.js\"]],[\"dashboard/posts/\",[S,U,q,()=>xs],\"/dashboard/posts/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CS-S8Nx0.js\"]],[\"dashboard/\",[S,U,q,()=>Ts],\"/dashboard/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CFimUew-.js\"]],[\"login/\",[S,()=>As],\"/login/\",[\"q-CSb0NZF_.js\",\"q-ACkpa2hX.js\"]],[\"api/[.404]\",[S,()=>js],\"/api/[.404]\",[\"q-CSb0NZF_.js\",\"q-DRbnYsbH.js\"]],[\"[.catchall]\",[S,()=>Bs],\"/[.catchall]\",[\"q-CSb0NZF_.js\",\"q-BhAqSnFt.js\"]],[\"[...slug]\",[S,()=>Js],\"/[...slug]\",[\"q-CSb0NZF_.js\",\"q-BdYugbGr.js\"]]],Xs=[],en=!0,tn=\"/\",ln=!0,rn={routes:Ys,serverPlugins:Zs,menus:Xs,trailingSlash:en,basePathname:tn,cacheModules:ln};export{tn as b,ln as c,p as l,Xs as m,rn as q,Ys as r,Zs as s,en as t};"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 4,
        "content": "`:\"\",g(o=>`</${o.value}>`,[n],\"`</${p0.value}>`\")],1,null),1,null),1,null)],1,null)],1,null)],1,null)],1,\"IM_7\")},Hl=O(b(Vl,\"s_r0j4X6otVtI\")),Kl={title:\"Components - Design System\",meta:[{name:\"description\",content:\"Manage and preview your design system components\"}]},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Hl,head:Kl},Symbol.toStringTag,{value:\"Module\"}));async function xe(n){const t=E();if(!t)throw new Error(\"Supabase client not available - check configuration\");const l=n.get(\"sb-auth-token\");if(!l)return null;try{const{data:{user:s}}=await t.auth.getUser(l.value);return s}catch{return null}}const Wl=n=>e(\"ds-file-upload\",{onDsUploadSuccess$:n.onUploadSuccess$,onDsUploadError$:n.onUploadError$,onDsUploadComplete$:n.onUploadComplete$},{endpoint:g(t=>t.endpoint||\"/api/upload\",[n],'p0.endpoint||\"/api/upload\"'),accept:g(t=>t.accept||\"image/*,application/pdf,text/*\",[n],'p0.accept||\"image/*,application/pdf,text/*\"'),maxSize:g(t=>t.maxSize||10485760,[n],\"p0.maxSize||10*1024*1024\"),multiple:g(t=>t.multiple||!1,[n],\"p0.multiple||false\"),bucket:g(t=>t.bucket||\"uploads\",[n],'p0.bucket||\"uploads\"'),class:g(t=>t.class,[n],\"p0.class\")},null,2,\"iB_2\"),Jl=O(b(Wl,\"s_C03Fqoboh3U\")),Zl=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{data:s}=await l.from(\"profiles\").select(\"*\").eq(\"id\",t.id).single(),{data:a,error:r}=await l.from(\"file_metadata\").select(\"*\").eq(\"user_id\",t.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1}).limit(50),{data:o}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),i=c=>{const m=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(c===0)return\"0 B\";const d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(1)} ${m[d]}`},u=(a||[]).map(c=>({id:c.id,name:c.file_name,size:c.file_size,type:c.mime_type||\"application/octet-stream\",url:`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.storage_path}`,uploadedAt:c.created_at,thumbnailUrl:c.thumbnail_path?`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.thumbnail_path}`:void 0,tags:c.tags||[]}));return{user:t,profile:s,files:u,stats:{totalFiles:(o==null?void 0:o.total_files)||0,totalSize:(o==null?void 0:o.total_size)||0,storageUsed:i((o==null?void 0:o.total_size)||0)},hasError:!!r}},we=ae(b(Zl,\"s_00pXWz0FAag\")),Yl=async()=>{var a,r;const[n,t,l,s]=T();if((a=t.value)!=null&&a.user){n.value=!0;try{const o=await fetch(\"/api/files/list?limit=50\",{headers:{Cookie:document.cookie}});if(o.ok){const i=await o.json();l.value=i.files}}catch(o){const i=o instanceof Error?o.message:\"Unknown error\";p.error(\"Failed to refresh file list\",{error:i,endpoint:\"/api/files/list\",userId:(r=t.value.user)==null?void 0:r.id}),s.value=`❌ Failed to refresh file list: ${i}`,l.value=[]}finally{n.value=!1}}},Xl=n=>{const[t,l,s]=T(),{file:a}=n.detail;s.value=`✅ Uploaded: ${a.name}`,t(),l.value+=1},es=n=>{const[t]=T(),{file:l,error:s}=n.detail;t.value=`❌ Failed: ${l.name} - ${s}`},ts=n=>{const[t]=T(),{results:l}=n.detail,s=l.filter(r=>r.status===\"success\").length,a=l.filter(r=>r.status===\"error\").length;t.value=`📊 Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{t.value=\"\"},5e3)},ls=()=>{ne();const n=we(),t=y(\"\"),l=y(0),s=y([]),a=y(!1);if(!n.value)return e(\"div\",null,{class:\"flex items-center justify-center h-64\"},e(\"div\",null,{class:\"text-gray-500\"},\"Loading...\",3,null),3,\"Wk_0\");const o=b(Xl,\"s_cdAui9V38SU\",[b(Yl,\"s_BCO4F9EvjfI\",[a,n,s,t]),l,t]),i=b(es,\"s_2VhBVnlzOS4\",[t]),u=b(ts,\"s_tUSlurN8mDc\",[t]);return e(\"div\",null,{class:\"space-y-8\"},[e(\"div\",null,{class:\"border-b border-gray-200 pb-4\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Media Library\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Upload and manage your files with intelligent storage routing\",3,null)],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-3 gap-6\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Total Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.totalFiles,[n],\"p0.value.stats.totalFiles\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Used\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.storageUsed,[n],\"p0.value.stats.storageUsed\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Type\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-2\"},[e(\"span\",null,{class:\"block\"},\"✅ R2: All files (simplified architecture)\",3,null),e(\"span\",null,{class:\"block text-gray-400\"},\"Up to 5GB per file\",3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900 mb-4\"},\"Upload Files\",3,null),M(Jl,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf,text/*,video/*\",maxSize:52428800,multiple:!0,bucket:\"uploads\",class:\"w-full\",onUploadSuccess$:o,onUploadError$:i,onUploadComplete$:u,[F]:{endpoint:F,accept:F,maxSize:F,multiple:F,bucket:F,class:F,onUploadSuccess$:F,onUploadError$:F,onUploadComplete$:F}},3,\"Wk_1\"),t.value&&e(\"div\",null,{class:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\"},e(\"p\",null,{class:\"text-blue-800 text-sm\"},g(c=>c.value,[t],\"p0.value\"),3,null),3,\"Wk_2\"),e(\"div\",null,{class:\"mt-4 text-sm text-gray-600\"},[e(\"p\",null,{class:\"mb-2\"},[e(\"strong\",null,null,\"Simplified Storage:\",3,null),\" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"],3,null),e(\"p\",null,null,[e(\"strong\",null,null,\"Supported formats:\",3,null),\" Images, PDFs, text files, videos up to 50MB\"],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900\"},\"Your Files\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},a.value?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"🔄\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"Loading files...\",3,null)],3,\"Wk_3\"):(s.value.length>0?s.value:n.value.files).length===0?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"📁\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"No files yet\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Upload your first file using the upload area above\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Files will be stored securely and optimized for global delivery\",3,null)],3,\"Wk_4\"):e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"},(s.value.length>0?s.value:n.value.files).map(c=>e(\"div\",null,{class:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-3\"},[e(\"div\",null,{class:\"text-sm font-medium text-gray-900 truncate\"},v(c,\"name\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\"},\"R2\",3,null)],1,null),e(\"div\",null,{class:\"text-sm text-gray-600 space-y-1\"},[e(\"div\",null,null,[\"Size: \",(c.size/1024/1024).toFixed(2),\" MB\"],1,null),e(\"div\",null,null,[\"Type: \",v(c,\"type\")],1,null),e(\"div\",null,null,[\"Uploaded: \",new Date(c.uploadedAt).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"mt-4 flex space-x-2\"},[e(\"button\",null,{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\"},\"Download\",3,null),e(\"button\",null,{class:\"text-red-600 hover:text-red-800 text-sm font-medium\"},\"Delete\",3,null)],3,null)],1,c.id)),1,null),1,null)],1,null)],1,\"Wk_5\")},ss=O(b(ls,\"s_BDZLd0X4JxU\")),ns={title:\"Media Library - Dashboard\",meta:[{name:\"description\",content:\"Upload and manage your media files with intelligent storage routing\"}]},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,head:ns,useMediaData:we},Symbol.toStringTag,{value:\"Module\"})),rs=async()=>{const[n,t,l]=T();try{t.value=!0,n.value=\"\";const s=await fetch(\"/api/content/pages\");if(s.ok){const a=await s.json();l.value=a.pages||[]}else{const a=await s.json();n.value=a.error||\"Failed to load pages\"}}catch{n.value=\"Network error loading pages\"}finally{t.value=!1}},os=async()=>{const[n,t,l,s,a,r,o]=T();if(!r.value.trim()){t.value=\"Page title is required\";return}try{n.value=!0,t.value=\"\";const i={title:r.value.trim(),slug:a.value.trim()||void 0,description:s.value.trim()||void 0,template:\"default\",published:!1},u=await fetch(\"/api/content/pages\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});if(u.ok)await u.json(),r.value=\"\",a.value=\"\",s.value=\"\",o.value=!1,await l();else{const c=await u.json();t.value=c.error||\"Failed to create page\"}}catch{t.value=\"Network error creating page\"}finally{n.value=!1}},is=()=>{const[n,t]=T();!n.value&&t.value&&(n.value=t.value.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"))},us=async()=>{const[n]=T();await n()},cs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y(\"\"),a=y(!1),r=y(\"\"),o=y(\"\"),i=y(\"\"),u=b(rs,\"s_RSy4z08mHuY\",[s,t,n]),c=b(os,\"s_U0vSjZxjf0g\",[l,s,u,i,o,r,a]),m=b(is,\"s_OHe4b3BmXIA\",[o,r]);return j(b(us,\"s_q3arvP17QJ0\",[u])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your visual pages and landing pages\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_XklD0zp44XY\",[s,a])},g(d=>d.value?\"Cancel\":\"Create Page\",[a],'p0.value?\"Cancel\":\"Create Page\"'),3,null)],3,null),s.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"svg\",null,{class:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),3,null),e(\"div\",null,{class:\"ml-3\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(d=>d.value,[s],\"p0.value\"),3,null),3,null)],3,null),3,\"h8_0\"),a.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Page\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Page Title *\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter page title\",value:g(d=>d.value,[r],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_iUIdYKxt004\",[r,m])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},[\"Page URL Slug\",e(\"span\",null,{class:\"text-gray-500 text-xs\"},\"(auto-generated from title)\",3,null)],3,null),e(\"div\",null,{class:\"flex\"},[e(\"span\",null,{class:\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\"},\"/\",3,null),e(\"input\",null,{type:\"text\",class:\"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"your-page-url\",value:g(d=>d.value,[o],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_P0uR1QIAYP0\",[o])},null,3,null)],3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Description (Optional)\",3,null),e(\"textarea\",null,{class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Brief description of the page\",rows:3,value:g(d=>d.value,[i],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_0CoyY4fcrIQ\",[i])},null,3,null)],3,null),e(\"div\",null,{class:\"flex gap-2\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",disabled:g((d,h)=>d.value||!h.value.trim(),[l,r],\"p0.value||!p1.value.trim()\"),onClick$:c},[l.value&&e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,\"h8_1\"),g(d=>d.value?\"Creating...\":\"Create Page\",[l],'p0.value?\"Creating...\":\"Create Page\"')],1,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_NId9t3ngBME\",[s,i,o,r,a])},\"Cancel\",3,null)],1,null)],1,null)],1,\"h8_2\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b flex items-center justify-between\"},[e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Pages\",3,null),!t.value&&n.value.length>0&&e(\"span\",null,{class:\"text-sm text-gray-500\"},[g(d=>d.value.length,[n],\"p0.value.length\"),\" page\",g(d=>d.value.length===1?\"\":\"s\",[n],'p0.value.length===1?\"\":\"s\"')],3,\"h8_3\")],1,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},e(\"div\",null,{class:\"flex items-center justify-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),\"Loading pages...\"],3,null),3,\"h8_4\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-12 text-center text-gray-500\"},[e(\"svg\",null,{class:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"},null,3,null),3,null),e(\"h3\",null,{class:\"mt-2 text-sm font-medium text-gray-900\"},\"No pages\",3,null),e(\"p\",null,{class:\"mt-1 text-sm text-gray-500\"},\"Get started by creating your first page.\",3,null),e(\"div\",null,{class:\"mt-6\"},e(\"button\",null,{class:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",onClick$:C(\"s_7wN6ZaymF0U\",[s,a])},[e(\"svg\",null,{class:\"-ml-1 mr-2 h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"},null,3,null),3,null),\"Create Page\"],3,null),3,null)],3,\"h8_5\"):n.value.map(d=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50 transition-colors\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,{class:\"min-w-0 flex-1\"},[e(\"div\",null,{class:\"flex items-center\"},[e(\"h3\",null,{class:\"font-medium text-gray-900 truncate\"},v(d,\"title\"),1,null),e(\"span\",{class:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,d.published?\"Published\":\"Draft\",1,null)],1,null),e(\"div\",null,{class:\"mt-1 flex items-center text-sm text-gray-500\"},[e(\"span\",null,null,[\"/\",v(d,\"slug\")],1,null),d.description&&M(Pe,{children:[e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"truncate\"},v(d,\"description\"),1,null)]},1,\"h8_6\")],1,null),e(\"div\",null,{class:\"mt-2 flex items-center text-xs text-gray-400\"},[e(\"span\",null,null,[\"Created \",new Date(d.created_at).toLocaleDateString()],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[v(d,\"view_count\"),\" view\",d.view_count===1?\"\":\"s\"],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"capitalize\"},[v(d,\"template\"),\" template\"],1,null)],1,null)],1,null),e(\"div\",null,{class:\"ml-4 flex items-center space-x-2\"},[e(\"a\",{href:`/${d.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",target:\"_blank\",rel:\"noopener noreferrer\"},\"View →\",3,null),e(\"button\",null,{class:\"text-gray-400 hover:text-gray-600\"},e(\"svg\",null,{class:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"},null,3,null),3,null),3,null)],1,null)],1,null),1,d.id)),1,null)],1,null)],1,\"h8_7\")},ds=O(b(cs,\"s_Z1neaZRFYyU\")),gs={title:\"Pages - Content Management\",meta:[{name:\"description\",content:\"Manage your visual pages and landing pages\"}]},ps=Object.freeze(Object.defineProperty({__proto__:null,default:ds,head:gs},Symbol.toStringTag,{value:\"Module\"})),ms=async()=>{const[n,t]=T();try{const l=await fetch(\"/api/content/posts\");if(l.ok){const s=await l.json();t.value=s.posts||[]}}catch{}finally{n.value=!1}},hs=()=>{const[n]=T();n()},fs=async()=>{const[n,t,l]=T();try{(await fetch(\"/api/content/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t.value)})).ok&&(t.value={title:\"\",content:\"\",published:!1},l.value=!1,await n())}catch{}},bs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y({title:\"\",content:\"\",published:!1}),a=b(ms,\"s_1WTH03jRCsU\",[t,n]);j(b(hs,\"s_540yPc3E2RA\",[a]));const r=b(fs,\"s_V24BuGzIqHI\",[a,s,l]);return e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your blog posts and articles\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:C(\"s_Oc2O0zQdsgE\",[l])},g(o=>o.value?\"Cancel\":\"New Post\",[l],'p0.value?\"Cancel\":\"New Post\"'),3,null)],3,null),l.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Post\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Title\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.title,[s],\"p0.value.title\"),onInput$:C(\"s_Et0psVOr3QA\",[s])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Content\",3,null),e(\"textarea\",null,{rows:6,class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.content,[s],\"p0.value.content\"),onInput$:C(\"s_RJ3Ap4n0gmY\",[s])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center\"},[e(\"input\",null,{type:\"checkbox\",id:\"published\",class:\"mr-2\",checked:g(o=>o.value.published,[s],\"p0.value.published\"),onChange$:C(\"s_q00lGzU6qCM\",[s])},null,3,null),e(\"label\",null,{for:\"published\",class:\"text-sm font-medium text-gray-700\"},\"Publish immediately\",3,null)],3,null),e(\"div\",null,{class:\"flex space-x-3\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:r},\"Create Post\",3,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\",onClick$:C(\"s_bIZQZkM05f0\",[l])},\"Cancel\",3,null)],3,null)],3,null)],3,\"J4_0\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},\"Loading posts...\",3,\"J4_1\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},[e(\"p\",null,null,\"No posts found.\",3,null),e(\"p\",null,{class:\"text-sm mt-2\"},\"Create your first blog post above.\",3,null)],3,\"J4_2\"):n.value.map(o=>{var i;return e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},[(i=o.content)==null?void 0:i.substring(0,100),\"...\"],1,null),e(\"p\",null,{class:\"text-xs text-gray-400 mt-1\"},[\"Created: \",new Date(o.created_at).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-3\"},[e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${o.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,o.published?\"Published\":\"Draft\",1,null),e(\"a\",{href:`/posts/${o.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm\"},\"View →\",3,null)],1,null)],1,null),1,o.id)}),1,null)],1,null)],1,\"J4_3\")},ys=O(b(bs,\"s_RWtIVOCEnf0\")),vs={title:\"Posts - Content Management\",meta:[{name:\"description\",content:\"Manage your blog posts and articles\"}]},xs=Object.freeze(Object.defineProperty({__proto__:null,default:ys,head:vs},Symbol.toStringTag,{value:\"Module\"})),ws=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{count:s}=await l.from(\"posts\").select(\"*\",{count:\"exact\",head:!0}).eq(\"author_id\",t.id),{data:a}=await l.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\",t.id).order(\"created_at\",{ascending:!1}).limit(5),{data:r}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),{count:o}=await l.from(\"builder_pages\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id),{count:i}=await l.from(\"design_system_components\").select(\"*\",{count:\"exact\",head:!0}).eq(\"created_by\",t.id),u=new Date(Date.now()-3e5).toISOString(),{count:c}=await l.from(\"user_sessions\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id).gte(\"last_activity\",u).eq(\"active\",!0);return{user:t,stats:{postsCount:s||0,pagesCount:o||0,componentsCount:i||0,totalFiles:(r==null?void 0:r.total_files)||0,totalSize:(r==null?void 0:r.total_size)||0,storageUsed:Se((r==null?void 0:r.total_size)||0),activeSessions:c||0},recentPosts:a||[]}},_e=ae(b(ws,\"s_rzz0Rmkfnsc\"));function Se(n){const t=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(n===0)return\"0 B\";const l=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,l)).toFixed(1)} ${t[l]}`}const _s=async()=>{const[n]=T();try{const t=await fetch(\"/api/dashboard/stats\",{headers:{Cookie:document.cookie}});if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to fetch realtime stats\",{error:t instanceof Error?t.message:String(t)})}},Ss=()=>{const n=_e(),t=y(null);return j(b(_s,\"s_FyInf7hQmPU\",[t])),n.value?e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900 mb-8\"},[\"Welcome back, \",g(l=>l.value.user.email,[n],\"p0.value.user.email\"),\"!\"],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.postsCount,[n],\"p0.value.stats.postsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.pagesCount,[n],\"p0.value.stats.pagesCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"🧩\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Components\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.componentsCount,[n],\"p0.value.stats.componentsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g((l,s)=>{var a;return((a=s.value)==null?void 0:a.totalFiles)||l.value.stats.totalFiles||0},[n,t],\"p1.value?.totalFiles||p0.value.stats.totalFiles||0\"),3,null)],3,null)],3,null),3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Quick Actions\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"a\",null,{href:\"/dashboard/pages\",class:\"block bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Create Page\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Build with Builder.io\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block bg-green-50 hover:bg-green-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Write Post\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Create blog content\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block bg-purple-50 hover:bg-purple-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Upload Media\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Add files and images\",3,null)],3,null)],3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Design System Status\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[[\"DS Button\",\"DS Card\",\"DS Input\",\"DS File Upload\"].map(l=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},l,1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Active\",3,null)],1,l)),e(\"a\",null,{href:\"/dashboard/components\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"Manage Components →\",3,null)],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Health\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Builder.io\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Supabase\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"R2 Storage\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"View Analytics →\",3,null)],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Recent Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y divide-gray-200\"},n.value.recentPosts.length===0?e(\"div\",null,{class:\"px-6 py-4 text-gray-500\"},\"No posts yet\",3,\"we_1\"):n.value.recentPosts.map(l=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-900\"},v(l,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},new Date(l.created_at).toLocaleDateString(),1,null)],1,null),e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${l.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,l.published?\"Published\":\"Draft\",1,null)],1,null),1,l.id)),1,null)],1,null)],1,\"we_2\"):e(\"div\",null,null,\"Loading...\",3,\"we_0\")},ks=O(b(Ss,\"s_tKEjWeTgiGA\")),Cs={title:\"Dashboard - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"User dashboard\"}]},Ts=Object.freeze(Object.defineProperty({__proto__:null,_auto_formatFileSize:Se,default:ks,head:Cs,useDashboardData:_e},Symbol.toStringTag,{value:\"Module\"})),Ps=async()=>{const[n,t,l,s,a]=T();l.value=!0,t.value=\"\";try{const{error:r}=await re.signIn(n.value,a.value);if(r)throw r;await s(\"/dashboard\")}catch(r){t.value=r instanceof Error?r.message:\"Login failed\"}finally{l.value=!1}},Es=async n=>{const[t,l]=T();l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithOAuth(n);if(s)throw s}catch(s){t.value=s instanceof Error?s.message:\"OAuth login failed\",l.value=!1}},Rs=async()=>{const[n,t,l]=T();if(!n.value){t.value=\"Please enter your email\";return}l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithMagicLink(n.value);if(s)throw s;t.value=\"Check your email for the login link!\"}catch(s){t.value=s instanceof Error?s.message:\"Failed to send magic link\"}finally{l.value=!1}},Fs=()=>{const n=Ee(),t=y(\"\"),l=y(\"\"),s=y(!1),a=y(\"\"),r=b(Ps,\"s_M7uVWgz5fLo\",[t,a,s,n,l]),o=b(Es,\"s_1Fz1nHxVqXo\",[a,s]),i=b(Rs,\"s_F9kiKsoYGLc\",[t,a,s]);return e(\"div\",null,{class:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\"},e(\"div\",null,{class:\"max-w-md w-full space-y-8\"},[e(\"div\",null,null,e(\"h2\",null,{class:\"mt-6 text-center text-3xl font-extrabold text-gray-900\"},\"Sign in to your account\",3,null),3,null),e(\"div\",null,{class:\"mt-8 space-y-6\"},[a.value&&e(\"div\",null,{class:\"rounded-md bg-red-50 p-4\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(u=>u.value,[a],\"p0.value\"),3,null),3,\"V7_0\"),e(\"div\",null,{class:\"space-y-3\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_DIXakIIbtmc\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",viewBox:\"0 0 24 24\"},[e(\"path\",null,{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"},null,3,null),e(\"path\",null,{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"},null,3,null),e(\"path\",null,{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"},null,3,null),e(\"path\",null,{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"},null,3,null)],3,null),\"Continue with Google\"],3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_0Ck2IrGMcgM\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),\"Continue with GitHub\"],3,null)],3,null),e(\"div\",null,{class:\"relative\"},[e(\"div\",null,{class:\"absolute inset-0 flex items-center\"},e(\"div\",null,{class:\"w-full border-t border-gray-300\"},null,3,null),3,null),e(\"div\",null,{class:\"relative flex justify-center text-sm\"},e(\"span\",null,{class:\"px-2 bg-gray-50 text-gray-500\"},\"Or continue with\",3,null),3,null)],3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{for:\"email\",class:\"block text-sm font-medium text-gray-700\"},\"Email address\",3,null),e(\"input\",null,{id:\"email\",type:\"email\",autoComplete:\"email\",required:!0,value:g(u=>u.value,[t],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_DYgs0Z65Quc\",[t])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{for:\"password\",class:\"block text-sm font-medium text-gray-700\"},\"Password\",3,null),e(\"input\",null,{id:\"password\",type:\"password\",autoComplete:\"current-password\",required:!0,value:g(u=>u.value,[l],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_oWetVDGIFg4\",[l])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 mr-2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:r},g(u=>u.value?\"Signing in...\":\"Sign in\",[s],'p0.value?\"Signing in...\":\"Sign in\"'),3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 ml-2 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:i},\"Email magic link\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},e(\"a\",null,{href:\"/signup\",class:\"text-sm text-blue-600 hover:text-blue-500\"},\"Don't have an account? Sign up\",3,null),3,null)],1,null)],1,null),1,\"V7_1\")},Ms=O(b(Fs,\"s_aJcwFH6Iesk\")),Os={title:\"Login - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"Sign in to your account\"}]},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ms,head:Os},Symbol.toStringTag,{value:\"Module\"})),H=async({json:n})=>{n(404,{error:{code:\"NOT_FOUND\",message:\"API endpoint not found\"}})},$s=H,Ds=H,Ls=H,Is=H,js=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Ls,onGet:H,onPatch:Is,onPost:$s,onPut:Ds},Symbol.toStringTag,{value:\"Module\"})),qs=()=>e(\"div\",null,{class:\"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\"},e(\"div\",null,{class:\"text-center max-w-md mx-auto p-8\"},[e(\"div\",null,{class:\"text-8xl mb-6\"},\"🚀\",3,null),e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-4\"},\"404\",3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8\"},\"This page doesn't exist in our production stack\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"a\",null,{href:\"/\",class:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🏠 Back to Home\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},\"Or explore our live features:\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-4 text-sm\"},[e(\"a\",null,{href:\"/dashboard\",class:\"text-blue-600 hover:text-blue-800\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-purple-600 hover:text-purple-800\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/api/health\",class:\"text-green-600 hover:text-green-800\"},\"💚 Health Check\",3,null)],3,null)],3,null)],3,null),3,\"q5_0\"),Us=O(b(qs,\"s_dUKnuUOG7r8\")),zs={title:\"404 - Page Not Found\",meta:[{name:\"description\",content:\"The page you are looking for does not exist\"}]},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,head:zs},Symbol.toStringTag,{value:\"Module\"})),Ns=async({params:n,status:t})=>{const l=n.slug;if(!l)return t(404),null;try{const s=await V.getPage(l,!0);return!s||!s.published?(t(404),null):(V.incrementViewCount(s.id).catch(()=>{}),s)}catch(s){return p.error(\"Error loading page\",{slug:l},s),t(500),null}},ie=ae(b(Ns,\"s_bgpN1vdANm8\")),Gs=async()=>{try{return{params:(await V.getPublishedPages({limit:100})).data.map(t=>({slug:t.slug}))}}catch(n){return p.error(\"Error generating static pages\",{},n),{params:[]}}},Vs=n=>{const t=n.block.properties||{};switch(n.block.component_name||n.block.block_type){case\"ds-button\":return e(\"ds-button\",{variant:t.variant||\"primary\",size:t.size||\"md\",disabled:t.disabled||!1},null,t.label||\"Button\",1,\"FM_0\");case\"ds-card\":return e(\"div\",null,{class:\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm\"},[t.title&&e(\"h3\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},v(t,\"title\"),1,\"FM_1\"),t.subtitle&&e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"subtitle\"),1,\"FM_2\"),t.content&&e(\"div\",{dangerouslySetInnerHTML:v(t,\"content\")},null,null,3,\"FM_3\"),n.block.children&&n.block.children.length>0&&e(\"div\",null,null,n.block.children.map((a,r)=>M(I,{block:a},3,`${n.block.id}-child-${r}`)),1,\"FM_4\")],1,null);case\"ds-input\":return e(\"ds-input\",{type:t.type||\"text\",label:t.label||\"Input\",placeholder:t.placeholder||\"\",required:t.required||!1,disabled:t.disabled||!1},null,null,3,null);case\"ds-file-upload\":return e(\"div\",null,{class:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"},[e(\"p\",null,{class:\"text-gray-600\"},t.label||\"Upload File\",1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-2\"},[t.accept||\"*/*\",\" • Max \",((t.maxSize||10485760)/1024/1024).toFixed(1),\"MB\"],1,null)],1,null);case\"heading\":const l=t.level||2,s=`font-bold text-gray-900 ${l===1?\"text-4xl\":l===2?\"text-3xl\":l===3?\"text-2xl\":l===4?\"text-xl\":l===5?\"text-lg\":\"text-base\"}`;return l===1?e(\"h1\",{class:s},null,t.text||\"Heading\",1,\"FM_5\"):l===2?e(\"h2\",{class:s},null,t.text||\"Heading\",1,\"FM_6\"):l===3?e(\"h3\",{class:s},null,t.text||\"Heading\",1,\"FM_7\"):l===4?e(\"h4\",{class:s},null,t.text||\"Heading\",1,\"FM_8\"):l===5?e(\"h5\",{class:s},null,t.text||\"Heading\",1,\"FM_9\"):e(\"h6\",{class:s},null,t.text||\"Heading\",1,null);case\"paragraph\":return e(\"p\",null,{class:\"text-gray-700 leading-relaxed\"},t.text||\"Paragraph text\",1,null);case\"image\":return e(\"div\",null,{class:\"my-6\"},[e(\"img\",{src:t.src||\"/placeholder.jpg\",alt:t.alt||\"\",class:`max-w-full h-auto ${t.className||\"\"}`,width:t.width||\"800\",height:t.height||\"600\"},{loading:\"lazy\"},null,3,null),t.caption&&e(\"p\",null,{class:\"text-sm text-gray-500 mt-2 text-center\"},v(t,\"caption\"),1,\"FM_10\")],1,null);case\"spacer\":return e(\"div\",{style:{height:`${t.height||32}px`}},{class:\"w-full\"},null,3,null);case\"html\":return e(\"div\",{class:t.className||\"\",dangerouslySetInnerHTML:t.html||\"\"},null,null,3,null);default:return e(\"div\",null,{class:\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\"},[e(\"p\",null,{class:\"text-yellow-800 text-sm\"},[\"Unknown component: \",g(a=>a.block.component_name||a.block.block_type,[n],\"p0.block.component_name||p0.block.block_type\")],3,null),process.env.NODE_ENV===\"development\"&&e(\"pre\",null,{class:\"text-xs text-yellow-600 mt-2 overflow-auto\"},JSON.stringify(t,null,2),1,\"FM_11\")],1,null)}},I=O(b(Vs,\"s_hTWVJJoJphc\")),Hs=n=>{const l=(n.page.blocks||[]).reduce((s,a)=>{const r=a.region||\"main\";return s[r]||(s[r]=[]),s[r].push(a),s},{});switch(Object.keys(l).forEach(s=>{l[s].sort((a,r)=>a.order_index-r.order_index)}),n.template){case\"landing\":return e(\"div\",null,{class:\"min-h-screen\"},[l.header&&e(\"header\",null,{class:\"bg-white shadow-sm\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"},l.header.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_12\"),e(\"main\",null,{class:\"flex-1\"},l.main&&e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},e(\"div\",null,{class:\"space-y-12\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_13\"),1,null),l.footer&&e(\"footer\",null,{class:\"bg-gray-50 border-t\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},l.footer.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_14\")],1,\"FM_15\");case\"blog\":return e(\"article\",null,{class:\"min-h-screen bg-white\"},e(\"div\",null,{class:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},[e(\"header\",null,{class:\"mb-12\"},[e(\"h1\",null,{class:\"text-4xl font-bold text-gray-900 mb-4\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-xl text-gray-600 mb-6\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_16\"),e(\"div\",null,{class:\"flex items-center text-sm text-gray-500\"},[e(\"time\",null,{dateTime:g(s=>s.page.created_at,[n],\"p0.page.created_at\")},new Date(n.page.created_at).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"}),1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[g(s=>s.page.view_count,[n],\"p0.page.view_count\"),\" views\"],3,null)],1,null)],1,null),e(\"div\",null,{class:\"prose prose-lg max-w-none\"},l.main&&l.main.map(s=>M(I,{block:s},3,s.id)),1,null)],1,null),1,null);default:return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},e(\"div\",null,{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},[e(\"header\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-gray-600 mt-2\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_17\")],1,null),e(\"div\",{class:`grid gap-8 ${l.sidebar?\"grid-cols-1 lg:grid-cols-3\":\"grid-cols-1\"}`},null,[e(\"main\",{class:l.sidebar?\"lg:col-span-2\":\"col-span-1\"},null,l.main&&e(\"div\",null,{class:\"space-y-6\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,\"FM_18\"),1,null),l.sidebar&&e(\"aside\",null,{class:\"lg:col-span-1\"},e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm p-6 space-y-6\"},l.sidebar.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_19\")],1,null)],1,null),1,null)}},ke=O(b(Hs,\"s_mzLcv8PuSf4\")),Ks=()=>{const n=ie();return M(Re,{value:n,onPending:()=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-3 h-8 w-8 text-gray-400 mx-auto\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),e(\"p\",null,{class:\"text-gray-500 mt-2\"},\"Loading page...\",3,null)],3,null),3,\"FM_20\"),onRejected:t=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_21\"),onResolved:t=>(ne(),t?M(ke,{page:t,get template(){return t.template},[F]:{template:le(t,\"template\")}},3,\"FM_23\"):e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_22\")),[F]:{value:F,onPending:F,onRejected:F,onResolved:F}},3,\"FM_24\")},Qs=O(b(Ks,\"s_O9a4FXDqDuI\")),Ws=({resolveValue:n})=>{const t=n(ie);if(!t)return{title:\"Page Not Found\",meta:[{name:\"description\",content:\"The requested page could not be found.\"}]};const l=[{name:\"description\",content:t.seo_description||t.description||`${t.title} - Learn more about this page.`},{name:\"robots\",content:t.published?\"index, follow\":\"noindex, nofollow\"},{property:\"og:title\",content:t.seo_title||t.title},{property:\"og:description\",content:t.seo_description||t.description||\"\"},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:`/${t.slug}`},{name:\"twitter:card\",content:\"summary_large_image\"},{name:\"twitter:title\",content:t.seo_title||t.title},{name:\"twitter:description\",content:t.seo_description||t.description||\"\"}];return t.featured_image&&l.push({property:\"og:image\",content:t.featured_image}),t.social_image?(l.push({property:\"og:image\",content:t.social_image}),l.push({name:\"twitter:image\",content:t.social_image})):t.featured_image&&l.push({name:\"twitter:image\",content:t.featured_image}),{title:t.seo_title||t.title,meta:l}},Js=Object.freeze(Object.defineProperty({__proto__:null,_auto_ContentBlockRenderer:I,_auto_PageLayout:ke,default:Qs,head:Ws,onStaticGenerate:Gs,usePageData:ie},Symbol.toStringTag,{value:\"Module\"})),Zs=[je],q=()=>ze,U=()=>Ge,S=()=>Ye,Ys=[[\"/\",[S,()=>at],\"/\",[\"q-CSb0NZF_.js\",\"q-CRu92-iL.js\"]],[\"manifest.json\",[S,()=>ot],\"/manifest.json\",[\"q-CSb0NZF_.js\"]],[\"api/analytics/dashboard/\",[S,()=>mt],\"/api/analytics/dashboard/\",[\"q-CSb0NZF_.js\"]],[\"api/auth/status/\",[S,()=>ft],\"/api/auth/status/\",[\"q-CSb0NZF_.js\"]],[\"api/cache/analytics/\",[S,()=>wt],\"/api/cache/analytics/\",[\"q-CSb0NZF_.js\"]],[\"api/content/media/\",[S,()=>kt],\"/api/content/media/\",[\"q-CSb0NZF_.js\"]],[\"api/content/pages/\",[S,()=>Ot],\"/api/content/pages/\",[\"q-CSb0NZF_.js\"]],[\"api/content/posts/\",[S,()=>Dt],\"/api/content/posts/\",[\"q-CSb0NZF_.js\"]],[\"api/content/search/\",[S,()=>It],\"/api/content/search/\",[\"q-CSb0NZF_.js\"]],[\"api/dashboard/stats/\",[S,()=>qt],\"/api/dashboard/stats/\",[\"q-CSb0NZF_.js\"]],[\"api/files/list/\",[S,()=>ye],\"/api/files/list/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/signed-url/\",[S,()=>Bt],\"/api/storage/signed-url/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/proxy/[.path]\",[S,()=>Ht],\"/api/storage/proxy/[.path]\",[\"q-CSb0NZF_.js\"]],[\"api/cache/\",[S,()=>Jt],\"/api/cache/\",[\"q-CSb0NZF_.js\"]],[\"api/content/\",[S,()=>Yt],\"/api/content/\",[\"q-CSb0NZF_.js\"]],[\"api/docs/\",[S,()=>ll],\"/api/docs/\",[\"q-CSb0NZF_.js\",\"q-C-Vwv8I7.js\"]],[\"api/errors/\",[S,()=>ol],\"/api/errors/\",[\"q-CSb0NZF_.js\"]],[\"api/health/\",[S,()=>vl],\"/api/health/\",[\"q-CSb0NZF_.js\"]],[\"api/logs/\",[S,()=>Cl],\"/api/logs/\",[\"q-CSb0NZF_.js\"]],[\"api/upload/\",[S,()=>ve],\"/api/upload/\",[\"q-CSb0NZF_.js\"]],[\"auth/callback/\",[S,()=>Il],\"/auth/callback/\",[\"q-CSb0NZF_.js\",\"q-DAWT_rQB.js\"]],[\"dashboard/analytics/\",[S,U,q,()=>Nl],\"/dashboard/analytics/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D3peGYRe.js\"]],[\"dashboard/components/\",[S,U,q,()=>Ql],\"/dashboard/components/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-BXBKrR62.js\"]],[\"dashboard/media/\",[S,U,q,()=>as],\"/dashboard/media/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-TA-9Pb1a.js\"]],[\"dashboard/pages/\",[S,U,q,()=>ps],\"/dashboard/pages/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D_dUu6X9.js\"]],[\"dashboard/posts/\",[S,U,q,()=>xs],\"/dashboard/posts/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CS-S8Nx0.js\"]],[\"dashboard/\",[S,U,q,()=>Ts],\"/dashboard/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CFimUew-.js\"]],[\"login/\",[S,()=>As],\"/login/\",[\"q-CSb0NZF_.js\",\"q-ACkpa2hX.js\"]],[\"api/[.404]\",[S,()=>js],\"/api/[.404]\",[\"q-CSb0NZF_.js\",\"q-DRbnYsbH.js\"]],[\"[.catchall]\",[S,()=>Bs],\"/[.catchall]\",[\"q-CSb0NZF_.js\",\"q-BhAqSnFt.js\"]],[\"[...slug]\",[S,()=>Js],\"/[...slug]\",[\"q-CSb0NZF_.js\",\"q-BdYugbGr.js\"]]],Xs=[],en=!0,tn=\"/\",ln=!0,rn={routes:Ys,serverPlugins:Zs,menus:Xs,trailingSlash:en,basePathname:tn,cacheModules:ln};export{tn as b,ln as c,p as l,Xs as m,rn as q,Ys as r,Zs as s,en as t};"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 4,
        "content": "`:\"\",g(o=>`</${o.value}>`,[n],\"`</${p0.value}>`\")],1,null),1,null),1,null)],1,null)],1,null)],1,null)],1,\"IM_7\")},Hl=O(b(Vl,\"s_r0j4X6otVtI\")),Kl={title:\"Components - Design System\",meta:[{name:\"description\",content:\"Manage and preview your design system components\"}]},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Hl,head:Kl},Symbol.toStringTag,{value:\"Module\"}));async function xe(n){const t=E();if(!t)throw new Error(\"Supabase client not available - check configuration\");const l=n.get(\"sb-auth-token\");if(!l)return null;try{const{data:{user:s}}=await t.auth.getUser(l.value);return s}catch{return null}}const Wl=n=>e(\"ds-file-upload\",{onDsUploadSuccess$:n.onUploadSuccess$,onDsUploadError$:n.onUploadError$,onDsUploadComplete$:n.onUploadComplete$},{endpoint:g(t=>t.endpoint||\"/api/upload\",[n],'p0.endpoint||\"/api/upload\"'),accept:g(t=>t.accept||\"image/*,application/pdf,text/*\",[n],'p0.accept||\"image/*,application/pdf,text/*\"'),maxSize:g(t=>t.maxSize||10485760,[n],\"p0.maxSize||10*1024*1024\"),multiple:g(t=>t.multiple||!1,[n],\"p0.multiple||false\"),bucket:g(t=>t.bucket||\"uploads\",[n],'p0.bucket||\"uploads\"'),class:g(t=>t.class,[n],\"p0.class\")},null,2,\"iB_2\"),Jl=O(b(Wl,\"s_C03Fqoboh3U\")),Zl=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{data:s}=await l.from(\"profiles\").select(\"*\").eq(\"id\",t.id).single(),{data:a,error:r}=await l.from(\"file_metadata\").select(\"*\").eq(\"user_id\",t.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1}).limit(50),{data:o}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),i=c=>{const m=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(c===0)return\"0 B\";const d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(1)} ${m[d]}`},u=(a||[]).map(c=>({id:c.id,name:c.file_name,size:c.file_size,type:c.mime_type||\"application/octet-stream\",url:`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.storage_path}`,uploadedAt:c.created_at,thumbnailUrl:c.thumbnail_path?`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.thumbnail_path}`:void 0,tags:c.tags||[]}));return{user:t,profile:s,files:u,stats:{totalFiles:(o==null?void 0:o.total_files)||0,totalSize:(o==null?void 0:o.total_size)||0,storageUsed:i((o==null?void 0:o.total_size)||0)},hasError:!!r}},we=ae(b(Zl,\"s_00pXWz0FAag\")),Yl=async()=>{var a,r;const[n,t,l,s]=T();if((a=t.value)!=null&&a.user){n.value=!0;try{const o=await fetch(\"/api/files/list?limit=50\",{headers:{Cookie:document.cookie}});if(o.ok){const i=await o.json();l.value=i.files}}catch(o){const i=o instanceof Error?o.message:\"Unknown error\";p.error(\"Failed to refresh file list\",{error:i,endpoint:\"/api/files/list\",userId:(r=t.value.user)==null?void 0:r.id}),s.value=`❌ Failed to refresh file list: ${i}`,l.value=[]}finally{n.value=!1}}},Xl=n=>{const[t,l,s]=T(),{file:a}=n.detail;s.value=`✅ Uploaded: ${a.name}`,t(),l.value+=1},es=n=>{const[t]=T(),{file:l,error:s}=n.detail;t.value=`❌ Failed: ${l.name} - ${s}`},ts=n=>{const[t]=T(),{results:l}=n.detail,s=l.filter(r=>r.status===\"success\").length,a=l.filter(r=>r.status===\"error\").length;t.value=`📊 Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{t.value=\"\"},5e3)},ls=()=>{ne();const n=we(),t=y(\"\"),l=y(0),s=y([]),a=y(!1);if(!n.value)return e(\"div\",null,{class:\"flex items-center justify-center h-64\"},e(\"div\",null,{class:\"text-gray-500\"},\"Loading...\",3,null),3,\"Wk_0\");const o=b(Xl,\"s_cdAui9V38SU\",[b(Yl,\"s_BCO4F9EvjfI\",[a,n,s,t]),l,t]),i=b(es,\"s_2VhBVnlzOS4\",[t]),u=b(ts,\"s_tUSlurN8mDc\",[t]);return e(\"div\",null,{class:\"space-y-8\"},[e(\"div\",null,{class:\"border-b border-gray-200 pb-4\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Media Library\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Upload and manage your files with intelligent storage routing\",3,null)],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-3 gap-6\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Total Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.totalFiles,[n],\"p0.value.stats.totalFiles\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Used\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.storageUsed,[n],\"p0.value.stats.storageUsed\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Type\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-2\"},[e(\"span\",null,{class:\"block\"},\"✅ R2: All files (simplified architecture)\",3,null),e(\"span\",null,{class:\"block text-gray-400\"},\"Up to 5GB per file\",3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900 mb-4\"},\"Upload Files\",3,null),M(Jl,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf,text/*,video/*\",maxSize:52428800,multiple:!0,bucket:\"uploads\",class:\"w-full\",onUploadSuccess$:o,onUploadError$:i,onUploadComplete$:u,[F]:{endpoint:F,accept:F,maxSize:F,multiple:F,bucket:F,class:F,onUploadSuccess$:F,onUploadError$:F,onUploadComplete$:F}},3,\"Wk_1\"),t.value&&e(\"div\",null,{class:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\"},e(\"p\",null,{class:\"text-blue-800 text-sm\"},g(c=>c.value,[t],\"p0.value\"),3,null),3,\"Wk_2\"),e(\"div\",null,{class:\"mt-4 text-sm text-gray-600\"},[e(\"p\",null,{class:\"mb-2\"},[e(\"strong\",null,null,\"Simplified Storage:\",3,null),\" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"],3,null),e(\"p\",null,null,[e(\"strong\",null,null,\"Supported formats:\",3,null),\" Images, PDFs, text files, videos up to 50MB\"],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900\"},\"Your Files\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},a.value?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"🔄\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"Loading files...\",3,null)],3,\"Wk_3\"):(s.value.length>0?s.value:n.value.files).length===0?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"📁\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"No files yet\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Upload your first file using the upload area above\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Files will be stored securely and optimized for global delivery\",3,null)],3,\"Wk_4\"):e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"},(s.value.length>0?s.value:n.value.files).map(c=>e(\"div\",null,{class:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-3\"},[e(\"div\",null,{class:\"text-sm font-medium text-gray-900 truncate\"},v(c,\"name\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\"},\"R2\",3,null)],1,null),e(\"div\",null,{class:\"text-sm text-gray-600 space-y-1\"},[e(\"div\",null,null,[\"Size: \",(c.size/1024/1024).toFixed(2),\" MB\"],1,null),e(\"div\",null,null,[\"Type: \",v(c,\"type\")],1,null),e(\"div\",null,null,[\"Uploaded: \",new Date(c.uploadedAt).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"mt-4 flex space-x-2\"},[e(\"button\",null,{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\"},\"Download\",3,null),e(\"button\",null,{class:\"text-red-600 hover:text-red-800 text-sm font-medium\"},\"Delete\",3,null)],3,null)],1,c.id)),1,null),1,null)],1,null)],1,\"Wk_5\")},ss=O(b(ls,\"s_BDZLd0X4JxU\")),ns={title:\"Media Library - Dashboard\",meta:[{name:\"description\",content:\"Upload and manage your media files with intelligent storage routing\"}]},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,head:ns,useMediaData:we},Symbol.toStringTag,{value:\"Module\"})),rs=async()=>{const[n,t,l]=T();try{t.value=!0,n.value=\"\";const s=await fetch(\"/api/content/pages\");if(s.ok){const a=await s.json();l.value=a.pages||[]}else{const a=await s.json();n.value=a.error||\"Failed to load pages\"}}catch{n.value=\"Network error loading pages\"}finally{t.value=!1}},os=async()=>{const[n,t,l,s,a,r,o]=T();if(!r.value.trim()){t.value=\"Page title is required\";return}try{n.value=!0,t.value=\"\";const i={title:r.value.trim(),slug:a.value.trim()||void 0,description:s.value.trim()||void 0,template:\"default\",published:!1},u=await fetch(\"/api/content/pages\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});if(u.ok)await u.json(),r.value=\"\",a.value=\"\",s.value=\"\",o.value=!1,await l();else{const c=await u.json();t.value=c.error||\"Failed to create page\"}}catch{t.value=\"Network error creating page\"}finally{n.value=!1}},is=()=>{const[n,t]=T();!n.value&&t.value&&(n.value=t.value.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"))},us=async()=>{const[n]=T();await n()},cs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y(\"\"),a=y(!1),r=y(\"\"),o=y(\"\"),i=y(\"\"),u=b(rs,\"s_RSy4z08mHuY\",[s,t,n]),c=b(os,\"s_U0vSjZxjf0g\",[l,s,u,i,o,r,a]),m=b(is,\"s_OHe4b3BmXIA\",[o,r]);return j(b(us,\"s_q3arvP17QJ0\",[u])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your visual pages and landing pages\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_XklD0zp44XY\",[s,a])},g(d=>d.value?\"Cancel\":\"Create Page\",[a],'p0.value?\"Cancel\":\"Create Page\"'),3,null)],3,null),s.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"svg\",null,{class:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),3,null),e(\"div\",null,{class:\"ml-3\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(d=>d.value,[s],\"p0.value\"),3,null),3,null)],3,null),3,\"h8_0\"),a.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Page\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Page Title *\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter page title\",value:g(d=>d.value,[r],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_iUIdYKxt004\",[r,m])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},[\"Page URL Slug\",e(\"span\",null,{class:\"text-gray-500 text-xs\"},\"(auto-generated from title)\",3,null)],3,null),e(\"div\",null,{class:\"flex\"},[e(\"span\",null,{class:\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\"},\"/\",3,null),e(\"input\",null,{type:\"text\",class:\"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"your-page-url\",value:g(d=>d.value,[o],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_P0uR1QIAYP0\",[o])},null,3,null)],3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Description (Optional)\",3,null),e(\"textarea\",null,{class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Brief description of the page\",rows:3,value:g(d=>d.value,[i],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_0CoyY4fcrIQ\",[i])},null,3,null)],3,null),e(\"div\",null,{class:\"flex gap-2\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",disabled:g((d,h)=>d.value||!h.value.trim(),[l,r],\"p0.value||!p1.value.trim()\"),onClick$:c},[l.value&&e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,\"h8_1\"),g(d=>d.value?\"Creating...\":\"Create Page\",[l],'p0.value?\"Creating...\":\"Create Page\"')],1,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_NId9t3ngBME\",[s,i,o,r,a])},\"Cancel\",3,null)],1,null)],1,null)],1,\"h8_2\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b flex items-center justify-between\"},[e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Pages\",3,null),!t.value&&n.value.length>0&&e(\"span\",null,{class:\"text-sm text-gray-500\"},[g(d=>d.value.length,[n],\"p0.value.length\"),\" page\",g(d=>d.value.length===1?\"\":\"s\",[n],'p0.value.length===1?\"\":\"s\"')],3,\"h8_3\")],1,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},e(\"div\",null,{class:\"flex items-center justify-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),\"Loading pages...\"],3,null),3,\"h8_4\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-12 text-center text-gray-500\"},[e(\"svg\",null,{class:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"},null,3,null),3,null),e(\"h3\",null,{class:\"mt-2 text-sm font-medium text-gray-900\"},\"No pages\",3,null),e(\"p\",null,{class:\"mt-1 text-sm text-gray-500\"},\"Get started by creating your first page.\",3,null),e(\"div\",null,{class:\"mt-6\"},e(\"button\",null,{class:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",onClick$:C(\"s_7wN6ZaymF0U\",[s,a])},[e(\"svg\",null,{class:\"-ml-1 mr-2 h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"},null,3,null),3,null),\"Create Page\"],3,null),3,null)],3,\"h8_5\"):n.value.map(d=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50 transition-colors\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,{class:\"min-w-0 flex-1\"},[e(\"div\",null,{class:\"flex items-center\"},[e(\"h3\",null,{class:\"font-medium text-gray-900 truncate\"},v(d,\"title\"),1,null),e(\"span\",{class:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,d.published?\"Published\":\"Draft\",1,null)],1,null),e(\"div\",null,{class:\"mt-1 flex items-center text-sm text-gray-500\"},[e(\"span\",null,null,[\"/\",v(d,\"slug\")],1,null),d.description&&M(Pe,{children:[e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"truncate\"},v(d,\"description\"),1,null)]},1,\"h8_6\")],1,null),e(\"div\",null,{class:\"mt-2 flex items-center text-xs text-gray-400\"},[e(\"span\",null,null,[\"Created \",new Date(d.created_at).toLocaleDateString()],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[v(d,\"view_count\"),\" view\",d.view_count===1?\"\":\"s\"],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"capitalize\"},[v(d,\"template\"),\" template\"],1,null)],1,null)],1,null),e(\"div\",null,{class:\"ml-4 flex items-center space-x-2\"},[e(\"a\",{href:`/${d.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",target:\"_blank\",rel:\"noopener noreferrer\"},\"View →\",3,null),e(\"button\",null,{class:\"text-gray-400 hover:text-gray-600\"},e(\"svg\",null,{class:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"},null,3,null),3,null),3,null)],1,null)],1,null),1,d.id)),1,null)],1,null)],1,\"h8_7\")},ds=O(b(cs,\"s_Z1neaZRFYyU\")),gs={title:\"Pages - Content Management\",meta:[{name:\"description\",content:\"Manage your visual pages and landing pages\"}]},ps=Object.freeze(Object.defineProperty({__proto__:null,default:ds,head:gs},Symbol.toStringTag,{value:\"Module\"})),ms=async()=>{const[n,t]=T();try{const l=await fetch(\"/api/content/posts\");if(l.ok){const s=await l.json();t.value=s.posts||[]}}catch{}finally{n.value=!1}},hs=()=>{const[n]=T();n()},fs=async()=>{const[n,t,l]=T();try{(await fetch(\"/api/content/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t.value)})).ok&&(t.value={title:\"\",content:\"\",published:!1},l.value=!1,await n())}catch{}},bs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y({title:\"\",content:\"\",published:!1}),a=b(ms,\"s_1WTH03jRCsU\",[t,n]);j(b(hs,\"s_540yPc3E2RA\",[a]));const r=b(fs,\"s_V24BuGzIqHI\",[a,s,l]);return e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your blog posts and articles\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:C(\"s_Oc2O0zQdsgE\",[l])},g(o=>o.value?\"Cancel\":\"New Post\",[l],'p0.value?\"Cancel\":\"New Post\"'),3,null)],3,null),l.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Post\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Title\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.title,[s],\"p0.value.title\"),onInput$:C(\"s_Et0psVOr3QA\",[s])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Content\",3,null),e(\"textarea\",null,{rows:6,class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.content,[s],\"p0.value.content\"),onInput$:C(\"s_RJ3Ap4n0gmY\",[s])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center\"},[e(\"input\",null,{type:\"checkbox\",id:\"published\",class:\"mr-2\",checked:g(o=>o.value.published,[s],\"p0.value.published\"),onChange$:C(\"s_q00lGzU6qCM\",[s])},null,3,null),e(\"label\",null,{for:\"published\",class:\"text-sm font-medium text-gray-700\"},\"Publish immediately\",3,null)],3,null),e(\"div\",null,{class:\"flex space-x-3\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:r},\"Create Post\",3,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\",onClick$:C(\"s_bIZQZkM05f0\",[l])},\"Cancel\",3,null)],3,null)],3,null)],3,\"J4_0\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},\"Loading posts...\",3,\"J4_1\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},[e(\"p\",null,null,\"No posts found.\",3,null),e(\"p\",null,{class:\"text-sm mt-2\"},\"Create your first blog post above.\",3,null)],3,\"J4_2\"):n.value.map(o=>{var i;return e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},[(i=o.content)==null?void 0:i.substring(0,100),\"...\"],1,null),e(\"p\",null,{class:\"text-xs text-gray-400 mt-1\"},[\"Created: \",new Date(o.created_at).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-3\"},[e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${o.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,o.published?\"Published\":\"Draft\",1,null),e(\"a\",{href:`/posts/${o.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm\"},\"View →\",3,null)],1,null)],1,null),1,o.id)}),1,null)],1,null)],1,\"J4_3\")},ys=O(b(bs,\"s_RWtIVOCEnf0\")),vs={title:\"Posts - Content Management\",meta:[{name:\"description\",content:\"Manage your blog posts and articles\"}]},xs=Object.freeze(Object.defineProperty({__proto__:null,default:ys,head:vs},Symbol.toStringTag,{value:\"Module\"})),ws=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{count:s}=await l.from(\"posts\").select(\"*\",{count:\"exact\",head:!0}).eq(\"author_id\",t.id),{data:a}=await l.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\",t.id).order(\"created_at\",{ascending:!1}).limit(5),{data:r}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),{count:o}=await l.from(\"builder_pages\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id),{count:i}=await l.from(\"design_system_components\").select(\"*\",{count:\"exact\",head:!0}).eq(\"created_by\",t.id),u=new Date(Date.now()-3e5).toISOString(),{count:c}=await l.from(\"user_sessions\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id).gte(\"last_activity\",u).eq(\"active\",!0);return{user:t,stats:{postsCount:s||0,pagesCount:o||0,componentsCount:i||0,totalFiles:(r==null?void 0:r.total_files)||0,totalSize:(r==null?void 0:r.total_size)||0,storageUsed:Se((r==null?void 0:r.total_size)||0),activeSessions:c||0},recentPosts:a||[]}},_e=ae(b(ws,\"s_rzz0Rmkfnsc\"));function Se(n){const t=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(n===0)return\"0 B\";const l=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,l)).toFixed(1)} ${t[l]}`}const _s=async()=>{const[n]=T();try{const t=await fetch(\"/api/dashboard/stats\",{headers:{Cookie:document.cookie}});if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to fetch realtime stats\",{error:t instanceof Error?t.message:String(t)})}},Ss=()=>{const n=_e(),t=y(null);return j(b(_s,\"s_FyInf7hQmPU\",[t])),n.value?e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900 mb-8\"},[\"Welcome back, \",g(l=>l.value.user.email,[n],\"p0.value.user.email\"),\"!\"],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.postsCount,[n],\"p0.value.stats.postsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.pagesCount,[n],\"p0.value.stats.pagesCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"🧩\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Components\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.componentsCount,[n],\"p0.value.stats.componentsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g((l,s)=>{var a;return((a=s.value)==null?void 0:a.totalFiles)||l.value.stats.totalFiles||0},[n,t],\"p1.value?.totalFiles||p0.value.stats.totalFiles||0\"),3,null)],3,null)],3,null),3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Quick Actions\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"a\",null,{href:\"/dashboard/pages\",class:\"block bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Create Page\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Build with Builder.io\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block bg-green-50 hover:bg-green-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Write Post\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Create blog content\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block bg-purple-50 hover:bg-purple-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Upload Media\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Add files and images\",3,null)],3,null)],3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Design System Status\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[[\"DS Button\",\"DS Card\",\"DS Input\",\"DS File Upload\"].map(l=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},l,1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Active\",3,null)],1,l)),e(\"a\",null,{href:\"/dashboard/components\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"Manage Components →\",3,null)],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Health\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Builder.io\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Supabase\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"R2 Storage\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"View Analytics →\",3,null)],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Recent Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y divide-gray-200\"},n.value.recentPosts.length===0?e(\"div\",null,{class:\"px-6 py-4 text-gray-500\"},\"No posts yet\",3,\"we_1\"):n.value.recentPosts.map(l=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-900\"},v(l,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},new Date(l.created_at).toLocaleDateString(),1,null)],1,null),e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${l.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,l.published?\"Published\":\"Draft\",1,null)],1,null),1,l.id)),1,null)],1,null)],1,\"we_2\"):e(\"div\",null,null,\"Loading...\",3,\"we_0\")},ks=O(b(Ss,\"s_tKEjWeTgiGA\")),Cs={title:\"Dashboard - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"User dashboard\"}]},Ts=Object.freeze(Object.defineProperty({__proto__:null,_auto_formatFileSize:Se,default:ks,head:Cs,useDashboardData:_e},Symbol.toStringTag,{value:\"Module\"})),Ps=async()=>{const[n,t,l,s,a]=T();l.value=!0,t.value=\"\";try{const{error:r}=await re.signIn(n.value,a.value);if(r)throw r;await s(\"/dashboard\")}catch(r){t.value=r instanceof Error?r.message:\"Login failed\"}finally{l.value=!1}},Es=async n=>{const[t,l]=T();l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithOAuth(n);if(s)throw s}catch(s){t.value=s instanceof Error?s.message:\"OAuth login failed\",l.value=!1}},Rs=async()=>{const[n,t,l]=T();if(!n.value){t.value=\"Please enter your email\";return}l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithMagicLink(n.value);if(s)throw s;t.value=\"Check your email for the login link!\"}catch(s){t.value=s instanceof Error?s.message:\"Failed to send magic link\"}finally{l.value=!1}},Fs=()=>{const n=Ee(),t=y(\"\"),l=y(\"\"),s=y(!1),a=y(\"\"),r=b(Ps,\"s_M7uVWgz5fLo\",[t,a,s,n,l]),o=b(Es,\"s_1Fz1nHxVqXo\",[a,s]),i=b(Rs,\"s_F9kiKsoYGLc\",[t,a,s]);return e(\"div\",null,{class:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\"},e(\"div\",null,{class:\"max-w-md w-full space-y-8\"},[e(\"div\",null,null,e(\"h2\",null,{class:\"mt-6 text-center text-3xl font-extrabold text-gray-900\"},\"Sign in to your account\",3,null),3,null),e(\"div\",null,{class:\"mt-8 space-y-6\"},[a.value&&e(\"div\",null,{class:\"rounded-md bg-red-50 p-4\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(u=>u.value,[a],\"p0.value\"),3,null),3,\"V7_0\"),e(\"div\",null,{class:\"space-y-3\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_DIXakIIbtmc\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",viewBox:\"0 0 24 24\"},[e(\"path\",null,{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"},null,3,null),e(\"path\",null,{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"},null,3,null),e(\"path\",null,{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"},null,3,null),e(\"path\",null,{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"},null,3,null)],3,null),\"Continue with Google\"],3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_0Ck2IrGMcgM\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),\"Continue with GitHub\"],3,null)],3,null),e(\"div\",null,{class:\"relative\"},[e(\"div\",null,{class:\"absolute inset-0 flex items-center\"},e(\"div\",null,{class:\"w-full border-t border-gray-300\"},null,3,null),3,null),e(\"div\",null,{class:\"relative flex justify-center text-sm\"},e(\"span\",null,{class:\"px-2 bg-gray-50 text-gray-500\"},\"Or continue with\",3,null),3,null)],3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{for:\"email\",class:\"block text-sm font-medium text-gray-700\"},\"Email address\",3,null),e(\"input\",null,{id:\"email\",type:\"email\",autoComplete:\"email\",required:!0,value:g(u=>u.value,[t],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_DYgs0Z65Quc\",[t])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{for:\"password\",class:\"block text-sm font-medium text-gray-700\"},\"Password\",3,null),e(\"input\",null,{id:\"password\",type:\"password\",autoComplete:\"current-password\",required:!0,value:g(u=>u.value,[l],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_oWetVDGIFg4\",[l])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 mr-2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:r},g(u=>u.value?\"Signing in...\":\"Sign in\",[s],'p0.value?\"Signing in...\":\"Sign in\"'),3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 ml-2 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:i},\"Email magic link\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},e(\"a\",null,{href:\"/signup\",class:\"text-sm text-blue-600 hover:text-blue-500\"},\"Don't have an account? Sign up\",3,null),3,null)],1,null)],1,null),1,\"V7_1\")},Ms=O(b(Fs,\"s_aJcwFH6Iesk\")),Os={title:\"Login - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"Sign in to your account\"}]},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ms,head:Os},Symbol.toStringTag,{value:\"Module\"})),H=async({json:n})=>{n(404,{error:{code:\"NOT_FOUND\",message:\"API endpoint not found\"}})},$s=H,Ds=H,Ls=H,Is=H,js=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Ls,onGet:H,onPatch:Is,onPost:$s,onPut:Ds},Symbol.toStringTag,{value:\"Module\"})),qs=()=>e(\"div\",null,{class:\"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\"},e(\"div\",null,{class:\"text-center max-w-md mx-auto p-8\"},[e(\"div\",null,{class:\"text-8xl mb-6\"},\"🚀\",3,null),e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-4\"},\"404\",3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8\"},\"This page doesn't exist in our production stack\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"a\",null,{href:\"/\",class:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🏠 Back to Home\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},\"Or explore our live features:\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-4 text-sm\"},[e(\"a\",null,{href:\"/dashboard\",class:\"text-blue-600 hover:text-blue-800\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-purple-600 hover:text-purple-800\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/api/health\",class:\"text-green-600 hover:text-green-800\"},\"💚 Health Check\",3,null)],3,null)],3,null)],3,null),3,\"q5_0\"),Us=O(b(qs,\"s_dUKnuUOG7r8\")),zs={title:\"404 - Page Not Found\",meta:[{name:\"description\",content:\"The page you are looking for does not exist\"}]},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,head:zs},Symbol.toStringTag,{value:\"Module\"})),Ns=async({params:n,status:t})=>{const l=n.slug;if(!l)return t(404),null;try{const s=await V.getPage(l,!0);return!s||!s.published?(t(404),null):(V.incrementViewCount(s.id).catch(()=>{}),s)}catch(s){return p.error(\"Error loading page\",{slug:l},s),t(500),null}},ie=ae(b(Ns,\"s_bgpN1vdANm8\")),Gs=async()=>{try{return{params:(await V.getPublishedPages({limit:100})).data.map(t=>({slug:t.slug}))}}catch(n){return p.error(\"Error generating static pages\",{},n),{params:[]}}},Vs=n=>{const t=n.block.properties||{};switch(n.block.component_name||n.block.block_type){case\"ds-button\":return e(\"ds-button\",{variant:t.variant||\"primary\",size:t.size||\"md\",disabled:t.disabled||!1},null,t.label||\"Button\",1,\"FM_0\");case\"ds-card\":return e(\"div\",null,{class:\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm\"},[t.title&&e(\"h3\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},v(t,\"title\"),1,\"FM_1\"),t.subtitle&&e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"subtitle\"),1,\"FM_2\"),t.content&&e(\"div\",{dangerouslySetInnerHTML:v(t,\"content\")},null,null,3,\"FM_3\"),n.block.children&&n.block.children.length>0&&e(\"div\",null,null,n.block.children.map((a,r)=>M(I,{block:a},3,`${n.block.id}-child-${r}`)),1,\"FM_4\")],1,null);case\"ds-input\":return e(\"ds-input\",{type:t.type||\"text\",label:t.label||\"Input\",placeholder:t.placeholder||\"\",required:t.required||!1,disabled:t.disabled||!1},null,null,3,null);case\"ds-file-upload\":return e(\"div\",null,{class:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"},[e(\"p\",null,{class:\"text-gray-600\"},t.label||\"Upload File\",1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-2\"},[t.accept||\"*/*\",\" • Max \",((t.maxSize||10485760)/1024/1024).toFixed(1),\"MB\"],1,null)],1,null);case\"heading\":const l=t.level||2,s=`font-bold text-gray-900 ${l===1?\"text-4xl\":l===2?\"text-3xl\":l===3?\"text-2xl\":l===4?\"text-xl\":l===5?\"text-lg\":\"text-base\"}`;return l===1?e(\"h1\",{class:s},null,t.text||\"Heading\",1,\"FM_5\"):l===2?e(\"h2\",{class:s},null,t.text||\"Heading\",1,\"FM_6\"):l===3?e(\"h3\",{class:s},null,t.text||\"Heading\",1,\"FM_7\"):l===4?e(\"h4\",{class:s},null,t.text||\"Heading\",1,\"FM_8\"):l===5?e(\"h5\",{class:s},null,t.text||\"Heading\",1,\"FM_9\"):e(\"h6\",{class:s},null,t.text||\"Heading\",1,null);case\"paragraph\":return e(\"p\",null,{class:\"text-gray-700 leading-relaxed\"},t.text||\"Paragraph text\",1,null);case\"image\":return e(\"div\",null,{class:\"my-6\"},[e(\"img\",{src:t.src||\"/placeholder.jpg\",alt:t.alt||\"\",class:`max-w-full h-auto ${t.className||\"\"}`,width:t.width||\"800\",height:t.height||\"600\"},{loading:\"lazy\"},null,3,null),t.caption&&e(\"p\",null,{class:\"text-sm text-gray-500 mt-2 text-center\"},v(t,\"caption\"),1,\"FM_10\")],1,null);case\"spacer\":return e(\"div\",{style:{height:`${t.height||32}px`}},{class:\"w-full\"},null,3,null);case\"html\":return e(\"div\",{class:t.className||\"\",dangerouslySetInnerHTML:t.html||\"\"},null,null,3,null);default:return e(\"div\",null,{class:\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\"},[e(\"p\",null,{class:\"text-yellow-800 text-sm\"},[\"Unknown component: \",g(a=>a.block.component_name||a.block.block_type,[n],\"p0.block.component_name||p0.block.block_type\")],3,null),process.env.NODE_ENV===\"development\"&&e(\"pre\",null,{class:\"text-xs text-yellow-600 mt-2 overflow-auto\"},JSON.stringify(t,null,2),1,\"FM_11\")],1,null)}},I=O(b(Vs,\"s_hTWVJJoJphc\")),Hs=n=>{const l=(n.page.blocks||[]).reduce((s,a)=>{const r=a.region||\"main\";return s[r]||(s[r]=[]),s[r].push(a),s},{});switch(Object.keys(l).forEach(s=>{l[s].sort((a,r)=>a.order_index-r.order_index)}),n.template){case\"landing\":return e(\"div\",null,{class:\"min-h-screen\"},[l.header&&e(\"header\",null,{class:\"bg-white shadow-sm\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"},l.header.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_12\"),e(\"main\",null,{class:\"flex-1\"},l.main&&e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},e(\"div\",null,{class:\"space-y-12\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_13\"),1,null),l.footer&&e(\"footer\",null,{class:\"bg-gray-50 border-t\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},l.footer.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_14\")],1,\"FM_15\");case\"blog\":return e(\"article\",null,{class:\"min-h-screen bg-white\"},e(\"div\",null,{class:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},[e(\"header\",null,{class:\"mb-12\"},[e(\"h1\",null,{class:\"text-4xl font-bold text-gray-900 mb-4\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-xl text-gray-600 mb-6\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_16\"),e(\"div\",null,{class:\"flex items-center text-sm text-gray-500\"},[e(\"time\",null,{dateTime:g(s=>s.page.created_at,[n],\"p0.page.created_at\")},new Date(n.page.created_at).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"}),1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[g(s=>s.page.view_count,[n],\"p0.page.view_count\"),\" views\"],3,null)],1,null)],1,null),e(\"div\",null,{class:\"prose prose-lg max-w-none\"},l.main&&l.main.map(s=>M(I,{block:s},3,s.id)),1,null)],1,null),1,null);default:return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},e(\"div\",null,{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},[e(\"header\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-gray-600 mt-2\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_17\")],1,null),e(\"div\",{class:`grid gap-8 ${l.sidebar?\"grid-cols-1 lg:grid-cols-3\":\"grid-cols-1\"}`},null,[e(\"main\",{class:l.sidebar?\"lg:col-span-2\":\"col-span-1\"},null,l.main&&e(\"div\",null,{class:\"space-y-6\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,\"FM_18\"),1,null),l.sidebar&&e(\"aside\",null,{class:\"lg:col-span-1\"},e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm p-6 space-y-6\"},l.sidebar.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_19\")],1,null)],1,null),1,null)}},ke=O(b(Hs,\"s_mzLcv8PuSf4\")),Ks=()=>{const n=ie();return M(Re,{value:n,onPending:()=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-3 h-8 w-8 text-gray-400 mx-auto\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),e(\"p\",null,{class:\"text-gray-500 mt-2\"},\"Loading page...\",3,null)],3,null),3,\"FM_20\"),onRejected:t=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_21\"),onResolved:t=>(ne(),t?M(ke,{page:t,get template(){return t.template},[F]:{template:le(t,\"template\")}},3,\"FM_23\"):e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_22\")),[F]:{value:F,onPending:F,onRejected:F,onResolved:F}},3,\"FM_24\")},Qs=O(b(Ks,\"s_O9a4FXDqDuI\")),Ws=({resolveValue:n})=>{const t=n(ie);if(!t)return{title:\"Page Not Found\",meta:[{name:\"description\",content:\"The requested page could not be found.\"}]};const l=[{name:\"description\",content:t.seo_description||t.description||`${t.title} - Learn more about this page.`},{name:\"robots\",content:t.published?\"index, follow\":\"noindex, nofollow\"},{property:\"og:title\",content:t.seo_title||t.title},{property:\"og:description\",content:t.seo_description||t.description||\"\"},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:`/${t.slug}`},{name:\"twitter:card\",content:\"summary_large_image\"},{name:\"twitter:title\",content:t.seo_title||t.title},{name:\"twitter:description\",content:t.seo_description||t.description||\"\"}];return t.featured_image&&l.push({property:\"og:image\",content:t.featured_image}),t.social_image?(l.push({property:\"og:image\",content:t.social_image}),l.push({name:\"twitter:image\",content:t.social_image})):t.featured_image&&l.push({name:\"twitter:image\",content:t.featured_image}),{title:t.seo_title||t.title,meta:l}},Js=Object.freeze(Object.defineProperty({__proto__:null,_auto_ContentBlockRenderer:I,_auto_PageLayout:ke,default:Qs,head:Ws,onStaticGenerate:Gs,usePageData:ie},Symbol.toStringTag,{value:\"Module\"})),Zs=[je],q=()=>ze,U=()=>Ge,S=()=>Ye,Ys=[[\"/\",[S,()=>at],\"/\",[\"q-CSb0NZF_.js\",\"q-CRu92-iL.js\"]],[\"manifest.json\",[S,()=>ot],\"/manifest.json\",[\"q-CSb0NZF_.js\"]],[\"api/analytics/dashboard/\",[S,()=>mt],\"/api/analytics/dashboard/\",[\"q-CSb0NZF_.js\"]],[\"api/auth/status/\",[S,()=>ft],\"/api/auth/status/\",[\"q-CSb0NZF_.js\"]],[\"api/cache/analytics/\",[S,()=>wt],\"/api/cache/analytics/\",[\"q-CSb0NZF_.js\"]],[\"api/content/media/\",[S,()=>kt],\"/api/content/media/\",[\"q-CSb0NZF_.js\"]],[\"api/content/pages/\",[S,()=>Ot],\"/api/content/pages/\",[\"q-CSb0NZF_.js\"]],[\"api/content/posts/\",[S,()=>Dt],\"/api/content/posts/\",[\"q-CSb0NZF_.js\"]],[\"api/content/search/\",[S,()=>It],\"/api/content/search/\",[\"q-CSb0NZF_.js\"]],[\"api/dashboard/stats/\",[S,()=>qt],\"/api/dashboard/stats/\",[\"q-CSb0NZF_.js\"]],[\"api/files/list/\",[S,()=>ye],\"/api/files/list/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/signed-url/\",[S,()=>Bt],\"/api/storage/signed-url/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/proxy/[.path]\",[S,()=>Ht],\"/api/storage/proxy/[.path]\",[\"q-CSb0NZF_.js\"]],[\"api/cache/\",[S,()=>Jt],\"/api/cache/\",[\"q-CSb0NZF_.js\"]],[\"api/content/\",[S,()=>Yt],\"/api/content/\",[\"q-CSb0NZF_.js\"]],[\"api/docs/\",[S,()=>ll],\"/api/docs/\",[\"q-CSb0NZF_.js\",\"q-C-Vwv8I7.js\"]],[\"api/errors/\",[S,()=>ol],\"/api/errors/\",[\"q-CSb0NZF_.js\"]],[\"api/health/\",[S,()=>vl],\"/api/health/\",[\"q-CSb0NZF_.js\"]],[\"api/logs/\",[S,()=>Cl],\"/api/logs/\",[\"q-CSb0NZF_.js\"]],[\"api/upload/\",[S,()=>ve],\"/api/upload/\",[\"q-CSb0NZF_.js\"]],[\"auth/callback/\",[S,()=>Il],\"/auth/callback/\",[\"q-CSb0NZF_.js\",\"q-DAWT_rQB.js\"]],[\"dashboard/analytics/\",[S,U,q,()=>Nl],\"/dashboard/analytics/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D3peGYRe.js\"]],[\"dashboard/components/\",[S,U,q,()=>Ql],\"/dashboard/components/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-BXBKrR62.js\"]],[\"dashboard/media/\",[S,U,q,()=>as],\"/dashboard/media/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-TA-9Pb1a.js\"]],[\"dashboard/pages/\",[S,U,q,()=>ps],\"/dashboard/pages/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D_dUu6X9.js\"]],[\"dashboard/posts/\",[S,U,q,()=>xs],\"/dashboard/posts/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CS-S8Nx0.js\"]],[\"dashboard/\",[S,U,q,()=>Ts],\"/dashboard/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CFimUew-.js\"]],[\"login/\",[S,()=>As],\"/login/\",[\"q-CSb0NZF_.js\",\"q-ACkpa2hX.js\"]],[\"api/[.404]\",[S,()=>js],\"/api/[.404]\",[\"q-CSb0NZF_.js\",\"q-DRbnYsbH.js\"]],[\"[.catchall]\",[S,()=>Bs],\"/[.catchall]\",[\"q-CSb0NZF_.js\",\"q-BhAqSnFt.js\"]],[\"[...slug]\",[S,()=>Js],\"/[...slug]\",[\"q-CSb0NZF_.js\",\"q-BdYugbGr.js\"]]],Xs=[],en=!0,tn=\"/\",ln=!0,rn={routes:Ys,serverPlugins:Zs,menus:Xs,trailingSlash:en,basePathname:tn,cacheModules:ln};export{tn as b,ln as c,p as l,Xs as m,rn as q,Ys as r,Zs as s,en as t};"
      },
      {
        "file": "/server/q-Bg2o_rQ1.js",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 1,
        "content": "import{l as o}from\"./q-BWJCWDUn.js\";import*as n from\"@sentry/browser\";import\"./q-BFBoRxOI.js\";import\"@supabase/supabase-js\";import\"zod\";class l{constructor(){this.initialized=!1;const e=typeof process<\"u\",r=e?process.env.NODE_ENV!==\"production\":window.location.hostname===\"localhost\";this.config={dsn:e?process.env.SENTRY_DSN:\"https://c61059fda17fdf0a9baa21e9b8673f22@o4509594523205632.ingest.de.sentry.io/4509594591690832\",environment:e&&process.env.SENTRY_ENVIRONMENT||\"development\",release:e&&process.env.APP_VERSION||\"1.0.0\",sampleRate:r?1:.1,tracesSampleRate:r?1:.1,enablePerformanceMonitoring:!0,enableUserFeedback:!0}}initialize(){if(!(this.initialized||typeof window>\"u\")){if(!this.config.dsn){o.info(\"Sentry DSN not configured, skipping initialization\",{environment:this.config.environment});return}try{n.init({dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,sampleRate:this.config.sampleRate,tracesSampleRate:this.config.tracesSampleRate,replaysSessionSampleRate:this.config.environment===\"development\"?.1:.01,replaysOnErrorSampleRate:1,integrations:[...this.config.environment===\"production\"?[new n.BrowserTracing,new n.Replay({maskAllText:!0,blockAllMedia:!0})]:[]],beforeSend:(e,r)=>{if(this.config.environment===\"development\"){const t=r.originalException;if(t instanceof Error&&[\"ResizeObserver loop limit exceeded\",\"Non-Error promise rejection captured\",\"Script error\",\"Network request failed\"].some(s=>t.message.includes(s)))return null}return e.tags&&(e.tags={...e.tags,component:\"qwik-lit-builder\",platform:\"web\"}),e},beforeSendTransaction:e=>{var r;return this.config.environment===\"development\"&&(r=e.transaction)!=null&&r.includes(\"/_build/\")?null:e}}),this.initialized=!0,o.info(\"Sentry error tracking initialized\",{environment:this.config.environment,release:this.config.release})}catch(e){o.error(\"Failed to initialize Sentry\",{},e instanceof Error?e:new Error(String(e)))}}}captureError(e,r){if(this.initialized)try{return n.captureException(e,{tags:{component:(r==null?void 0:r.component)||\"unknown\",category:(r==null?void 0:r.category)||\"error\"},extra:r,level:this.mapSeverityToLevel(r==null?void 0:r.severity)})}catch(t){o.error(\"Failed to capture error in Sentry\",{},t instanceof Error?t:new Error(String(t)));return}}captureMessage(e,r=\"info\",t){if(this.initialized)try{return n.captureMessage(e,{level:r,tags:{component:(t==null?void 0:t.component)||\"unknown\"},extra:t})}catch(i){o.error(\"Failed to capture message in Sentry\",{},i instanceof Error?i:new Error(String(i)));return}}setUser(e){if(this.initialized)try{n.setUser(e)}catch(r){o.error(\"Failed to set Sentry user\",{},r instanceof Error?r:new Error(String(r)))}}setContext(e,r){if(this.initialized)try{n.setContext(e,r)}catch(t){o.error(\"Failed to set Sentry context\",{key:e},t instanceof Error?t:new Error(String(t)))}}addBreadcrumb(e,r,t){if(this.initialized)try{n.addBreadcrumb({message:e,category:r,data:t,timestamp:Date.now()/1e3,level:\"info\"})}catch(i){o.error(\"Failed to add Sentry breadcrumb\",{message:e,category:r},i instanceof Error?i:new Error(String(i)))}}startTransaction(e,r){if(!this.initialized)return null;try{return n.startTransaction({name:e,op:r})}catch(t){return o.error(\"Failed to start Sentry transaction\",{name:e,op:r},t instanceof Error?t:new Error(String(t))),null}}showUserFeedbackDialog(e){if(!(!this.initialized||!this.config.enableUserFeedback))try{const r=(e==null?void 0:e.eventId)||n.lastEventId();r&&n.showReportDialog({eventId:r})}catch(r){o.error(\"Failed to show Sentry feedback dialog\",{},r instanceof Error?r:new Error(String(r)))}}mapSeverityToLevel(e){switch(e){case\"critical\":return\"fatal\";case\"high\":return\"error\";case\"medium\":return\"warning\";case\"low\":return\"info\";default:return\"error\"}}measurePageLoad(){if(!(!this.initialized||!this.config.enablePerformanceMonitoring))try{typeof window<\"u\"&&\"performance\"in window&&new PerformanceObserver(r=>{for(const t of r.getEntries())t.entryType===\"measure\"&&n.addBreadcrumb({category:\"performance\",message:`${t.name}: ${t.duration}ms`,level:\"info\",data:{duration:t.duration,startTime:t.startTime}})}).observe({entryTypes:[\"measure\",\"navigation\"]})}catch(e){o.error(\"Failed to set up performance monitoring\",{},e instanceof Error?e:new Error(String(e)))}}reportPerformanceMetric(e,r,t=\"ms\"){if(this.initialized)try{n.addBreadcrumb({category:\"performance\",message:`${e}: ${r}${t}`,level:\"info\",data:{metric:e,value:r,unit:t}}),n.setTag(`perf.${e}`,r)}catch(i){o.error(\"Failed to report performance metric\",{name:e,value:r},i instanceof Error?i:new Error(String(i)))}}}const d=new l;function f(c,e){return d.captureError(c,e)}function m(c,e,r){d.addBreadcrumb(c,e,r)}class a{constructor(){this.errorReports=[],this.maxReports=100,this.setupGlobalHandlers()}static getInstance(){return a.instance||(a.instance=new a),a.instance}setupGlobalHandlers(){typeof window<\"u\"&&(window.addEventListener(\"error\",e=>{this.handleError(e.error,{category:\"system\",severity:\"high\",metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener(\"unhandledrejection\",e=>{this.handleError(new Error(e.reason),{category:\"system\",severity:\"high\",metadata:{type:\"unhandledrejection\",reason:e.reason}})}),window.addEventListener(\"offline\",()=>{this.handleError(new Error(\"Network offline\"),{category:\"network\",severity:\"medium\",metadata:{type:\"offline\"}})}))}handleError(e,r){var s;const t={timestamp:new Date,route:typeof window<\"u\"?window.location.pathname:void 0,userAgent:typeof navigator<\"u\"?navigator.userAgent:void 0,...r.context,metadata:{...(s=r.context)==null?void 0:s.metadata,...r.metadata}},i={error:e,context:t,severity:r.severity,category:r.category};this.recordError(i),this.reportError(i),this.attemptRecovery(i)}recordError(e){if(this.errorReports.unshift(e),this.errorReports.length>this.maxReports&&(this.errorReports=this.errorReports.slice(0,this.maxReports)),e.severity===\"critical\"&&typeof localStorage<\"u\")try{const r=JSON.parse(localStorage.getItem(\"critical_errors\")||\"[]\");r.unshift({message:e.error.message,stack:e.error.stack,context:e.context,timestamp:e.context.timestamp.toISOString()}),localStorage.setItem(\"critical_errors\",JSON.stringify(r.slice(0,10)))}catch{}}async reportError(e){var i;if(e.error.message.includes(\"Failed to report error\")||e.error.message.includes(\"fetch\")||e.error.message.includes(\"SyntaxError: Invalid or unexpected token\")||(i=e.context.metadata)!=null&&i.isErrorReportingError)return;m(`${e.category.toUpperCase()} Error occurred`,\"error\",{severity:e.severity,route:e.context.route,userId:e.context.userId,...e.context.metadata});const r=f(e.error,{category:e.category,severity:e.severity,component:\"error-handler\",...e.context.metadata}),t=e.severity===\"critical\"?\"critical\":e.severity===\"high\"?\"error\":e.severity===\"medium\"?\"warn\":\"info\";o.log(t,`${e.category.toUpperCase()} Error: ${e.error.message}`,{category:e.category,severity:e.severity,userId:e.context.userId,sessionId:e.context.sessionId,route:e.context.route,sentryEventId:r,...e.context.metadata},e.error);try{typeof fetch<\"u\"&&await fetch(\"/api/errors\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:e.error.message,stack:e.error.stack,context:e.context,severity:e.severity,category:e.category,sentryEventId:r})})}catch(s){o.error(\"Failed to report error to API\",{originalError:e.error.message},s instanceof Error?s:new Error(String(s)))}}attemptRecovery(e){var r;switch(e.category){case\"network\":(r=e.context.metadata)!=null&&r.retryable&&setTimeout(()=>{typeof window<\"u\"&&navigator.onLine&&window.location.reload()},5e3);break;case\"data\":typeof localStorage<\"u\"&&(localStorage.removeItem(\"app_cache\"),localStorage.removeItem(\"user_data\"));break;case\"ui\":e.severity===\"critical\"&&setTimeout(()=>{typeof window<\"u\"&&(window.location.href=\"/\")},3e3);break}}getRecentErrors(e=10){return this.errorReports.slice(0,e)}clearErrors(){this.errorReports=[],typeof localStorage<\"u\"&&localStorage.removeItem(\"critical_errors\")}static handleUIError(e,r){a.getInstance().handleError(e,{category:\"ui\",severity:\"medium\",context:r})}static handleAPIError(e,r){a.getInstance().handleError(e,{category:\"api\",severity:\"high\",context:r})}static handleAuthError(e,r){a.getInstance().handleError(e,{category:\"auth\",severity:\"high\",context:r})}static handleDataError(e,r){a.getInstance().handleError(e,{category:\"data\",severity:\"high\",context:r})}static handleCriticalError(e,r){a.getInstance().handleError(e,{category:\"system\",severity:\"critical\",context:r})}}a.getInstance();const{handleUIError:p}=a;export{a as GlobalErrorHandler,p as handleUIError};"
      },
      {
        "file": "/server/q-Bg2o_rQ1.js",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 1,
        "content": "import{l as o}from\"./q-BWJCWDUn.js\";import*as n from\"@sentry/browser\";import\"./q-BFBoRxOI.js\";import\"@supabase/supabase-js\";import\"zod\";class l{constructor(){this.initialized=!1;const e=typeof process<\"u\",r=e?process.env.NODE_ENV!==\"production\":window.location.hostname===\"localhost\";this.config={dsn:e?process.env.SENTRY_DSN:\"https://c61059fda17fdf0a9baa21e9b8673f22@o4509594523205632.ingest.de.sentry.io/4509594591690832\",environment:e&&process.env.SENTRY_ENVIRONMENT||\"development\",release:e&&process.env.APP_VERSION||\"1.0.0\",sampleRate:r?1:.1,tracesSampleRate:r?1:.1,enablePerformanceMonitoring:!0,enableUserFeedback:!0}}initialize(){if(!(this.initialized||typeof window>\"u\")){if(!this.config.dsn){o.info(\"Sentry DSN not configured, skipping initialization\",{environment:this.config.environment});return}try{n.init({dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,sampleRate:this.config.sampleRate,tracesSampleRate:this.config.tracesSampleRate,replaysSessionSampleRate:this.config.environment===\"development\"?.1:.01,replaysOnErrorSampleRate:1,integrations:[...this.config.environment===\"production\"?[new n.BrowserTracing,new n.Replay({maskAllText:!0,blockAllMedia:!0})]:[]],beforeSend:(e,r)=>{if(this.config.environment===\"development\"){const t=r.originalException;if(t instanceof Error&&[\"ResizeObserver loop limit exceeded\",\"Non-Error promise rejection captured\",\"Script error\",\"Network request failed\"].some(s=>t.message.includes(s)))return null}return e.tags&&(e.tags={...e.tags,component:\"qwik-lit-builder\",platform:\"web\"}),e},beforeSendTransaction:e=>{var r;return this.config.environment===\"development\"&&(r=e.transaction)!=null&&r.includes(\"/_build/\")?null:e}}),this.initialized=!0,o.info(\"Sentry error tracking initialized\",{environment:this.config.environment,release:this.config.release})}catch(e){o.error(\"Failed to initialize Sentry\",{},e instanceof Error?e:new Error(String(e)))}}}captureError(e,r){if(this.initialized)try{return n.captureException(e,{tags:{component:(r==null?void 0:r.component)||\"unknown\",category:(r==null?void 0:r.category)||\"error\"},extra:r,level:this.mapSeverityToLevel(r==null?void 0:r.severity)})}catch(t){o.error(\"Failed to capture error in Sentry\",{},t instanceof Error?t:new Error(String(t)));return}}captureMessage(e,r=\"info\",t){if(this.initialized)try{return n.captureMessage(e,{level:r,tags:{component:(t==null?void 0:t.component)||\"unknown\"},extra:t})}catch(i){o.error(\"Failed to capture message in Sentry\",{},i instanceof Error?i:new Error(String(i)));return}}setUser(e){if(this.initialized)try{n.setUser(e)}catch(r){o.error(\"Failed to set Sentry user\",{},r instanceof Error?r:new Error(String(r)))}}setContext(e,r){if(this.initialized)try{n.setContext(e,r)}catch(t){o.error(\"Failed to set Sentry context\",{key:e},t instanceof Error?t:new Error(String(t)))}}addBreadcrumb(e,r,t){if(this.initialized)try{n.addBreadcrumb({message:e,category:r,data:t,timestamp:Date.now()/1e3,level:\"info\"})}catch(i){o.error(\"Failed to add Sentry breadcrumb\",{message:e,category:r},i instanceof Error?i:new Error(String(i)))}}startTransaction(e,r){if(!this.initialized)return null;try{return n.startTransaction({name:e,op:r})}catch(t){return o.error(\"Failed to start Sentry transaction\",{name:e,op:r},t instanceof Error?t:new Error(String(t))),null}}showUserFeedbackDialog(e){if(!(!this.initialized||!this.config.enableUserFeedback))try{const r=(e==null?void 0:e.eventId)||n.lastEventId();r&&n.showReportDialog({eventId:r})}catch(r){o.error(\"Failed to show Sentry feedback dialog\",{},r instanceof Error?r:new Error(String(r)))}}mapSeverityToLevel(e){switch(e){case\"critical\":return\"fatal\";case\"high\":return\"error\";case\"medium\":return\"warning\";case\"low\":return\"info\";default:return\"error\"}}measurePageLoad(){if(!(!this.initialized||!this.config.enablePerformanceMonitoring))try{typeof window<\"u\"&&\"performance\"in window&&new PerformanceObserver(r=>{for(const t of r.getEntries())t.entryType===\"measure\"&&n.addBreadcrumb({category:\"performance\",message:`${t.name}: ${t.duration}ms`,level:\"info\",data:{duration:t.duration,startTime:t.startTime}})}).observe({entryTypes:[\"measure\",\"navigation\"]})}catch(e){o.error(\"Failed to set up performance monitoring\",{},e instanceof Error?e:new Error(String(e)))}}reportPerformanceMetric(e,r,t=\"ms\"){if(this.initialized)try{n.addBreadcrumb({category:\"performance\",message:`${e}: ${r}${t}`,level:\"info\",data:{metric:e,value:r,unit:t}}),n.setTag(`perf.${e}`,r)}catch(i){o.error(\"Failed to report performance metric\",{name:e,value:r},i instanceof Error?i:new Error(String(i)))}}}const d=new l;function f(c,e){return d.captureError(c,e)}function m(c,e,r){d.addBreadcrumb(c,e,r)}class a{constructor(){this.errorReports=[],this.maxReports=100,this.setupGlobalHandlers()}static getInstance(){return a.instance||(a.instance=new a),a.instance}setupGlobalHandlers(){typeof window<\"u\"&&(window.addEventListener(\"error\",e=>{this.handleError(e.error,{category:\"system\",severity:\"high\",metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener(\"unhandledrejection\",e=>{this.handleError(new Error(e.reason),{category:\"system\",severity:\"high\",metadata:{type:\"unhandledrejection\",reason:e.reason}})}),window.addEventListener(\"offline\",()=>{this.handleError(new Error(\"Network offline\"),{category:\"network\",severity:\"medium\",metadata:{type:\"offline\"}})}))}handleError(e,r){var s;const t={timestamp:new Date,route:typeof window<\"u\"?window.location.pathname:void 0,userAgent:typeof navigator<\"u\"?navigator.userAgent:void 0,...r.context,metadata:{...(s=r.context)==null?void 0:s.metadata,...r.metadata}},i={error:e,context:t,severity:r.severity,category:r.category};this.recordError(i),this.reportError(i),this.attemptRecovery(i)}recordError(e){if(this.errorReports.unshift(e),this.errorReports.length>this.maxReports&&(this.errorReports=this.errorReports.slice(0,this.maxReports)),e.severity===\"critical\"&&typeof localStorage<\"u\")try{const r=JSON.parse(localStorage.getItem(\"critical_errors\")||\"[]\");r.unshift({message:e.error.message,stack:e.error.stack,context:e.context,timestamp:e.context.timestamp.toISOString()}),localStorage.setItem(\"critical_errors\",JSON.stringify(r.slice(0,10)))}catch{}}async reportError(e){var i;if(e.error.message.includes(\"Failed to report error\")||e.error.message.includes(\"fetch\")||e.error.message.includes(\"SyntaxError: Invalid or unexpected token\")||(i=e.context.metadata)!=null&&i.isErrorReportingError)return;m(`${e.category.toUpperCase()} Error occurred`,\"error\",{severity:e.severity,route:e.context.route,userId:e.context.userId,...e.context.metadata});const r=f(e.error,{category:e.category,severity:e.severity,component:\"error-handler\",...e.context.metadata}),t=e.severity===\"critical\"?\"critical\":e.severity===\"high\"?\"error\":e.severity===\"medium\"?\"warn\":\"info\";o.log(t,`${e.category.toUpperCase()} Error: ${e.error.message}`,{category:e.category,severity:e.severity,userId:e.context.userId,sessionId:e.context.sessionId,route:e.context.route,sentryEventId:r,...e.context.metadata},e.error);try{typeof fetch<\"u\"&&await fetch(\"/api/errors\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:e.error.message,stack:e.error.stack,context:e.context,severity:e.severity,category:e.category,sentryEventId:r})})}catch(s){o.error(\"Failed to report error to API\",{originalError:e.error.message},s instanceof Error?s:new Error(String(s)))}}attemptRecovery(e){var r;switch(e.category){case\"network\":(r=e.context.metadata)!=null&&r.retryable&&setTimeout(()=>{typeof window<\"u\"&&navigator.onLine&&window.location.reload()},5e3);break;case\"data\":typeof localStorage<\"u\"&&(localStorage.removeItem(\"app_cache\"),localStorage.removeItem(\"user_data\"));break;case\"ui\":e.severity===\"critical\"&&setTimeout(()=>{typeof window<\"u\"&&(window.location.href=\"/\")},3e3);break}}getRecentErrors(e=10){return this.errorReports.slice(0,e)}clearErrors(){this.errorReports=[],typeof localStorage<\"u\"&&localStorage.removeItem(\"critical_errors\")}static handleUIError(e,r){a.getInstance().handleError(e,{category:\"ui\",severity:\"medium\",context:r})}static handleAPIError(e,r){a.getInstance().handleError(e,{category:\"api\",severity:\"high\",context:r})}static handleAuthError(e,r){a.getInstance().handleError(e,{category:\"auth\",severity:\"high\",context:r})}static handleDataError(e,r){a.getInstance().handleError(e,{category:\"data\",severity:\"high\",context:r})}static handleCriticalError(e,r){a.getInstance().handleError(e,{category:\"system\",severity:\"critical\",context:r})}}a.getInstance();const{handleUIError:p}=a;export{a as GlobalErrorHandler,p as handleUIError};"
      },
      {
        "file": "/server/q-Bg2o_rQ1.js",
        "type": "pattern",
        "evidence": "/return.*sample/i",
        "line": 1,
        "content": "import{l as o}from\"./q-BWJCWDUn.js\";import*as n from\"@sentry/browser\";import\"./q-BFBoRxOI.js\";import\"@supabase/supabase-js\";import\"zod\";class l{constructor(){this.initialized=!1;const e=typeof process<\"u\",r=e?process.env.NODE_ENV!==\"production\":window.location.hostname===\"localhost\";this.config={dsn:e?process.env.SENTRY_DSN:\"https://c61059fda17fdf0a9baa21e9b8673f22@o4509594523205632.ingest.de.sentry.io/4509594591690832\",environment:e&&process.env.SENTRY_ENVIRONMENT||\"development\",release:e&&process.env.APP_VERSION||\"1.0.0\",sampleRate:r?1:.1,tracesSampleRate:r?1:.1,enablePerformanceMonitoring:!0,enableUserFeedback:!0}}initialize(){if(!(this.initialized||typeof window>\"u\")){if(!this.config.dsn){o.info(\"Sentry DSN not configured, skipping initialization\",{environment:this.config.environment});return}try{n.init({dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,sampleRate:this.config.sampleRate,tracesSampleRate:this.config.tracesSampleRate,replaysSessionSampleRate:this.config.environment===\"development\"?.1:.01,replaysOnErrorSampleRate:1,integrations:[...this.config.environment===\"production\"?[new n.BrowserTracing,new n.Replay({maskAllText:!0,blockAllMedia:!0})]:[]],beforeSend:(e,r)=>{if(this.config.environment===\"development\"){const t=r.originalException;if(t instanceof Error&&[\"ResizeObserver loop limit exceeded\",\"Non-Error promise rejection captured\",\"Script error\",\"Network request failed\"].some(s=>t.message.includes(s)))return null}return e.tags&&(e.tags={...e.tags,component:\"qwik-lit-builder\",platform:\"web\"}),e},beforeSendTransaction:e=>{var r;return this.config.environment===\"development\"&&(r=e.transaction)!=null&&r.includes(\"/_build/\")?null:e}}),this.initialized=!0,o.info(\"Sentry error tracking initialized\",{environment:this.config.environment,release:this.config.release})}catch(e){o.error(\"Failed to initialize Sentry\",{},e instanceof Error?e:new Error(String(e)))}}}captureError(e,r){if(this.initialized)try{return n.captureException(e,{tags:{component:(r==null?void 0:r.component)||\"unknown\",category:(r==null?void 0:r.category)||\"error\"},extra:r,level:this.mapSeverityToLevel(r==null?void 0:r.severity)})}catch(t){o.error(\"Failed to capture error in Sentry\",{},t instanceof Error?t:new Error(String(t)));return}}captureMessage(e,r=\"info\",t){if(this.initialized)try{return n.captureMessage(e,{level:r,tags:{component:(t==null?void 0:t.component)||\"unknown\"},extra:t})}catch(i){o.error(\"Failed to capture message in Sentry\",{},i instanceof Error?i:new Error(String(i)));return}}setUser(e){if(this.initialized)try{n.setUser(e)}catch(r){o.error(\"Failed to set Sentry user\",{},r instanceof Error?r:new Error(String(r)))}}setContext(e,r){if(this.initialized)try{n.setContext(e,r)}catch(t){o.error(\"Failed to set Sentry context\",{key:e},t instanceof Error?t:new Error(String(t)))}}addBreadcrumb(e,r,t){if(this.initialized)try{n.addBreadcrumb({message:e,category:r,data:t,timestamp:Date.now()/1e3,level:\"info\"})}catch(i){o.error(\"Failed to add Sentry breadcrumb\",{message:e,category:r},i instanceof Error?i:new Error(String(i)))}}startTransaction(e,r){if(!this.initialized)return null;try{return n.startTransaction({name:e,op:r})}catch(t){return o.error(\"Failed to start Sentry transaction\",{name:e,op:r},t instanceof Error?t:new Error(String(t))),null}}showUserFeedbackDialog(e){if(!(!this.initialized||!this.config.enableUserFeedback))try{const r=(e==null?void 0:e.eventId)||n.lastEventId();r&&n.showReportDialog({eventId:r})}catch(r){o.error(\"Failed to show Sentry feedback dialog\",{},r instanceof Error?r:new Error(String(r)))}}mapSeverityToLevel(e){switch(e){case\"critical\":return\"fatal\";case\"high\":return\"error\";case\"medium\":return\"warning\";case\"low\":return\"info\";default:return\"error\"}}measurePageLoad(){if(!(!this.initialized||!this.config.enablePerformanceMonitoring))try{typeof window<\"u\"&&\"performance\"in window&&new PerformanceObserver(r=>{for(const t of r.getEntries())t.entryType===\"measure\"&&n.addBreadcrumb({category:\"performance\",message:`${t.name}: ${t.duration}ms`,level:\"info\",data:{duration:t.duration,startTime:t.startTime}})}).observe({entryTypes:[\"measure\",\"navigation\"]})}catch(e){o.error(\"Failed to set up performance monitoring\",{},e instanceof Error?e:new Error(String(e)))}}reportPerformanceMetric(e,r,t=\"ms\"){if(this.initialized)try{n.addBreadcrumb({category:\"performance\",message:`${e}: ${r}${t}`,level:\"info\",data:{metric:e,value:r,unit:t}}),n.setTag(`perf.${e}`,r)}catch(i){o.error(\"Failed to report performance metric\",{name:e,value:r},i instanceof Error?i:new Error(String(i)))}}}const d=new l;function f(c,e){return d.captureError(c,e)}function m(c,e,r){d.addBreadcrumb(c,e,r)}class a{constructor(){this.errorReports=[],this.maxReports=100,this.setupGlobalHandlers()}static getInstance(){return a.instance||(a.instance=new a),a.instance}setupGlobalHandlers(){typeof window<\"u\"&&(window.addEventListener(\"error\",e=>{this.handleError(e.error,{category:\"system\",severity:\"high\",metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener(\"unhandledrejection\",e=>{this.handleError(new Error(e.reason),{category:\"system\",severity:\"high\",metadata:{type:\"unhandledrejection\",reason:e.reason}})}),window.addEventListener(\"offline\",()=>{this.handleError(new Error(\"Network offline\"),{category:\"network\",severity:\"medium\",metadata:{type:\"offline\"}})}))}handleError(e,r){var s;const t={timestamp:new Date,route:typeof window<\"u\"?window.location.pathname:void 0,userAgent:typeof navigator<\"u\"?navigator.userAgent:void 0,...r.context,metadata:{...(s=r.context)==null?void 0:s.metadata,...r.metadata}},i={error:e,context:t,severity:r.severity,category:r.category};this.recordError(i),this.reportError(i),this.attemptRecovery(i)}recordError(e){if(this.errorReports.unshift(e),this.errorReports.length>this.maxReports&&(this.errorReports=this.errorReports.slice(0,this.maxReports)),e.severity===\"critical\"&&typeof localStorage<\"u\")try{const r=JSON.parse(localStorage.getItem(\"critical_errors\")||\"[]\");r.unshift({message:e.error.message,stack:e.error.stack,context:e.context,timestamp:e.context.timestamp.toISOString()}),localStorage.setItem(\"critical_errors\",JSON.stringify(r.slice(0,10)))}catch{}}async reportError(e){var i;if(e.error.message.includes(\"Failed to report error\")||e.error.message.includes(\"fetch\")||e.error.message.includes(\"SyntaxError: Invalid or unexpected token\")||(i=e.context.metadata)!=null&&i.isErrorReportingError)return;m(`${e.category.toUpperCase()} Error occurred`,\"error\",{severity:e.severity,route:e.context.route,userId:e.context.userId,...e.context.metadata});const r=f(e.error,{category:e.category,severity:e.severity,component:\"error-handler\",...e.context.metadata}),t=e.severity===\"critical\"?\"critical\":e.severity===\"high\"?\"error\":e.severity===\"medium\"?\"warn\":\"info\";o.log(t,`${e.category.toUpperCase()} Error: ${e.error.message}`,{category:e.category,severity:e.severity,userId:e.context.userId,sessionId:e.context.sessionId,route:e.context.route,sentryEventId:r,...e.context.metadata},e.error);try{typeof fetch<\"u\"&&await fetch(\"/api/errors\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:e.error.message,stack:e.error.stack,context:e.context,severity:e.severity,category:e.category,sentryEventId:r})})}catch(s){o.error(\"Failed to report error to API\",{originalError:e.error.message},s instanceof Error?s:new Error(String(s)))}}attemptRecovery(e){var r;switch(e.category){case\"network\":(r=e.context.metadata)!=null&&r.retryable&&setTimeout(()=>{typeof window<\"u\"&&navigator.onLine&&window.location.reload()},5e3);break;case\"data\":typeof localStorage<\"u\"&&(localStorage.removeItem(\"app_cache\"),localStorage.removeItem(\"user_data\"));break;case\"ui\":e.severity===\"critical\"&&setTimeout(()=>{typeof window<\"u\"&&(window.location.href=\"/\")},3e3);break}}getRecentErrors(e=10){return this.errorReports.slice(0,e)}clearErrors(){this.errorReports=[],typeof localStorage<\"u\"&&localStorage.removeItem(\"critical_errors\")}static handleUIError(e,r){a.getInstance().handleError(e,{category:\"ui\",severity:\"medium\",context:r})}static handleAPIError(e,r){a.getInstance().handleError(e,{category:\"api\",severity:\"high\",context:r})}static handleAuthError(e,r){a.getInstance().handleError(e,{category:\"auth\",severity:\"high\",context:r})}static handleDataError(e,r){a.getInstance().handleError(e,{category:\"data\",severity:\"high\",context:r})}static handleCriticalError(e,r){a.getInstance().handleError(e,{category:\"system\",severity:\"critical\",context:r})}}a.getInstance();const{handleUIError:p}=a;export{a as GlobalErrorHandler,p as handleUIError};"
      },
      {
        "file": "/src/database/schema/file-management.sql",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 278,
        "content": "-- Insert initial data if needed (for development)"
      },
      {
        "file": "/src/design-system/components/ds-file-upload.ts",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 454,
        "content": "const simplified = types.map(type => {"
      },
      {
        "file": "/src/design-system/components/ds-file-upload.ts",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 461,
        "content": "return simplified.join(', ');"
      },
      {
        "file": "/src/design-system/components/ds-input.test.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 332,
        "content": "container.innerHTML = '<ds-input label=\"Username\" placeholder=\"Enter username\"></ds-input>';"
      },
      {
        "file": "/src/design-system/components/ds-input.test.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 341,
        "content": "expect(inputElement.getAttribute('placeholder')).toBe('Enter username');"
      },
      {
        "file": "/src/design-system/components/ds-input.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 143,
        "content": "/* Placeholder */"
      },
      {
        "file": "/src/design-system/components/ds-input.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 144,
        "content": ".input::placeholder {"
      },
      {
        "file": "/src/design-system/components/ds-input.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 171,
        "content": "@property() placeholder = '';"
      },
      {
        "file": "/src/design-system/components/ds-input.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 245,
        "content": "placeholder=\"${this.placeholder}\""
      },
      {
        "file": "/src/design-system/components/qwik-wrappers.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 60,
        "content": "placeholder?: string;"
      },
      {
        "file": "/src/design-system/components/qwik-wrappers.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 80,
        "content": "placeholder={props.placeholder || ''}"
      },
      {
        "file": "/src/design-system/components/qwik-wrappers.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 148,
        "content": "placeholder?: string;"
      },
      {
        "file": "/src/design-system/workflows/file-gallery.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 400,
        "content": "placeholder=\"Search files...\""
      },
      {
        "file": "/src/design-system/workflows/file-gallery.ts",
        "type": "pattern",
        "evidence": "/msw/i",
        "line": 502,
        "content": "'application/msword': '📝',"
      },
      {
        "file": "/src/integrations/monitoring/index.ts",
        "type": "pattern",
        "evidence": "/import\\.meta\\.env\\.DEV/i",
        "line": 8,
        "content": "const isDev = import.meta.env.DEV;"
      },
      {
        "file": "/src/lib/logger.ts",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 112,
        "content": "if (this.config.environment === 'development') {"
      },
      {
        "file": "/src/lib/logger.ts",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 256,
        "content": "process.env.NODE_ENV === 'staging' ? 'staging' : 'development',"
      },
      {
        "file": "/src/lib/sentry.ts",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 76,
        "content": "if (this.config.environment === 'development') {"
      },
      {
        "file": "/src/lib/sentry.ts",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 106,
        "content": "if (this.config.environment === 'development') {"
      },
      {
        "file": "/src/middleware/security.ts",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 174,
        "content": "const isDev = process.env.NODE_ENV === 'development';"
      },
      {
        "file": "/src/routes/(app)/dashboard/analytics/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 326,
        "content": "{/* Charts Placeholder */}"
      },
      {
        "file": "/src/routes/(app)/dashboard/components/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 9,
        "content": "'ds-input': { type: 'text', placeholder: 'Enter text...', label: 'Sample Input' },"
      },
      {
        "file": "/src/routes/(app)/dashboard/components/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 40,
        "content": "{ name: 'placeholder', type: 'string', default: 'Enter text...' },"
      },
      {
        "file": "/src/routes/(app)/dashboard/components/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 148,
        "content": "placeholder={currentProps.placeholder}"
      },
      {
        "file": "/src/routes/(app)/dashboard/layout.tsx",
        "type": "pattern",
        "evidence": "/basic.*implementation/i",
        "line": 42,
        "content": "description: 'Content pages (basic implementation)',"
      },
      {
        "file": "/src/routes/(app)/dashboard/media/index.tsx",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 184,
        "content": "<span class=\"block\">✅ R2: All files (simplified architecture)</span>"
      },
      {
        "file": "/src/routes/(app)/dashboard/media/index.tsx",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 216,
        "content": "<strong>Simplified Storage:</strong> All files go to Cloudflare R2 for"
      },
      {
        "file": "/src/routes/(app)/dashboard/pages/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 163,
        "content": "placeholder=\"Enter page title\""
      },
      {
        "file": "/src/routes/(app)/dashboard/pages/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 184,
        "content": "placeholder=\"your-page-url\""
      },
      {
        "file": "/src/routes/(app)/dashboard/pages/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 195,
        "content": "placeholder=\"Brief description of the page\""
      },
      {
        "file": "/src/routes/[...slug]/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 105,
        "content": "placeholder={blockProps.placeholder || ''}"
      },
      {
        "file": "/src/routes/[...slug]/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 149,
        "content": "src={blockProps.src || '/placeholder.jpg'}"
      },
      {
        "file": "/src/routes/[...slug]/index.tsx",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 185,
        "content": "{process.env.NODE_ENV === 'development' && ("
      },
      {
        "file": "/src/routes/api/health/index.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 66,
        "content": "const isPlaceholder = supabaseUrl.includes('placeholder') || supabaseUrl.includes('wprgiqjcabmhhmwmurcp');"
      },
      {
        "file": "/src/routes/api/health/index.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 68,
        "content": "if (isPlaceholder || !supabaseUrl) {"
      },
      {
        "file": "/src/routes/api/health/index.ts",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 344,
        "content": "const isDevelopment = process.env.NODE_ENV === 'development';"
      },
      {
        "file": "/src/routes/api/health/index.ts",
        "type": "pattern",
        "evidence": "/if.*development/i",
        "line": 348,
        "content": "} else if (warnChecks > 0 && !isDevelopment) {"
      },
      {
        "file": "/src/routes/api/health/index.ts",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 419,
        "content": "environment: process.env.NODE_ENV || 'development',"
      },
      {
        "file": "/src/routes/api/logs/index.ts",
        "type": "pattern",
        "evidence": "/process\\.env\\.NODE_ENV.*development/i",
        "line": 52,
        "content": "environment: process.env.NODE_ENV || 'development',"
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 55,
        "content": "Live demonstration of a production-ready platform with <strong>zero mocks</strong>,"
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 55,
        "content": "Live demonstration of a production-ready platform with <strong>zero mocks</strong>,"
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 203,
        "content": "placeholder=\"Try typing here...\""
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 209,
        "content": "placeholder=\"user@example.com\""
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 249,
        "content": "<p class=\"text-gray-600 mb-4\">Live database queries with performance metrics. No simulations.</p>"
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 378,
        "content": "content: 'Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.',"
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 378,
        "content": "content: 'Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.',"
      },
      {
        "file": "/src/routes/index.tsx",
        "type": "pattern",
        "evidence": "/simulation/i",
        "line": 386,
        "content": "content: 'Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.',"
      },
      {
        "file": "/src/utils/lazy-loading.tsx",
        "type": "pattern",
        "evidence": "/simplified/i",
        "line": 27,
        "content": "<div>Component loading functionality simplified for build compatibility</div>"
      },
      {
        "file": "/supabase/migrations/20250703000000_add_missing_tables.sql",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 173,
        "content": "('ds-input', 'Input', 'Design system input component', 'input', '{\"type\": \"object\", \"properties\": {\"type\": {\"type\": \"string\", \"enum\": [\"text\", \"email\", \"password\"]}, \"placeholder\": {\"type\": \"string\"}}}')"
      },
      {
        "file": "/tests/e2e/accessibility.spec.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 329,
        "content": "<ds-input label=\"High Contrast Input\" placeholder=\"Enter text\"></ds-input>"
      },
      {
        "file": "/tests/e2e/critical-flows.spec.ts",
        "type": "pattern",
        "evidence": "/placeholder/i",
        "line": 191,
        "content": "`<ds-input id=\"input-${i}\" label=\"Field ${i}\" placeholder=\"Enter value ${i}\"></ds-input>`"
      },
      {
        "file": "/tests/setup.ts",
        "type": "pattern",
        "evidence": "/mock/i",
        "line": 31,
        "content": "global.IntersectionObserver = class MockIntersectionObserver {"
      },
      {
        "file": "/tests/setup.ts",
        "type": "pattern",
        "evidence": "/\\bmock\\w*/i",
        "line": 31,
        "content": "global.IntersectionObserver = class MockIntersectionObserver {"
      },
      {
        "file": "/tsconfig.json",
        "type": "pattern",
        "evidence": "/skip.*check/i",
        "line": 14,
        "content": "\"skipLibCheck\": true,"
      }
    ],
    "simulations": [],
    "fakeData": [],
    "simplifiedLogic": [
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38094,
        "content": "const o = await fetch(`https://jsonplaceholder.typicode.com/posts?q=${encodeURIComponent(l2)}`);"
      },
      {
        "file": "/package-lock.json",
        "line": 181,
        "content": "\"url\": \"https://github.com/sponsors/colinhacks\""
      },
      {
        "file": "/package-lock.json",
        "line": 12884,
        "content": "\"url\": \"https://github.com/sponsors/colinhacks\""
      },
      {
        "file": "/package-lock.json",
        "line": 19871,
        "content": "\"url\": \"https://github.com/sponsors/colinhacks\""
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "line": 384,
        "content": "console.log('✅ No mocks required - all data is real');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "line": 385,
        "content": "console.log('\\n🚀 Ready to eliminate mock services and connect real APIs!');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "line": 424,
        "content": "console.log('1. Run validation script: npm run validate:no-mocks');"
      },
      {
        "file": "/scripts/apply-complete-migration.js",
        "line": 425,
        "content": "console.log('2. Remove mock services: npm run remove:mocks');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 58,
        "content": "console.log('🔍 COMPREHENSIVE MOCK VALIDATION - STARTING...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 104,
        "content": "console.log('📁 SCANNING FOR MOCK FILES AND PATTERNS...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 122,
        "content": "console.log(`❌ CRITICAL: ${file} contains ${result.mockLines.length} mock patterns:`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 124,
        "content": "console.log(`   Line ${mock.lineNumber}: ${mock.content.substring(0, 80)}...`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 128,
        "content": "console.log(`✅ ${file} - No mocks detected`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 139,
        "content": "console.log('\\n📄 CHECKING FOR MOCK DATA FILES...\\n');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 144,
        "content": "console.log(`❌ CRITICAL: Mock file exists and should be removed: ${file}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 147,
        "content": "console.log(`✅ Mock file does not exist (good): ${file}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 221,
        "content": "console.log(`⚠️ ${endpoint} - Returns data but contains mock indicators`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 274,
        "content": "console.log(`⚠️ Found ${mockPages.length} pages that might be mock data`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 328,
        "content": "console.log(`🔍 Mock Scan: ${mockScan.success ? '✅ PASSED' : '❌ FAILED'}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 329,
        "content": "console.log(`   - Total mock patterns found: ${mockScan.totalMocks}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 330,
        "content": "console.log(`   - Critical files with mocks: ${mockScan.criticalFiles}`);"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 349,
        "content": "console.log('✅ No mocks detected');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 356,
        "content": "console.log('⚠️ System still contains mocks or has connectivity issues');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 361,
        "content": "console.log('1. Remove all mock files and patterns');"
      },
      {
        "file": "/scripts/validate-no-mocks.js",
        "line": 362,
        "content": "console.log('2. Replace mock implementations with real services');"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 4,
        "content": "`:\"\",g(o=>`</${o.value}>`,[n],\"`</${p0.value}>`\")],1,null),1,null),1,null)],1,null)],1,null)],1,null)],1,\"IM_7\")},Hl=O(b(Vl,\"s_r0j4X6otVtI\")),Kl={title:\"Components - Design System\",meta:[{name:\"description\",content:\"Manage and preview your design system components\"}]},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Hl,head:Kl},Symbol.toStringTag,{value:\"Module\"}));async function xe(n){const t=E();if(!t)throw new Error(\"Supabase client not available - check configuration\");const l=n.get(\"sb-auth-token\");if(!l)return null;try{const{data:{user:s}}=await t.auth.getUser(l.value);return s}catch{return null}}const Wl=n=>e(\"ds-file-upload\",{onDsUploadSuccess$:n.onUploadSuccess$,onDsUploadError$:n.onUploadError$,onDsUploadComplete$:n.onUploadComplete$},{endpoint:g(t=>t.endpoint||\"/api/upload\",[n],'p0.endpoint||\"/api/upload\"'),accept:g(t=>t.accept||\"image/*,application/pdf,text/*\",[n],'p0.accept||\"image/*,application/pdf,text/*\"'),maxSize:g(t=>t.maxSize||10485760,[n],\"p0.maxSize||10*1024*1024\"),multiple:g(t=>t.multiple||!1,[n],\"p0.multiple||false\"),bucket:g(t=>t.bucket||\"uploads\",[n],'p0.bucket||\"uploads\"'),class:g(t=>t.class,[n],\"p0.class\")},null,2,\"iB_2\"),Jl=O(b(Wl,\"s_C03Fqoboh3U\")),Zl=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{data:s}=await l.from(\"profiles\").select(\"*\").eq(\"id\",t.id).single(),{data:a,error:r}=await l.from(\"file_metadata\").select(\"*\").eq(\"user_id\",t.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1}).limit(50),{data:o}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),i=c=>{const m=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(c===0)return\"0 B\";const d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(1)} ${m[d]}`},u=(a||[]).map(c=>({id:c.id,name:c.file_name,size:c.file_size,type:c.mime_type||\"application/octet-stream\",url:`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.storage_path}`,uploadedAt:c.created_at,thumbnailUrl:c.thumbnail_path?`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.thumbnail_path}`:void 0,tags:c.tags||[]}));return{user:t,profile:s,files:u,stats:{totalFiles:(o==null?void 0:o.total_files)||0,totalSize:(o==null?void 0:o.total_size)||0,storageUsed:i((o==null?void 0:o.total_size)||0)},hasError:!!r}},we=ae(b(Zl,\"s_00pXWz0FAag\")),Yl=async()=>{var a,r;const[n,t,l,s]=T();if((a=t.value)!=null&&a.user){n.value=!0;try{const o=await fetch(\"/api/files/list?limit=50\",{headers:{Cookie:document.cookie}});if(o.ok){const i=await o.json();l.value=i.files}}catch(o){const i=o instanceof Error?o.message:\"Unknown error\";p.error(\"Failed to refresh file list\",{error:i,endpoint:\"/api/files/list\",userId:(r=t.value.user)==null?void 0:r.id}),s.value=`❌ Failed to refresh file list: ${i}`,l.value=[]}finally{n.value=!1}}},Xl=n=>{const[t,l,s]=T(),{file:a}=n.detail;s.value=`✅ Uploaded: ${a.name}`,t(),l.value+=1},es=n=>{const[t]=T(),{file:l,error:s}=n.detail;t.value=`❌ Failed: ${l.name} - ${s}`},ts=n=>{const[t]=T(),{results:l}=n.detail,s=l.filter(r=>r.status===\"success\").length,a=l.filter(r=>r.status===\"error\").length;t.value=`📊 Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{t.value=\"\"},5e3)},ls=()=>{ne();const n=we(),t=y(\"\"),l=y(0),s=y([]),a=y(!1);if(!n.value)return e(\"div\",null,{class:\"flex items-center justify-center h-64\"},e(\"div\",null,{class:\"text-gray-500\"},\"Loading...\",3,null),3,\"Wk_0\");const o=b(Xl,\"s_cdAui9V38SU\",[b(Yl,\"s_BCO4F9EvjfI\",[a,n,s,t]),l,t]),i=b(es,\"s_2VhBVnlzOS4\",[t]),u=b(ts,\"s_tUSlurN8mDc\",[t]);return e(\"div\",null,{class:\"space-y-8\"},[e(\"div\",null,{class:\"border-b border-gray-200 pb-4\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Media Library\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Upload and manage your files with intelligent storage routing\",3,null)],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-3 gap-6\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Total Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.totalFiles,[n],\"p0.value.stats.totalFiles\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Used\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.storageUsed,[n],\"p0.value.stats.storageUsed\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Type\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-2\"},[e(\"span\",null,{class:\"block\"},\"✅ R2: All files (simplified architecture)\",3,null),e(\"span\",null,{class:\"block text-gray-400\"},\"Up to 5GB per file\",3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900 mb-4\"},\"Upload Files\",3,null),M(Jl,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf,text/*,video/*\",maxSize:52428800,multiple:!0,bucket:\"uploads\",class:\"w-full\",onUploadSuccess$:o,onUploadError$:i,onUploadComplete$:u,[F]:{endpoint:F,accept:F,maxSize:F,multiple:F,bucket:F,class:F,onUploadSuccess$:F,onUploadError$:F,onUploadComplete$:F}},3,\"Wk_1\"),t.value&&e(\"div\",null,{class:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\"},e(\"p\",null,{class:\"text-blue-800 text-sm\"},g(c=>c.value,[t],\"p0.value\"),3,null),3,\"Wk_2\"),e(\"div\",null,{class:\"mt-4 text-sm text-gray-600\"},[e(\"p\",null,{class:\"mb-2\"},[e(\"strong\",null,null,\"Simplified Storage:\",3,null),\" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"],3,null),e(\"p\",null,null,[e(\"strong\",null,null,\"Supported formats:\",3,null),\" Images, PDFs, text files, videos up to 50MB\"],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900\"},\"Your Files\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},a.value?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"🔄\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"Loading files...\",3,null)],3,\"Wk_3\"):(s.value.length>0?s.value:n.value.files).length===0?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"📁\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"No files yet\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Upload your first file using the upload area above\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Files will be stored securely and optimized for global delivery\",3,null)],3,\"Wk_4\"):e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"},(s.value.length>0?s.value:n.value.files).map(c=>e(\"div\",null,{class:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-3\"},[e(\"div\",null,{class:\"text-sm font-medium text-gray-900 truncate\"},v(c,\"name\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\"},\"R2\",3,null)],1,null),e(\"div\",null,{class:\"text-sm text-gray-600 space-y-1\"},[e(\"div\",null,null,[\"Size: \",(c.size/1024/1024).toFixed(2),\" MB\"],1,null),e(\"div\",null,null,[\"Type: \",v(c,\"type\")],1,null),e(\"div\",null,null,[\"Uploaded: \",new Date(c.uploadedAt).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"mt-4 flex space-x-2\"},[e(\"button\",null,{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\"},\"Download\",3,null),e(\"button\",null,{class:\"text-red-600 hover:text-red-800 text-sm font-medium\"},\"Delete\",3,null)],3,null)],1,c.id)),1,null),1,null)],1,null)],1,\"Wk_5\")},ss=O(b(ls,\"s_BDZLd0X4JxU\")),ns={title:\"Media Library - Dashboard\",meta:[{name:\"description\",content:\"Upload and manage your media files with intelligent storage routing\"}]},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,head:ns,useMediaData:we},Symbol.toStringTag,{value:\"Module\"})),rs=async()=>{const[n,t,l]=T();try{t.value=!0,n.value=\"\";const s=await fetch(\"/api/content/pages\");if(s.ok){const a=await s.json();l.value=a.pages||[]}else{const a=await s.json();n.value=a.error||\"Failed to load pages\"}}catch{n.value=\"Network error loading pages\"}finally{t.value=!1}},os=async()=>{const[n,t,l,s,a,r,o]=T();if(!r.value.trim()){t.value=\"Page title is required\";return}try{n.value=!0,t.value=\"\";const i={title:r.value.trim(),slug:a.value.trim()||void 0,description:s.value.trim()||void 0,template:\"default\",published:!1},u=await fetch(\"/api/content/pages\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});if(u.ok)await u.json(),r.value=\"\",a.value=\"\",s.value=\"\",o.value=!1,await l();else{const c=await u.json();t.value=c.error||\"Failed to create page\"}}catch{t.value=\"Network error creating page\"}finally{n.value=!1}},is=()=>{const[n,t]=T();!n.value&&t.value&&(n.value=t.value.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"))},us=async()=>{const[n]=T();await n()},cs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y(\"\"),a=y(!1),r=y(\"\"),o=y(\"\"),i=y(\"\"),u=b(rs,\"s_RSy4z08mHuY\",[s,t,n]),c=b(os,\"s_U0vSjZxjf0g\",[l,s,u,i,o,r,a]),m=b(is,\"s_OHe4b3BmXIA\",[o,r]);return j(b(us,\"s_q3arvP17QJ0\",[u])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your visual pages and landing pages\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_XklD0zp44XY\",[s,a])},g(d=>d.value?\"Cancel\":\"Create Page\",[a],'p0.value?\"Cancel\":\"Create Page\"'),3,null)],3,null),s.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"svg\",null,{class:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),3,null),e(\"div\",null,{class:\"ml-3\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(d=>d.value,[s],\"p0.value\"),3,null),3,null)],3,null),3,\"h8_0\"),a.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Page\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Page Title *\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter page title\",value:g(d=>d.value,[r],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_iUIdYKxt004\",[r,m])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},[\"Page URL Slug\",e(\"span\",null,{class:\"text-gray-500 text-xs\"},\"(auto-generated from title)\",3,null)],3,null),e(\"div\",null,{class:\"flex\"},[e(\"span\",null,{class:\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\"},\"/\",3,null),e(\"input\",null,{type:\"text\",class:\"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"your-page-url\",value:g(d=>d.value,[o],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_P0uR1QIAYP0\",[o])},null,3,null)],3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Description (Optional)\",3,null),e(\"textarea\",null,{class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Brief description of the page\",rows:3,value:g(d=>d.value,[i],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_0CoyY4fcrIQ\",[i])},null,3,null)],3,null),e(\"div\",null,{class:\"flex gap-2\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",disabled:g((d,h)=>d.value||!h.value.trim(),[l,r],\"p0.value||!p1.value.trim()\"),onClick$:c},[l.value&&e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,\"h8_1\"),g(d=>d.value?\"Creating...\":\"Create Page\",[l],'p0.value?\"Creating...\":\"Create Page\"')],1,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_NId9t3ngBME\",[s,i,o,r,a])},\"Cancel\",3,null)],1,null)],1,null)],1,\"h8_2\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b flex items-center justify-between\"},[e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Pages\",3,null),!t.value&&n.value.length>0&&e(\"span\",null,{class:\"text-sm text-gray-500\"},[g(d=>d.value.length,[n],\"p0.value.length\"),\" page\",g(d=>d.value.length===1?\"\":\"s\",[n],'p0.value.length===1?\"\":\"s\"')],3,\"h8_3\")],1,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},e(\"div\",null,{class:\"flex items-center justify-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),\"Loading pages...\"],3,null),3,\"h8_4\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-12 text-center text-gray-500\"},[e(\"svg\",null,{class:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"},null,3,null),3,null),e(\"h3\",null,{class:\"mt-2 text-sm font-medium text-gray-900\"},\"No pages\",3,null),e(\"p\",null,{class:\"mt-1 text-sm text-gray-500\"},\"Get started by creating your first page.\",3,null),e(\"div\",null,{class:\"mt-6\"},e(\"button\",null,{class:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",onClick$:C(\"s_7wN6ZaymF0U\",[s,a])},[e(\"svg\",null,{class:\"-ml-1 mr-2 h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"},null,3,null),3,null),\"Create Page\"],3,null),3,null)],3,\"h8_5\"):n.value.map(d=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50 transition-colors\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,{class:\"min-w-0 flex-1\"},[e(\"div\",null,{class:\"flex items-center\"},[e(\"h3\",null,{class:\"font-medium text-gray-900 truncate\"},v(d,\"title\"),1,null),e(\"span\",{class:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,d.published?\"Published\":\"Draft\",1,null)],1,null),e(\"div\",null,{class:\"mt-1 flex items-center text-sm text-gray-500\"},[e(\"span\",null,null,[\"/\",v(d,\"slug\")],1,null),d.description&&M(Pe,{children:[e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"truncate\"},v(d,\"description\"),1,null)]},1,\"h8_6\")],1,null),e(\"div\",null,{class:\"mt-2 flex items-center text-xs text-gray-400\"},[e(\"span\",null,null,[\"Created \",new Date(d.created_at).toLocaleDateString()],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[v(d,\"view_count\"),\" view\",d.view_count===1?\"\":\"s\"],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"capitalize\"},[v(d,\"template\"),\" template\"],1,null)],1,null)],1,null),e(\"div\",null,{class:\"ml-4 flex items-center space-x-2\"},[e(\"a\",{href:`/${d.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",target:\"_blank\",rel:\"noopener noreferrer\"},\"View →\",3,null),e(\"button\",null,{class:\"text-gray-400 hover:text-gray-600\"},e(\"svg\",null,{class:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"},null,3,null),3,null),3,null)],1,null)],1,null),1,d.id)),1,null)],1,null)],1,\"h8_7\")},ds=O(b(cs,\"s_Z1neaZRFYyU\")),gs={title:\"Pages - Content Management\",meta:[{name:\"description\",content:\"Manage your visual pages and landing pages\"}]},ps=Object.freeze(Object.defineProperty({__proto__:null,default:ds,head:gs},Symbol.toStringTag,{value:\"Module\"})),ms=async()=>{const[n,t]=T();try{const l=await fetch(\"/api/content/posts\");if(l.ok){const s=await l.json();t.value=s.posts||[]}}catch{}finally{n.value=!1}},hs=()=>{const[n]=T();n()},fs=async()=>{const[n,t,l]=T();try{(await fetch(\"/api/content/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t.value)})).ok&&(t.value={title:\"\",content:\"\",published:!1},l.value=!1,await n())}catch{}},bs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y({title:\"\",content:\"\",published:!1}),a=b(ms,\"s_1WTH03jRCsU\",[t,n]);j(b(hs,\"s_540yPc3E2RA\",[a]));const r=b(fs,\"s_V24BuGzIqHI\",[a,s,l]);return e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your blog posts and articles\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:C(\"s_Oc2O0zQdsgE\",[l])},g(o=>o.value?\"Cancel\":\"New Post\",[l],'p0.value?\"Cancel\":\"New Post\"'),3,null)],3,null),l.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Post\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Title\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.title,[s],\"p0.value.title\"),onInput$:C(\"s_Et0psVOr3QA\",[s])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Content\",3,null),e(\"textarea\",null,{rows:6,class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.content,[s],\"p0.value.content\"),onInput$:C(\"s_RJ3Ap4n0gmY\",[s])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center\"},[e(\"input\",null,{type:\"checkbox\",id:\"published\",class:\"mr-2\",checked:g(o=>o.value.published,[s],\"p0.value.published\"),onChange$:C(\"s_q00lGzU6qCM\",[s])},null,3,null),e(\"label\",null,{for:\"published\",class:\"text-sm font-medium text-gray-700\"},\"Publish immediately\",3,null)],3,null),e(\"div\",null,{class:\"flex space-x-3\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:r},\"Create Post\",3,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\",onClick$:C(\"s_bIZQZkM05f0\",[l])},\"Cancel\",3,null)],3,null)],3,null)],3,\"J4_0\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},\"Loading posts...\",3,\"J4_1\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},[e(\"p\",null,null,\"No posts found.\",3,null),e(\"p\",null,{class:\"text-sm mt-2\"},\"Create your first blog post above.\",3,null)],3,\"J4_2\"):n.value.map(o=>{var i;return e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},[(i=o.content)==null?void 0:i.substring(0,100),\"...\"],1,null),e(\"p\",null,{class:\"text-xs text-gray-400 mt-1\"},[\"Created: \",new Date(o.created_at).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-3\"},[e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${o.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,o.published?\"Published\":\"Draft\",1,null),e(\"a\",{href:`/posts/${o.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm\"},\"View →\",3,null)],1,null)],1,null),1,o.id)}),1,null)],1,null)],1,\"J4_3\")},ys=O(b(bs,\"s_RWtIVOCEnf0\")),vs={title:\"Posts - Content Management\",meta:[{name:\"description\",content:\"Manage your blog posts and articles\"}]},xs=Object.freeze(Object.defineProperty({__proto__:null,default:ys,head:vs},Symbol.toStringTag,{value:\"Module\"})),ws=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{count:s}=await l.from(\"posts\").select(\"*\",{count:\"exact\",head:!0}).eq(\"author_id\",t.id),{data:a}=await l.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\",t.id).order(\"created_at\",{ascending:!1}).limit(5),{data:r}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),{count:o}=await l.from(\"builder_pages\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id),{count:i}=await l.from(\"design_system_components\").select(\"*\",{count:\"exact\",head:!0}).eq(\"created_by\",t.id),u=new Date(Date.now()-3e5).toISOString(),{count:c}=await l.from(\"user_sessions\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id).gte(\"last_activity\",u).eq(\"active\",!0);return{user:t,stats:{postsCount:s||0,pagesCount:o||0,componentsCount:i||0,totalFiles:(r==null?void 0:r.total_files)||0,totalSize:(r==null?void 0:r.total_size)||0,storageUsed:Se((r==null?void 0:r.total_size)||0),activeSessions:c||0},recentPosts:a||[]}},_e=ae(b(ws,\"s_rzz0Rmkfnsc\"));function Se(n){const t=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(n===0)return\"0 B\";const l=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,l)).toFixed(1)} ${t[l]}`}const _s=async()=>{const[n]=T();try{const t=await fetch(\"/api/dashboard/stats\",{headers:{Cookie:document.cookie}});if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to fetch realtime stats\",{error:t instanceof Error?t.message:String(t)})}},Ss=()=>{const n=_e(),t=y(null);return j(b(_s,\"s_FyInf7hQmPU\",[t])),n.value?e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900 mb-8\"},[\"Welcome back, \",g(l=>l.value.user.email,[n],\"p0.value.user.email\"),\"!\"],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.postsCount,[n],\"p0.value.stats.postsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.pagesCount,[n],\"p0.value.stats.pagesCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"🧩\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Components\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.componentsCount,[n],\"p0.value.stats.componentsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g((l,s)=>{var a;return((a=s.value)==null?void 0:a.totalFiles)||l.value.stats.totalFiles||0},[n,t],\"p1.value?.totalFiles||p0.value.stats.totalFiles||0\"),3,null)],3,null)],3,null),3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Quick Actions\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"a\",null,{href:\"/dashboard/pages\",class:\"block bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Create Page\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Build with Builder.io\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block bg-green-50 hover:bg-green-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Write Post\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Create blog content\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block bg-purple-50 hover:bg-purple-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Upload Media\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Add files and images\",3,null)],3,null)],3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Design System Status\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[[\"DS Button\",\"DS Card\",\"DS Input\",\"DS File Upload\"].map(l=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},l,1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Active\",3,null)],1,l)),e(\"a\",null,{href:\"/dashboard/components\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"Manage Components →\",3,null)],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Health\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Builder.io\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Supabase\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"R2 Storage\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"View Analytics →\",3,null)],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Recent Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y divide-gray-200\"},n.value.recentPosts.length===0?e(\"div\",null,{class:\"px-6 py-4 text-gray-500\"},\"No posts yet\",3,\"we_1\"):n.value.recentPosts.map(l=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-900\"},v(l,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},new Date(l.created_at).toLocaleDateString(),1,null)],1,null),e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${l.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,l.published?\"Published\":\"Draft\",1,null)],1,null),1,l.id)),1,null)],1,null)],1,\"we_2\"):e(\"div\",null,null,\"Loading...\",3,\"we_0\")},ks=O(b(Ss,\"s_tKEjWeTgiGA\")),Cs={title:\"Dashboard - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"User dashboard\"}]},Ts=Object.freeze(Object.defineProperty({__proto__:null,_auto_formatFileSize:Se,default:ks,head:Cs,useDashboardData:_e},Symbol.toStringTag,{value:\"Module\"})),Ps=async()=>{const[n,t,l,s,a]=T();l.value=!0,t.value=\"\";try{const{error:r}=await re.signIn(n.value,a.value);if(r)throw r;await s(\"/dashboard\")}catch(r){t.value=r instanceof Error?r.message:\"Login failed\"}finally{l.value=!1}},Es=async n=>{const[t,l]=T();l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithOAuth(n);if(s)throw s}catch(s){t.value=s instanceof Error?s.message:\"OAuth login failed\",l.value=!1}},Rs=async()=>{const[n,t,l]=T();if(!n.value){t.value=\"Please enter your email\";return}l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithMagicLink(n.value);if(s)throw s;t.value=\"Check your email for the login link!\"}catch(s){t.value=s instanceof Error?s.message:\"Failed to send magic link\"}finally{l.value=!1}},Fs=()=>{const n=Ee(),t=y(\"\"),l=y(\"\"),s=y(!1),a=y(\"\"),r=b(Ps,\"s_M7uVWgz5fLo\",[t,a,s,n,l]),o=b(Es,\"s_1Fz1nHxVqXo\",[a,s]),i=b(Rs,\"s_F9kiKsoYGLc\",[t,a,s]);return e(\"div\",null,{class:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\"},e(\"div\",null,{class:\"max-w-md w-full space-y-8\"},[e(\"div\",null,null,e(\"h2\",null,{class:\"mt-6 text-center text-3xl font-extrabold text-gray-900\"},\"Sign in to your account\",3,null),3,null),e(\"div\",null,{class:\"mt-8 space-y-6\"},[a.value&&e(\"div\",null,{class:\"rounded-md bg-red-50 p-4\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(u=>u.value,[a],\"p0.value\"),3,null),3,\"V7_0\"),e(\"div\",null,{class:\"space-y-3\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_DIXakIIbtmc\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",viewBox:\"0 0 24 24\"},[e(\"path\",null,{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"},null,3,null),e(\"path\",null,{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"},null,3,null),e(\"path\",null,{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"},null,3,null),e(\"path\",null,{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"},null,3,null)],3,null),\"Continue with Google\"],3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_0Ck2IrGMcgM\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),\"Continue with GitHub\"],3,null)],3,null),e(\"div\",null,{class:\"relative\"},[e(\"div\",null,{class:\"absolute inset-0 flex items-center\"},e(\"div\",null,{class:\"w-full border-t border-gray-300\"},null,3,null),3,null),e(\"div\",null,{class:\"relative flex justify-center text-sm\"},e(\"span\",null,{class:\"px-2 bg-gray-50 text-gray-500\"},\"Or continue with\",3,null),3,null)],3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{for:\"email\",class:\"block text-sm font-medium text-gray-700\"},\"Email address\",3,null),e(\"input\",null,{id:\"email\",type:\"email\",autoComplete:\"email\",required:!0,value:g(u=>u.value,[t],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_DYgs0Z65Quc\",[t])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{for:\"password\",class:\"block text-sm font-medium text-gray-700\"},\"Password\",3,null),e(\"input\",null,{id:\"password\",type:\"password\",autoComplete:\"current-password\",required:!0,value:g(u=>u.value,[l],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_oWetVDGIFg4\",[l])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 mr-2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:r},g(u=>u.value?\"Signing in...\":\"Sign in\",[s],'p0.value?\"Signing in...\":\"Sign in\"'),3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 ml-2 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:i},\"Email magic link\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},e(\"a\",null,{href:\"/signup\",class:\"text-sm text-blue-600 hover:text-blue-500\"},\"Don't have an account? Sign up\",3,null),3,null)],1,null)],1,null),1,\"V7_1\")},Ms=O(b(Fs,\"s_aJcwFH6Iesk\")),Os={title:\"Login - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"Sign in to your account\"}]},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ms,head:Os},Symbol.toStringTag,{value:\"Module\"})),H=async({json:n})=>{n(404,{error:{code:\"NOT_FOUND\",message:\"API endpoint not found\"}})},$s=H,Ds=H,Ls=H,Is=H,js=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Ls,onGet:H,onPatch:Is,onPost:$s,onPut:Ds},Symbol.toStringTag,{value:\"Module\"})),qs=()=>e(\"div\",null,{class:\"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\"},e(\"div\",null,{class:\"text-center max-w-md mx-auto p-8\"},[e(\"div\",null,{class:\"text-8xl mb-6\"},\"🚀\",3,null),e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-4\"},\"404\",3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8\"},\"This page doesn't exist in our production stack\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"a\",null,{href:\"/\",class:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🏠 Back to Home\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},\"Or explore our live features:\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-4 text-sm\"},[e(\"a\",null,{href:\"/dashboard\",class:\"text-blue-600 hover:text-blue-800\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-purple-600 hover:text-purple-800\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/api/health\",class:\"text-green-600 hover:text-green-800\"},\"💚 Health Check\",3,null)],3,null)],3,null)],3,null),3,\"q5_0\"),Us=O(b(qs,\"s_dUKnuUOG7r8\")),zs={title:\"404 - Page Not Found\",meta:[{name:\"description\",content:\"The page you are looking for does not exist\"}]},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,head:zs},Symbol.toStringTag,{value:\"Module\"})),Ns=async({params:n,status:t})=>{const l=n.slug;if(!l)return t(404),null;try{const s=await V.getPage(l,!0);return!s||!s.published?(t(404),null):(V.incrementViewCount(s.id).catch(()=>{}),s)}catch(s){return p.error(\"Error loading page\",{slug:l},s),t(500),null}},ie=ae(b(Ns,\"s_bgpN1vdANm8\")),Gs=async()=>{try{return{params:(await V.getPublishedPages({limit:100})).data.map(t=>({slug:t.slug}))}}catch(n){return p.error(\"Error generating static pages\",{},n),{params:[]}}},Vs=n=>{const t=n.block.properties||{};switch(n.block.component_name||n.block.block_type){case\"ds-button\":return e(\"ds-button\",{variant:t.variant||\"primary\",size:t.size||\"md\",disabled:t.disabled||!1},null,t.label||\"Button\",1,\"FM_0\");case\"ds-card\":return e(\"div\",null,{class:\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm\"},[t.title&&e(\"h3\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},v(t,\"title\"),1,\"FM_1\"),t.subtitle&&e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"subtitle\"),1,\"FM_2\"),t.content&&e(\"div\",{dangerouslySetInnerHTML:v(t,\"content\")},null,null,3,\"FM_3\"),n.block.children&&n.block.children.length>0&&e(\"div\",null,null,n.block.children.map((a,r)=>M(I,{block:a},3,`${n.block.id}-child-${r}`)),1,\"FM_4\")],1,null);case\"ds-input\":return e(\"ds-input\",{type:t.type||\"text\",label:t.label||\"Input\",placeholder:t.placeholder||\"\",required:t.required||!1,disabled:t.disabled||!1},null,null,3,null);case\"ds-file-upload\":return e(\"div\",null,{class:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"},[e(\"p\",null,{class:\"text-gray-600\"},t.label||\"Upload File\",1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-2\"},[t.accept||\"*/*\",\" • Max \",((t.maxSize||10485760)/1024/1024).toFixed(1),\"MB\"],1,null)],1,null);case\"heading\":const l=t.level||2,s=`font-bold text-gray-900 ${l===1?\"text-4xl\":l===2?\"text-3xl\":l===3?\"text-2xl\":l===4?\"text-xl\":l===5?\"text-lg\":\"text-base\"}`;return l===1?e(\"h1\",{class:s},null,t.text||\"Heading\",1,\"FM_5\"):l===2?e(\"h2\",{class:s},null,t.text||\"Heading\",1,\"FM_6\"):l===3?e(\"h3\",{class:s},null,t.text||\"Heading\",1,\"FM_7\"):l===4?e(\"h4\",{class:s},null,t.text||\"Heading\",1,\"FM_8\"):l===5?e(\"h5\",{class:s},null,t.text||\"Heading\",1,\"FM_9\"):e(\"h6\",{class:s},null,t.text||\"Heading\",1,null);case\"paragraph\":return e(\"p\",null,{class:\"text-gray-700 leading-relaxed\"},t.text||\"Paragraph text\",1,null);case\"image\":return e(\"div\",null,{class:\"my-6\"},[e(\"img\",{src:t.src||\"/placeholder.jpg\",alt:t.alt||\"\",class:`max-w-full h-auto ${t.className||\"\"}`,width:t.width||\"800\",height:t.height||\"600\"},{loading:\"lazy\"},null,3,null),t.caption&&e(\"p\",null,{class:\"text-sm text-gray-500 mt-2 text-center\"},v(t,\"caption\"),1,\"FM_10\")],1,null);case\"spacer\":return e(\"div\",{style:{height:`${t.height||32}px`}},{class:\"w-full\"},null,3,null);case\"html\":return e(\"div\",{class:t.className||\"\",dangerouslySetInnerHTML:t.html||\"\"},null,null,3,null);default:return e(\"div\",null,{class:\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\"},[e(\"p\",null,{class:\"text-yellow-800 text-sm\"},[\"Unknown component: \",g(a=>a.block.component_name||a.block.block_type,[n],\"p0.block.component_name||p0.block.block_type\")],3,null),process.env.NODE_ENV===\"development\"&&e(\"pre\",null,{class:\"text-xs text-yellow-600 mt-2 overflow-auto\"},JSON.stringify(t,null,2),1,\"FM_11\")],1,null)}},I=O(b(Vs,\"s_hTWVJJoJphc\")),Hs=n=>{const l=(n.page.blocks||[]).reduce((s,a)=>{const r=a.region||\"main\";return s[r]||(s[r]=[]),s[r].push(a),s},{});switch(Object.keys(l).forEach(s=>{l[s].sort((a,r)=>a.order_index-r.order_index)}),n.template){case\"landing\":return e(\"div\",null,{class:\"min-h-screen\"},[l.header&&e(\"header\",null,{class:\"bg-white shadow-sm\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"},l.header.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_12\"),e(\"main\",null,{class:\"flex-1\"},l.main&&e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},e(\"div\",null,{class:\"space-y-12\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_13\"),1,null),l.footer&&e(\"footer\",null,{class:\"bg-gray-50 border-t\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},l.footer.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_14\")],1,\"FM_15\");case\"blog\":return e(\"article\",null,{class:\"min-h-screen bg-white\"},e(\"div\",null,{class:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},[e(\"header\",null,{class:\"mb-12\"},[e(\"h1\",null,{class:\"text-4xl font-bold text-gray-900 mb-4\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-xl text-gray-600 mb-6\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_16\"),e(\"div\",null,{class:\"flex items-center text-sm text-gray-500\"},[e(\"time\",null,{dateTime:g(s=>s.page.created_at,[n],\"p0.page.created_at\")},new Date(n.page.created_at).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"}),1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[g(s=>s.page.view_count,[n],\"p0.page.view_count\"),\" views\"],3,null)],1,null)],1,null),e(\"div\",null,{class:\"prose prose-lg max-w-none\"},l.main&&l.main.map(s=>M(I,{block:s},3,s.id)),1,null)],1,null),1,null);default:return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},e(\"div\",null,{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},[e(\"header\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-gray-600 mt-2\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_17\")],1,null),e(\"div\",{class:`grid gap-8 ${l.sidebar?\"grid-cols-1 lg:grid-cols-3\":\"grid-cols-1\"}`},null,[e(\"main\",{class:l.sidebar?\"lg:col-span-2\":\"col-span-1\"},null,l.main&&e(\"div\",null,{class:\"space-y-6\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,\"FM_18\"),1,null),l.sidebar&&e(\"aside\",null,{class:\"lg:col-span-1\"},e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm p-6 space-y-6\"},l.sidebar.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_19\")],1,null)],1,null),1,null)}},ke=O(b(Hs,\"s_mzLcv8PuSf4\")),Ks=()=>{const n=ie();return M(Re,{value:n,onPending:()=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-3 h-8 w-8 text-gray-400 mx-auto\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),e(\"p\",null,{class:\"text-gray-500 mt-2\"},\"Loading page...\",3,null)],3,null),3,\"FM_20\"),onRejected:t=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_21\"),onResolved:t=>(ne(),t?M(ke,{page:t,get template(){return t.template},[F]:{template:le(t,\"template\")}},3,\"FM_23\"):e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_22\")),[F]:{value:F,onPending:F,onRejected:F,onResolved:F}},3,\"FM_24\")},Qs=O(b(Ks,\"s_O9a4FXDqDuI\")),Ws=({resolveValue:n})=>{const t=n(ie);if(!t)return{title:\"Page Not Found\",meta:[{name:\"description\",content:\"The requested page could not be found.\"}]};const l=[{name:\"description\",content:t.seo_description||t.description||`${t.title} - Learn more about this page.`},{name:\"robots\",content:t.published?\"index, follow\":\"noindex, nofollow\"},{property:\"og:title\",content:t.seo_title||t.title},{property:\"og:description\",content:t.seo_description||t.description||\"\"},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:`/${t.slug}`},{name:\"twitter:card\",content:\"summary_large_image\"},{name:\"twitter:title\",content:t.seo_title||t.title},{name:\"twitter:description\",content:t.seo_description||t.description||\"\"}];return t.featured_image&&l.push({property:\"og:image\",content:t.featured_image}),t.social_image?(l.push({property:\"og:image\",content:t.social_image}),l.push({name:\"twitter:image\",content:t.social_image})):t.featured_image&&l.push({name:\"twitter:image\",content:t.featured_image}),{title:t.seo_title||t.title,meta:l}},Js=Object.freeze(Object.defineProperty({__proto__:null,_auto_ContentBlockRenderer:I,_auto_PageLayout:ke,default:Qs,head:Ws,onStaticGenerate:Gs,usePageData:ie},Symbol.toStringTag,{value:\"Module\"})),Zs=[je],q=()=>ze,U=()=>Ge,S=()=>Ye,Ys=[[\"/\",[S,()=>at],\"/\",[\"q-CSb0NZF_.js\",\"q-CRu92-iL.js\"]],[\"manifest.json\",[S,()=>ot],\"/manifest.json\",[\"q-CSb0NZF_.js\"]],[\"api/analytics/dashboard/\",[S,()=>mt],\"/api/analytics/dashboard/\",[\"q-CSb0NZF_.js\"]],[\"api/auth/status/\",[S,()=>ft],\"/api/auth/status/\",[\"q-CSb0NZF_.js\"]],[\"api/cache/analytics/\",[S,()=>wt],\"/api/cache/analytics/\",[\"q-CSb0NZF_.js\"]],[\"api/content/media/\",[S,()=>kt],\"/api/content/media/\",[\"q-CSb0NZF_.js\"]],[\"api/content/pages/\",[S,()=>Ot],\"/api/content/pages/\",[\"q-CSb0NZF_.js\"]],[\"api/content/posts/\",[S,()=>Dt],\"/api/content/posts/\",[\"q-CSb0NZF_.js\"]],[\"api/content/search/\",[S,()=>It],\"/api/content/search/\",[\"q-CSb0NZF_.js\"]],[\"api/dashboard/stats/\",[S,()=>qt],\"/api/dashboard/stats/\",[\"q-CSb0NZF_.js\"]],[\"api/files/list/\",[S,()=>ye],\"/api/files/list/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/signed-url/\",[S,()=>Bt],\"/api/storage/signed-url/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/proxy/[.path]\",[S,()=>Ht],\"/api/storage/proxy/[.path]\",[\"q-CSb0NZF_.js\"]],[\"api/cache/\",[S,()=>Jt],\"/api/cache/\",[\"q-CSb0NZF_.js\"]],[\"api/content/\",[S,()=>Yt],\"/api/content/\",[\"q-CSb0NZF_.js\"]],[\"api/docs/\",[S,()=>ll],\"/api/docs/\",[\"q-CSb0NZF_.js\",\"q-C-Vwv8I7.js\"]],[\"api/errors/\",[S,()=>ol],\"/api/errors/\",[\"q-CSb0NZF_.js\"]],[\"api/health/\",[S,()=>vl],\"/api/health/\",[\"q-CSb0NZF_.js\"]],[\"api/logs/\",[S,()=>Cl],\"/api/logs/\",[\"q-CSb0NZF_.js\"]],[\"api/upload/\",[S,()=>ve],\"/api/upload/\",[\"q-CSb0NZF_.js\"]],[\"auth/callback/\",[S,()=>Il],\"/auth/callback/\",[\"q-CSb0NZF_.js\",\"q-DAWT_rQB.js\"]],[\"dashboard/analytics/\",[S,U,q,()=>Nl],\"/dashboard/analytics/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D3peGYRe.js\"]],[\"dashboard/components/\",[S,U,q,()=>Ql],\"/dashboard/components/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-BXBKrR62.js\"]],[\"dashboard/media/\",[S,U,q,()=>as],\"/dashboard/media/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-TA-9Pb1a.js\"]],[\"dashboard/pages/\",[S,U,q,()=>ps],\"/dashboard/pages/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D_dUu6X9.js\"]],[\"dashboard/posts/\",[S,U,q,()=>xs],\"/dashboard/posts/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CS-S8Nx0.js\"]],[\"dashboard/\",[S,U,q,()=>Ts],\"/dashboard/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CFimUew-.js\"]],[\"login/\",[S,()=>As],\"/login/\",[\"q-CSb0NZF_.js\",\"q-ACkpa2hX.js\"]],[\"api/[.404]\",[S,()=>js],\"/api/[.404]\",[\"q-CSb0NZF_.js\",\"q-DRbnYsbH.js\"]],[\"[.catchall]\",[S,()=>Bs],\"/[.catchall]\",[\"q-CSb0NZF_.js\",\"q-BhAqSnFt.js\"]],[\"[...slug]\",[S,()=>Js],\"/[...slug]\",[\"q-CSb0NZF_.js\",\"q-BdYugbGr.js\"]]],Xs=[],en=!0,tn=\"/\",ln=!0,rn={routes:Ys,serverPlugins:Zs,menus:Xs,trailingSlash:en,basePathname:tn,cacheModules:ln};export{tn as b,ln as c,p as l,Xs as m,rn as q,Ys as r,Zs as s,en as t};"
      }
    ],
    "testDoubles": [],
    "hardcodedValues": [
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 1367,
        "content": "const w = { type: \"placeholder\", hidden: \"\", \"q:id\": E3.$id$ };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 2317,
        "content": "const t = { $flags$: 0, $id$: \"\", $element$: e2, $refMap$: [], li: [], $tasks$: null, $seq$: null, $slots$: null, $scopeIds$: null, $appendStyles$: null, $props$: null, $vdom$: null, $componentQrl$: null, $contexts$: null, $dynamicSlots$: null, $parentCtx$: void 0, $realParentCtx$: void 0 };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 4133,
        "content": "const [n, s, r2, o] = en(), { type: i = \"link\", forceReload: c = e2 === void 0, replaceState: $3 = false, scroll: l2 = true } = typeof t == \"object\" ? t : { forceReload: t };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 4170,
        "content": "const s = new URL(n), r2 = Et({ url: s, params: t.params, isNavigating: false, prevUrl: void 0 }, { deep: false }), o = {}, i = Z$(Et(t.response.loaders, { deep: false })), c = Rt({ type: \"initial\", dest: s, forceReload: false, replaceState: false, scroll: true }), $3 = Et(Mo), l2 = Et({ headings: void 0, menu: void 0 }), a2 = Rt(), u = t.response.action, f2 = u ? t.response.loaders[u] : void 0, d2 = Rt(f2 ? { id: u, data: t.response.formData, output: { result: f2, status: t.response.status } } : void 0), v = de(Cl, \"s_od2obl07f54\"), x2 = de(Dl, \"s_TAuHDP8cAnk\", [d2, o, c, r2]);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 34963,
        "content": "r = `var t=Uint8Array,n=Uint16Array,r=Int32Array,e=new t([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),i=new t([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),a=new t([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),s=function(t,e){for(var i=new n(31),a=0;a<31;++a)i[a]=e+=1<<t[a-1];var s=new r(i[30]);for(a=1;a<30;++a)for(var o=i[a];o<i[a+1];++o)s[o]=o-i[a]<<5|a;return{b:i,r:s}},o=s(e,2),f=o.b,h=o.r;f[28]=258,h[258]=28;for(var l=s(i,0).r,u=new n(32768),c=0;c<32768;++c){var v=(43690&c)>>1|(21845&c)<<1;v=(61680&(v=(52428&v)>>2|(13107&v)<<2))>>4|(3855&v)<<4,u[c]=((65280&v)>>8|(255&v)<<8)>>1}var d=function(t,r,e){for(var i=t.length,a=0,s=new n(r);a<i;++a)t[a]&&++s[t[a]-1];var o,f=new n(r);for(a=1;a<r;++a)f[a]=f[a-1]+s[a-1]<<1;if(e){o=new n(1<<r);var h=15-r;for(a=0;a<i;++a)if(t[a])for(var l=a<<4|t[a],c=r-t[a],v=f[t[a]-1]++<<c,d=v|(1<<c)-1;v<=d;++v)o[u[v]>>h]=l}else for(o=new n(i),a=0;a<i;++a)t[a]&&(o[a]=u[f[t[a]-1]++]>>15-t[a]);return o},g=new t(288);for(c=0;c<144;++c)g[c]=8;for(c=144;c<256;++c)g[c]=9;for(c=256;c<280;++c)g[c]=7;for(c=280;c<288;++c)g[c]=8;var w=new t(32);for(c=0;c<32;++c)w[c]=5;var p=d(g,9,0),y=d(w,5,0),m=function(t){return(t+7)/8|0},b=function(n,r,e){return(null==r||r<0)&&(r=0),(null==e||e>n.length)&&(e=n.length),new t(n.subarray(r,e))},M=[\"unexpected EOF\",\"invalid block type\",\"invalid length/literal\",\"invalid distance\",\"stream finished\",\"no stream handler\",,\"no callback\",\"invalid UTF-8 data\",\"extra field too long\",\"date not in range 1980-2099\",\"filename too long\",\"stream finishing\",\"invalid zip data\"],E=function(t,n,r){var e=new Error(n||M[t]);if(e.code=t,Error.captureStackTrace&&Error.captureStackTrace(e,E),!r)throw e;return e},z=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8},A=function(t,n,r){r<<=7&n;var e=n/8|0;t[e]|=r,t[e+1]|=r>>8,t[e+2]|=r>>16},_=function(r,e){for(var i=[],a=0;a<r.length;++a)r[a]&&i.push({s:a,f:r[a]});var s=i.length,o=i.slice();if(!s)return{t:F,l:0};if(1==s){var f=new t(i[0].s+1);return f[i[0].s]=1,{t:f,l:1}}i.sort((function(t,n){return t.f-n.f})),i.push({s:-1,f:25001});var h=i[0],l=i[1],u=0,c=1,v=2;for(i[0]={s:-1,f:h.f+l.f,l:h,r:l};c!=s-1;)h=i[i[u].f<i[v].f?u++:v++],l=i[u!=c&&i[u].f<i[v].f?u++:v++],i[c++]={s:-1,f:h.f+l.f,l:h,r:l};var d=o[0].s;for(a=1;a<s;++a)o[a].s>d&&(d=o[a].s);var g=new n(d+1),w=x(i[c-1],g,0);if(w>e){a=0;var p=0,y=w-e,m=1<<y;for(o.sort((function(t,n){return g[n.s]-g[t.s]||t.f-n.f}));a<s;++a){var b=o[a].s;if(!(g[b]>e))break;p+=m-(1<<w-g[b]),g[b]=e}for(p>>=y;p>0;){var M=o[a].s;g[M]<e?p-=1<<e-g[M]++-1:++a}for(;a>=0&&p;--a){var E=o[a].s;g[E]==e&&(--g[E],++p)}w=e}return{t:new t(g),l:w}},x=function(t,n,r){return-1==t.s?Math.max(x(t.l,n,r+1),x(t.r,n,r+1)):n[t.s]=r},D=function(t){for(var r=t.length;r&&!t[--r];);for(var e=new n(++r),i=0,a=t[0],s=1,o=function(t){e[i++]=t},f=1;f<=r;++f)if(t[f]==a&&f!=r)++s;else{if(!a&&s>2){for(;s>138;s-=138)o(32754);s>2&&(o(s>10?s-11<<5|28690:s-3<<5|12305),s=0)}else if(s>3){for(o(a),--s;s>6;s-=6)o(8304);s>2&&(o(s-3<<5|8208),s=0)}for(;s--;)o(a);s=1,a=t[f]}return{c:e.subarray(0,i),n:r}},T=function(t,n){for(var r=0,e=0;e<n.length;++e)r+=t[e]*n[e];return r},k=function(t,n,r){var e=r.length,i=m(n+2);t[i]=255&e,t[i+1]=e>>8,t[i+2]=255^t[i],t[i+3]=255^t[i+1];for(var a=0;a<e;++a)t[i+a+4]=r[a];return 8*(i+4+e)},C=function(t,r,s,o,f,h,l,u,c,v,m){z(r,m++,s),++f[256];for(var b=_(f,15),M=b.t,E=b.l,x=_(h,15),C=x.t,U=x.l,F=D(M),I=F.c,S=F.n,L=D(C),O=L.c,j=L.n,q=new n(19),B=0;B<I.length;++B)++q[31&I[B]];for(B=0;B<O.length;++B)++q[31&O[B]];for(var G=_(q,7),H=G.t,J=G.l,K=19;K>4&&!H[a[K-1]];--K);var N,P,Q,R,V=v+5<<3,W=T(f,g)+T(h,w)+l,X=T(f,M)+T(h,C)+l+14+3*K+T(q,H)+2*q[16]+3*q[17]+7*q[18];if(c>=0&&V<=W&&V<=X)return k(r,m,t.subarray(c,c+v));if(z(r,m,1+(X<W)),m+=2,X<W){N=d(M,E,0),P=M,Q=d(C,U,0),R=C;var Y=d(H,J,0);z(r,m,S-257),z(r,m+5,j-1),z(r,m+10,K-4),m+=14;for(B=0;B<K;++B)z(r,m+3*B,H[a[B]]);m+=3*K;for(var Z=[I,O],$=0;$<2;++$){var tt=Z[$];for(B=0;B<tt.length;++B){var nt=31&tt[B];z(r,m,Y[nt]),m+=H[nt],nt>15&&(z(r,m,tt[B]>>5&127),m+=tt[B]>>12)}}}else N=p,P=g,Q=y,R=w;for(B=0;B<u;++B){var rt=o[B];if(rt>255){A(r,m,N[(nt=rt>>18&31)+257]),m+=P[nt+257],nt>7&&(z(r,m,rt>>23&31),m+=e[nt]);var et=31&rt;A(r,m,Q[et]),m+=R[et],et>3&&(A(r,m,rt>>5&8191),m+=i[et])}else A(r,m,N[rt]),m+=P[rt]}return A(r,m,N[256]),m+P[256]},U=new r([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),F=new t(0),I=function(){for(var t=new Int32Array(256),n=0;n<256;++n){for(var r=n,e=9;--e;)r=(1&r&&-306674912)^r>>>1;t[n]=r}return t}(),S=function(){var t=1,n=0;return{p:function(r){for(var e=t,i=n,a=0|r.length,s=0;s!=a;){for(var o=Math.min(s+2655,a);s<o;++s)i+=e+=r[s];e=(65535&e)+15*(e>>16),i=(65535&i)+15*(i>>16)}t=e,n=i},d:function(){return(255&(t%=65521))<<24|(65280&t)<<8|(255&(n%=65521))<<8|n>>8}}},L=function(a,s,o,f,u){if(!u&&(u={l:1},s.dictionary)){var c=s.dictionary.subarray(-32768),v=new t(c.length+a.length);v.set(c),v.set(a,c.length),a=v,u.w=c.length}return function(a,s,o,f,u,c){var v=c.z||a.length,d=new t(f+v+5*(1+Math.ceil(v/7e3))+u),g=d.subarray(f,d.length-u),w=c.l,p=7&(c.r||0);if(s){p&&(g[0]=c.r>>3);for(var y=U[s-1],M=y>>13,E=8191&y,z=(1<<o)-1,A=c.p||new n(32768),_=c.h||new n(z+1),x=Math.ceil(o/3),D=2*x,T=function(t){return(a[t]^a[t+1]<<x^a[t+2]<<D)&z},F=new r(25e3),I=new n(288),S=new n(32),L=0,O=0,j=c.i||0,q=0,B=c.w||0,G=0;j+2<v;++j){var H=T(j),J=32767&j,K=_[H];if(A[J]=K,_[H]=J,B<=j){var N=v-j;if((L>7e3||q>24576)&&(N>423||!w)){p=C(a,g,0,F,I,S,O,q,G,j-G,p),q=L=O=0,G=j;for(var P=0;P<286;++P)I[P]=0;for(P=0;P<30;++P)S[P]=0}var Q=2,R=0,V=E,W=J-K&32767;if(N>2&&H==T(j-W))for(var X=Math.min(M,N)-1,Y=Math.min(32767,j),Z=Math.min(258,N);W<=Y&&--V&&J!=K;){if(a[j+Q]==a[j+Q-W]){for(var $=0;$<Z&&a[j+$]==a[j+$-W];++$);if($>Q){if(Q=$,R=W,$>X)break;var tt=Math.min(W,$-2),nt=0;for(P=0;P<tt;++P){var rt=j-W+P&32767,et=rt-A[rt]&32767;et>nt&&(nt=et,K=rt)}}}W+=(J=K)-(K=A[J])&32767}if(R){F[q++]=268435456|h[Q]<<18|l[R];var it=31&h[Q],at=31&l[R];O+=e[it]+i[at],++I[257+it],++S[at],B=j+Q,++L}else F[q++]=a[j],++I[a[j]]}}for(j=Math.max(j,B);j<v;++j)F[q++]=a[j],++I[a[j]];p=C(a,g,w,F,I,S,O,q,G,j-G,p),w||(c.r=7&p|g[p/8|0]<<3,p-=7,c.h=_,c.p=A,c.i=j,c.w=B)}else{for(j=c.w||0;j<v+w;j+=65535){var st=j+65535;st>=v&&(g[p/8|0]=w,st=v),p=k(g,p+1,a.subarray(j,st))}c.i=v}return b(d,0,f+m(p)+u)}(a,null==s.level?6:s.level,null==s.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(a.length)))):12+s.mem,o,f,u)},O=function(t,n,r){for(;r;++n)t[n]=r,r>>>=8},j=function(){function n(n,r){if(\"function\"==typeof n&&(r=n,n={}),this.ondata=r,this.o=n||{},this.s={l:0,i:32768,w:32768,z:32768},this.b=new t(98304),this.o.dictionary){var e=this.o.dictionary.subarray(-32768);this.b.set(e,32768-e.length),this.s.i=32768-e.length}}return n.prototype.p=function(t,n){this.ondata(L(t,this.o,0,0,this.s),n)},n.prototype.push=function(n,r){this.ondata||E(5),this.s.l&&E(4);var e=n.length+this.s.z;if(e>this.b.length){if(e>2*this.b.length-32768){var i=new t(-32768&e);i.set(this.b.subarray(0,this.s.z)),this.b=i}var a=this.b.length-this.s.z;a&&(this.b.set(n.subarray(0,a),this.s.z),this.s.z=this.b.length,this.p(this.b,!1)),this.b.set(this.b.subarray(-32768)),this.b.set(n.subarray(a),32768),this.s.z=n.length-a+32768,this.s.i=32766,this.s.w=32768}else this.b.set(n,this.s.z),this.s.z+=n.length;this.s.l=1&r,(this.s.z>this.s.w+8191||r)&&(this.p(this.b,r||!1),this.s.w=this.s.i,this.s.i-=2)},n}();function q(t,n){n||(n={});var r=function(){var t=-1;return{p:function(n){for(var r=t,e=0;e<n.length;++e)r=I[255&r^n[e]]^r>>>8;t=r},d:function(){return~t}}}(),e=t.length;r.p(t);var i,a=L(t,n,10+((i=n).filename?i.filename.length+1:0),8),s=a.length;return function(t,n){var r=n.filename;if(t[0]=31,t[1]=139,t[2]=8,t[8]=n.level<2?4:9==n.level?2:0,t[9]=3,0!=n.mtime&&O(t,4,Math.floor(new Date(n.mtime||Date.now())/1e3)),r){t[3]=8;for(var e=0;e<=r.length;++e)t[e+10]=r.charCodeAt(e)}}(a,n),O(a,s-8,r.d()),O(a,s-4,e),a}var B=function(){function t(t,n){this.c=S(),this.v=1,j.call(this,t,n)}return t.prototype.push=function(t,n){this.c.p(t),j.prototype.push.call(this,t,n)},t.prototype.p=function(t,n){var r=L(t,this.o,this.v&&(this.o.dictionary?6:2),n&&4,this.s);this.v&&(function(t,n){var r=n.level,e=0==r?0:r<6?1:9==r?3:2;if(t[0]=120,t[1]=e<<6|(n.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,n.dictionary){var i=S();i.p(n.dictionary),O(t,2,i.d())}}(r,this.o),this.v=0),n&&O(r,r.length-4,this.c.d()),this.ondata(r,n)},t}(),G=\"undefined\"!=typeof TextEncoder&&new TextEncoder,H=\"undefined\"!=typeof TextDecoder&&new TextDecoder;try{H.decode(F,{stream:!0})}catch(t){}var J=function(){function t(t){this.ondata=t}return t.prototype.push=function(t,n){this.ondata||E(5),this.d&&E(4),this.ondata(K(t),this.d=n||!1)},t}();function K(n,r){if(r){for(var e=new t(n.length),i=0;i<n.length;++i)e[i]=n.charCodeAt(i);return e}if(G)return G.encode(n);var a=n.length,s=new t(n.length+(n.length>>1)),o=0,f=function(t){s[o++]=t};for(i=0;i<a;++i){if(o+5>s.length){var h=new t(o+8+(a-i<<1));h.set(s),s=h}var l=n.charCodeAt(i);l<128||r?f(l):l<2048?(f(192|l>>6),f(128|63&l)):l>55295&&l<57344?(f(240|(l=65536+(1047552&l)|1023&n.charCodeAt(++i))>>18),f(128|l>>12&63),f(128|l>>6&63),f(128|63&l)):(f(224|l>>12),f(128|l>>6&63),f(128|63&l))}return b(s,0,o)}const N=new class{constructor(){this._init()}clear(){this._init()}addEvent(t){if(!t)throw new Error(\"Adding invalid event\");const n=this._hasEvents?\",\":\"\";this.stream.push(n+t),this._hasEvents=!0}finish(){this.stream.push(\"]\",!0);const t=function(t){let n=0;for(let r=0,e=t.length;r<e;r++)n+=t[r].length;const r=new Uint8Array(n);for(let n=0,e=0,i=t.length;n<i;n++){const i=t[n];r.set(i,e),e+=i.length}return r}(this._deflatedData);return this._init(),t}_init(){this._hasEvents=!1,this._deflatedData=[],this.deflate=new B,this.deflate.ondata=(t,n)=>{this._deflatedData.push(t)},this.stream=new J(((t,n)=>{this.deflate.push(t,n)})),this.stream.push(\"[\")}},P={clear:()=>{N.clear()},addEvent:t=>N.addEvent(t),finish:()=>N.finish(),compress:t=>function(t){return q(K(t))}(t)};addEventListener(\"message\",(function(t){const n=t.data.method,r=t.data.id,e=t.data.arg;if(n in P&&\"function\"==typeof P[n])try{const t=P[n](e);postMessage({id:r,method:n,success:!0,response:t})}catch(t){postMessage({id:r,method:n,success:!1,response:t.message}),console.error(t)}})),postMessage({id:void 0,method:\"init\",success:!0,response:void 0});`;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 36785,
        "content": "const t = { timestamp: /* @__PURE__ */ new Date(), route: typeof window < \"u\" ? window.location.pathname : void 0, userAgent: typeof navigator < \"u\" ? \"Cloudflare-Workers\" : void 0, ...r2.context, metadata: { ...(s = r2.context) == null ? void 0 : s.metadata, ...r2.metadata } }, i = { error: e2, context: t, severity: r2.severity, category: r2.category };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 36930,
        "content": "return [{ type: \"Pages\", count: ((s = _2.data) == null ? void 0 : s.length) || 0, views: ((a2 = _2.data) == null ? void 0 : a2.reduce((P3, D4) => P3 + (D4.view_count || 0), 0)) || 0, engagement: ((r2 = _2.data) == null ? void 0 : r2.reduce((P3, D4) => P3 + (D4.engagement_score || 0), 0)) || 0 }, { type: \"Posts\", count: ((o = A2.data) == null ? void 0 : o.length) || 0, views: ((u = A2.data) == null ? void 0 : u.reduce((P3, D4) => P3 + (D4.view_count || 0), 0)) || 0, engagement: ((i = A2.data) == null ? void 0 : i.reduce((P3, D4) => P3 + (D4.engagement_score || 0), 0)) || 0 }, { type: \"Media\", count: ((c = h.data) == null ? void 0 : c.length) || 0, views: ((m2 = h.data) == null ? void 0 : m2.reduce((P3, D4) => P3 + (D4.view_count || 0), 0)) || 0, engagement: ((d2 = h.data) == null ? void 0 : d2.reduce((P3, D4) => P3 + (D4.download_count || 0), 0)) || 0 }, { type: \"Components\", count: ((b = k4.data) == null ? void 0 : b.length) || 0, views: ((w = k4.data) == null ? void 0 : w.reduce((P3, D4) => P3 + (D4.usage_count || 0), 0)) || 0, engagement: ((L2 = k4.data) == null ? void 0 : L2.reduce((P3, D4) => P3 + (D4.performance_score || 0), 0)) || 0 }];"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37029,
        "content": "if (t.includes(\"placeholder\") || t.includes(\"wprgiqjcabmhhmwmurcp\") || !t) return { status: \"warn\", responseTime: Date.now() - n, message: \"Database not configured for development\", provider: \"supabase\", details: { mode: \"development\", configured: false } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37034,
        "content": "return { status: \"warn\", responseTime: Date.now() - n, message: \"Database connection failed (development mode)\", provider: \"supabase\", details: { error: t instanceof Error ? t.message : \"Unknown error\", mode: \"development\" } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37055,
        "content": "return { status: \"fail\", responseTime: Date.now() - t, message: \"Cache service unavailable\", provider: \"cloudflare-kv\", details: { error: s instanceof Error ? s.message : \"Unknown error\" } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37086,
        "content": "const t = { provider: \"cloudflare-pages\", region: \"unknown\" };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37441,
        "content": "const m2 = { error: c instanceof Error ? c.message : String(c), stack: c instanceof Error ? c.stack : void 0, method: t.method, path: new URL(t.url).pathname, ip: H(t), timestamp: (/* @__PURE__ */ new Date()).toISOString(), env: { hasKV: !!(r2 != null && r2.KV), nodeEnv: \"development\", kvType: typeof (r2 == null ? void 0 : r2.KV) } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37540,
        "content": "return Ie(\"div\", null, { class: \"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\" }, [Ie(\"section\", null, { class: \"container py-20 text-center\" }, Ie(\"div\", null, { class: \"max-w-4xl mx-auto\" }, [Ie(\"h1\", null, { class: \"text-6xl font-bold text-gray-900 mb-6\" }, [\"\\u{1F680} \", Ie(\"span\", null, { class: \"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\" }, \"Qwik + LIT + Supabase\", 3, null), Ie(\"br\", null, null, null, 3, null), \"Production Stack\"], 3, null), Ie(\"p\", null, { class: \"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\" }, [\"Live demonstration of a production-ready platform with \", Ie(\"strong\", null, null, \"zero mocks\", 3, null), \", real databases, edge storage, and enterprise security. Everything you see is functional.\"], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-3 mb-8\" }, [Ie(\"span\", null, { class: \"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\" }, \"\\u2705 0 TypeScript Errors\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\" }, \"\\u26A1 O(1) Loading\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\" }, \"\\u{1F510} Enterprise Security\", 3, null), Ie(\"span\", null, { class: \"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\" }, \"\\u{1F310} Edge Computing\", 3, null)], 3, null), Ie(\"div\", null, { class: \"flex flex-wrap justify-center gap-4\" }, [Ie(\"a\", null, { href: \"/dashboard\", class: \"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F3E0} Live Dashboard\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F510} Auth Demo\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\" }, \"\\u{1F49A} Health Check\", 3, null)], 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between mb-6\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"\\u{1F525} Live System Status\", 3, null), Ie(\"div\", null, { class: \"text-sm text-gray-500\" }, [\"Updated: \", Vl((a2) => a2.value, [t], \"p0.value\")], 3, null)], 3, null), n.value ? Ie(\"div\", null, { class: \"grid md:grid-cols-3 lg:grid-cols-6 gap-6\" }, [Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.database.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.database.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.database.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase DB\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.database.responseTime, [n], \"p0.value.checks.database.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.storage.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.storage.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.storage.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"R2 Storage\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.storage.responseTime, [n], \"p0.value.checks.storage.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.cache.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.cache.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.cache.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"KV Cache\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.cache.responseTime, [n], \"p0.value.checks.cache.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.external.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.external.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.external.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"External APIs\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, [Vl((a2) => a2.value.checks.external.responseTime, [n], \"p0.value.checks.external.responseTime\"), \"ms\"], 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.memory.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.memory.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.memory.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Memory\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Optimal\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center\" }, [Ie(\"div\", null, { class: Vl((a2) => `text-3xl mb-2 ${a2.value.checks.platform.status === \"pass\" ? \"text-green-500\" : \"text-red-500\"}`, [n], '`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`') }, Vl((a2) => a2.value.checks.platform.status === \"pass\" ? \"\\u2705\" : \"\\u274C\", [n], 'p0.value.checks.platform.status===\"pass\"?\"\\u2705\":\"\\u274C\"'), 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Ready\", 3, null)], 3, null)], 3, \"UG_0\") : Ie(\"div\", null, { class: \"text-center py-8\" }, [Ie(\"div\", null, { class: \"animate-spin text-4xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"p\", null, { class: \"text-gray-600\" }, \"Loading real system status...\", 3, null)], 3, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-gray-900 mb-6 text-center\" }, \"\\u{1F3A8} Live Design System with Spectrum Tokens\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 mb-8\" }, [Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"button\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_5k0fPY9uNBg\", [s]) }, \"Buttons\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"input\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_0SRyEbnJ408\", [s]) }, \"Inputs\", 3, null), Ie(\"button\", null, { class: Vl((a2) => `px-4 py-2 rounded-lg transition-all ${a2.value === \"upload\" ? \"bg-blue-600 text-white\" : \"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`, [l2], '`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'), onClick$: lo(\"s_QKGBDBTwM0Y\", [s]) }, \"File Upload\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-center p-8 bg-gray-50 rounded-xl\" }, [l2.value === \"button\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Buttons\", 3, null), Ie(\"div\", null, { class: \"flex justify-center gap-4 flex-wrap\" }, [Ie(\"ds-button\", null, { variant: \"primary\", size: \"medium\" }, \"Primary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"medium\" }, \"Secondary Button\", 3, null), Ie(\"ds-button\", null, { variant: \"primary\", size: \"large\" }, \"Large Button\", 3, null), Ie(\"ds-button\", null, { variant: \"secondary\", size: \"large\", disabled: true }, \"Disabled\", 3, null)], 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Powered by Adobe Spectrum design tokens \\u2022 Web Components \\u2022 Framework agnostic\", 3, null)], 3, \"UG_1\"), l2.value === \"input\" && Ie(\"div\", null, { class: \"space-y-4 max-w-md mx-auto\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - Inputs\", 3, null), Ie(\"ds-input\", null, { type: \"text\", label: \"Demo Input\", placeholder: \"Try typing here...\", class: \"w-full\" }, null, 3, null), Ie(\"ds-input\", null, { type: \"email\", label: \"Email Input\", placeholder: \"user@example.com\", required: true, class: \"w-full\" }, null, 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real validation \\u2022 Spectrum design tokens \\u2022 Accessible by default\", 3, null)], 3, \"UG_2\"), l2.value === \"upload\" && Ie(\"div\", null, { class: \"space-y-4\" }, [Ie(\"h3\", null, { class: \"text-xl font-semibold mb-4\" }, \"LIT Web Components - File Upload\", 3, null), Ie(\"div\", null, { class: \"max-w-md mx-auto\" }, Ie(\"ds-file-upload\", null, { endpoint: \"/api/upload\", accept: \"image/*,application/pdf\", maxSize: 10485760, multiple: true, bucket: \"demo\", class: \"w-full\" }, null, 3, null), 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600 mt-4\" }, \"Real Cloudflare R2 upload \\u2022 Drag & drop \\u2022 Progress tracking \\u2022 Security validated\", 3, null)], 3, \"UG_3\")], 1, null)], 1, null), 1, null), Ie(\"section\", null, { class: \"container py-12\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-12\" }, \"\\u{1F3C6} Production Features Showcase\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-3 gap-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F4CA}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Real-Time Analytics\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Live database queries with performance metrics. No simulations.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/analytics\", class: \"text-blue-600 hover:text-blue-800 font-medium\" }, \"View Live Data \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F510}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"JWT Authentication\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Supabase Auth with Row Level Security. Enterprise grade.\", 3, null), Ie(\"a\", null, { href: \"/login\", class: \"text-purple-600 hover:text-purple-800 font-medium\" }, \"Try Login Flow \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Edge Storage\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Cloudflare R2 with global CDN. Upload and see permanent URLs.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/media\", class: \"text-green-600 hover:text-green-800 font-medium\" }, \"Manage Files \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F6E1}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Security Hardened\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"CSP headers, rate limiting, input validation, RBAC.\", 3, null), Ie(\"a\", null, { href: \"/api/health\", target: \"_blank\", class: \"text-red-600 hover:text-red-800 font-medium\" }, \"Security Report \\u2192\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Zero Hydration\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Qwik resumability means instant interactivity.\", 3, null), Ie(\"span\", null, { class: \"text-blue-600 font-medium\" }, \"Active on this page!\", 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\" }, [Ie(\"div\", null, { class: \"text-3xl mb-4\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"text-xl font-semibold mb-3\" }, \"Web Components\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"LIT components with Spectrum tokens. Framework agnostic.\", 3, null), Ie(\"a\", null, { href: \"/dashboard/components\", class: \"text-yellow-600 hover:text-yellow-800 font-medium\" }, \"Component Library \\u2192\", 3, null)], 3, null)], 3, null)], 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold mb-6\" }, \"\\u{1F680} Production Performance\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-4 gap-6\" }, [Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Hydration Time\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"<500ms\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"API Response\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"0\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"TypeScript Errors\", 3, null)], 3, null), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"text-4xl font-bold\" }, \"100%\", 3, null), Ie(\"div\", null, { class: \"text-sm opacity-90\" }, \"Real Systems\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8\" }, Ie(\"a\", null, { href: \"/dashboard\", class: \"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\" }, \"\\u{1F3E0} Explore Full Dashboard\", 3, null), 3, null)], 3, null), 3, null), Ie(\"section\", null, { class: \"container py-12\" }, Ie(\"div\", null, { class: \"bg-white rounded-2xl shadow-lg p-8\" }, [Ie(\"h2\", null, { class: \"text-3xl font-bold text-center text-gray-900 mb-8\" }, \"\\u2699\\uFE0F Tech Stack\", 3, null), Ie(\"div\", null, { class: \"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\" }, [Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u26A1\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Qwik City\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"O(1) Loading\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F9E9}\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"LIT Elements\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Web Components\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F5C4}\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Supabase\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Backend + Auth\", 3, null)], 3, null), Ie(\"div\", null, { class: \"p-4\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u2601\\uFE0F\", 3, null), Ie(\"h3\", null, { class: \"font-semibold\" }, \"Cloudflare\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-600\" }, \"Edge Computing\", 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"mt-8 text-center\" }, [Ie(\"p\", null, { class: \"text-gray-600 mb-4\" }, \"Built with Adobe Spectrum design tokens and enterprise security standards\", 3, null), Ie(\"div\", null, { class: \"flex justify-center flex-wrap gap-2\" }, [Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"TypeScript\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vite\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Tailwind CSS\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"ESLint\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Vitest\", 3, null), Ie(\"span\", null, { class: \"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\" }, \"Playwright\", 3, null)], 3, null)], 3, null)], 3, null), 3, null)], 1, \"UG_4\");"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37904,
        "content": "const a2 = { page_id: t.page_id, block_type: t.block_type, component_name: t.component_name || t.block_type, properties: t.properties || {}, children: t.children || [], order_index: s, region: t.region || \"main\", parent_block_id: t.parent_block_id || null, visibility_rules: {}, block_version: \"1.0.0\" }, { data: r2, error: o } = await this.supabase.from(\"content_blocks\").insert(a2).select().single();"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38046,
        "content": "const d2 = \"00000000-0000-0000-0000-000000000000\", b = { title: a2.trim(), slug: c, description: o ? o.trim() : void 0, template: u || \"default\", published: i === true }, w = await G2.createPage(b, d2);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38069,
        "content": "const s = R2(), a2 = await t.json(), { data: r2, error: o } = await s.from(\"posts\").insert([{ title: a2.title || \"Untitled\", content: a2.content || \"\", slug: a2.slug || ((l2 = a2.title) == null ? void 0 : l2.toLowerCase().replace(/\\s+/g, \"-\")) || \"untitled\", published: a2.published || false, author_id: a2.author_id || \"\" }]).select().single();"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38090,
        "content": "return { id: i.id, title: i.title, type: \"post\", url: `/posts/${i.slug}`, excerpt: ((c = i.content) == null ? void 0 : c.substring(0, 150)) + \"...\", created_at: i.created_at };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38099,
        "content": "return { id: i.id, title: i.name, type: \"page\", url: ((c = i.data) == null ? void 0 : c.url) || \"/\", excerpt: ((m2 = i.data) == null ? void 0 : m2.description) || \"\", created_at: i.createdDate };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38213,
        "content": "const D4 = t.get(\"CLOUDFLARE_ACCOUNT_ID\") || \"\", re4 = /* @__PURE__ */ __name2(($3) => `https://qwik-production-files.${D4}.r2.cloudflarestorage.com/${$3}`, \"re\"), oe3 = (h || []).map(($3) => ({ id: $3.id, name: $3.file_name, size: $3.file_size, type: $3.mime_type || \"application/octet-stream\", url: re4($3.storage_path), uploadedAt: $3.created_at, thumbnailUrl: $3.thumbnail_path ? re4($3.thumbnail_path) : void 0, tags: $3.tags || [] })), Q3 = P3 || 0, ie3 = Math.ceil(Q3 / r2), Ce3 = a2 < ie3;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38502,
        "content": "return { ...await this.r2Client.uploadFile(t, s), provider: \"r2\" };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38536,
        "content": "const c = u.data.file, d2 = await Ol2({ r2Bucket: l2.get(\"R2\"), cloudflareAccountId: l2.get(\"CLOUDFLARE_ACCOUNT_ID\") || \"\" }).uploadFile(c, o);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38577,
        "content": "return fc(de(ql2, \"s_H1t3zAJGOHQ\", [u, n])), Ie(\"div\", null, null, [Ie(\"div\", null, { class: \"flex justify-between items-center mb-8\" }, [Ie(\"div\", null, null, [Ie(\"h1\", null, { class: \"text-3xl font-bold text-gray-900\" }, \"Analytics & Performance\", 3, null), Ie(\"p\", null, { class: \"text-gray-600 mt-2\" }, [\"Real-time monitoring of your content performance and system metrics\", s.value && Ie(\"span\", null, { class: \"ml-2 text-sm text-gray-500\" }, [\"\\u2022 Last updated: \", Vl((i) => i.value, [s], \"p0.value\")], 3, \"M2_0\")], 1, null)], 1, null), Ie(\"div\", null, { class: \"flex items-center gap-4\" }, [t.value && Ie(\"div\", null, { class: \"flex items-center text-blue-600\" }, [Ie(\"div\", null, { class: \"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\" }, null, 3, null), \"Loading...\"], 3, \"M2_1\"), Ie(\"select\", null, { class: \"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\", value: Vl((i) => i.value, [n], \"p0.value\"), disabled: Vl((i) => i.value, [t], \"p0.value\"), onChange$: lo(\"s_YCN88HLlJwA\", [n]) }, [Ie(\"option\", null, { value: \"24h\" }, \"Last 24 hours\", 3, null), Ie(\"option\", null, { value: \"7d\" }, \"Last 7 days\", 3, null), Ie(\"option\", null, { value: \"30d\" }, \"Last 30 days\", 3, null), Ie(\"option\", null, { value: \"90d\" }, \"Last 90 days\", 3, null)], 3, null)], 1, null)], 1, null), l2.value && Ie(\"div\", null, { class: \"bg-red-50 border border-red-200 rounded-md p-4 mb-8\" }, Ie(\"div\", null, { class: \"flex\" }, [Ie(\"div\", null, { class: \"flex-shrink-0\" }, Ie(\"span\", null, { class: \"text-red-400\" }, \"\\u26A0\\uFE0F\", 3, null), 3, null), Ie(\"div\", null, { class: \"ml-3\" }, [Ie(\"h3\", null, { class: \"text-sm font-medium text-red-800\" }, \"Analytics Data Error\", 3, null), Ie(\"div\", null, { class: \"mt-2 text-sm text-red-700\" }, [Ie(\"p\", null, null, Vl((i) => i.value, [l2], \"p0.value\"), 3, null), Ie(\"button\", null, { class: \"mt-2 text-red-800 hover:text-red-600 underline\", onClick$: lo(\"s_08kI8AH8QFg\", [u, n]) }, \"Try again\", 3, null)], 3, null)], 3, null)], 3, null), 3, \"M2_2\"), Ie(\"div\", null, { class: \"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border p-6\" }, Ie(\"div\", null, { class: \"flex items-center justify-between\" }, [Ie(\"div\", null, null, [Ie(\"p\", null, { class: \"text-sm font-medium text-gray-600\" }, \"Page Views\", 3, null), Ie(\"p\", null, { class: \"text-3xl font-bold text-gray-900\" }, a2.value.pageViews.value.toLocaleString(), 1, null)], 1, null), Ie(\"div\", null, { class: \"text-green-600 text-sm font-medium\" }, Vl((i) => i.value.pageViews.change, [a2], \"p0.value.pageViews.change\"), 3, null)], 1, null), 1, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border p-6\" }, Ie(\"div\", null, { class: \"flex items-center justify-between\" }, [Ie(\"div\", null, null, [Ie(\"p\", null, { class: \"text-sm font-medium text-gray-600\" }, \"Unique Visitors\", 3, null), Ie(\"p\", null, { class: \"text-3xl font-bold text-gray-900\" }, a2.value.uniqueVisitors.value.toLocaleString(), 1, null)], 1, null), Ie(\"div\", null, { class: \"text-green-600 text-sm font-medium\" }, Vl((i) => i.value.uniqueVisitors.change, [a2], \"p0.value.uniqueVisitors.change\"), 3, null)], 1, null), 1, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border p-6\" }, Ie(\"div\", null, { class: \"flex items-center justify-between\" }, [Ie(\"div\", null, null, [Ie(\"p\", null, { class: \"text-sm font-medium text-gray-600\" }, \"Bounce Rate\", 3, null), Ie(\"p\", null, { class: \"text-3xl font-bold text-gray-900\" }, Vl((i) => i.value.bounceRate.value, [a2], \"p0.value.bounceRate.value\"), 3, null)], 3, null), Ie(\"div\", null, { class: \"text-green-600 text-sm font-medium\" }, Vl((i) => i.value.bounceRate.change, [a2], \"p0.value.bounceRate.change\"), 3, null)], 3, null), 3, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border p-6\" }, Ie(\"div\", null, { class: \"flex items-center justify-between\" }, [Ie(\"div\", null, null, [Ie(\"p\", null, { class: \"text-sm font-medium text-gray-600\" }, \"Avg. Session Time\", 3, null), Ie(\"p\", null, { class: \"text-3xl font-bold text-gray-900\" }, Vl((i) => i.value.avgSessionTime.value, [a2], \"p0.value.avgSessionTime.value\"), 3, null)], 3, null), Ie(\"div\", null, { class: \"text-green-600 text-sm font-medium\" }, Vl((i) => i.value.avgSessionTime.change, [a2], \"p0.value.avgSessionTime.change\"), 3, null)], 3, null), 3, null)], 1, null), Ie(\"div\", null, { class: \"grid lg:grid-cols-2 gap-8 mb-8\" }, [Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b\" }, Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, \"System Performance\", 3, null), 3, null), Ie(\"div\", null, { class: \"p-6 space-y-4\" }, [Ie(\"div\", null, { class: \"flex items-center justify-between p-4 bg-gray-50 rounded-lg\" }, [Ie(\"div\", null, null, [Ie(\"h3\", null, { class: \"font-medium text-gray-900\" }, \"Builder.io Content\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-500\" }, \"Average load time\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-right\" }, [Ie(\"p\", null, { class: \"text-xl font-bold text-gray-900\" }, Vl((i) => i.value.builderContent.loadTime, [r2], \"p0.value.builderContent.loadTime\"), 3, null), Ie(\"span\", null, { class: \"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\" }, Vl((i) => i.value.builderContent.rating, [r2], \"p0.value.builderContent.rating\"), 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"flex items-center justify-between p-4 bg-gray-50 rounded-lg\" }, [Ie(\"div\", null, null, [Ie(\"h3\", null, { class: \"font-medium text-gray-900\" }, \"Media Files\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-500\" }, \"Average load time\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-right\" }, [Ie(\"p\", null, { class: \"text-xl font-bold text-gray-900\" }, Vl((i) => i.value.mediaFiles.loadTime, [r2], \"p0.value.mediaFiles.loadTime\"), 3, null), Ie(\"span\", null, { class: \"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\" }, Vl((i) => i.value.mediaFiles.rating, [r2], \"p0.value.mediaFiles.rating\"), 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"flex items-center justify-between p-4 bg-gray-50 rounded-lg\" }, [Ie(\"div\", null, null, [Ie(\"h3\", null, { class: \"font-medium text-gray-900\" }, \"Cache Hit Rate\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-500\" }, \"Caching efficiency\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-right\" }, [Ie(\"p\", null, { class: \"text-xl font-bold text-gray-900\" }, Vl((i) => i.value.cacheHitRate.value, [r2], \"p0.value.cacheHitRate.value\"), 3, null), Ie(\"span\", null, { class: \"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\" }, Vl((i) => i.value.cacheHitRate.rating, [r2], \"p0.value.cacheHitRate.rating\"), 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"flex items-center justify-between p-4 bg-gray-50 rounded-lg\" }, [Ie(\"div\", null, null, [Ie(\"h3\", null, { class: \"font-medium text-gray-900\" }, \"API Response Time\", 3, null), Ie(\"p\", null, { class: \"text-sm text-gray-500\" }, \"Average response time\", 3, null)], 3, null), Ie(\"div\", null, { class: \"text-right\" }, [Ie(\"p\", null, { class: \"text-xl font-bold text-gray-900\" }, Vl((i) => i.value.apiResponseTime.value, [r2], \"p0.value.apiResponseTime.value\"), 3, null), Ie(\"span\", null, { class: \"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\" }, Vl((i) => i.value.apiResponseTime.rating, [r2], \"p0.value.apiResponseTime.rating\"), 3, null)], 3, null)], 3, null)], 3, null)], 3, null), Ie(\"div\", null, { class: \"bg-white rounded-lg shadow-sm border\" }, [Ie(\"div\", null, { class: \"px-6 py-4 border-b\" }, Ie(\"h2\", null, { class: \"text-lg font-semibold\" }, \"Content Analytics\", 3, null), 3, null), Ie(\"div\", null, { class: \"p-6\" }, Ie(\"div\", null, { class: \"space-y-4\" }, o.value.length === 0 && !t.value ? Ie(\"div\", null, { class: \"text-center py-8 text-gray-500\" }, [Ie(\"div\", null, { class: \"text-4xl mb-2\" }, \"\\u{1F4CA}\", 3, null), Ie(\"p\", null, null, \"No content metrics available\", 3, null), Ie(\"p\", null, { class: \"text-sm\" }, \"Create some content to see analytics\", 3, null)], 3, \"M2_3\") : o.value.map((i, c) => {"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38590,
        "content": "const n = Rt(\"ds-button\"), t = Rt({ \"ds-button\": { variant: \"primary\", size: \"medium\", text: \"Sample Button\" }, \"ds-card\": { variant: \"default\", content: \"<p>Sample card content</p>\" }, \"ds-input\": { type: \"text\", placeholder: \"Enter text...\", label: \"Sample Input\" }, \"ds-file-upload\": { accept: \"image/*\", multiple: false } }), l2 = [{ name: \"ds-button\", title: \"DS Button\", description: \"Interactive button with variants and sizes\", props: [{ name: \"variant\", type: \"select\", options: [\"primary\", \"secondary\"], default: \"primary\" }, { name: \"size\", type: \"select\", options: [\"medium\", \"large\"], default: \"medium\" }, { name: \"disabled\", type: \"boolean\", default: false }, { name: \"text\", type: \"string\", default: \"Button Text\" }] }, { name: \"ds-card\", title: \"DS Card\", description: \"Container component with variants\", props: [{ name: \"variant\", type: \"select\", options: [\"default\", \"elevated\"], default: \"default\" }, { name: \"content\", type: \"richtext\", default: \"<p>Card content</p>\" }] }, { name: \"ds-input\", title: \"DS Input\", description: \"Form input with validation\", props: [{ name: \"type\", type: \"select\", options: [\"text\", \"email\", \"password\"], default: \"text\" }, { name: \"placeholder\", type: \"string\", default: \"Enter text...\" }, { name: \"label\", type: \"string\", default: \"Input Label\" }, { name: \"required\", type: \"boolean\", default: false }] }, { name: \"ds-file-upload\", title: \"DS File Upload\", description: \"File upload with drag & drop\", props: [{ name: \"accept\", type: \"string\", default: \"image/*\" }, { name: \"multiple\", type: \"boolean\", default: false }, { name: \"maxSize\", type: \"number\", default: 10485760 }] }], s = de(Nl2, \"s_AAO897lgALA\", [t, n]), a2 = l2.find((o) => o.name === n.value), r2 = t.value[n.value];"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38604,
        "content": "const l2 = R2(), { data: s } = await l2.from(\"profiles\").select(\"*\").eq(\"id\", t.id).single(), { data: a2, error: r2 } = await l2.from(\"file_metadata\").select(\"*\").eq(\"user_id\", t.id).eq(\"upload_status\", \"completed\").order(\"created_at\", { ascending: false }).limit(50), { data: o } = await l2.from(\"user_file_stats\").select(\"*\").eq(\"user_id\", t.id).single(), u = /* @__PURE__ */ __name2((c) => {"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38682,
        "content": "const u = { title: r2.value.trim(), slug: a2.value.trim() || void 0, description: s.value.trim() || void 0, template: \"default\", published: false }, i = await fetch(\"/api/content/pages\", { method: \"POST\", headers: { \"Content-Type\": \"application/json\" }, body: JSON.stringify(u) });"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38748,
        "content": "const l2 = R2(), { count: s } = await l2.from(\"posts\").select(\"*\", { count: \"exact\", head: true }).eq(\"author_id\", t.id), { data: a2 } = await l2.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\", t.id).order(\"created_at\", { ascending: false }).limit(5), { data: r2 } = await l2.from(\"user_file_stats\").select(\"*\").eq(\"user_id\", t.id).single(), { count: o } = await l2.from(\"builder_pages\").select(\"*\", { count: \"exact\", head: true }).eq(\"user_id\", t.id), { count: u } = await l2.from(\"design_system_components\").select(\"*\", { count: \"exact\", head: true }).eq(\"created_by\", t.id), i = new Date(Date.now() - 3e5).toISOString(), { count: c } = await l2.from(\"user_sessions\").select(\"*\", { count: \"exact\", head: true }).eq(\"user_id\", t.id).gte(\"last_activity\", i).eq(\"active\", true);"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 39170,
        "content": "const l2 = c.length ? `,{${c.join(\",\")}}` : \"\", u = e2 == null ? void 0 : e2.manifest.manifestHash, p3 = `let b=fetch(\"${t}q-bundle-graph-${u}.json\");import(\"${t}${s}\").then(({l})=>l(${JSON.stringify(t)},b${l2}));`;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 39214,
        "content": "var nt2 = '(()=>{const t=document,e=window,n=new Set,o=new Set([t]);let r;const s=(t,e)=>Array.from(t.querySelectorAll(e)),a=t=>{const e=[];return o.forEach((n=>e.push(...s(n,t)))),e},i=t=>{w(t),s(t,\"[q\\\\\\\\:shadowroot]\").forEach((t=>{const e=t.shadowRoot;e&&i(e)}))},c=t=>t&&\"function\"==typeof t.then,l=(t,e,n=e.type)=>{a(\"[on\"+t+\"\\\\\\\\:\"+n+\"]\").forEach((o=>b(o,t,e,n)))},f=e=>{if(void 0===e._qwikjson_){let n=(e===t.documentElement?t.body:e).lastElementChild;for(;n;){if(\"SCRIPT\"===n.tagName&&\"qwik/json\"===n.getAttribute(\"type\")){e._qwikjson_=JSON.parse(n.textContent.replace(/\\\\\\\\x3C(\\\\/?script)/gi,\"<$1\"));break}n=n.previousElementSibling}}},p=(t,e)=>new CustomEvent(t,{detail:e}),b=async(e,n,o,r=o.type)=>{const s=\"on\"+n+\":\"+r;e.hasAttribute(\"preventdefault:\"+r)&&o.preventDefault(),e.hasAttribute(\"stoppropagation:\"+r)&&o.stopPropagation();const a=e._qc_,i=a&&a.li.filter((t=>t[0]===s));if(i&&i.length>0){for(const t of i){const n=t[1].getFn([e,o],(()=>e.isConnected))(o,e),r=o.cancelBubble;c(n)&&await n,r&&o.stopPropagation()}return}const l=e.getAttribute(s);if(l){const n=e.closest(\"[q\\\\\\\\:container]\"),r=n.getAttribute(\"q:base\"),s=n.getAttribute(\"q:version\")||\"unknown\",a=n.getAttribute(\"q:manifest-hash\")||\"dev\",i=new URL(r,t.baseURI);for(const p of l.split(\"\\\\n\")){const l=new URL(p,i),b=l.href,h=l.hash.replace(/^#?([^?[|]*).*$/,\"$1\")||\"default\",q=performance.now();let _,d,y;const w=p.startsWith(\"#\"),g={qBase:r,qManifest:a,qVersion:s,href:b,symbol:h,element:e,reqTime:q};if(w){const e=n.getAttribute(\"q:instance\");_=(t[\"qFuncs_\"+e]||[])[Number.parseInt(h)],_||(d=\"sync\",y=Error(\"sym:\"+h))}else{u(\"qsymbol\",g);const t=l.href.split(\"#\")[0];try{const e=import(t);f(n),_=(await e)[h],_||(d=\"no-symbol\",y=Error(`${h} not in ${t}`))}catch(t){d||(d=\"async\"),y=t}}if(!_){u(\"qerror\",{importError:d,error:y,...g}),console.error(y);break}const m=t.__q_context__;if(e.isConnected)try{t.__q_context__=[e,o,l];const n=_(o,e);c(n)&&await n}catch(t){u(\"qerror\",{error:t,...g})}finally{t.__q_context__=m}}}},u=(e,n)=>{t.dispatchEvent(p(e,n))},h=t=>t.replace(/([A-Z])/g,(t=>\"-\"+t.toLowerCase())),q=async t=>{let e=h(t.type),n=t.target;for(l(\"-document\",t,e);n&&n.getAttribute;){const o=b(n,\"\",t,e);let r=t.cancelBubble;c(o)&&await o,r=r||t.cancelBubble||n.hasAttribute(\"stoppropagation:\"+t.type),n=t.bubbles&&!0!==r?n.parentElement:null}},_=t=>{l(\"-window\",t,h(t.type))},d=()=>{var s;const c=t.readyState;if(!r&&(\"interactive\"==c||\"complete\"==c)&&(o.forEach(i),r=1,u(\"qinit\"),(null!=(s=e.requestIdleCallback)?s:e.setTimeout).bind(e)((()=>u(\"qidle\"))),n.has(\"qvisible\"))){const t=a(\"[on\\\\\\\\:qvisible]\"),e=new IntersectionObserver((t=>{for(const n of t)n.isIntersecting&&(e.unobserve(n.target),b(n.target,\"\",p(\"qvisible\",n)))}));t.forEach((t=>e.observe(t)))}},y=(t,e,n,o=!1)=>t.addEventListener(e,n,{capture:o,passive:!1}),w=(...t)=>{for(const r of t)\"string\"==typeof r?n.has(r)||(o.forEach((t=>y(t,r,q,!0))),y(e,r,_,!0),n.add(r)):o.has(r)||(n.forEach((t=>y(r,t,q,!0))),o.add(r))};if(!(\"__q_context__\"in t)){t.__q_context__=0;const r=e.qwikevents;Array.isArray(r)&&w(...r),e.qwikevents={events:n,roots:o,push:w},y(t,\"readystatechange\",d),d()}})()';"
      },
      {
        "file": "/coverage/lcov-report/prettify.js",
        "line": 2,
        "content": "window.PR_SHOULD_USE_CONTINUATION=true;(function(){var h=[\"break,continue,do,else,for,if,return,while\"];var u=[h,\"auto,case,char,const,default,double,enum,extern,float,goto,int,long,register,short,signed,sizeof,static,struct,switch,typedef,union,unsigned,void,volatile\"];var p=[u,\"catch,class,delete,false,import,new,operator,private,protected,public,this,throw,true,try,typeof\"];var l=[p,\"alignof,align_union,asm,axiom,bool,concept,concept_map,const_cast,constexpr,decltype,dynamic_cast,explicit,export,friend,inline,late_check,mutable,namespace,nullptr,reinterpret_cast,static_assert,static_cast,template,typeid,typename,using,virtual,where\"];var x=[p,\"abstract,boolean,byte,extends,final,finally,implements,import,instanceof,null,native,package,strictfp,super,synchronized,throws,transient\"];var R=[x,\"as,base,by,checked,decimal,delegate,descending,dynamic,event,fixed,foreach,from,group,implicit,in,interface,internal,into,is,lock,object,out,override,orderby,params,partial,readonly,ref,sbyte,sealed,stackalloc,string,select,uint,ulong,unchecked,unsafe,ushort,var\"];var r=\"all,and,by,catch,class,else,extends,false,finally,for,if,in,is,isnt,loop,new,no,not,null,of,off,on,or,return,super,then,true,try,unless,until,when,while,yes\";var w=[p,\"debugger,eval,export,function,get,null,set,undefined,var,with,Infinity,NaN\"];var s=\"caller,delete,die,do,dump,elsif,eval,exit,foreach,for,goto,if,import,last,local,my,next,no,our,print,package,redo,require,sub,undef,unless,until,use,wantarray,while,BEGIN,END\";var I=[h,\"and,as,assert,class,def,del,elif,except,exec,finally,from,global,import,in,is,lambda,nonlocal,not,or,pass,print,raise,try,with,yield,False,True,None\"];var f=[h,\"alias,and,begin,case,class,def,defined,elsif,end,ensure,false,in,module,next,nil,not,or,redo,rescue,retry,self,super,then,true,undef,unless,until,when,yield,BEGIN,END\"];var H=[h,\"case,done,elif,esac,eval,fi,function,in,local,set,then,until\"];var A=[l,R,w,s+I,f,H];var e=/^(DIR|FILE|vector|(de|priority_)?queue|list|stack|(const_)?iterator|(multi)?(set|map)|bitset|u?(int|float)\\d*)/;var C=\"str\";var z=\"kwd\";var j=\"com\";var O=\"typ\";var G=\"lit\";var L=\"pun\";var F=\"pln\";var m=\"tag\";var E=\"dec\";var J=\"src\";var P=\"atn\";var n=\"atv\";var N=\"nocode\";var M=\"(?:^^\\\\.?|[+-]|\\\\!|\\\\!=|\\\\!==|\\\\#|\\\\%|\\\\%=|&|&&|&&=|&=|\\\\(|\\\\*|\\\\*=|\\\\+=|\\\\,|\\\\-=|\\\\->|\\\\/|\\\\/=|:|::|\\\\;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\\\?|\\\\@|\\\\[|\\\\^|\\\\^=|\\\\^\\\\^|\\\\^\\\\^=|\\\\{|\\\\||\\\\|=|\\\\|\\\\||\\\\|\\\\|=|\\\\~|break|case|continue|delete|do|else|finally|instanceof|return|throw|try|typeof)\\\\s*\";function k(Z){var ad=0;var S=false;var ac=false;for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.ignoreCase){ac=true}else{if(/[a-z]/i.test(ae.source.replace(/\\\\u[0-9a-f]{4}|\\\\x[0-9a-f]{2}|\\\\[^ux]/gi,\"\"))){S=true;ac=false;break}}}var Y={b:8,t:9,n:10,v:11,f:12,r:13};function ab(ah){var ag=ah.charCodeAt(0);if(ag!==92){return ag}var af=ah.charAt(1);ag=Y[af];if(ag){return ag}else{if(\"0\"<=af&&af<=\"7\"){return parseInt(ah.substring(1),8)}else{if(af===\"u\"||af===\"x\"){return parseInt(ah.substring(2),16)}else{return ah.charCodeAt(1)}}}}function T(af){if(af<32){return(af<16?\"\\\\x0\":\"\\\\x\")+af.toString(16)}var ag=String.fromCharCode(af);if(ag===\"\\\\\"||ag===\"-\"||ag===\"[\"||ag===\"]\"){ag=\"\\\\\"+ag}return ag}function X(am){var aq=am.substring(1,am.length-1).match(new RegExp(\"\\\\\\\\u[0-9A-Fa-f]{4}|\\\\\\\\x[0-9A-Fa-f]{2}|\\\\\\\\[0-3][0-7]{0,2}|\\\\\\\\[0-7]{1,2}|\\\\\\\\[\\\\s\\\\S]|-|[^-\\\\\\\\]\",\"g\"));var ak=[];var af=[];var ao=aq[0]===\"^\";for(var ar=ao?1:0,aj=aq.length;ar<aj;++ar){var ah=aq[ar];if(/\\\\[bdsw]/i.test(ah)){ak.push(ah)}else{var ag=ab(ah);var al;if(ar+2<aj&&\"-\"===aq[ar+1]){al=ab(aq[ar+2]);ar+=2}else{al=ag}af.push([ag,al]);if(!(al<65||ag>122)){if(!(al<65||ag>90)){af.push([Math.max(65,ag)|32,Math.min(al,90)|32])}if(!(al<97||ag>122)){af.push([Math.max(97,ag)&~32,Math.min(al,122)&~32])}}}}af.sort(function(av,au){return(av[0]-au[0])||(au[1]-av[1])});var ai=[];var ap=[NaN,NaN];for(var ar=0;ar<af.length;++ar){var at=af[ar];if(at[0]<=ap[1]+1){ap[1]=Math.max(ap[1],at[1])}else{ai.push(ap=at)}}var an=[\"[\"];if(ao){an.push(\"^\")}an.push.apply(an,ak);for(var ar=0;ar<ai.length;++ar){var at=ai[ar];an.push(T(at[0]));if(at[1]>at[0]){if(at[1]+1>at[0]){an.push(\"-\")}an.push(T(at[1]))}}an.push(\"]\");return an.join(\"\")}function W(al){var aj=al.source.match(new RegExp(\"(?:\\\\[(?:[^\\\\x5C\\\\x5D]|\\\\\\\\[\\\\s\\\\S])*\\\\]|\\\\\\\\u[A-Fa-f0-9]{4}|\\\\\\\\x[A-Fa-f0-9]{2}|\\\\\\\\[0-9]+|\\\\\\\\[^ux0-9]|\\\\(\\\\?[:!=]|[\\\\(\\\\)\\\\^]|[^\\\\x5B\\\\x5C\\\\(\\\\)\\\\^]+)\",\"g\"));var ah=aj.length;var an=[];for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag===\"(\"){++am}else{if(\"\\\\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){an[af]=-1}}}}for(var ak=1;ak<an.length;++ak){if(-1===an[ak]){an[ak]=++ad}}for(var ak=0,am=0;ak<ah;++ak){var ag=aj[ak];if(ag===\"(\"){++am;if(an[am]===undefined){aj[ak]=\"(?:\"}}else{if(\"\\\\\"===ag.charAt(0)){var af=+ag.substring(1);if(af&&af<=am){aj[ak]=\"\\\\\"+an[am]}}}}for(var ak=0,am=0;ak<ah;++ak){if(\"^\"===aj[ak]&&\"^\"!==aj[ak+1]){aj[ak]=\"\"}}if(al.ignoreCase&&S){for(var ak=0;ak<ah;++ak){var ag=aj[ak];var ai=ag.charAt(0);if(ag.length>=2&&ai===\"[\"){aj[ak]=X(ag)}else{if(ai!==\"\\\\\"){aj[ak]=ag.replace(/[a-zA-Z]/g,function(ao){var ap=ao.charCodeAt(0);return\"[\"+String.fromCharCode(ap&~32,ap|32)+\"]\"})}}}}return aj.join(\"\")}var aa=[];for(var V=0,U=Z.length;V<U;++V){var ae=Z[V];if(ae.global||ae.multiline){throw new Error(\"\"+ae)}aa.push(\"(?:\"+W(ae)+\")\")}return new RegExp(aa.join(\"|\"),ac?\"gi\":\"g\")}function a(V){var U=/(?:^|\\s)nocode(?:\\s|$)/;var X=[];var T=0;var Z=[];var W=0;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=document.defaultView.getComputedStyle(V,null).getPropertyValue(\"white-space\")}}var Y=S&&\"pre\"===S.substring(0,3);function aa(ab){switch(ab.nodeType){case 1:if(U.test(ab.className)){return}for(var ae=ab.firstChild;ae;ae=ae.nextSibling){aa(ae)}var ad=ab.nodeName;if(\"BR\"===ad||\"LI\"===ad){X[W]=\"\\n\";Z[W<<1]=T++;Z[(W++<<1)|1]=ab}break;case 3:case 4:var ac=ab.nodeValue;if(ac.length){if(!Y){ac=ac.replace(/[ \\t\\r\\n]+/g,\" \")}else{ac=ac.replace(/\\r\\n?/g,\"\\n\")}X[W]=ac;Z[W<<1]=T;T+=ac.length;Z[(W++<<1)|1]=ab}break}}aa(V);return{sourceCode:X.join(\"\").replace(/\\n$/,\"\"),spans:Z}}function B(S,U,W,T){if(!U){return}var V={sourceCode:U,basePos:S};W(V);T.push.apply(T,V.decorations)}var v=/\\S/;function o(S){var V=undefined;for(var U=S.firstChild;U;U=U.nextSibling){var T=U.nodeType;V=(T===1)?(V?S:U):(T===3)?(v.test(U.nodeValue)?S:V):V}return V===S?undefined:V}function g(U,T){var S={};var V;(function(){var ad=U.concat(T);var ah=[];var ag={};for(var ab=0,Z=ad.length;ab<Z;++ab){var Y=ad[ab];var ac=Y[3];if(ac){for(var ae=ac.length;--ae>=0;){S[ac.charAt(ae)]=Y}}var af=Y[1];var aa=\"\"+af;if(!ag.hasOwnProperty(aa)){ah.push(af);ag[aa]=null}}ah.push(/[\\0-\\uffff]/);V=k(ah)})();var X=T.length;var W=function(ah){var Z=ah.sourceCode,Y=ah.basePos;var ad=[Y,F];var af=0;var an=Z.match(V)||[];var aj={};for(var ae=0,aq=an.length;ae<aq;++ae){var ag=an[ae];var ap=aj[ag];var ai=void 0;var am;if(typeof ap===\"string\"){am=false}else{var aa=S[ag.charAt(0)];if(aa){ai=ag.match(aa[1]);ap=aa[0]}else{for(var ao=0;ao<X;++ao){aa=T[ao];ai=ag.match(aa[1]);if(ai){ap=aa[0];break}}if(!ai){ap=F}}am=ap.length>=5&&\"lang-\"===ap.substring(0,5);if(am&&!(ai&&typeof ai[1]===\"string\")){am=false;ap=J}if(!am){aj[ag]=ap}}var ab=af;af+=ag.length;if(!am){ad.push(Y+ab,ap)}else{var al=ai[1];var ak=ag.indexOf(al);var ac=ak+al.length;if(ai[2]){ac=ag.length-ai[2].length;ak=ac-al.length}var ar=ap.substring(5);B(Y+ab,ag.substring(0,ak),W,ad);B(Y+ab+ak,al,q(ar,al),ad);B(Y+ab+ac,ag.substring(ac),W,ad)}}ah.decorations=ad};return W}function i(T){var W=[],S=[];if(T.tripleQuotedStrings){W.push([C,/^(?:\\'\\'\\'(?:[^\\'\\\\]|\\\\[\\s\\S]|\\'{1,2}(?=[^\\']))*(?:\\'\\'\\'|$)|\\\"\\\"\\\"(?:[^\\\"\\\\]|\\\\[\\s\\S]|\\\"{1,2}(?=[^\\\"]))*(?:\\\"\\\"\\\"|$)|\\'(?:[^\\\\\\']|\\\\[\\s\\S])*(?:\\'|$)|\\\"(?:[^\\\\\\\"]|\\\\[\\s\\S])*(?:\\\"|$))/,null,\"'\\\"\"])}else{if(T.multiLineStrings){W.push([C,/^(?:\\'(?:[^\\\\\\']|\\\\[\\s\\S])*(?:\\'|$)|\\\"(?:[^\\\\\\\"]|\\\\[\\s\\S])*(?:\\\"|$)|\\`(?:[^\\\\\\`]|\\\\[\\s\\S])*(?:\\`|$))/,null,\"'\\\"`\"])}else{W.push([C,/^(?:\\'(?:[^\\\\\\'\\r\\n]|\\\\.)*(?:\\'|$)|\\\"(?:[^\\\\\\\"\\r\\n]|\\\\.)*(?:\\\"|$))/,null,\"\\\"'\"])}}if(T.verbatimStrings){S.push([C,/^@\\\"(?:[^\\\"]|\\\"\\\")*(?:\\\"|$)/,null])}var Y=T.hashComments;if(Y){if(T.cStyleComments){if(Y>1){W.push([j,/^#(?:##(?:[^#]|#(?!##))*(?:###|$)|.*)/,null,\"#\"])}else{W.push([j,/^#(?:(?:define|elif|else|endif|error|ifdef|include|ifndef|line|pragma|undef|warning)\\b|[^\\r\\n]*)/,null,\"#\"])}S.push([C,/^<(?:(?:(?:\\.\\.\\/)*|\\/?)(?:[\\w-]+(?:\\/[\\w-]+)+)?[\\w-]+\\.h|[a-z]\\w*)>/,null])}else{W.push([j,/^#[^\\r\\n]*/,null,\"#\"])}}if(T.cStyleComments){S.push([j,/^\\/\\/[^\\r\\n]*/,null]);S.push([j,/^\\/\\*[\\s\\S]*?(?:\\*\\/|$)/,null])}if(T.regexLiterals){var X=(\"/(?=[^/*])(?:[^/\\\\x5B\\\\x5C]|\\\\x5C[\\\\s\\\\S]|\\\\x5B(?:[^\\\\x5C\\\\x5D]|\\\\x5C[\\\\s\\\\S])*(?:\\\\x5D|$))+/\");S.push([\"lang-regex\",new RegExp(\"^\"+M+\"(\"+X+\")\")])}var V=T.types;if(V){S.push([O,V])}var U=(\"\"+T.keywords).replace(/^ | $/g,\"\");if(U.length){S.push([z,new RegExp(\"^(?:\"+U.replace(/[\\s,]+/g,\"|\")+\")\\\\b\"),null])}W.push([F,/^\\s+/,null,\" \\r\\n\\t\\xA0\"]);S.push([G,/^@[a-z_$][a-z_$@0-9]*/i,null],[O,/^(?:[@_]?[A-Z]+[a-z][A-Za-z_$@0-9]*|\\w+_t\\b)/,null],[F,/^[a-z_$][a-z_$@0-9]*/i,null],[G,new RegExp(\"^(?:0x[a-f0-9]+|(?:\\\\d(?:_\\\\d+)*\\\\d*(?:\\\\.\\\\d*)?|\\\\.\\\\d\\\\+)(?:e[+\\\\-]?\\\\d+)?)[a-z]*\",\"i\"),null,\"0123456789\"],[F,/^\\\\[\\s\\S]?/,null],[L,/^.[^\\s\\w\\.$@\\'\\\"\\`\\/\\#\\\\]*/,null]);return g(W,S)}var K=i({keywords:A,hashComments:true,cStyleComments:true,multiLineStrings:true,regexLiterals:true});function Q(V,ag){var U=/(?:^|\\s)nocode(?:\\s|$)/;var ab=/\\r\\n?|\\n/;var ac=V.ownerDocument;var S;if(V.currentStyle){S=V.currentStyle.whiteSpace}else{if(window.getComputedStyle){S=ac.defaultView.getComputedStyle(V,null).getPropertyValue(\"white-space\")}}var Z=S&&\"pre\"===S.substring(0,3);var af=ac.createElement(\"LI\");while(V.firstChild){af.appendChild(V.firstChild)}var W=[af];function ae(al){switch(al.nodeType){case 1:if(U.test(al.className)){break}if(\"BR\"===al.nodeName){ad(al);if(al.parentNode){al.parentNode.removeChild(al)}}else{for(var an=al.firstChild;an;an=an.nextSibling){ae(an)}}break;case 3:case 4:if(Z){var am=al.nodeValue;var aj=am.match(ab);if(aj){var ai=am.substring(0,aj.index);al.nodeValue=ai;var ah=am.substring(aj.index+aj[0].length);if(ah){var ak=al.parentNode;ak.insertBefore(ac.createTextNode(ah),al.nextSibling)}ad(al);if(!ai){al.parentNode.removeChild(al)}}}break}}function ad(ak){while(!ak.nextSibling){ak=ak.parentNode;if(!ak){return}}function ai(al,ar){var aq=ar?al.cloneNode(false):al;var ao=al.parentNode;if(ao){var ap=ai(ao,1);var an=al.nextSibling;ap.appendChild(aq);for(var am=an;am;am=an){an=am.nextSibling;ap.appendChild(am)}}return aq}var ah=ai(ak.nextSibling,0);for(var aj;(aj=ah.parentNode)&&aj.nodeType===1;){ah=aj}W.push(ah)}for(var Y=0;Y<W.length;++Y){ae(W[Y])}if(ag===(ag|0)){W[0].setAttribute(\"value\",ag)}var aa=ac.createElement(\"OL\");aa.className=\"linenums\";var X=Math.max(0,((ag-1))|0)||0;for(var Y=0,T=W.length;Y<T;++Y){af=W[Y];af.className=\"L\"+((Y+X)%10);if(!af.firstChild){af.appendChild(ac.createTextNode(\"\\xA0\"))}aa.appendChild(af)}V.appendChild(aa)}function D(ac){var aj=/\\bMSIE\\b/.test(navigator.userAgent);var am=/\\n/g;var al=ac.sourceCode;var an=al.length;var V=0;var aa=ac.spans;var T=aa.length;var ah=0;var X=ac.decorations;var Y=X.length;var Z=0;X[Y]=an;var ar,aq;for(aq=ar=0;aq<Y;){if(X[aq]!==X[aq+2]){X[ar++]=X[aq++];X[ar++]=X[aq++]}else{aq+=2}}Y=ar;for(aq=ar=0;aq<Y;){var at=X[aq];var ab=X[aq+1];var W=aq+2;while(W+2<=Y&&X[W+1]===ab){W+=2}X[ar++]=at;X[ar++]=ab;aq=W}Y=X.length=ar;var ae=null;while(ah<T){var af=aa[ah];var S=aa[ah+2]||an;var ag=X[Z];var ap=X[Z+2]||an;var W=Math.min(S,ap);var ak=aa[ah+1];var U;if(ak.nodeType!==1&&(U=al.substring(V,W))){if(aj){U=U.replace(am,\"\\r\")}ak.nodeValue=U;var ai=ak.ownerDocument;var ao=ai.createElement(\"SPAN\");ao.className=X[Z+1];var ad=ak.parentNode;ad.replaceChild(ao,ak);ao.appendChild(ak);if(V<S){aa[ah+1]=ak=ai.createTextNode(al.substring(W,S));ad.insertBefore(ak,ao.nextSibling)}}V=W;if(V>=S){ah+=2}if(V>=ap){Z+=2}}}var t={};function c(U,V){for(var S=V.length;--S>=0;){var T=V[S];if(!t.hasOwnProperty(T)){t[T]=U}else{if(window.console){console.warn(\"cannot override language handler %s\",T)}}}}function q(T,S){if(!(T&&t.hasOwnProperty(T))){T=/^\\s*</.test(S)?\"default-markup\":\"default-code\"}return t[T]}c(K,[\"default-code\"]);c(g([],[[F,/^[^<?]+/],[E,/^<!\\w[^>]*(?:>|$)/],[j,/^<\\!--[\\s\\S]*?(?:-\\->|$)/],[\"lang-\",/^<\\?([\\s\\S]+?)(?:\\?>|$)/],[\"lang-\",/^<%([\\s\\S]+?)(?:%>|$)/],[L,/^(?:<[%?]|[%?]>)/],[\"lang-\",/^<xmp\\b[^>]*>([\\s\\S]+?)<\\/xmp\\b[^>]*>/i],[\"lang-js\",/^<script\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-css\",/^<style\\b[^>]*>([\\s\\S]*?)(<\\/style\\b[^>]*>)/i],[\"lang-in.tag\",/^(<\\/?[a-z][^<>]*>)/i]]),[\"default-markup\",\"htm\",\"html\",\"mxml\",\"xhtml\",\"xml\",\"xsl\"]);c(g([[F,/^[\\s]+/,null,\" \\t\\r\\n\"],[n,/^(?:\\\"[^\\\"]*\\\"?|\\'[^\\']*\\'?)/,null,\"\\\"'\"]],[[m,/^^<\\/?[a-z](?:[\\w.:-]*\\w)?|\\/?>$/i],[P,/^(?!style[\\s=]|on)[a-z](?:[\\w:-]*\\w)?/i],[\"lang-uq.val\",/^=\\s*([^>\\'\\\"\\s]*(?:[^>\\'\\\"\\s\\/]|\\/(?=\\s)))/],[L,/^[=<>\\/]+/],[\"lang-js\",/^on\\w+\\s*=\\s*\\\"([^\\\"]+)\\\"/i],[\"lang-js\",/^on\\w+\\s*=\\s*\\'([^\\']+)\\'/i],[\"lang-js\",/^on\\w+\\s*=\\s*([^\\\"\\'>\\s]+)/i],[\"lang-css\",/^style\\s*=\\s*\\\"([^\\\"]+)\\\"/i],[\"lang-css\",/^style\\s*=\\s*\\'([^\\']+)\\'/i],[\"lang-css\",/^style\\s*=\\s*([^\\\"\\'>\\s]+)/i]]),[\"in.tag\"]);c(g([],[[n,/^[\\s\\S]+/]]),[\"uq.val\"]);c(i({keywords:l,hashComments:true,cStyleComments:true,types:e}),[\"c\",\"cc\",\"cpp\",\"cxx\",\"cyc\",\"m\"]);c(i({keywords:\"null,true,false\"}),[\"json\"]);c(i({keywords:R,hashComments:true,cStyleComments:true,verbatimStrings:true,types:e}),[\"cs\"]);c(i({keywords:x,cStyleComments:true}),[\"java\"]);c(i({keywords:H,hashComments:true,multiLineStrings:true}),[\"bsh\",\"csh\",\"sh\"]);c(i({keywords:I,hashComments:true,multiLineStrings:true,tripleQuotedStrings:true}),[\"cv\",\"py\"]);c(i({keywords:s,hashComments:true,multiLineStrings:true,regexLiterals:true}),[\"perl\",\"pl\",\"pm\"]);c(i({keywords:f,hashComments:true,multiLineStrings:true,regexLiterals:true}),[\"rb\"]);c(i({keywords:w,cStyleComments:true,regexLiterals:true}),[\"js\"]);c(i({keywords:r,hashComments:3,cStyleComments:true,multilineStrings:true,tripleQuotedStrings:true,regexLiterals:true}),[\"coffee\"]);c(g([],[[C,/^[\\s\\S]+/]]),[\"regex\"]);function d(V){var U=V.langExtension;try{var S=a(V.sourceNode);var T=S.sourceCode;V.sourceCode=T;V.spans=S.spans;V.basePos=0;q(U,T)(V);D(V)}catch(W){if(\"console\" in window){console.log(W&&W.stack?W.stack:W)}}}function y(W,V,U){var S=document.createElement(\"PRE\");S.innerHTML=W;if(U){Q(S,U)}var T={langExtension:V,numberLines:U,sourceNode:S};d(T);return S.innerHTML}function b(ad){function Y(af){return document.getElementsByTagName(af)}var ac=[Y(\"pre\"),Y(\"code\"),Y(\"xmp\")];var T=[];for(var aa=0;aa<ac.length;++aa){for(var Z=0,V=ac[aa].length;Z<V;++Z){T.push(ac[aa][Z])}}ac=null;var W=Date;if(!W.now){W={now:function(){return +(new Date)}}}var X=0;var S;var ab=/\\blang(?:uage)?-([\\w.]+)(?!\\S)/;var ae=/\\bprettyprint\\b/;function U(){var ag=(window.PR_SHOULD_USE_CONTINUATION?W.now()+250:Infinity);for(;X<T.length&&W.now()<ag;X++){var aj=T[X];var ai=aj.className;if(ai.indexOf(\"prettyprint\")>=0){var ah=ai.match(ab);var am;if(!ah&&(am=o(aj))&&\"CODE\"===am.tagName){ah=am.className.match(ab)}if(ah){ah=ah[1]}var al=false;for(var ak=aj.parentNode;ak;ak=ak.parentNode){if((ak.tagName===\"pre\"||ak.tagName===\"code\"||ak.tagName===\"xmp\")&&ak.className&&ak.className.indexOf(\"prettyprint\")>=0){al=true;break}}if(!al){var af=aj.className.match(/\\blinenums\\b(?::(\\d+))?/);af=af?af[1]&&af[1].length?+af[1]:true:false;if(af){Q(aj,af)}S={langExtension:ah,sourceNode:aj,numberLines:af};d(S)}}}if(X<T.length){setTimeout(U,250)}else{if(ad){ad()}}}U()}window.prettyPrintOne=y;window.prettyPrint=b;window.PR={createSimpleLexer:g,registerLangHandler:c,sourceDecorator:i,PR_ATTRIB_NAME:P,PR_ATTRIB_VALUE:n,PR_COMMENT:j,PR_DECLARATION:E,PR_KEYWORD:z,PR_LITERAL:G,PR_NOCODE:N,PR_PLAIN:F,PR_PUNCTUATION:L,PR_SOURCE:J,PR_STRING:C,PR_TAG:m,PR_TYPE:O}})();PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_DECLARATION,/^<!\\w[^>]*(?:>|$)/],[PR.PR_COMMENT,/^<\\!--[\\s\\S]*?(?:-\\->|$)/],[PR.PR_PUNCTUATION,/^(?:<[%?]|[%?]>)/],[\"lang-\",/^<\\?([\\s\\S]+?)(?:\\?>|$)/],[\"lang-\",/^<%([\\s\\S]+?)(?:%>|$)/],[\"lang-\",/^<xmp\\b[^>]*>([\\s\\S]+?)<\\/xmp\\b[^>]*>/i],[\"lang-handlebars\",/^<script\\b[^>]*type\\s*=\\s*['\"]?text\\/x-handlebars-template['\"]?\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-js\",/^<script\\b[^>]*>([\\s\\S]*?)(<\\/script\\b[^>]*>)/i],[\"lang-css\",/^<style\\b[^>]*>([\\s\\S]*?)(<\\/style\\b[^>]*>)/i],[\"lang-in.tag\",/^(<\\/?[a-z][^<>]*>)/i],[PR.PR_DECLARATION,/^{{[#^>/]?\\s*[\\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{&?\\s*[\\w.][^}]*}}/],[PR.PR_DECLARATION,/^{{{>?\\s*[\\w.][^}]*}}}/],[PR.PR_COMMENT,/^{{![^}]*}}/]]),[\"handlebars\",\"hbs\"]);PR.registerLangHandler(PR.createSimpleLexer([[PR.PR_PLAIN,/^[ \\t\\r\\n\\f]+/,null,\" \\t\\r\\n\\f\"]],[[PR.PR_STRING,/^\\\"(?:[^\\n\\r\\f\\\\\\\"]|\\\\(?:\\r\\n?|\\n|\\f)|\\\\[\\s\\S])*\\\"/,null],[PR.PR_STRING,/^\\'(?:[^\\n\\r\\f\\\\\\']|\\\\(?:\\r\\n?|\\n|\\f)|\\\\[\\s\\S])*\\'/,null],[\"lang-css-str\",/^url\\(([^\\)\\\"\\']*)\\)/i],[PR.PR_KEYWORD,/^(?:url|rgb|\\!important|@import|@page|@media|@charset|inherit)(?=[^\\-\\w]|$)/i,null],[\"lang-css-kw\",/^(-?(?:[_a-z]|(?:\\\\[0-9a-f]+ ?))(?:[_a-z0-9\\-]|\\\\(?:\\\\[0-9a-f]+ ?))*)\\s*:/i],[PR.PR_COMMENT,/^\\/\\*[^*]*\\*+(?:[^\\/*][^*]*\\*+)*\\//],[PR.PR_COMMENT,/^(?:<!--|-->)/],[PR.PR_LITERAL,/^(?:\\d+|\\d*\\.\\d+)(?:%|[a-z]+)?/i],[PR.PR_LITERAL,/^#(?:[0-9a-f]{3}){1,2}/i],[PR.PR_PLAIN,/^-?(?:[_a-z]|(?:\\\\[\\da-f]+ ?))(?:[_a-z\\d\\-]|\\\\(?:\\\\[\\da-f]+ ?))*/i],[PR.PR_PUNCTUATION,/^[^\\s\\w\\'\\\"]+/]]),[\"css\"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_KEYWORD,/^-?(?:[_a-z]|(?:\\\\[\\da-f]+ ?))(?:[_a-z\\d\\-]|\\\\(?:\\\\[\\da-f]+ ?))*/i]]),[\"css-kw\"]);PR.registerLangHandler(PR.createSimpleLexer([],[[PR.PR_STRING,/^[^\\)\\\"\\']+/]]),[\"css-str\"]);"
      },
      {
        "file": "/deploy/_worker.js",
        "line": 15,
        "content": "`}var Je=/[&<>]/g,Ke=e=>e.replace(Je,t=>{switch(t){case\"&\":return\"&amp;\";case\"<\":return\"&lt;\";case\">\":return\"&gt;\";default:return\"\"}}),Xe=\"#006ce9\",Be=\"#713fc2\",Ye={lax:\"Lax\",Lax:\"Lax\",None:\"None\",none:\"None\",strict:\"Strict\",Strict:\"Strict\"},Ze={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},re=(e,t,n)=>{const r=[`${e}=${t}`];typeof n.domain==\"string\"&&r.push(`Domain=${n.domain}`),typeof n.maxAge==\"number\"?r.push(`Max-Age=${n.maxAge}`):Array.isArray(n.maxAge)?r.push(`Max-Age=${n.maxAge[0]*Ze[n.maxAge[1]]}`):typeof n.expires==\"number\"||typeof n.expires==\"string\"?r.push(`Expires=${n.expires}`):n.expires instanceof Date&&r.push(`Expires=${n.expires.toUTCString()}`),n.httpOnly&&r.push(\"HttpOnly\"),typeof n.path==\"string\"&&r.push(`Path=${n.path}`);const i=Ve(n.sameSite);return i&&r.push(`SameSite=${i}`),n.secure&&r.push(\"Secure\"),r.join(\"; \")};function ae(e){try{return decodeURIComponent(e)}catch{return e}}var qe=e=>{const t={};if(typeof e==\"string\"&&e!==\"\"){const n=e.split(\";\");for(const r of n){const i=r.indexOf(\"=\");i!==-1&&(t[ae(r.slice(0,i).trim())]=ae(r.slice(i+1).trim()))}}return t};function Ve(e){if(e===!0)return\"Strict\";if(e===!1)return\"None\";if(e)return Ye[e]}var P=Symbol(\"request-cookies\"),I=Symbol(\"response-cookies\"),_=Symbol(\"live-cookies\"),ye,we,Se,Ee=(Se=P,we=I,ye=_,class{constructor(e){k(this,Se);k(this,we,{});k(this,ye,{});k(this,\"appendCounter\",0);this[P]=qe(e),this[_]={...this[P]}}get(e,t=!0){const n=this[t?_:P][e];return n?{value:n,json(){return JSON.parse(n)},number(){return Number(n)}}:null}getAll(e=!0){return Object.keys(this[e?_:P]).reduce((t,n)=>(t[n]=this.get(n),t),{})}has(e,t=!0){return!!this[t?_:P][e]}set(e,t,n={}){this[_][e]=typeof t==\"string\"?t:JSON.stringify(t);const r=typeof t==\"string\"?t:encodeURIComponent(JSON.stringify(t));this[I][e]=re(e,r,n)}append(e,t,n={}){this[_][e]=typeof t==\"string\"?t:JSON.stringify(t);const r=typeof t==\"string\"?t:encodeURIComponent(JSON.stringify(t));this[I][++this.appendCounter]=re(e,r,n)}delete(e,t){this.set(e,\"deleted\",{...t,maxAge:0}),this[_][e]=null}headers(){return Object.values(this[I])}}),et=(e,t)=>{const n=t.headers();if(n.length>0){const r=new Headers(e);for(const i of n)r.append(\"Set-Cookie\",i);return r}return e},q=class{},V=class extends q{},ie=new WeakMap,se=\"qaction\",tt=\"qfunc\",oe=\"qdata\";function nt(e,t){const n=fe(e),r=ce(e),i=fe(t),a=ce(t);return Re(e,n,r,t,i,a)}function Re(e,t,n,r,i,a){let s=null;for(;t<n;){const o=e.charCodeAt(t++),c=r.charCodeAt(i++);if(o===91){const l=Te(e,t),f=t+(l?3:0),h=Y(e,f,n,93),d=e.substring(f,h),p=Y(e,h+1,n,47),g=e.substring(h+1,p);t=h+1;const y=i-1;if(l){const S=at(d,g,r,y,a,e,t+g.length+1,n);if(S)return Object.assign(s||(s={}),S)}const b=Y(r,y,a,47,g);if(b==-1)return null;const C=r.substring(y,b);if(!l&&!g&&!C)return null;i=b,(s||(s={}))[d]=decodeURIComponent(C)}else if(o!==c&&!(isNaN(c)&&rt(e,t)))return null}return le(e,t)&&le(r,i)?s||{}:null}function rt(e,t){return e.charCodeAt(t)===91&&Te(e,t+1)}function ce(e){const t=e.length;return t>1&&e.charCodeAt(t-1)===47?t-1:t}function le(e,t){const n=e.length;return t>=n||t==n-1&&e.charCodeAt(t)===47}function fe(e){return e.charCodeAt(0)===47?1:0}function Te(e,t){return e.charCodeAt(t)===46&&e.charCodeAt(t+1)===46&&e.charCodeAt(t+2)===46}function Y(e,t,n,r,i=\"\"){for(;t<n&&e.charCodeAt(t)!==r;)t++;const a=i.length;for(let s=0;s<a;s++)if(e.charCodeAt(t-a+s)!==i.charCodeAt(s))return-1;return t-a}function at(e,t,n,r,i,a,s,o){n.charCodeAt(r)===47&&r++;let c=i;const l=t+\"/\";for(;c>=r;){const f=Re(a,s,o,n,c,i);if(f){let d=n.substring(r,Math.min(c,i));return d.endsWith(l)&&(d=d.substring(0,d.length-l.length)),f[e]=decodeURIComponent(d),f}const h=it(n,r,l,c,r-1)+l.length;if(c===h)break;c=h}return null}function it(e,t,n,r,i){let a=e.lastIndexOf(n,r);return a==r-n.length&&(a=e.lastIndexOf(n,r-n.length-1)),a>t?a:i}var st=async(e,t,n,r)=>{if(!Array.isArray(e))return null;for(const i of e){const a=i[0],s=nt(a,r);if(!s)continue;const o=i[1],c=i[3],l=new Array(o.length),f=[];o.forEach((p,g)=>{ue(p,f,y=>l[g]=y,n)});const h=ot(t,r);let d;return ue(h,f,p=>d=p==null?void 0:p.default,n),f.length>0&&await Promise.all(f),[a,s,l,d,c]}return null},ue=(e,t,n,r)=>{if(typeof e==\"function\"){const i=ie.get(e);if(i)n(i);else{const a=e();typeof a.then==\"function\"?t.push(a.then(s=>{r!==!1&&ie.set(e,s),n(s)})):a&&n(a)}}},ot=(e,t)=>{if(e){t=t.endsWith(\"/\")?t:t+\"/\";const n=e.find(r=>r[0]===t||t.startsWith(r[0]+(t.endsWith(\"/\")?\"\":\"/\")));if(n)return n[1]}},ct=e=>e&&typeof e.then==\"function\";function lt(e){const t=[];return e===\"day\"?e=60*60*24:e===\"week\"?e=60*60*24*7:e===\"month\"?e=60*60*24*30:e===\"year\"?e=60*60*24*365:e===\"private\"?e={private:!0,noCache:!0}:e===\"immutable\"?e={public:!0,immutable:!0,maxAge:60*60*24*365}:e===\"no-cache\"&&(e={noCache:!0}),typeof e==\"number\"&&(e={maxAge:e,sMaxAge:e}),e.immutable&&t.push(\"immutable\"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push(\"no-store\"),e.noCache&&t.push(\"no-cache\"),e.private&&t.push(\"private\"),e.public&&t.push(\"public\"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),e.staleIfError&&t.push(`stale-if-error=${e.staleIfError}`),t.join(\", \")}var L;import(\"node:async_hooks\").then(e=>{const t=e.AsyncLocalStorage;L=new t,globalThis.qcAsyncRequestStore=L}).catch(e=>{console.warn(\"AsyncLocalStorage not available, continuing without it. This might impact concurrent server calls.\",e)});function ft(e,t,n,r=!0,i=\"/\",a){let s;const o=new Promise(l=>s=l),c=ht(e,t,n,r,i,a,s);return{response:o,requestEv:c,completion:L?L.run(c,de,c,s):de(c,s)}}async function de(e,t){try{await e.next()}catch(n){if(n instanceof V)await e.getWritableStream().close();else if(n instanceof Z){if(!e.headersSent){const r=n.status,i=e.request.headers.get(\"Accept\");if(i&&!i.includes(\"text/html\")){const a=e[N];e.headers.set(\"Content-Type\",\"application/qwik-json\"),e.send(r,await a._serializeData(n.data,!0))}else{const a=Ge(n.status,n.data);e.html(r,a)}}}else if(!(n instanceof q)){if(j(e)!==\"dev\")try{e.headersSent||(e.headers.set(\"content-type\",\"text/html; charset=utf-8\"),e.cacheControl({noCache:!0}),e.status(500));const r=e.getWritableStream();if(!r.locked){const i=r.getWriter();await i.write(G.encode(Ae(500,\"Internal Server Error\"))),await i.close()}}catch{console.error(\"Unable to render error page\")}return n}}finally{e.isDirty()||t(null)}}function ut(e,t){if(e.endsWith(D)){const n=e.length-_e+(t?1:0);e=e.slice(0,n),e===\"\"&&(e=\"/\")}return e}var W=\"@isQData\",D=\"/q-data.json\",_e=D.length,xe=Symbol(\"RequestEvLoaders\"),Ce=Symbol(\"RequestEvMode\"),Pe=Symbol(\"RequestEvRoute\"),N=Symbol(\"RequestEvQwikSerializer\"),De=Symbol(\"RequestEvTrailingSlash\"),Me=\"@routeName\",Q=\"@actionId\",ke=\"@actionFormData\",dt=\"@nonce\";function ht(e,t,n,r,i,a,s){const{request:o,platform:c,env:l}=e,f=new Map,h=new Ee(o.headers.get(\"cookie\")),d=new Headers,p=new URL(o.url);p.pathname.endsWith(D)&&(p.pathname=p.pathname.slice(0,-_e),r&&!p.pathname.endsWith(\"/\")&&(p.pathname+=\"/\"),f.set(W,!0));let g=-1,y=null,b,C=e.locale,S=200;const J=async()=>{for(g++;g<n.length;){const u=n[g],m=globalThis.qcAsyncRequestStore,w=m!=null&&m.run?m.run(A,u,A):u(A);ct(w)&&await w,g++}},M=()=>{if(y!==null)throw new Error(\"Response already sent\")},v=(u,m)=>{if(M(),typeof u==\"number\"){S=u;const R=A.getWritableStream().getWriter();R.write(typeof m==\"string\"?G.encode(m):m),R.close()}else if(S=u.status,u.headers.forEach((w,R)=>{R.toLowerCase()!==\"set-cookie\"&&d.append(R,w)}),u.headers.getSetCookie().forEach(w=>{const R=w.indexOf(\"=\");if(R===-1)return;const $e=w.slice(0,R).trim(),We=w.slice(R+1).trim();h.set($e,We)}),u.body){const w=A.getWritableStream();u.body.pipeTo(w)}else A.getWritableStream().getWriter().close();return K()},K=()=>(g=he,new q),X={},A={[xe]:X,[Ce]:e.mode,[De]:r,[Pe]:t,[N]:a,cookie:h,headers:d,env:l,method:o.method,signal:o.signal,params:(t==null?void 0:t[1])??{},pathname:p.pathname,platform:c,query:p.searchParams,request:o,url:p,basePathname:i,sharedMap:f,get headersSent(){return y!==null},get exited(){return g>=he},get clientConn(){return e.getClientConn()},next:J,exit:K,cacheControl:(u,m=\"Cache-Control\")=>{M(),d.set(m,lt(u))},resolveValue:async u=>{const m=u.__id;if(u.__brand===\"server_loader\"&&!(m in X))throw new Error(\"You can not get the returned data of a loader that has not been executed for this request.\");return X[m]},status:u=>typeof u==\"number\"?(M(),S=u,u):S,locale:u=>(typeof u==\"string\"&&(C=u),C||\"\"),error:(u,m)=>(S=u,new Z(u,m)),redirect:(u,m)=>{if(M(),S=u,m){const w=m.replace(/([^:])\\/{2,}/g,\"$1/\");m!==w&&console.warn(`Redirect URL ${m} is invalid, fixing to ${w}`),d.set(\"Location\",w)}return u>301&&!d.get(\"Cache-Control\")&&d.set(\"Cache-Control\",\"no-store\"),K(),new V},defer:u=>typeof u==\"function\"?u:()=>u,fail:(u,m)=>(M(),S=u,{failed:!0,...m}),text:(u,m)=>(d.set(\"Content-Type\",\"text/plain; charset=utf-8\"),v(u,m)),html:(u,m)=>(d.set(\"Content-Type\",\"text/html; charset=utf-8\"),v(u,m)),parseBody:async()=>b!==void 0?b:b=mt(A,f,a),json:(u,m)=>(d.set(\"Content-Type\",\"application/json; charset=utf-8\"),v(u,JSON.stringify(m))),send:v,isDirty:()=>y!==null,getWritableStream:()=>{if(y===null){if(e.mode===\"dev\"){const u=f.get(\"@serverTiming\");u&&d.set(\"Server-Timing\",u.map(m=>`${m[0]};dur=${m[1]}`).join(\",\"))}y=e.getWritableStream(S,d,h,s,A)}return y}};return Object.freeze(A)}function z(e){return e[xe]}function E(e){return e[De]}function pt(e){return e[Pe]}function j(e){return e[Ce]}var he=Number.MAX_SAFE_INTEGER,mt=async({request:e,method:t,query:n},r,i)=>{var a;const s=((a=e.headers.get(\"content-type\"))==null?void 0:a.split(/[;,]/,1)[0].trim())??\"\";if(s===\"application/x-www-form-urlencoded\"||s===\"multipart/form-data\"){const o=await e.formData();return r.set(ke,o),gt(o)}else{if(s===\"application/json\")return await e.json();if(s===\"application/qwik-json\"){if(t===\"GET\"&&n.has(oe)){const o=n.get(oe);if(o)try{return i._deserializeData(decodeURIComponent(o))}catch{}}return i._deserializeData(await e.text())}}},gt=e=>[...e.entries()].reduce((n,[r,i])=>(r.split(\".\").reduce((a,s,o,c)=>{if(s.endsWith(\"[]\")){const l=s.slice(0,-2);return a[l]=a[l]||[],a[l]=[...a[l],i]}return o<c.length-1?a[s]=a[s]||(Number.isNaN(+c[o+1])?{}:[]):a[s]=i},n),n),{});function yt(e){const{url:t,params:n,request:r,status:i,locale:a}=e,s={};r.headers.forEach((y,b)=>s[b]=y);const o=e.sharedMap.get(Q),c=e.sharedMap.get(ke),l=e.sharedMap.get(Me),f=e.sharedMap.get(dt),h=e.request.headers,d=new URL(t.pathname+t.search,t),p=h.get(\"X-Forwarded-Host\"),g=h.get(\"X-Forwarded-Proto\");return p&&(d.port=\"\",d.host=p),g&&(d.protocol=g),{url:d.href,requestHeaders:s,locale:a(),nonce:f,containerAttributes:{\"q:route\":l},qwikcity:{routeName:l,ev:e,params:{...n},loadedRoute:pt(e),response:{status:i(),loaders:z(e),action:o,formData:c}}}}var wt=(e,t,n,r,i)=>{const a=[],s=[],o=[],c=!!(t&&_t(t[2]));if(e&&pe(a,s,o,e,c,n),t){const l=t[0];r&&(n===\"POST\"||n===\"PUT\"||n===\"PATCH\"||n===\"DELETE\")&&o.unshift(xt),c&&((n===\"POST\"||n===\"GET\")&&o.push(At),o.push(Rt),o.push(Dt));const f=t[2];o.push(Pt),pe(a,s,o,f,c,n),c&&(o.push(h=>{h.sharedMap.set(Me,l)}),o.push(St(s,a)),o.push(i))}return o},pe=(e,t,n,r,i,a)=>{for(const s of r){typeof s.onRequest==\"function\"?n.push(s.onRequest):Array.isArray(s.onRequest)&&n.push(...s.onRequest);let o;switch(a){case\"GET\":{o=s.onGet;break}case\"POST\":{o=s.onPost;break}case\"PUT\":{o=s.onPut;break}case\"PATCH\":{o=s.onPatch;break}case\"DELETE\":{o=s.onDelete;break}case\"OPTIONS\":{o=s.onOptions;break}case\"HEAD\":{o=s.onHead;break}}if(typeof o==\"function\"?n.push(o):Array.isArray(o)&&n.push(...o),i)for(const c of Object.values(s))typeof c==\"function\"&&(c.__brand===\"server_loader\"?e.push(c):c.__brand===\"server_action\"&&t.push(c))}};function St(e,t){return async n=>{if(n.headersSent){n.exit();return}const{method:r}=n,i=z(n),a=j(n)===\"dev\",s=n[N];if(a&&r===\"GET\"&&n.query.has(se)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request."
      },
      {
        "file": "/deploy/_worker.js",
        "line": 16,
        "content": "Make sure your <form> has method=\"POST\" attribute, like this: <form method=\"POST\">`),r===\"POST\"){const o=n.query.get(se);if(o){const c=globalThis._qwikActionsMap,l=e.find(f=>f.__id===o)??(c==null?void 0:c.get(o));if(l){n.sharedMap.set(Q,o);const f=await n.parseBody();if(!f||typeof f!=\"object\")throw new Error(`Expected request data for the action id ${o} to be an object`);const h=await me(n,l.__validators,f,a);if(!h.success)i[o]=n.fail(h.status??500,h.error);else{const d=a?await U(n,l.__qrl.getSymbol().split(\"_\",1)[0],()=>l.__qrl.call(n,h.data,n)):await l.__qrl.call(n,h.data,n);a&&F(s,d,l.__qrl),i[o]=d}}}}if(t.length>0){const o=t.map(c=>{const l=c.__id;return i[l]=me(n,c.__validators,void 0,a).then(f=>f.success?a?U(n,c.__qrl.getSymbol().split(\"_\",1)[0],()=>c.__qrl.call(n,n)):c.__qrl.call(n,n):n.fail(f.status??500,f.error)).then(f=>(typeof f==\"function\"?i[l]=f():(a&&F(s,f,c.__qrl),i[l]=f),f)),i[l]});await Promise.all(o)}}}async function me(e,t,n,r){let i={success:!0,data:n};if(t)for(const a of t)if(r?i=await U(e,\"validator$\",()=>a.validate(e,n)):i=await a.validate(e,n),i.success)n=i.data;else return i;return i}function bt(e){return e?typeof e==\"object\"&&Symbol.asyncIterator in e:!1}async function At(e){const t=e.query.get(tt);if(t&&e.request.headers.get(\"X-QRL\")===t&&e.request.headers.get(\"Content-Type\")===\"application/qwik-json\"){e.exit();const n=j(e)===\"dev\",r=e[N],i=await e.parseBody();if(Array.isArray(i)){const[a,...s]=i;if(Tt(a)&&a.getHash()===t){let o;try{n?o=await U(e,`server_${a.getSymbol()}`,()=>a.apply(e,s)):o=await a.apply(e,s)}catch(c){throw c instanceof Z?e.error(c.status,c.data):e.error(500,\"Invalid request\")}if(bt(o)){e.headers.set(\"Content-Type\",\"text/qwik-json-stream\");const l=e.getWritableStream().getWriter();for await(const f of o){n&&F(r,f,a);const h=await r._serializeData(f,!0);if(e.signal.aborted)break;await l.write(G.encode(`${h}"
      },
      {
        "file": "/deploy/_worker.js",
        "line": 17,
        "content": "`))}l.close()}else{F(r,o,a),e.headers.set(\"Content-Type\",\"application/qwik-json\");const c=await r._serializeData(o,!0);e.send(200,c)}return}}throw e.error(500,\"Invalid request\")}}function Rt(e){const t=E(e),{basePathname:n,pathname:r,url:i,sharedMap:a}=e;if(!a.has(W)&&r!==n&&!r.endsWith(\".html\")){if(t){if(!r.endsWith(\"/\"))throw e.redirect(301,r+\"/\"+i.search)}else if(r.endsWith(\"/\"))throw e.redirect(301,r.slice(0,r.length-1)+i.search)}}function F(e,t,n){try{e._verifySerializable(t,void 0)}catch(r){throw r instanceof Error&&n.dev&&(r.loc=n.dev),r}}var Tt=e=>typeof e==\"function\"&&typeof e.getSymbol==\"function\";function _t(e){const t=e[e.length-1];return t&&typeof t.default==\"function\"}function Oe(e,t){e=new URL(e),e.pathname.endsWith(D)&&(e.pathname=e.pathname.slice(0,-D.length)),t?e.pathname.endsWith(\"/\")||(e.pathname+=\"/\"):e.pathname.endsWith(\"/\")&&(e.pathname=e.pathname.slice(0,-1));const n=e.search.slice(1).replaceAll(/&?q(action|data|func)=[^&]+/g,\"\");return`${e.pathname}${n?`?${n}`:\"\"}${e.hash}`}var G=new TextEncoder;function xt(e){if(kt(e.request.headers,\"application/x-www-form-urlencoded\",\"multipart/form-data\",\"text/plain\")){const n=e.request.headers.get(\"origin\"),r=e.url.origin;if(n!==r)throw e.error(403,`CSRF check failed. Cross-site ${e.method} form submissions are forbidden."
      },
      {
        "file": "/deploy/_worker.js",
        "line": 18,
        "content": "The request origin \"${n}\" does not match the server origin \"${r}\".`)}}function Ct(e){return async t=>{if(t.headersSent||t.sharedMap.has(W))return;t.request.headers.forEach((h,d)=>h);const r=t.headers;r.has(\"Content-Type\")||r.set(\"Content-Type\",\"text/html; charset=utf-8\");const i=E(t),{readable:a,writable:s}=new TextEncoderStream,o=t.getWritableStream(),c=a.pipeTo(o,{preventClose:!0}),l=s.getWriter(),f=t.status();try{const h=j(t)===\"static\",d=yt(t),p=await e({base:t.basePathname+\"build/\",stream:l,serverData:d,containerAttributes:{\"q:render\":h?\"static\":\"\",...d.containerAttributes}}),g={loaders:z(t),action:t.sharedMap.get(Q),status:f!==200?f:200,href:Oe(t.url,i)};typeof p.html==\"string\"&&await l.write(p.html),t.sharedMap.set(\"qData\",g)}finally{await l.ready,await l.close(),await c}await o.close()}}async function Pt(e){if(!e.sharedMap.has(W))return;try{await e.next()}catch(a){if(!(a instanceof V))throw a}if(e.headersSent)return;const n=e.status(),r=e.headers.get(\"Location\");if(n>=301&&n<=308&&r){const a=Mt(r);if(a){e.headers.set(\"Location\",a),e.getWritableStream().close();return}else e.status(200),e.headers.delete(\"Location\")}}async function Dt(e){if(!e.sharedMap.has(W)||(await e.next(),e.headersSent||e.exited))return;const n=e.status(),r=e.headers.get(\"Location\"),i=E(e);e.request.headers.forEach((l,f)=>l),e.headers.set(\"Content-Type\",\"application/json; charset=utf-8\");const a={loaders:z(e),action:e.sharedMap.get(Q),status:n!==200?n:200,href:Oe(e.url,i),redirect:r??void 0},s=e.getWritableStream().getWriter(),c=await e[N]._serializeData(a,!0);s.write(G.encode(c)),e.sharedMap.set(\"qData\",a),s.close()}function Mt(e){if(e.startsWith(\"/\")){const t=D,n=new URL(e,\"http://localhost\");return(n.pathname.endsWith(\"/\")?n.pathname.slice(0,-1):n.pathname)+(t.startsWith(\"/\")?\"\":\"/\")+t+n.search}else return}function ge(){return typeof performance<\"u\"?performance.now():0}async function U(e,t,n){const r=ge();try{return await n()}finally{const i=ge()-r;let a=e.sharedMap.get(\"@serverTiming\");a||e.sharedMap.set(\"@serverTiming\",a=[]),a.push([t,i])}}function kt(e,...t){var n;const r=((n=e.get(\"content-type\"))==null?void 0:n.split(/;/,1)[0].trim())??\"\";return t.includes(r)}async function Ot(e,t,n){const{render:r,qwikCityPlan:i,checkOrigin:a}=t,s=e.url.pathname,o=ut(s,i.trailingSlash),c=await $t(i,o,e.request.method,a??!0,r);if(c){const[l,f]=c;return ft(e,l,f,i.trailingSlash,i.basePathname,n)}return null}async function $t(e,t,n,r,i){const{routes:a,serverPlugins:s,menus:o,cacheModules:c}=e,l=await st(a,o,c,t),f=wt(s,l,n,r,Ct(i));return f.length>0?[l,f]:null}var x,O,$,be,Wt=(be=class{constructor(){H(this,x,null);H(this,O,new TextEncoder);H(this,$,new TransformStream({transform:(e,t)=>{e=String(e);let n=\"\";for(let r=0;r<e.length;r++){const i=e[r],a=i.charCodeAt(0);if(T(this,x)!==null){const s=T(this,x);if(B(this,x,null),56320<=a&&a<=57343){n+=s+i;continue}n+=\"�\"}if(55296<=a&&a<=56319){B(this,x,i);continue}if(56320<=a&&a<=57343){n+=\"�\";continue}n+=i}n&&t.enqueue(T(this,O).encode(n))},flush:e=>{T(this,x)!==null&&e.enqueue(new Uint8Array([239,191,189]))}}))}get encoding(){return T(this,O).encoding}get readable(){return T(this,$).readable}get writable(){return T(this,$).writable}get[Symbol.toStringTag](){return\"TextEncoderStream\"}},x=new WeakMap,O=new WeakMap,$=new WeakMap,be);function Nt(e){try{new globalThis.TextEncoderStream}catch{globalThis.TextEncoderStream=Wt}const t={_deserializeData:Fe,_serializeData:Le,_verifySerializable:Ie};e.manifest&&Ue(e.manifest);async function n(r,i,a){try{const s=new URL(r.url);if(ne(r.method,s))return i.ASSETS.fetch(r);const o=s.hostname!==\"127.0.0.1\"&&s.hostname!==\"localhost\"&&s.port===\"\"&&r.method===\"GET\",c=new Request(s.href,r),l=o?await caches.open(\"custom:qwikcity\"):null;if(l){const p=await l.match(c);if(p)return p}const h=await Ot({mode:\"server\",locale:void 0,url:s,request:r,env:{get(p){return i[p]}},getWritableStream:(p,g,y,b)=>{const{readable:C,writable:S}=new TransformStream,J=new Response(C,{status:p,headers:et(g,y)});return b(J),S},getClientConn:()=>({ip:r.headers.get(\"CF-connecting-ip\")||\"\",country:r.headers.get(\"CF-IPCountry\")||\"\"}),platform:{request:r,env:i,ctx:a}},e,t);if(h){h.completion.then(g=>{g&&console.error(g)});const p=await h.response;if(p)return p.ok&&l&&p.headers.has(\"Cache-Control\")&&a.waitUntil(l.put(c,p.clone())),p}const d=ne(r.method||\"GET\",s)?\"Not Found\":He(s.pathname);return new Response(d,{status:404,headers:{\"Content-Type\":\"text/html; charset=utf-8\",\"X-Not-Found\":s.pathname}})}catch(s){return console.error(s),new Response(String(s||\"Error\"),{status:500,headers:{\"Content-Type\":\"text/plain; charset=utf-8\",\"X-Error\":\"cloudflare-pages\"}})}}return n}const jt=Nt({render:ze,qwikCityPlan:je,manifest:Qe});export{jt as default};"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 306,
        "content": "/const.*=.*\\{.*id.*:.*['\"].*['\"].*\\}/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 307,
        "content": "/data.*=.*\\{.*id.*:.*['\"].*['\"].*\\}/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 308,
        "content": "/user.*=.*\\{.*id.*:.*['\"].*['\"].*\\}/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 309,
        "content": "/response.*=.*\\{.*id.*:.*['\"].*['\"].*\\}/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 415,
        "content": "if (name.includes('jest') || name.includes('vitest')) return 'test-framework';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 416,
        "content": "if (name.includes('sinon') || name.includes('nock')) return 'mock-library';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 418,
        "content": "if (name.includes('json-server')) return 'fake-api';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 419,
        "content": "if (name.includes('testing-library') || name.includes('enzyme')) return 'test-utilities';"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 422,
        "content": "return 'testing-related';"
      },
      {
        "file": "/server/entry.cloudflare-pages.js",
        "line": 15,
        "content": "`}var Je=/[&<>]/g,Ke=e=>e.replace(Je,t=>{switch(t){case\"&\":return\"&amp;\";case\"<\":return\"&lt;\";case\">\":return\"&gt;\";default:return\"\"}}),Xe=\"#006ce9\",Be=\"#713fc2\",Ye={lax:\"Lax\",Lax:\"Lax\",None:\"None\",none:\"None\",strict:\"Strict\",Strict:\"Strict\"},Ze={seconds:1,minutes:1*60,hours:1*60*60,days:1*60*60*24,weeks:1*60*60*24*7},re=(e,t,n)=>{const r=[`${e}=${t}`];typeof n.domain==\"string\"&&r.push(`Domain=${n.domain}`),typeof n.maxAge==\"number\"?r.push(`Max-Age=${n.maxAge}`):Array.isArray(n.maxAge)?r.push(`Max-Age=${n.maxAge[0]*Ze[n.maxAge[1]]}`):typeof n.expires==\"number\"||typeof n.expires==\"string\"?r.push(`Expires=${n.expires}`):n.expires instanceof Date&&r.push(`Expires=${n.expires.toUTCString()}`),n.httpOnly&&r.push(\"HttpOnly\"),typeof n.path==\"string\"&&r.push(`Path=${n.path}`);const i=Ve(n.sameSite);return i&&r.push(`SameSite=${i}`),n.secure&&r.push(\"Secure\"),r.join(\"; \")};function ae(e){try{return decodeURIComponent(e)}catch{return e}}var qe=e=>{const t={};if(typeof e==\"string\"&&e!==\"\"){const n=e.split(\";\");for(const r of n){const i=r.indexOf(\"=\");i!==-1&&(t[ae(r.slice(0,i).trim())]=ae(r.slice(i+1).trim()))}}return t};function Ve(e){if(e===!0)return\"Strict\";if(e===!1)return\"None\";if(e)return Ye[e]}var P=Symbol(\"request-cookies\"),I=Symbol(\"response-cookies\"),_=Symbol(\"live-cookies\"),ye,we,Se,Ee=(Se=P,we=I,ye=_,class{constructor(e){k(this,Se);k(this,we,{});k(this,ye,{});k(this,\"appendCounter\",0);this[P]=qe(e),this[_]={...this[P]}}get(e,t=!0){const n=this[t?_:P][e];return n?{value:n,json(){return JSON.parse(n)},number(){return Number(n)}}:null}getAll(e=!0){return Object.keys(this[e?_:P]).reduce((t,n)=>(t[n]=this.get(n),t),{})}has(e,t=!0){return!!this[t?_:P][e]}set(e,t,n={}){this[_][e]=typeof t==\"string\"?t:JSON.stringify(t);const r=typeof t==\"string\"?t:encodeURIComponent(JSON.stringify(t));this[I][e]=re(e,r,n)}append(e,t,n={}){this[_][e]=typeof t==\"string\"?t:JSON.stringify(t);const r=typeof t==\"string\"?t:encodeURIComponent(JSON.stringify(t));this[I][++this.appendCounter]=re(e,r,n)}delete(e,t){this.set(e,\"deleted\",{...t,maxAge:0}),this[_][e]=null}headers(){return Object.values(this[I])}}),et=(e,t)=>{const n=t.headers();if(n.length>0){const r=new Headers(e);for(const i of n)r.append(\"Set-Cookie\",i);return r}return e},q=class{},V=class extends q{},ie=new WeakMap,se=\"qaction\",tt=\"qfunc\",oe=\"qdata\";function nt(e,t){const n=fe(e),r=ce(e),i=fe(t),a=ce(t);return Re(e,n,r,t,i,a)}function Re(e,t,n,r,i,a){let s=null;for(;t<n;){const o=e.charCodeAt(t++),c=r.charCodeAt(i++);if(o===91){const l=Te(e,t),f=t+(l?3:0),h=Y(e,f,n,93),d=e.substring(f,h),p=Y(e,h+1,n,47),g=e.substring(h+1,p);t=h+1;const y=i-1;if(l){const S=at(d,g,r,y,a,e,t+g.length+1,n);if(S)return Object.assign(s||(s={}),S)}const b=Y(r,y,a,47,g);if(b==-1)return null;const C=r.substring(y,b);if(!l&&!g&&!C)return null;i=b,(s||(s={}))[d]=decodeURIComponent(C)}else if(o!==c&&!(isNaN(c)&&rt(e,t)))return null}return le(e,t)&&le(r,i)?s||{}:null}function rt(e,t){return e.charCodeAt(t)===91&&Te(e,t+1)}function ce(e){const t=e.length;return t>1&&e.charCodeAt(t-1)===47?t-1:t}function le(e,t){const n=e.length;return t>=n||t==n-1&&e.charCodeAt(t)===47}function fe(e){return e.charCodeAt(0)===47?1:0}function Te(e,t){return e.charCodeAt(t)===46&&e.charCodeAt(t+1)===46&&e.charCodeAt(t+2)===46}function Y(e,t,n,r,i=\"\"){for(;t<n&&e.charCodeAt(t)!==r;)t++;const a=i.length;for(let s=0;s<a;s++)if(e.charCodeAt(t-a+s)!==i.charCodeAt(s))return-1;return t-a}function at(e,t,n,r,i,a,s,o){n.charCodeAt(r)===47&&r++;let c=i;const l=t+\"/\";for(;c>=r;){const f=Re(a,s,o,n,c,i);if(f){let d=n.substring(r,Math.min(c,i));return d.endsWith(l)&&(d=d.substring(0,d.length-l.length)),f[e]=decodeURIComponent(d),f}const h=it(n,r,l,c,r-1)+l.length;if(c===h)break;c=h}return null}function it(e,t,n,r,i){let a=e.lastIndexOf(n,r);return a==r-n.length&&(a=e.lastIndexOf(n,r-n.length-1)),a>t?a:i}var st=async(e,t,n,r)=>{if(!Array.isArray(e))return null;for(const i of e){const a=i[0],s=nt(a,r);if(!s)continue;const o=i[1],c=i[3],l=new Array(o.length),f=[];o.forEach((p,g)=>{ue(p,f,y=>l[g]=y,n)});const h=ot(t,r);let d;return ue(h,f,p=>d=p==null?void 0:p.default,n),f.length>0&&await Promise.all(f),[a,s,l,d,c]}return null},ue=(e,t,n,r)=>{if(typeof e==\"function\"){const i=ie.get(e);if(i)n(i);else{const a=e();typeof a.then==\"function\"?t.push(a.then(s=>{r!==!1&&ie.set(e,s),n(s)})):a&&n(a)}}},ot=(e,t)=>{if(e){t=t.endsWith(\"/\")?t:t+\"/\";const n=e.find(r=>r[0]===t||t.startsWith(r[0]+(t.endsWith(\"/\")?\"\":\"/\")));if(n)return n[1]}},ct=e=>e&&typeof e.then==\"function\";function lt(e){const t=[];return e===\"day\"?e=60*60*24:e===\"week\"?e=60*60*24*7:e===\"month\"?e=60*60*24*30:e===\"year\"?e=60*60*24*365:e===\"private\"?e={private:!0,noCache:!0}:e===\"immutable\"?e={public:!0,immutable:!0,maxAge:60*60*24*365}:e===\"no-cache\"&&(e={noCache:!0}),typeof e==\"number\"&&(e={maxAge:e,sMaxAge:e}),e.immutable&&t.push(\"immutable\"),e.maxAge&&t.push(`max-age=${e.maxAge}`),e.sMaxAge&&t.push(`s-maxage=${e.sMaxAge}`),e.noStore&&t.push(\"no-store\"),e.noCache&&t.push(\"no-cache\"),e.private&&t.push(\"private\"),e.public&&t.push(\"public\"),e.staleWhileRevalidate&&t.push(`stale-while-revalidate=${e.staleWhileRevalidate}`),e.staleIfError&&t.push(`stale-if-error=${e.staleIfError}`),t.join(\", \")}var L;import(\"node:async_hooks\").then(e=>{const t=e.AsyncLocalStorage;L=new t,globalThis.qcAsyncRequestStore=L}).catch(e=>{console.warn(\"AsyncLocalStorage not available, continuing without it. This might impact concurrent server calls.\",e)});function ft(e,t,n,r=!0,i=\"/\",a){let s;const o=new Promise(l=>s=l),c=ht(e,t,n,r,i,a,s);return{response:o,requestEv:c,completion:L?L.run(c,de,c,s):de(c,s)}}async function de(e,t){try{await e.next()}catch(n){if(n instanceof V)await e.getWritableStream().close();else if(n instanceof Z){if(!e.headersSent){const r=n.status,i=e.request.headers.get(\"Accept\");if(i&&!i.includes(\"text/html\")){const a=e[N];e.headers.set(\"Content-Type\",\"application/qwik-json\"),e.send(r,await a._serializeData(n.data,!0))}else{const a=Ge(n.status,n.data);e.html(r,a)}}}else if(!(n instanceof q)){if(j(e)!==\"dev\")try{e.headersSent||(e.headers.set(\"content-type\",\"text/html; charset=utf-8\"),e.cacheControl({noCache:!0}),e.status(500));const r=e.getWritableStream();if(!r.locked){const i=r.getWriter();await i.write(G.encode(Ae(500,\"Internal Server Error\"))),await i.close()}}catch{console.error(\"Unable to render error page\")}return n}}finally{e.isDirty()||t(null)}}function ut(e,t){if(e.endsWith(D)){const n=e.length-_e+(t?1:0);e=e.slice(0,n),e===\"\"&&(e=\"/\")}return e}var W=\"@isQData\",D=\"/q-data.json\",_e=D.length,xe=Symbol(\"RequestEvLoaders\"),Ce=Symbol(\"RequestEvMode\"),Pe=Symbol(\"RequestEvRoute\"),N=Symbol(\"RequestEvQwikSerializer\"),De=Symbol(\"RequestEvTrailingSlash\"),Me=\"@routeName\",Q=\"@actionId\",ke=\"@actionFormData\",dt=\"@nonce\";function ht(e,t,n,r,i,a,s){const{request:o,platform:c,env:l}=e,f=new Map,h=new Ee(o.headers.get(\"cookie\")),d=new Headers,p=new URL(o.url);p.pathname.endsWith(D)&&(p.pathname=p.pathname.slice(0,-_e),r&&!p.pathname.endsWith(\"/\")&&(p.pathname+=\"/\"),f.set(W,!0));let g=-1,y=null,b,C=e.locale,S=200;const J=async()=>{for(g++;g<n.length;){const u=n[g],m=globalThis.qcAsyncRequestStore,w=m!=null&&m.run?m.run(A,u,A):u(A);ct(w)&&await w,g++}},M=()=>{if(y!==null)throw new Error(\"Response already sent\")},v=(u,m)=>{if(M(),typeof u==\"number\"){S=u;const R=A.getWritableStream().getWriter();R.write(typeof m==\"string\"?G.encode(m):m),R.close()}else if(S=u.status,u.headers.forEach((w,R)=>{R.toLowerCase()!==\"set-cookie\"&&d.append(R,w)}),u.headers.getSetCookie().forEach(w=>{const R=w.indexOf(\"=\");if(R===-1)return;const $e=w.slice(0,R).trim(),We=w.slice(R+1).trim();h.set($e,We)}),u.body){const w=A.getWritableStream();u.body.pipeTo(w)}else A.getWritableStream().getWriter().close();return K()},K=()=>(g=he,new q),X={},A={[xe]:X,[Ce]:e.mode,[De]:r,[Pe]:t,[N]:a,cookie:h,headers:d,env:l,method:o.method,signal:o.signal,params:(t==null?void 0:t[1])??{},pathname:p.pathname,platform:c,query:p.searchParams,request:o,url:p,basePathname:i,sharedMap:f,get headersSent(){return y!==null},get exited(){return g>=he},get clientConn(){return e.getClientConn()},next:J,exit:K,cacheControl:(u,m=\"Cache-Control\")=>{M(),d.set(m,lt(u))},resolveValue:async u=>{const m=u.__id;if(u.__brand===\"server_loader\"&&!(m in X))throw new Error(\"You can not get the returned data of a loader that has not been executed for this request.\");return X[m]},status:u=>typeof u==\"number\"?(M(),S=u,u):S,locale:u=>(typeof u==\"string\"&&(C=u),C||\"\"),error:(u,m)=>(S=u,new Z(u,m)),redirect:(u,m)=>{if(M(),S=u,m){const w=m.replace(/([^:])\\/{2,}/g,\"$1/\");m!==w&&console.warn(`Redirect URL ${m} is invalid, fixing to ${w}`),d.set(\"Location\",w)}return u>301&&!d.get(\"Cache-Control\")&&d.set(\"Cache-Control\",\"no-store\"),K(),new V},defer:u=>typeof u==\"function\"?u:()=>u,fail:(u,m)=>(M(),S=u,{failed:!0,...m}),text:(u,m)=>(d.set(\"Content-Type\",\"text/plain; charset=utf-8\"),v(u,m)),html:(u,m)=>(d.set(\"Content-Type\",\"text/html; charset=utf-8\"),v(u,m)),parseBody:async()=>b!==void 0?b:b=mt(A,f,a),json:(u,m)=>(d.set(\"Content-Type\",\"application/json; charset=utf-8\"),v(u,JSON.stringify(m))),send:v,isDirty:()=>y!==null,getWritableStream:()=>{if(y===null){if(e.mode===\"dev\"){const u=f.get(\"@serverTiming\");u&&d.set(\"Server-Timing\",u.map(m=>`${m[0]};dur=${m[1]}`).join(\",\"))}y=e.getWritableStream(S,d,h,s,A)}return y}};return Object.freeze(A)}function z(e){return e[xe]}function E(e){return e[De]}function pt(e){return e[Pe]}function j(e){return e[Ce]}var he=Number.MAX_SAFE_INTEGER,mt=async({request:e,method:t,query:n},r,i)=>{var a;const s=((a=e.headers.get(\"content-type\"))==null?void 0:a.split(/[;,]/,1)[0].trim())??\"\";if(s===\"application/x-www-form-urlencoded\"||s===\"multipart/form-data\"){const o=await e.formData();return r.set(ke,o),gt(o)}else{if(s===\"application/json\")return await e.json();if(s===\"application/qwik-json\"){if(t===\"GET\"&&n.has(oe)){const o=n.get(oe);if(o)try{return i._deserializeData(decodeURIComponent(o))}catch{}}return i._deserializeData(await e.text())}}},gt=e=>[...e.entries()].reduce((n,[r,i])=>(r.split(\".\").reduce((a,s,o,c)=>{if(s.endsWith(\"[]\")){const l=s.slice(0,-2);return a[l]=a[l]||[],a[l]=[...a[l],i]}return o<c.length-1?a[s]=a[s]||(Number.isNaN(+c[o+1])?{}:[]):a[s]=i},n),n),{});function yt(e){const{url:t,params:n,request:r,status:i,locale:a}=e,s={};r.headers.forEach((y,b)=>s[b]=y);const o=e.sharedMap.get(Q),c=e.sharedMap.get(ke),l=e.sharedMap.get(Me),f=e.sharedMap.get(dt),h=e.request.headers,d=new URL(t.pathname+t.search,t),p=h.get(\"X-Forwarded-Host\"),g=h.get(\"X-Forwarded-Proto\");return p&&(d.port=\"\",d.host=p),g&&(d.protocol=g),{url:d.href,requestHeaders:s,locale:a(),nonce:f,containerAttributes:{\"q:route\":l},qwikcity:{routeName:l,ev:e,params:{...n},loadedRoute:pt(e),response:{status:i(),loaders:z(e),action:o,formData:c}}}}var wt=(e,t,n,r,i)=>{const a=[],s=[],o=[],c=!!(t&&_t(t[2]));if(e&&pe(a,s,o,e,c,n),t){const l=t[0];r&&(n===\"POST\"||n===\"PUT\"||n===\"PATCH\"||n===\"DELETE\")&&o.unshift(xt),c&&((n===\"POST\"||n===\"GET\")&&o.push(At),o.push(Rt),o.push(Dt));const f=t[2];o.push(Pt),pe(a,s,o,f,c,n),c&&(o.push(h=>{h.sharedMap.set(Me,l)}),o.push(St(s,a)),o.push(i))}return o},pe=(e,t,n,r,i,a)=>{for(const s of r){typeof s.onRequest==\"function\"?n.push(s.onRequest):Array.isArray(s.onRequest)&&n.push(...s.onRequest);let o;switch(a){case\"GET\":{o=s.onGet;break}case\"POST\":{o=s.onPost;break}case\"PUT\":{o=s.onPut;break}case\"PATCH\":{o=s.onPatch;break}case\"DELETE\":{o=s.onDelete;break}case\"OPTIONS\":{o=s.onOptions;break}case\"HEAD\":{o=s.onHead;break}}if(typeof o==\"function\"?n.push(o):Array.isArray(o)&&n.push(...o),i)for(const c of Object.values(s))typeof c==\"function\"&&(c.__brand===\"server_loader\"?e.push(c):c.__brand===\"server_action\"&&t.push(c))}};function St(e,t){return async n=>{if(n.headersSent){n.exit();return}const{method:r}=n,i=z(n),a=j(n)===\"dev\",s=n[N];if(a&&r===\"GET\"&&n.query.has(se)&&console.warn(`Seems like you are submitting a Qwik Action via GET request. Qwik Actions should be submitted via POST request."
      },
      {
        "file": "/server/entry.cloudflare-pages.js",
        "line": 16,
        "content": "Make sure your <form> has method=\"POST\" attribute, like this: <form method=\"POST\">`),r===\"POST\"){const o=n.query.get(se);if(o){const c=globalThis._qwikActionsMap,l=e.find(f=>f.__id===o)??(c==null?void 0:c.get(o));if(l){n.sharedMap.set(Q,o);const f=await n.parseBody();if(!f||typeof f!=\"object\")throw new Error(`Expected request data for the action id ${o} to be an object`);const h=await me(n,l.__validators,f,a);if(!h.success)i[o]=n.fail(h.status??500,h.error);else{const d=a?await U(n,l.__qrl.getSymbol().split(\"_\",1)[0],()=>l.__qrl.call(n,h.data,n)):await l.__qrl.call(n,h.data,n);a&&F(s,d,l.__qrl),i[o]=d}}}}if(t.length>0){const o=t.map(c=>{const l=c.__id;return i[l]=me(n,c.__validators,void 0,a).then(f=>f.success?a?U(n,c.__qrl.getSymbol().split(\"_\",1)[0],()=>c.__qrl.call(n,n)):c.__qrl.call(n,n):n.fail(f.status??500,f.error)).then(f=>(typeof f==\"function\"?i[l]=f():(a&&F(s,f,c.__qrl),i[l]=f),f)),i[l]});await Promise.all(o)}}}async function me(e,t,n,r){let i={success:!0,data:n};if(t)for(const a of t)if(r?i=await U(e,\"validator$\",()=>a.validate(e,n)):i=await a.validate(e,n),i.success)n=i.data;else return i;return i}function bt(e){return e?typeof e==\"object\"&&Symbol.asyncIterator in e:!1}async function At(e){const t=e.query.get(tt);if(t&&e.request.headers.get(\"X-QRL\")===t&&e.request.headers.get(\"Content-Type\")===\"application/qwik-json\"){e.exit();const n=j(e)===\"dev\",r=e[N],i=await e.parseBody();if(Array.isArray(i)){const[a,...s]=i;if(Tt(a)&&a.getHash()===t){let o;try{n?o=await U(e,`server_${a.getSymbol()}`,()=>a.apply(e,s)):o=await a.apply(e,s)}catch(c){throw c instanceof Z?e.error(c.status,c.data):e.error(500,\"Invalid request\")}if(bt(o)){e.headers.set(\"Content-Type\",\"text/qwik-json-stream\");const l=e.getWritableStream().getWriter();for await(const f of o){n&&F(r,f,a);const h=await r._serializeData(f,!0);if(e.signal.aborted)break;await l.write(G.encode(`${h}"
      },
      {
        "file": "/server/entry.cloudflare-pages.js",
        "line": 17,
        "content": "`))}l.close()}else{F(r,o,a),e.headers.set(\"Content-Type\",\"application/qwik-json\");const c=await r._serializeData(o,!0);e.send(200,c)}return}}throw e.error(500,\"Invalid request\")}}function Rt(e){const t=E(e),{basePathname:n,pathname:r,url:i,sharedMap:a}=e;if(!a.has(W)&&r!==n&&!r.endsWith(\".html\")){if(t){if(!r.endsWith(\"/\"))throw e.redirect(301,r+\"/\"+i.search)}else if(r.endsWith(\"/\"))throw e.redirect(301,r.slice(0,r.length-1)+i.search)}}function F(e,t,n){try{e._verifySerializable(t,void 0)}catch(r){throw r instanceof Error&&n.dev&&(r.loc=n.dev),r}}var Tt=e=>typeof e==\"function\"&&typeof e.getSymbol==\"function\";function _t(e){const t=e[e.length-1];return t&&typeof t.default==\"function\"}function Oe(e,t){e=new URL(e),e.pathname.endsWith(D)&&(e.pathname=e.pathname.slice(0,-D.length)),t?e.pathname.endsWith(\"/\")||(e.pathname+=\"/\"):e.pathname.endsWith(\"/\")&&(e.pathname=e.pathname.slice(0,-1));const n=e.search.slice(1).replaceAll(/&?q(action|data|func)=[^&]+/g,\"\");return`${e.pathname}${n?`?${n}`:\"\"}${e.hash}`}var G=new TextEncoder;function xt(e){if(kt(e.request.headers,\"application/x-www-form-urlencoded\",\"multipart/form-data\",\"text/plain\")){const n=e.request.headers.get(\"origin\"),r=e.url.origin;if(n!==r)throw e.error(403,`CSRF check failed. Cross-site ${e.method} form submissions are forbidden."
      },
      {
        "file": "/server/entry.cloudflare-pages.js",
        "line": 18,
        "content": "The request origin \"${n}\" does not match the server origin \"${r}\".`)}}function Ct(e){return async t=>{if(t.headersSent||t.sharedMap.has(W))return;t.request.headers.forEach((h,d)=>h);const r=t.headers;r.has(\"Content-Type\")||r.set(\"Content-Type\",\"text/html; charset=utf-8\");const i=E(t),{readable:a,writable:s}=new TextEncoderStream,o=t.getWritableStream(),c=a.pipeTo(o,{preventClose:!0}),l=s.getWriter(),f=t.status();try{const h=j(t)===\"static\",d=yt(t),p=await e({base:t.basePathname+\"build/\",stream:l,serverData:d,containerAttributes:{\"q:render\":h?\"static\":\"\",...d.containerAttributes}}),g={loaders:z(t),action:t.sharedMap.get(Q),status:f!==200?f:200,href:Oe(t.url,i)};typeof p.html==\"string\"&&await l.write(p.html),t.sharedMap.set(\"qData\",g)}finally{await l.ready,await l.close(),await c}await o.close()}}async function Pt(e){if(!e.sharedMap.has(W))return;try{await e.next()}catch(a){if(!(a instanceof V))throw a}if(e.headersSent)return;const n=e.status(),r=e.headers.get(\"Location\");if(n>=301&&n<=308&&r){const a=Mt(r);if(a){e.headers.set(\"Location\",a),e.getWritableStream().close();return}else e.status(200),e.headers.delete(\"Location\")}}async function Dt(e){if(!e.sharedMap.has(W)||(await e.next(),e.headersSent||e.exited))return;const n=e.status(),r=e.headers.get(\"Location\"),i=E(e);e.request.headers.forEach((l,f)=>l),e.headers.set(\"Content-Type\",\"application/json; charset=utf-8\");const a={loaders:z(e),action:e.sharedMap.get(Q),status:n!==200?n:200,href:Oe(e.url,i),redirect:r??void 0},s=e.getWritableStream().getWriter(),c=await e[N]._serializeData(a,!0);s.write(G.encode(c)),e.sharedMap.set(\"qData\",a),s.close()}function Mt(e){if(e.startsWith(\"/\")){const t=D,n=new URL(e,\"http://localhost\");return(n.pathname.endsWith(\"/\")?n.pathname.slice(0,-1):n.pathname)+(t.startsWith(\"/\")?\"\":\"/\")+t+n.search}else return}function ge(){return typeof performance<\"u\"?performance.now():0}async function U(e,t,n){const r=ge();try{return await n()}finally{const i=ge()-r;let a=e.sharedMap.get(\"@serverTiming\");a||e.sharedMap.set(\"@serverTiming\",a=[]),a.push([t,i])}}function kt(e,...t){var n;const r=((n=e.get(\"content-type\"))==null?void 0:n.split(/;/,1)[0].trim())??\"\";return t.includes(r)}async function Ot(e,t,n){const{render:r,qwikCityPlan:i,checkOrigin:a}=t,s=e.url.pathname,o=ut(s,i.trailingSlash),c=await $t(i,o,e.request.method,a??!0,r);if(c){const[l,f]=c;return ft(e,l,f,i.trailingSlash,i.basePathname,n)}return null}async function $t(e,t,n,r,i){const{routes:a,serverPlugins:s,menus:o,cacheModules:c}=e,l=await st(a,o,c,t),f=wt(s,l,n,r,Ct(i));return f.length>0?[l,f]:null}var x,O,$,be,Wt=(be=class{constructor(){H(this,x,null);H(this,O,new TextEncoder);H(this,$,new TransformStream({transform:(e,t)=>{e=String(e);let n=\"\";for(let r=0;r<e.length;r++){const i=e[r],a=i.charCodeAt(0);if(T(this,x)!==null){const s=T(this,x);if(B(this,x,null),56320<=a&&a<=57343){n+=s+i;continue}n+=\"�\"}if(55296<=a&&a<=56319){B(this,x,i);continue}if(56320<=a&&a<=57343){n+=\"�\";continue}n+=i}n&&t.enqueue(T(this,O).encode(n))},flush:e=>{T(this,x)!==null&&e.enqueue(new Uint8Array([239,191,189]))}}))}get encoding(){return T(this,O).encoding}get readable(){return T(this,$).readable}get writable(){return T(this,$).writable}get[Symbol.toStringTag](){return\"TextEncoderStream\"}},x=new WeakMap,O=new WeakMap,$=new WeakMap,be);function Nt(e){try{new globalThis.TextEncoderStream}catch{globalThis.TextEncoderStream=Wt}const t={_deserializeData:Fe,_serializeData:Le,_verifySerializable:Ie};e.manifest&&Ue(e.manifest);async function n(r,i,a){try{const s=new URL(r.url);if(ne(r.method,s))return i.ASSETS.fetch(r);const o=s.hostname!==\"127.0.0.1\"&&s.hostname!==\"localhost\"&&s.port===\"\"&&r.method===\"GET\",c=new Request(s.href,r),l=o?await caches.open(\"custom:qwikcity\"):null;if(l){const p=await l.match(c);if(p)return p}const h=await Ot({mode:\"server\",locale:void 0,url:s,request:r,env:{get(p){return i[p]}},getWritableStream:(p,g,y,b)=>{const{readable:C,writable:S}=new TransformStream,J=new Response(C,{status:p,headers:et(g,y)});return b(J),S},getClientConn:()=>({ip:r.headers.get(\"CF-connecting-ip\")||\"\",country:r.headers.get(\"CF-IPCountry\")||\"\"}),platform:{request:r,env:i,ctx:a}},e,t);if(h){h.completion.then(g=>{g&&console.error(g)});const p=await h.response;if(p)return p.ok&&l&&p.headers.has(\"Cache-Control\")&&a.waitUntil(l.put(c,p.clone())),p}const d=ne(r.method||\"GET\",s)?\"Not Found\":He(s.pathname);return new Response(d,{status:404,headers:{\"Content-Type\":\"text/html; charset=utf-8\",\"X-Not-Found\":s.pathname}})}catch(s){return console.error(s),new Response(String(s||\"Error\"),{status:500,headers:{\"Content-Type\":\"text/plain; charset=utf-8\",\"X-Error\":\"cloudflare-pages\"}})}}return n}const jt=Nt({render:ze,qwikCityPlan:je,manifest:Qe});export{jt as default};"
      },
      {
        "file": "/server/q-BFBoRxOI.js",
        "line": 8,
        "content": "`);for(const $ of c){const l=on($,t);l.$capture$&&uo(l,e),s.push([o,l])}}}return s},ui=(e,t=0)=>{for(let n=0;n<e.length;n++){const s=e.charCodeAt(n);t=(t<<5)-t+s,t|=0}return Number(Math.abs(t)).toString(36)},fi=(e,t)=>`${ui(e.$hash$)}-${t}`,di=e=>{const t=e.join(\"|\");if(t.length>0)return t},pi=\"1.14.1\",Ae=()=>{const e=ns(),t=e.$hostElement$,n=K(t,e.$renderCtx$.$static$.$containerState$),s=n.$seq$||(n.$seq$=[]),r=e.$i$++,o=i=>s[r]=i;return{val:s[r],set:o,i:r,iCtx:e,elCtx:n}},ae=e=>(N(/^[\\w/.-]+$/.test(e),\"Context name must only contain A-Z,a-z,0-9, _\",e),Object.freeze({id:Qn(e)})),ue=(e,t)=>{const{val:n,set:s,elCtx:r}=Ae();if(n!==void 0)return;(r.$contexts$||(r.$contexts$=new Map)).set(e.id,t),s(!0)},mt=(e,t)=>{const{val:n,set:s,iCtx:r,elCtx:o}=Ae();if(n!==void 0)return n;const i=ar(e,o,r.$renderCtx$.$static$.$containerState$);if(typeof t==\"function\")return s(U(void 0,t,i));if(i!==void 0)return s(i);if(t!==void 0)return s(t);throw O(Bo,e.id)},hi=(e,t)=>{var r;let n=e,s=1;for(;n&&!((r=n.hasAttribute)!=null&&r.call(n,\"q:container\"));){for(;n=n.previousSibling;)if(Bt(n)){const o=n[st];if(o){const i=o[Xt];if(n===o.open)return i??K(o,t);if(i!=null&&i.$parentCtx$)return i.$parentCtx$;n=o;continue}if(n.data===\"/qv\")s++;else if(n.data.startsWith(\"qv \")&&(s--,s===0))return K(bt(n),t)}n=e.parentElement,e=n}return null},mi=(e,t)=>(e.$parentCtx$===void 0&&(e.$parentCtx$=hi(e.$element$,t)),e.$parentCtx$),ar=(e,t,n)=>{var o;const s=e.id;if(!t)return;let r=t;for(;r;){const i=(o=r.$contexts$)==null?void 0:o.get(s);if(i)return i;r=mi(r,n)}},gi=ae(\"qk-error\"),Hn=(e,t,n)=>{const s=te(t);if(G())throw e;{const r=ar(gi,s,n.$static$.$containerState$);if(r===void 0)throw e;r.error=e}},yi=new Set([\"animationIterationCount\",\"aspectRatio\",\"borderImageOutset\",\"borderImageSlice\",\"borderImageWidth\",\"boxFlex\",\"boxFlexGroup\",\"boxOrdinalGroup\",\"columnCount\",\"columns\",\"flex\",\"flexGrow\",\"flexShrink\",\"gridArea\",\"gridRow\",\"gridRowEnd\",\"gridRowStart\",\"gridColumn\",\"gridColumnEnd\",\"gridColumnStart\",\"fontWeight\",\"lineClamp\",\"lineHeight\",\"opacity\",\"order\",\"orphans\",\"scale\",\"tabSize\",\"widows\",\"zIndex\",\"zoom\",\"MozAnimationIterationCount\",\"MozBoxFlex\",\"msFlex\",\"msFlexPositive\",\"WebkitAnimationIterationCount\",\"WebkitBoxFlex\",\"WebkitBoxOrdinalGroup\",\"WebkitColumnCount\",\"WebkitColumns\",\"WebkitFlex\",\"WebkitFlexGrow\",\"WebkitFlexShrink\",\"WebkitLineClamp\"]),vi=e=>yi.has(e),qt=(e,t,n)=>{t.$flags$&=-2,t.$flags$|=es,t.$slots$=[],t.li.length=0;const s=t.$element$,r=t.$componentQrl$,o=t.$props$,i=X(e.$static$.$locale$,s,void 0,On),c=i.$waitOn$=[];T(r,\"render: host element to render must have a $renderQrl$:\",t),T(o,\"render: host element to render must have defined props\",t);const $=gt(e);$.$cmpCtx$=t,$.$slotCtx$=void 0,i.$subscriber$=[0,s],i.$renderCtx$=e,r.$setContainer$(e.$static$.$containerState$.$containerEl$);const l=r.getFn(i);return Nn(()=>l(o),a=>R(G()?R(De(c),()=>R(rc(e.$static$.$containerState$,e),()=>De(c))):De(c),()=>{var u;if(t.$flags$&lt)if(n&&n>100)ce(`Infinite loop detected. Element: ${(u=t.$componentQrl$)==null?void 0:u.$symbol$}`);else return qt(e,t,n?n+1:1);return{node:a,rCtx:$}}),a=>{var u;if(a===Wr)if(n&&n>100)ce(`Infinite loop detected. Element: ${(u=t.$componentQrl$)==null?void 0:u.$symbol$}`);else return R(De(c),()=>qt(e,t,n?n+1:1));return Hn(a,s,e),{node:Jn,rCtx:$}})},ur=(e,t)=>{const n={$static$:{$doc$:e,$locale$:t.$serverData$.locale,$containerState$:t,$hostElements$:new Set,$operations$:[],$postOperations$:[],$roots$:[],$addSlots$:[],$rmSlots$:[],$visited$:[]},$cmpCtx$:null,$slotCtx$:void 0};return Do(n.$static$),n},gt=e=>({$static$:e.$static$,$cmpCtx$:e.$cmpCtx$,$slotCtx$:e.$slotCtx$}),Bn=(e,t)=>{var n;return(n=t==null?void 0:t.$scopeIds$)!=null&&n.length?t.$scopeIds$.join(\" \")+\" \"+At(e):At(e)},At=e=>{if(!e)return\"\";if(ye(e))return e.trim();const t=[];if(A(e))for(const n of e){const s=At(n);s&&t.push(s)}else for(const[n,s]of Object.entries(e))s&&t.push(n.trim());return t.join(\" \")},Zt=e=>{if(e==null)return\"\";if(typeof e==\"object\"){if(A(e))throw O(Uo,e,\"style\");{const t=[];for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)){const s=e[n];s!=null&&typeof s!=\"function\"&&(n.startsWith(\"--\")?t.push(n+\":\"+s):t.push(Qn(n)+\":\"+Si(n,s)))}return t.join(\";\")}}return String(e)},Si=(e,t)=>typeof t==\"number\"&&t!==0&&!vi(e)?t+\"px\":t,rt=e=>Re(e.$static$.$containerState$.$elementIndex$++),fr=(e,t)=>{const n=rt(e);t.$id$=n},ot=e=>Q(e)?ot(e.value):e==null||typeof e==\"boolean\"?\"\":String(e);function dr(e){return e.startsWith(\"aria-\")}const pr=(e,t)=>t.key?!Pe(e)||!J(e.type)&&e.key!=t.key:!1,bi=1,it=2,B=\"dangerouslySetInnerHTML\",It=\"<!--qkssr-f-->\",ws=1,hr=4,mr=8,Es=16,gr=1024;var Vs;Vs=Xt;class yr{constructor(t){k(this,\"nodeType\");k(this,Vs,null);this.nodeType=t}}const wi=()=>new yr(9),Bl=async(e,t)=>{var m,y,g;const n=t.containerTagName,s=Pt(1).$element$,r=rs(s,t.base??\"/\");r.$serverData$.locale=(m=t.serverData)==null?void 0:m.locale;const o=wi(),i=ur(o,r),c=t.beforeContent??[],$={$static$:{$contexts$:[],$headNodes$:n===\"html\"?c:[],$locale$:(y=t.serverData)==null?void 0:y.locale,$textNodes$:new Map},$projectedChildren$:void 0,$projectedCtxs$:void 0,$invocationContext$:void 0},l=(g=t.serverData)==null?void 0:g.locale,a=t.containerAttributes,u=a[\"q:render\"];a[\"q:container\"]=\"paused\",a[\"q:version\"]=pi,a[\"q:render\"]=(u?u+\"-\":\"\")+\"ssr\",a[\"q:base\"]=t.base||\"\",a[\"q:locale\"]=l,a[\"q:manifest-hash\"]=t.manifestHash,a[\"q:instance\"]=Ei();const f=n===\"html\"?[e]:[c,e];n!==\"html\"&&(a.class=\"qc📦\"+(a.class?\" \"+a.class:\"\"));const d=r.$serverData$={...r.$serverData$,...t.serverData};d.containerAttributes={...d.containerAttributes,...a};const v=$.$invocationContext$=X(l);v.$renderCtx$=i,$.$invocationContext$;const x=Ie(n,null,a,f,lt|yt,null);r.$hostsRendering$=new Set,await Promise.resolve().then(()=>xi(x,i,$,t.stream,r,t))},Ei=()=>Math.random().toString(36).slice(2),xi=async(e,t,n,s,r,o)=>{const i=o.beforeClose;return await Gn(e,t,n,s,0,i?c=>{const $=i(n.$static$.$contexts$,r,!1,n.$static$.$textNodes$);return ee($,t,n,c,0,void 0)}:void 0),t},_i=async(e,t,n,s,r)=>{s.write(It);const o=e.props.children;let i;if(J(o)){const c=o({write($){s.write($),s.write(It)}});if(D(c))return c;i=c}else i=o;for await(const c of i)await ee(c,t,n,s,r,void 0),s.write(It)},vr=(e,t,n,s,r,o,i,c)=>{var x;const $=e.props,l=$[Be];if(l)return t.$componentQrl$=l,Ii(s,r,o,t,e,i,c);let a=\"<!--qv\"+ki($);const u=ke in $,f=e.key!=null?String(e.key):null;u&&(T((x=s.$cmpCtx$)==null?void 0:x.$id$),a+=\" q:sref=\"+s.$cmpCtx$.$id$),f!=null&&(a+=\" q:key=\"+f),a+=\"-->\",o.write(a);const d=e.props[B];if(d){o.write(d),o.write(fn);return}if(n)for(const m of n)Vn(m.type,m.props,o);const v=Sr(e.children,s,r,o,i);return R(v,()=>{var y;if(!u&&!c){o.write(fn);return}let m;if(u){T();const g=(y=r.$projectedChildren$)==null?void 0:y[f];if(g){const[p,E]=r.$projectedCtxs$,h=gt(p);h.$slotCtx$=t,r.$projectedChildren$[f]=void 0,m=ee(g,h,E,o,i)}}return c&&(m=R(m,()=>c(o))),R(m,()=>{o.write(fn)})})},fn=\"<!--/qv-->\",Ti=e=>{let t=\"\";for(const n in e){if(n===B)continue;const s=e[n];s!=null&&(t+=\" \"+(s===\"\"?n:n+'=\"'+s+'\"'))}return t},ki=e=>{let t=\"\";for(const n in e){if(n===\"children\"||n===B)continue;const s=e[n];s!=null&&(t+=\" \"+(s===\"\"?n:n+\"=\"+s))}return t},Vn=(e,t,n)=>{if(n.write(\"<\"+e+Ti(t)+\">\"),!!Er[e])return;const r=t[B];r!=null&&n.write(r),n.write(`</${e}>`)},Ii=(e,t,n,s,r,o,i)=>{const c=r.props;return Mi(e,s,c.props),R(qt(e,s),$=>{const l=s.$element$,a=$.rCtx,u=X(t.$static$.$locale$,l,void 0);u.$subscriber$=[0,l],u.$renderCtx$=a;const f={$static$:t.$static$,$projectedChildren$:Ri(r.children,t),$projectedCtxs$:[e,t],$invocationContext$:u},d=[];if(s.$appendStyles$){const g=!!(o&hr)?t.$static$.$headNodes$:d;for(const p of s.$appendStyles$)g.push(Ie(\"style\",{[Kt]:p.styleId,[B]:p.content,hidden:\"\"},null,null,0,null))}const v=rt(e),x=s.$scopeIds$?di(s.$scopeIds$):void 0,m=me(r.type,{[sr]:x,[zn]:v,children:$.node},0,r.key);return s.$id$=v,t.$static$.$contexts$.push(s),vr(m,s,d,a,f,n,o,y=>{if(s.$flags$&yt){const E=Pt(1),h=E.li;h.push(...s.li),s.$flags$&=-3,E.$id$=rt(e);const w={type:\"placeholder\",hidden:\"\",\"q:id\":E.$id$};t.$static$.$contexts$.push(E);const _=lr(h);for(const b of _){const S=xr(b[0]);w[S]=ao(b[1],e.$static$.$containerState$,E),vn(S,e.$static$.$containerState$)}Vn(\"script\",w,y)}const g=f.$projectedChildren$;let p;if(g){const E=Object.keys(g).map(b=>{const S=g[b];if(S)return Ie(\"q:template\",{[j]:b||!0,hidden:!0,\"aria-hidden\":\"true\"},null,S,0,null)}),[h,w]=f.$projectedCtxs$,_=gt(h);_.$slotCtx$=s,p=ee(E,_,w,y,0,void 0)}return i?R(p,()=>i(y)):p})})},Ri=(e,t)=>{const n=br(e,t);if(n===null)return;const s={};for(const r of n){let o=\"\";Pe(r)&&(o=r.props[j]||\"\"),(s[o]||(s[o]=[])).push(r)}return s},Pt=e=>{const t=new yr(e);return nn(t)},Gn=(e,t,n,s,r,o)=>{var l;const i=e.type,c=t.$cmpCtx$;if(typeof i==\"string\"){const a=e.key,u=e.props,f=e.immutableProps||F,d=Pt(1),v=d.$element$,x=i===\"head\";let m=\"<\"+i,y=!1,g=!1,p=\"\",E=null;const h=(b,S,I)=>{if(b===\"ref\"){S!==void 0&&(os(S,v),g=!0);return}if(Un(b)){Wn(d.li,b,S,void 0);return}if(Q(S)&&(T(),I?S=$e(S,[1,v,S,c.$element$,b]):S=$e(S,[2,c.$element$,S,v,b]),y=!0),b===B){E=S;return}b.startsWith(Mt)&&vn(b.slice(Mt.length),t.$static$.$containerState$);let q;const L=b===\"htmlFor\"?\"for\":b;L===\"class\"||L===\"className\"?p=At(S):L===\"style\"?q=Zt(S):dr(L)||L===\"draggable\"||L===\"spellcheck\"?(q=S!=null?String(S):null,S=q):S===!1||S==null?q=null:q=String(S),q!=null&&(L===\"value\"&&i===\"textarea\"?E=Oe(q):Ci(L)||(m+=\" \"+(S===!0?L:L+'=\"'+Oe(q)+'\"')))};for(const b in u){let S=!1,I;b in f?(S=!0,I=f[b],I===P&&(I=u[b])):I=u[b],h(b,I,S)}for(const b in f){if(b in u)continue;const S=f[b];S!==P&&h(b,S,!0)}const w=d.li;if(c){if((l=c.$scopeIds$)!=null&&l.length){const b=c.$scopeIds$.join(\" \");p=p?`${b} ${p}`:b}c.$flags$&yt&&(w.push(...c.li),c.$flags$&=-3)}if(x&&(r|=ws),i in qi&&(r|=Es),i in Ai&&(r|=mr),p&&(m+=' class=\"'+Oe(p)+'\"'),w.length>0){const b=lr(w),S=(r&Es)!==0;for(const I of b){const q=S?xr(I[0]):I[0];m+=\" \"+q+'=\"'+ao(I[1],t.$static$.$containerState$,d)+'\"',vn(q,t.$static$.$containerState$)}}if(a!=null&&(m+=' q:key=\"'+Oe(a)+'\"'),g||y||w.length>0){if(g||y||Di(w)){const b=rt(t);m+=' q:id=\"'+b+'\"',d.$id$=b}n.$static$.$contexts$.push(d)}if(r&ws&&(m+=\" q:head\"),m+=\">\",s.write(m),i in Er)return;if(E!=null){s.write(String(E)),s.write(`</${i}>`);return}i===\"html\"?r|=hr:r&=-5,e.flags&it&&(r|=gr);const _=ee(e.children,t,n,s,r);return R(_,()=>{if(x){for(const b of n.$static$.$headNodes$)Vn(b.type,b.props,s);n.$static$.$headNodes$.length=0}if(!o){s.write(`</${i}>`);return}return R(o(s),()=>{s.write(`</${i}>`)})})}if(i===ve){const a=Pt(111);return t.$slotCtx$?(a.$parentCtx$=t.$slotCtx$,a.$realParentCtx$=t.$cmpCtx$):a.$parentCtx$=t.$cmpCtx$,c&&c.$flags$&ts&&Li(c,a),vr(e,a,void 0,t,n,s,r,o)}if(i===_r){s.write(e.props.data);return}if(i===Tr)return _i(e,t,n,s,r);const $=U(n.$invocationContext$,i,e.props,e.key,e.flags,e.dev);return pr($,e)?Gn(me(ve,{children:$},0,e.key),t,n,s,r,o):ee($,t,n,s,r,o)},ee=(e,t,n,s,r,o)=>{var i;if(!(e==null||typeof e==\"boolean\"))if(ye(e)||typeof e==\"number\")s.write(Oe(String(e)));else{if(Pe(e))return Gn(e,t,n,s,r,o);if(A(e))return Sr(e,t,n,s,r);if(Q(e)){const c=r&mr,$=(i=t.$cmpCtx$)==null?void 0:i.$element$;let l;if($)if(c)l=U(n.$invocationContext$,()=>e.value);else{const a=rt(t),u=r&gr?[3,\"#\"+a,e,\"#\"+a]:[4,$,e,\"#\"+a];if(l=$e(e,u),ye(l)){const f=ot(l);n.$static$.$textNodes$.set(f,a)}s.write(`<!--t=${a}-->`),ee(l,t,n,s,r,o),s.write(\"<!---->\");return}s.write(Oe(ot(l)));return}else{if(D(e))return s.write(It),e.then(c=>ee(c,t,n,s,r,o));ce(\"A unsupported value was passed to the JSX, skipping render. Value:\",e);return}}},Sr=(e,t,n,s,r)=>{if(e==null)return;if(!A(e))return ee(e,t,n,s,r);const o=e.length;if(o===1)return ee(e[0],t,n,s,r);if(o===0)return;let i=0;const c=[];return e.reduce(($,l,a)=>{const u=[];c.push(u);const d=ee(l,t,n,$?{write(v){i===a?s.write(v):u.push(v)}}:s,r);if($||D(d)){const v=()=>{i++,c.length>i&&c[i].forEach(x=>s.write(x))};return D(d)?$?Promise.all([d,$]).then(v):d.then(v):$.then(v)}else{i++;return}},void 0)},br=(e,t)=>{if(e==null)return null;const n=wr(e,t),s=A(n)?n:[n];return s.length===0?null:s},wr=(e,t)=>{if(e==null)return null;if(A(e))return e.flatMap(n=>wr(n,t));if(Pe(e)&&J(e.type)&&e.type!==_r&&e.type!==Tr&&e.type!==ve){const n=U(t.$invocationContext$,e.type,e.props,e.key,e.flags);return br(n,t)}return e},Mi=(e,t,n)=>{const s=Object.keys(n),r=Yt();if(t.$props$=ht(r,e.$static$.$containerState$),s.length===0)return;const o=r[P]=n[P]??F;for(const i of s)i===\"children\"||i===j||(Q(o[i])?r[fe+i]=o[i]:r[i]=n[i])},qi={head:!0,style:!0,script:!0,link:!0,meta:!0},Ai={title:!0,style:!0,script:!0,noframes:!0,textarea:!0},Er={area:!0,base:!0,basefont:!0,bgsound:!0,br:!0,col:!0,embed:!0,frame:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},Pi=/[&<>'\"]/g,vn=(e,t)=>{t.$events$.add(Br(e))},Oe=e=>e.replace(Pi,t=>{switch(t){case\"&\":return\"&amp;\";case\"<\":return\"&lt;\";case\">\":return\"&gt;\";case'\"':return\"&quot;\";case\"'\":return\"&#39;\";default:return\"\"}}),Ni=/[>/=\"'\\u0009\\u000a\\u000c\\u0020]/,Ci=e=>Ni.test(e),Di=e=>e.some(t=>t[1].$captureRef$&&t[1].$captureRef$.length>0),Li=(e,t)=>{const n=e.$dynamicSlots$||(e.$dynamicSlots$=[]);n.includes(t)||n.push(t)},xr=e=>e===\"on:qvisible\"?\"on-document:qinit\":e,Vl=(e,t,n)=>new wn(e,t,n),Oi=e=>{const t=\"null\";T();let n=\"\";for(let s=0;s<e.$args$.length;s++)n+=`p${s},`;return`(${n})=>(${t})`},Ie=(e,t,n,s,r,o,i)=>{Vt();const c=o==null?null:String(o);return new Ke(e,t||F,n,s,r,c)},zi=(e,t,n,s,r,o)=>{let i=null;return t&&\"children\"in t&&(i=t.children,delete t.children),Ie(e,t,n,i,s,r)},me=(e,t,n,s,r)=>{const o=s==null?null:String(s),i=t??{};if(typeof e==\"string\"&&P in i){const $=i[P];delete i[P];const l=i.children;delete i.children;for(const[a,u]of Object.entries($))u!==P&&(delete i[a],i[a]=u);return Ie(e,null,i,l,n,s)}const c=new Ke(e,i,null,i.children,n,o);return typeof e==\"string\"&&t&&delete t.children,c},Qi=(e,t,n)=>{const r=Ue(()=>{const i=t.children;return typeof e==\"string\"&&delete t.children,i});return ye(e)&&\"className\"in t&&(t.class=t.className,delete t.className),new Ke(e,t,null,r,0,null)},Nt=\":skipRender\";class Ke{constructor(t,n,s,r,o,i=null){k(this,\"type\");k(this,\"props\");k(this,\"immutableProps\");k(this,\"children\");k(this,\"flags\");k(this,\"key\");k(this,\"dev\");this.type=t,this.props=n,this.immutableProps=s,this.children=r,this.flags=o,this.key=i}}const ve=e=>e.children,Pe=e=>e instanceof Ke,ct=e=>e.children,Jn=Symbol(\"skip render\"),_r=()=>null,Tr=()=>null,Kn=(e,t,n)=>{const s=!(t.$flags$&es),r=t.$element$,o=e.$static$.$containerState$;return o.$hostsStaging$.delete(t),o.$subsManager$.$clearSub$(r),R(qt(e,t),i=>{const c=e.$static$,$=i.rCtx,l=X(e.$static$.$locale$,r);if(c.$hostElements$.add(r),l.$subscriber$=[0,r],l.$renderCtx$=$,s&&t.$appendStyles$)for(const u of t.$appendStyles$)jc(c,u);const a=Se(i.node,l);return R(a,u=>{const f=Fi(r,u),d=Xn(t);return R(zt($,d,f,n),()=>{t.$vdom$=f})})})},Xn=e=>(e.$vdom$||(e.$vdom$=Qt(e.$element$)),e.$vdom$);class he{constructor(t,n,s,r,o,i){k(this,\"$type$\");k(this,\"$props$\");k(this,\"$immutableProps$\");k(this,\"$children$\");k(this,\"$flags$\");k(this,\"$key$\");k(this,\"$elm$\",null);k(this,\"$text$\",\"\");k(this,\"$signal$\",null);k(this,\"$id$\");k(this,\"$dev$\");this.$type$=t,this.$props$=n,this.$immutableProps$=s,this.$children$=r,this.$flags$=o,this.$key$=i,this.$id$=t+(i?\":\"+i:\"\")}}const kr=(e,t)=>{const{key:n,type:s,props:r,children:o,flags:i,immutableProps:c}=e;let $=\"\";if(ye(s))$=s;else if(s===ve)$=Ve;else if(J(s)){const a=U(t,s,r,n,i,e.dev);return pr(a,e)?kr(me(ve,{children:a},0,n),t):Se(a,t)}else throw O(Jo,s);let l=pe;return o!=null?R(Se(o,t),a=>(a!==void 0&&(l=A(a)?a:[a]),new he($,r,c,l,i,n))):new he($,r,c,l,i,n)},Fi=(e,t)=>{const n=t===void 0?pe:A(t)?t:[t],s=new he(\":virtual\",{},null,n,0,null);return s.$elm$=e,s},Se=(e,t)=>{if(!(e==null||typeof e==\"boolean\"))if(Ir(e)){const n=new he(\"#text\",F,null,pe,0,null);return n.$text$=String(e),n}else{if(Pe(e))return kr(e,t);if(Q(e)){const n=new he(\"#signal\",F,null,pe,0,null);return n.$signal$=e,n}else if(A(e)){const n=Cn(e.flatMap(s=>Se(s,t)));return R(n,s=>s.flat(100).filter(nr))}else{if(D(e))return e.then(n=>Se(n,t));if(e===Jn)return new he(Nt,F,null,pe,0,null);ce(\"A unsupported value was passed to the JSX, skipping render. Value:\",e);return}}},Ir=e=>ye(e)||typeof e==\"number\",Rr=e=>{le(e,Ln)===\"paused\"&&Hi(e)},Ui=e=>{const t=Jt(e),s=e===t.documentElement?t.body:e,r=Gi(s,\"type\");if(r){const o=r.firstChild.data;return JSON.parse(Vi(o)||\"{}\")}},Wi=(e,t)=>{const n=JSON.parse(e);if(typeof n!=\"object\")return null;const{_objs:s,_entry:r}=n;if(typeof s>\"u\"||typeof r>\"u\")return null;let o={},i={};if(Me(t)&&qe(t)){const l=ss(t);l&&(i=sn(l),o=l.ownerDocument)}const c=ho(i,o);for(let l=0;l<s.length;l++){const a=s[l];ye(a)&&(s[l]=a===cn?void 0:c.prepare(a))}const $=l=>s[se(l)];for(const l of s)Mr(l,$,c);return $(r)},Hi=e=>{if(!Pc(e)){ce();return}const t=e._qwikjson_??Ui(e);if(e._qwikjson_=null,!t){ce();return}const n=Jt(e),s=e.getAttribute(rr);e===n.documentElement&&n.body;const o=or(n,s),i=sn(e),c=new Map,$=new Map;let l=null,a=0;const u=n.createTreeWalker(e,Ac);for(;l=u.nextNode();){const g=l.data;if(a===0){if(g.startsWith(\"qv \")){const p=Ki(g);p>=0&&c.set(p,l)}else if(g.startsWith(\"t=\")){const p=g.slice(2),E=se(p),h=Ji(l);c.set(E,h),$.set(E,h.data)}}g===\"cq\"?a++:g===\"/cq\"&&a--}const f=e.getElementsByClassName(\"qc📦\").length!==0;e.querySelectorAll(\"[q\\\\:id]\").forEach(g=>{if(f&&g.closest(\"[q\\\\:container]\")!==e)return;const p=le(g,zn);T(p,\"resume: element missed q:id\",g);const E=se(p);c.set(E,g)});const d=ho(i,n),v=new Map,x=new Set,m=g=>(N(typeof g==\"string\"&&g.length>0,\"resume: id must be an non-empty string, got:\",g),v.has(g)?v.get(g):y(g)),y=g=>{if(g.startsWith(\"#\")){const _=g.slice(1),b=se(_);N(c.has(b),\"missing element for id:\",_);const S=c.get(b);if(T(S,\"missing element for id:\",_),Bt(S)){if(!S.isConnected){v.set(g,void 0);return}const I=bt(S);return v.set(g,I),K(I,i),I}else if(Je(S))return v.set(g,S),K(S,i),S;return v.set(g,S),S}else if(g.startsWith(\"@\")){const _=g.slice(1),b=se(_),S=o[b];return T(S,\"missing inlined function for id:\",_),S}else if(g.startsWith(\"*\")){const _=g.slice(1),b=se(_);N(c.has(b),\"missing element for id:\",_);const S=$.get(b);return T(S,\"missing element for id:\",_),v.set(g,S),S}const p=se(g),E=t.objs;N(E.length>p,\"resume: index is out of bounds\",g);let h=E[p];ye(h)&&(h=h===cn?void 0:d.prepare(h));let w=h;for(let _=g.length-1;_>=0;_--){const b=g[_],S=K$[b];if(!S)break;w=S(w,i)}return v.set(g,w),!Ir(h)&&!x.has(p)&&(x.add(p),Bi(h,p,t.subs,m,i,d),Mr(h,m,d)),w};i.$elementIndex$=1e5,i.$pauseCtx$={getObject:m,meta:t.ctx,refs:t.refs},oe(e,Ln,\"resumed\"),Qo(),oi(e,\"qresume\",void 0,!0)},Bi=(e,t,n,s,r,o)=>{const i=n[t];if(i){const c=[];let $=0;for(const l of i)if(l.startsWith(\"_\"))$=parseInt(l.slice(1),10);else{const a=tl(l,s);a&&c.push(a)}if($>0&&jt(e,$),!o.subs(e,c)){const l=r.$proxyMap$.get(e);l?V(l).$addSubs$(c):ht(e,r,c)}}},Mr=(e,t,n)=>{if(!n.fill(e,t)&&e&&typeof e==\"object\"){if(A(e))for(let s=0;s<e.length;s++)e[s]=t(e[s]);else if(pt(e))for(const s in e)e[s]=t(e[s])}},Vi=e=>e.replace(/\\\\x3C(\\/?script)/gi,\"<$1\"),Gi=(e,t)=>{let n=e.lastElementChild;for(;n;){if(n.tagName===\"SCRIPT\"&&le(n,t)===\"qwik/json\")return n;n=n.previousElementSibling}},Ji=e=>{const t=e.nextSibling;if(Ys(t))return t;{const n=e.ownerDocument.createTextNode(\"\");return e.parentElement.insertBefore(n,e),n}},Ki=e=>{const t=e.indexOf(\"q:id=\");return t>0?se(e.slice(t+5)):-1},en=()=>{const e=Qr();let t=e.$qrl$;if(t)T(t.$captureRef$,\"invoke: qrl $captureRef$ must be defined inside useLexicalScope()\",t);else{const n=e.$element$;T(n,\"invoke: element must be defined inside useLexicalScope()\",e);const s=ss(n);T(s,\"invoke: cant find parent q:container of\",n),t=on(decodeURIComponent(String(e.$url$)),s),Rr(s);const r=K(n,sn(s));uo(t,r)}return t.$captureRef$},Xi=(e,t)=>{try{const n=t[0],s=e.$static$;switch(n){case 1:case 2:{let r,o;n===1?(r=t[1],o=t[3]):(r=t[3],o=t[1]);const i=te(r);if(i==null)return;const c=t[4],$=r.namespaceURI===St;s.$containerState$.$subsManager$.$clearSignal$(t);let l=$e(t[2],t.slice(0,-1));c===\"class\"?l=Bn(l,te(o)):c===\"style\"&&(l=Zt(l));const a=Xn(i);return c in a.$props$&&a.$props$[c]===l?void 0:(a.$props$[c]=l,$s(s,r,c,l,$))}case 3:case 4:{const r=t[3];if(!s.$visited$.includes(r)){s.$containerState$.$subsManager$.$clearSignal$(t);const o=void 0;let i=$e(t[2],t.slice(0,-1));const c=rl();Array.isArray(i)&&(i=new Ke(ve,{},null,i,0,null));let $=Se(i,o);if(D($))Te(\"Rendering promises in JSX signals is not supported\");else{$===void 0&&($=Se(\"\",o));const l=Gr(r),a=Yi(t[1]);if(e.$cmpCtx$=K(a,e.$static$.$containerState$),l.$type$==$.$type$&&l.$key$==$.$key$&&l.$id$==$.$id$)Ce(e,l,$,0);else{const u=[],f=l.$elm$,d=xe(e,$,0,u);u.length&&Te(\"Rendering promises in JSX signals is not supported\"),c[3]=d,Qe(e.$static$,r.parentElement,d,f),f&&as(s,f)}}}}}}catch{}};function Yi(e){for(;e;){if(qe(e))return e;e=e.parentElement}throw new Error(\"Not found\")}const ji=(e,t)=>{if(e[0]===0){const n=e[1];Zn(n)?Yn(n,t):Zi(n,t)}else ec(e,t)},Zi=(e,t)=>{const n=G();n||Rr(t.$containerEl$);const s=K(e,t);if(T(s.$componentQrl$,\"render: notified host element must have a defined $renderQrl$\",s),s.$flags$&lt)return;if(s.$flags$|=lt,t.$hostsRendering$!==void 0)t.$hostsStaging$.add(s);else{if(n){ce();return}t.$hostsNext$.add(s),jn(t)}},ec=(e,t)=>{const n=t.$hostsRendering$!==void 0;t.$opsNext$.add(e),n||jn(t)},Yn=(e,t)=>{if(e.$flags$&Dt)return;e.$flags$|=Dt,t.$hostsRendering$!==void 0?t.$taskStaging$.add(e):(t.$taskNext$.add(e),jn(t))},jn=e=>(e.$renderPromise$===void 0&&(e.$renderPromise$=Pn().nextTick(()=>qr(e))),e.$renderPromise$),tc=()=>{const[e]=en();Yn(e,sn(ss(e.$el$)))},qr=async e=>{const t=e.$containerEl$,n=Jt(t);try{const s=ur(n,e),r=s.$static$,o=e.$hostsRendering$=new Set(e.$hostsNext$);e.$hostsNext$.clear(),await sc(e,s),e.$hostsStaging$.forEach($=>{o.add($)}),e.$hostsStaging$.clear();const i=Array.from(e.$opsNext$);e.$opsNext$.clear();const c=Array.from(o);ic(c),!e.$styleMoved$&&c.length>0&&(e.$styleMoved$=!0,(t===n.documentElement?n.body:t).querySelectorAll(\"style[q\\\\:style]\").forEach(l=>{e.$styleIds$.add(le(l,Kt)),to(r,n.head,l)}));for(const $ of c){const l=$.$element$;if(!r.$hostElements$.has(l)&&$.$componentQrl$){N(l.isConnected,\"element must be connected to the dom\"),r.$roots$.push($);try{await Kn(s,$,nc(l.parentElement))}catch(a){Te(a)}}}if(i.forEach($=>{Xi(s,$)}),r.$operations$.push(...r.$postOperations$),r.$operations$.length===0){Cs(r),await xs(e,s);return}return await Bc(r),Cs(r),xs(e,s)}catch(s){Te(s)}},nc=e=>{let t=0;return e&&(e.namespaceURI===St&&(t|=Ee),e.tagName===\"HEAD\"&&(t|=is)),t},xs=async(e,t)=>{const n=t.$static$.$hostElements$;await oc(e,t,(r,o)=>r.$flags$&Nr?o?n.has(r.$el$):!0:!1),e.$hostsStaging$.forEach(r=>{e.$hostsNext$.add(r)}),e.$hostsStaging$.clear(),e.$hostsRendering$=void 0,e.$renderPromise$=void 0,e.$hostsNext$.size+e.$taskNext$.size+e.$opsNext$.size>0&&(e.$renderPromise$=qr(e))},Sn=e=>(e.$flags$&Cr)!==0,_s=e=>(e.$flags$&Dr)!==0,sc=async(e,t)=>{const n=e.$containerEl$,s=[],r=[];e.$taskNext$.forEach(o=>{Sn(o)&&(r.push(R(o.$qrl$.$resolveLazy$(n),()=>o)),e.$taskNext$.delete(o)),_s(o)&&(s.push(R(o.$qrl$.$resolveLazy$(n),()=>o)),e.$taskNext$.delete(o))});do if(e.$taskStaging$.forEach(o=>{Sn(o)?r.push(R(o.$qrl$.$resolveLazy$(n),()=>o)):_s(o)?s.push(R(o.$qrl$.$resolveLazy$(n),()=>o)):e.$taskNext$.add(o)}),e.$taskStaging$.clear(),r.length>0){const o=await Promise.all(r);Ct(o),await Promise.all(o.map(i=>Lt(i,e,t))),r.length=0}while(e.$taskStaging$.size>0);if(s.length>0){const o=await Promise.all(s);Ct(o);for(const i of o)Lt(i,e,t)}},rc=(e,t)=>{const n=e.$containerEl$,s=e.$taskStaging$;if(!s.size)return;const r=[];let o=20;const i=()=>{if(s.forEach(c=>{Sn(c)&&r.push(R(c.$qrl$.$resolveLazy$(n),()=>c))}),s.clear(),r.length>0)return Promise.all(r).then(async c=>{if(Ct(c),await Promise.all(c.map($=>Lt($,e,t))),r.length=0,--o&&s.size>0)return i();o||ce(`Infinite task loop detected. Tasks:"
      },
      {
        "file": "/server/q-BFBoRxOI.js",
        "line": 10,
        "content": "`)}`)})};return i()},oc=async(e,t,n)=>{const s=[],r=e.$containerEl$;e.$taskNext$.forEach(o=>{n(o,!1)&&(o.$el$.isConnected&&s.push(R(o.$qrl$.$resolveLazy$(r),()=>o)),e.$taskNext$.delete(o))});do if(e.$taskStaging$.forEach(o=>{o.$el$.isConnected&&(n(o,!0)?s.push(R(o.$qrl$.$resolveLazy$(r),()=>o)):e.$taskNext$.add(o))}),e.$taskStaging$.clear(),s.length>0){const o=await Promise.all(s);Ct(o);for(const i of o)Lt(i,e,t);s.length=0}while(e.$taskStaging$.size>0)},ic=e=>{e.sort((t,n)=>t.$element$.compareDocumentPosition(Ut(n.$element$))&2?1:-1)},Ct=e=>{const t=G();e.sort((n,s)=>t||n.$el$===s.$el$?n.$index$<s.$index$?-1:1:n.$el$.compareDocumentPosition(Ut(s.$el$))&2?1:-1)},cc=(e,t)=>{Pr(Ar(e,void 0),t)},Ts=(e,t)=>{Pr(Ar(e,\"document\"),t)},Ar=(e,t)=>{const n=t!==void 0?t+\":\":\"\";return Array.isArray(e)?e.map(r=>`${n}on-${r}`):`${n}on-${e}`},Pr=(e,t)=>{if(t){const n=ns(),s=K(n.$hostElement$,n.$renderCtx$.$static$.$containerState$);typeof e==\"string\"?s.li.push([yn(e),t]):s.li.push(...e.map(r=>[yn(r),t])),s.$flags$|=yt}},$c=e=>{const t=_c(),n=J(e)&&!ps(e)?U(void 0,e):e;return Ic(n,t,0)},lc=e=>{const{val:t,set:n}=Ae();return t??(e=J(e)&&!ps(e)?e():e,n(e))},Rt=e=>lc(()=>$c(e)),Nr=1,Cr=2,Dr=4,ac=8,Dt=16,uc=32,fc=(e,t)=>{const{val:n,set:s,iCtx:r,i:o,elCtx:i}=Ae();if(n)return;const c=r.$renderCtx$.$static$.$containerState$,$=new tn(Dt|Cr,o,i.$element$,e,void 0);s(!0),e.$resolveLazy$(c.$containerEl$),i.$tasks$||(i.$tasks$=[]),i.$tasks$.push($),Tc(r,()=>Or($,c,r.$renderCtx$)),G()&&bn($,t==null?void 0:t.eagerness)},dc=(e,t)=>{const{val:n,set:s,i:r,iCtx:o,elCtx:i}=Ae(),c=(t==null?void 0:t.strategy)??\"intersection-observer\";if(n){G()&&bn(n,c);return}const $=new tn(Nr,r,i.$element$,e,void 0),l=o.$renderCtx$.$static$.$containerState$;i.$tasks$||(i.$tasks$=[]),i.$tasks$.push($),s($),bn($,c),G()||(e.$resolveLazy$(l.$containerEl$),Yn($,l))},Lr=e=>(e.$flags$&Dr)!==0,pc=e=>(e.$flags$&ac)!==0,Lt=async(e,t,n)=>(re(!!(e.$flags$&Dt),!0,\"Resource is not dirty\",e),Lr(e)?hc(e,t,n):pc(e)?mc(e,t,n):Or(e,t,n)),hc=(e,t,n,s)=>{e.$flags$&=-17,$t(e);const r=e.$el$,o=X(n.$static$.$locale$,r,void 0,cr),{$subsManager$:i}=t;o.$renderCtx$=n;const c=e.$qrl$.getFn(o,()=>{i.$clearSub$(e)}),$=[],l=e.$state$;T(l,'useResource: when running a resource, \"task.r\" must be a defined.',e);const a=(p,E)=>{if(J(p)){const w=X();return w.$renderCtx$=n,w.$subscriber$=[0,e],U(w,p)}const h=V(p);return h?h.$addSub$([0,e],E):Rn(Gt(er),p),E?p[E]:Q(p)?p.value:p},u=wt(l),f={track:a,cleanup(p){$.push(p)},cache(p){let E=0;p===\"immutable\"?E=1/0:E=p,l._cache=E},previous:u._resolved};let d,v,x=!1;const m=(p,E)=>x?!1:(x=!0,p?(x=!0,l.loading=!1,l._state=\"resolved\",l._resolved=E,l._error=void 0,d(E)):(x=!0,l.loading=!1,l._state=\"rejected\",l._error=E,v(E)),!0);U(o,()=>{l._state=\"pending\",l.loading=!G(),l.value=new Promise((p,E)=>{d=p,v=E})}),e.$destroy$=ln(()=>{x=!0,$.forEach(p=>p())});const y=Nn(()=>R(s,()=>c(f)),p=>{m(!0,p)},p=>{m(!1,p)}),g=u._timeout;return g>0?Promise.race([y,Zo(g).then(()=>{m(!1,new Error(\"timeout\"))&&$t(e)})]):y},Or=(e,t,n)=>{e.$flags$&=-17,$t(e);const s=e.$el$,r=X(n.$static$.$locale$,s,void 0,cr);r.$renderCtx$=n;const{$subsManager$:o}=t,i=e.$qrl$.getFn(r,()=>{o.$clearSub$(e)}),c=(a,u)=>{if(J(a)){const d=X();return d.$subscriber$=[0,e],U(d,a)}const f=V(a);return f?f.$addSub$([0,e],u):Rn(Gt(er),a),u?a[u]:Q(a)?a.value:a},$=[];e.$destroy$=ln(()=>{$.forEach(a=>a())});const l={track:c,cleanup(a){$.push(a)}};return Nn(()=>i(l),a=>{J(a)&&$.push(a)},a=>{Hn(a,s,n)})},mc=(e,t,n)=>{e.$state$,e.$flags$&=-17,$t(e);const s=e.$el$,r=X(n.$static$.$locale$,s,void 0,ni);r.$subscriber$=[0,e],r.$renderCtx$=n;const{$subsManager$:o}=t,i=e.$qrl$.getFn(r,()=>{o.$clearSub$(e)}),c=l=>{Ue(()=>{const a=e.$state$;a[et]&=-3,a.untrackedValue=l,a[Z].$notifySubs$()})},$=l=>{Hn(l,s,n)};try{return R(e.$qrl$.$resolveLazy$(t.$containerEl$),()=>{const l=i();if(D(l)){const a=\"useComputed$: Async functions in computed tasks are deprecated and will stop working in v2. Use useTask$ or useResource$ instead.\",u=new Error(a).stack;if(!u)ys(a);else{const f=u.replace(/^Error:\\s*/,\"\");ys(f)}return l.then(c,$)}else c(l)})}catch(l){$(l)}},$t=e=>{const t=e.$destroy$;if(t){e.$destroy$=void 0;try{t()}catch(n){Te(n)}}},zr=e=>{if(e.$flags$&uc){e.$flags$&=-33;const t=e.$qrl$;t()}else $t(e)},bn=(e,t)=>{t===\"visible\"||t===\"intersection-observer\"?cc(\"qvisible\",dn(e)):t===\"load\"||t===\"document-ready\"?Ts(\"qinit\",dn(e)):(t===\"idle\"||t===\"document-idle\")&&Ts(\"qidle\",dn(e))},dn=e=>{const t=e.$qrl$,n=Xe(t.$chunk$,\"_hW\",tc,null,null,[e],t.$symbol$);return t.dev&&(n.dev=t.dev),n},Zn=e=>ge(e)&&e instanceof tn,gc=(e,t)=>{let n=`${Re(e.$flags$)} ${Re(e.$index$)} ${t(e.$qrl$)} ${t(e.$el$)}`;return e.$state$&&(n+=` ${t(e.$state$)}`),n},yc=e=>{const[t,n,s,r,o]=e.split(\" \");return new tn(se(t),se(n),r,s,o)};class tn{constructor(t,n,s,r,o){k(this,\"$flags$\");k(this,\"$index$\");k(this,\"$el$\");k(this,\"$qrl$\");k(this,\"$state$\");this.$flags$=t,this.$index$=n,this.$el$=s,this.$qrl$=r,this.$state$=o}}function vc(e){return Sc(e)&&e.nodeType===1}function Sc(e){return e&&typeof e.nodeType==\"number\"}const lt=1,yt=2,es=4,ts=8,te=e=>e[Xt],K=(e,t)=>{const n=te(e);if(n)return n;const s=nn(e),r=le(e,\"q:id\");if(r){const o=t.$pauseCtx$;if(s.$id$=r,o){const{getObject:i,meta:c,refs:$}=o;if(vc(e)){const l=$[r];l&&(s.$refMap$=l.split(\" \").map(i),s.li=ai(s,t.$containerEl$))}else{const l=e.getAttribute(sr);s.$scopeIds$=l?l.split(\"|\"):null;const a=c[r];if(a){const u=a.s,f=a.h,d=a.c,v=a.w;if(u&&(s.$seq$=u.split(\" \").map(i)),v&&(s.$tasks$=v.split(\" \").map(i)),d){s.$contexts$=new Map;for(const x of d.split(\" \")){const[m,y]=x.split(\"=\");s.$contexts$.set(m,i(y))}}if(f){const[x,m]=f.split(\" \");if(s.$flags$=es,x&&(s.$componentQrl$=i(x)),m){const y=i(m);s.$props$=y,jt(y,we),y[P]=bc(y)}else s.$props$=ht(Yt(),t)}}}}}return s},bc=e=>{const t={},n=Ne(e);for(const s in n)s.startsWith(fe)&&(t[s.slice(fe.length)]=n[s]);return t},nn=e=>{const t={$flags$:0,$id$:\"\",$element$:e,$refMap$:[],li:[],$tasks$:null,$seq$:null,$slots$:null,$scopeIds$:null,$appendStyles$:null,$props$:null,$vdom$:null,$componentQrl$:null,$contexts$:null,$dynamicSlots$:null,$parentCtx$:void 0,$realParentCtx$:void 0};return e[Xt]=t,t},wc=(e,t)=>{var n;(n=e.$tasks$)==null||n.forEach(s=>{t.$clearSub$(s),zr(s)}),e.$componentQrl$=null,e.$seq$=null,e.$tasks$=null};let Fe;function Ec(e){if(Fe===void 0){const t=Y();return t&&t.$locale$?t.$locale$:e}return Fe}function ks(e,t){const n=Fe;try{return Fe=e,t()}finally{Fe=n}}function xc(e){Fe=e}let Ze;const Y=()=>{if(!Ze){const e=typeof document<\"u\"&&document&&document.__q_context__;return e?A(e)?document.__q_context__=Ur(e):e:void 0}return Ze},Qr=()=>{const e=Y();if(!e)throw O(Vo);return e},ns=()=>{const e=Y();if(!e||e.$event$!==On)throw O(Go);return T(e.$hostElement$,\"invoke: $hostElement$ must be defined\",e),T(e.$waitOn$,\"invoke: $waitOn$ must be defined\",e),T(e.$renderCtx$,\"invoke: $renderCtx$ must be defined\",e),T(e.$subscriber$,\"invoke: $subscriber$ must be defined\",e),e},_c=()=>ns().$renderCtx$.$static$.$containerState$;function Is(e){if(e==null)return e;const t=Qr();return function(...n){return Fr.call(this,t,e,n)}}function U(e,t,...n){return Fr.call(this,e,t,n)}function Fr(e,t,n){const s=Ze;let r;try{Ze=e,r=t.apply(this,n)}finally{Ze=s}return r}const Tc=(e,t)=>{const n=e.$waitOn$;if(n.length===0){const s=t();D(s)&&n.push(s)}else n.push(Promise.all(n).then(t))},Ur=([e,t,n])=>{const s=e.closest(ir),r=(s==null?void 0:s.getAttribute(ti))||void 0;return r&&xc(r),X(r,void 0,e,t,n)},X=(e,t,n,s,r)=>{const o=e||(typeof s==\"object\"&&s&&\"locale\"in s?s.locale:void 0);return{$url$:r,$i$:0,$hostElement$:t,$element$:n,$event$:s,$qrl$:void 0,$waitOn$:void 0,$subscriber$:void 0,$renderCtx$:void 0,$locale$:o}},ss=e=>e.closest(ir),Ue=e=>U(void 0,e),Rs=X(void 0,void 0,void 0,On),$e=(e,t)=>(Rs.$subscriber$=t,U(Rs,()=>e.value)),kc=e=>{const t=Y();if(t&&t.$hostElement$&&t.$renderCtx$){const n=t.$hostElement$,s=K(n,t.$renderCtx$.$static$.$containerState$);s.$flags$|=ts}return e},Ic=(e,t,n,s)=>{const r=t.$subsManager$.$createManager$(s);return new at(e,r,n)},et=Symbol(\"proxy manager\"),Rc=1,Mc=2,Wr=Symbol(\"unassigned signal\");class vt{}var Gs,Js,Ks;class at extends(Ks=vt,Js=Z,Gs=et,Ks){constructor(n,s,r){super();k(this,\"untrackedValue\");k(this,Js);k(this,Gs,0);this.untrackedValue=n,this[Z]=s,this[et]=r}valueOf(){}toString(){return`[Signal ${String(this.value)}]`}toJSON(){return{value:this.value}}get value(){var s;if(this[et]&Mc)throw Wr;const n=(s=Y())==null?void 0:s.$subscriber$;return n&&this[Z].$addSub$(n),this.untrackedValue}set value(n){const s=this[Z],r=this.untrackedValue;s&&r!==n&&(this.untrackedValue=n,s.$notifySubs$())}}class wn extends vt{constructor(n,s,r){super();k(this,\"$func$\");k(this,\"$args$\");k(this,\"$funcStr$\");this.$func$=n,this.$args$=s,this.$funcStr$=r}get value(){return this.$func$.apply(void 0,this.$args$)}}class En extends vt{constructor(n,s){super();k(this,\"ref\");k(this,\"prop\");this.ref=n,this.prop=s}get[Z](){return V(this.ref)}get value(){return this.ref[this.prop]}set value(n){this.ref[this.prop]=n}}const Q=e=>e instanceof vt,Hr=(e,t)=>{var r,o;if(!ge(e))return e[t];if(e instanceof vt)return re(),e;const n=Ne(e);if(n){const i=n[fe+t];if(i)return N(),i;if(((r=n[P])==null?void 0:r[t])!==!0)return new En(e,t)}const s=(o=e[P])==null?void 0:o[t];return Q(s)?s:P},qc=(e,t)=>{const n=Hr(e,t);return n===P?e[t]:n},Ms=Symbol(\"ContainerState\"),sn=e=>{let t=e[Ms];return t||(e[Ms]=t=rs(e,le(e,\"q:base\")??\"/\")),t},rs=(e,t)=>{const n={};if(e){const r=e.attributes;if(r)for(let o=0;o<r.length;o++){const i=r[o];n[i.name]=i.value}}const s={$containerEl$:e,$elementIndex$:0,$styleMoved$:!1,$proxyMap$:new WeakMap,$opsNext$:new Set,$taskNext$:new Set,$taskStaging$:new Set,$hostsNext$:new Set,$hostsStaging$:new Set,$styleIds$:new Set,$events$:new Set,$serverData$:{containerAttributes:n},$base$:t,$renderPromise$:void 0,$hostsRendering$:void 0,$pauseCtx$:void 0,$subsManager$:null,$inlineFns$:new Map};return s.$subsManager$=nl(s),s},os=(e,t)=>{if(J(e))return e(t);if(Q(e))return G()?e.untrackedValue=t:e.value=t;throw O(Xo,e)},Ac=128,Pc=e=>Je(e)&&e.hasAttribute(Ln),Re=e=>e.toString(36),se=e=>parseInt(e,36),Br=e=>{const t=e.indexOf(\":\");return e&&ri(e.slice(t+1))},St=\"http://www.w3.org/2000/svg\",Ee=1,is=2,pn=4,Ot=[],zt=(e,t,n,s)=>{t.$elm$;const r=n.$children$;if(r.length===1&&r[0].$type$===Nt){n.$children$=t.$children$;return}const o=t.$elm$,i=t.$children$===Ot;let c=Ft;i&&o.nodeName===\"HEAD\"&&(c=Dc,s|=is);const $=Nc(t,c);if($.length>0&&r.length>0)return Cc(e,o,$,r,s);if($.length>0&&r.length===0)return cs(e.$static$,$,0,$.length-1);if(r.length>0)return Kr(e,o,null,r,0,r.length-1,s)},Nc=(e,t)=>{const n=e.$children$,s=e.$elm$;return n===Ot?e.$children$=Vr(s,t):n},Cc=(e,t,n,s,r)=>{let o=0,i=0,c=n.length-1,$=n[0],l=n[c],a=s.length-1,u=s[0],f=s[a],d,v,x;const m=[],y=e.$static$;for(;o<=c&&i<=a;)if($==null)$=n[++o];else if(l==null)l=n[--c];else if(u==null)u=s[++i];else if(f==null)f=s[--a];else if($.$id$===u.$id$)m.push(Ce(e,$,u,r)),$=n[++o],u=s[++i];else if(l.$id$===f.$id$)m.push(Ce(e,l,f,r)),l=n[--c],f=s[--a];else if($.$key$&&$.$id$===f.$id$)T($.$elm$),T(l.$elm$),m.push(Ce(e,$,f,r)),Yc(y,t,$.$elm$,l.$elm$),$=n[++o],f=s[--a];else if(l.$key$&&l.$id$===u.$id$)T($.$elm$),T(l.$elm$),m.push(Ce(e,l,u,r)),Qe(y,t,l.$elm$,$.$elm$),l=n[--c],u=s[++i];else{if(d===void 0&&(d=Jc(n,o,c)),v=d[u.$key$],v===void 0){const p=xe(e,u,r,m);Qe(y,t,p,$==null?void 0:$.$elm$)}else if(x=n[v],x.$type$!==u.$type$){const p=xe(e,u,r,m);R(p,E=>{Qe(y,t,E,$==null?void 0:$.$elm$)})}else m.push(Ce(e,x,u,r)),n[v]=void 0,T(x.$elm$),Qe(y,t,x.$elm$,$.$elm$);u=s[++i]}if(i<=a){const p=s[a+1]==null?null:s[a+1].$elm$;m.push(Kr(e,t,p,s,i,a,r))}let g=Cn(m);return o<=c&&(g=R(g,()=>{cs(y,n,o,c)})),g},ze=(e,t)=>{const n=ie(e)?e.close:null,s=[];let r=e.firstChild;for(;(r=ro(r))&&(t(r)&&s.push(r),r=r.nextSibling,r!==n););return s},Vr=(e,t)=>ze(e,t).map(Gr),Gr=e=>{var t;return Je(e)?((t=te(e))==null?void 0:t.$vdom$)??Qt(e):Qt(e)},Qt=e=>{if(qe(e)){const t=new he(e.localName,{},null,Ot,0,_n(e));return t.$elm$=e,t}else if(Ys(e)){const t=new he(e.nodeName,F,null,Ot,0,null);return t.$text$=e.data,t.$elm$=e,t}qn()},Dc=e=>{const t=e.nodeType;return t===1?e.hasAttribute(\"q:head\"):t===111},xn=e=>e.nodeName===\"Q:TEMPLATE\",Ft=e=>{const t=e.nodeType;if(t===3||t===111)return!0;if(t!==1)return!1;const n=e.nodeName;return n===\"Q:TEMPLATE\"?!1:n===\"HEAD\"?e.hasAttribute(\"q:head\"):n===\"STYLE\"?!e.hasAttribute(Kt):!0},Jr=e=>{const t={};for(const n of e){const s=Lc(n);(t[s]??(t[s]=new he(Ve,{[ke]:\"\"},null,[],0,s))).$children$.push(n)}return t},Ce=(e,t,n,s)=>{re(t.$type$,n.$type$),re(t.$key$,n.$key$),re(t.$id$,n.$id$);const r=t.$elm$,o=n.$type$,i=e.$static$,c=i.$containerState$,$=e.$cmpCtx$;if(T(),T(),n.$elm$=r,o===\"#text\"){i.$visited$.push(r);const f=n.$signal$;f&&(n.$text$=ot($e(f,[4,$.$element$,f,r]))),be(i,r,\"data\",n.$text$);return}else if(o===\"#signal\")return;const l=n.$props$,a=n.$flags$,u=K(r,c);if(o!==Ve){let f=(s&Ee)!==0;if(!f&&o===\"svg\"&&(s|=Ee,f=!0),l!==F){a&bi||(u.li.length=0);const v=t.$props$;n.$props$=v;for(const x in l){let m=l[x];if(x===\"ref\"){m!==void 0&&os(m,r);continue}if(Un(x)){const y=Wn(u.li,x,m,c.$containerEl$);jr(i,r,y);continue}Q(m)&&(m=$e(m,[1,$.$element$,m,r,x])),x===\"class\"?m=Bn(m,$):x===\"style\"&&(m=Zt(m)),v[x]!==m&&(v[x]=m,$s(i,r,x,m,f))}}return a&it||(f&&o===\"foreignObject\"&&(s&=-2),l[B]!==void 0)||o===\"textarea\"?void 0:zt(e,t,n,s)}else if(Be in l){const f=l.props;Hc(c,u,f);let d=!!(u.$flags$&lt);return!d&&!u.$componentQrl$&&!u.$element$.hasAttribute(zn)&&(fr(e,u),u.$componentQrl$=f[Be],u.$componentQrl$,d=!0),d?R(Kn(e,u,s),()=>qs(e,u,n,s)):qs(e,u,n,s)}else if(ke in l){T($.$slots$),$.$slots$.push(n);return}else if(B in l){be(i,r,\"innerHTML\",l[B]);return}if(!(a&it))return zt(e,t,n,s)},qs=(e,t,n,s)=>{if(n.$flags$&it)return;const r=n.$children$,o=e.$static$,i=Jr(r),c=Yr(t);for(const $ in c.slots)if(!i[$]){const l=c.slots[$],a=Vr(l,Ft);if(a.length>0){const u=te(l);u&&u.$vdom$&&(u.$vdom$.$children$=[]),cs(o,a,0,a.length-1)}}for(const $ in c.templates){const l=c.templates[$];l&&!i[$]&&(c.templates[$]=void 0,as(o,l))}return Cn(Object.keys(i).map($=>{const l=i[$],a=Xr(o,c,t,$,e.$static$.$containerState$),u=Xn(a),f=gt(e),d=a.$element$;f.$slotCtx$=a,a.$vdom$=l,l.$elm$=d;let v=s&-2;d.isSvg&&(v|=Ee);const x=o.$addSlots$.findIndex(m=>m[0]===d);return x>=0&&o.$addSlots$.splice(x,1),zt(f,u,l,v)}))},Kr=(e,t,n,s,r,o,i)=>{const c=[];for(;r<=o;++r){const $=s[r];T($,\"render: node must be defined at index\",r,s);const l=xe(e,$,i,c);Qe(e.$static$,t,l,n)}return De(c)},cs=(e,t,n,s)=>{for(;n<=s;++n){const r=t[n];r&&(T(r.$elm$),as(e,r.$elm$))}},Xr=(e,t,n,s,r)=>{const o=t.slots[s];if(o)return K(o,r);const i=t.templates[s];if(i)return K(i,r);const c=no(e.$doc$,s),$=nn(c);return $.$parentCtx$=n,e$(e,n.$element$,c),t.templates[s]=c,$},Lc=e=>e.$props$[j]??\"\",xe=(e,t,n,s)=>{const r=t.$type$,o=e.$static$.$doc$,i=e.$cmpCtx$;if(r===\"#text\")return t.$elm$=o.createTextNode(t.$text$);if(r===\"#signal\"){const m=t.$signal$;T(),T();const y=m.value;if(Pe(y)){const g=Se(y);if(Q(g))throw new Error(\"NOT IMPLEMENTED: Promise\");if(Array.isArray(g))throw new Error(\"NOT IMPLEMENTED: Array\");{const p=xe(e,g,n,s);return $e(m,n&pn?[3,p,m,p]:[4,i.$element$,m,p]),t.$elm$=p}}else{const g=o.createTextNode(t.$text$);return g.data=t.$text$=ot(y),$e(m,n&pn?[3,g,m,g]:[4,i.$element$,m,g]),t.$elm$=g}}let c,$=!!(n&Ee);!$&&r===\"svg\"&&(n|=Ee,$=!0);const l=r===Ve,a=t.$props$,u=e.$static$,f=u.$containerState$;l?c=i$(o,$):r===\"head\"?(c=o.head,n|=is):(c=ls(o,r,$),n&=-3),t.$flags$&it&&(n|=pn),t.$elm$=c;const d=nn(c);if(e.$slotCtx$?(d.$parentCtx$=e.$slotCtx$,d.$realParentCtx$=e.$cmpCtx$):d.$parentCtx$=e.$cmpCtx$,l){if(Be in a){const m=a[Be],y=Yt(),g=f.$subsManager$.$createManager$(),p=new Proxy(y,new $r(f,g)),E=a.props;if(f.$proxyMap$.set(y,p),d.$props$=p,E!==F){const w=y[P]=E[P]??F;for(const _ in E)if(_!==\"children\"&&_!==j){const b=w[_];Q(b)?y[fe+_]=b:y[_]=E[_]}}fr(e,d),d.$componentQrl$=m;const h=R(Kn(e,d,n),()=>{let w=t.$children$;if(w.length===0)return;w.length===1&&w[0].$type$===Nt&&(w=w[0].$children$);const _=Yr(d),b=[],S=Jr(w);for(const I in S){const q=S[I],L=Xr(u,_,d,I,u.$containerState$),W=gt(e),ne=L.$element$;W.$slotCtx$=L,L.$vdom$=q,q.$elm$=ne;let Ye=n&-2;ne.isSvg&&(Ye|=Ee);for(const H of q.$children$){const z=xe(W,H,Ye,b);T(H.$elm$),re(z,H.$elm$),to(u,ne,z)}}return De(b)});return D(h)&&s.push(h),c}else if(ke in a)T(),T(i.$slots$),r$(c,t.$key$),oe(c,Dn,i.$id$),oe(c,ke,\"\"),i.$slots$.push(t),u.$addSlots$.push([c,i.$element$]);else if(B in a)return be(u,c,\"innerHTML\",a[B]),c}else{if(t.$immutableProps$){const y=a!==F?Object.fromEntries(Object.entries(t.$immutableProps$).map(([g,p])=>[g,p===P?a[g]:p])):t.$immutableProps$;Ns(u,d,i,y,$,!0)}if(a!==F){d.$vdom$=t;const y=t.$immutableProps$?Object.fromEntries(Object.entries(a).filter(([g])=>!(g in t.$immutableProps$))):a;t.$props$=Ns(u,d,i,y,$,!1)}if($&&r===\"foreignObject\"&&($=!1,n&=-2),i){const y=i.$scopeIds$;y&&y.forEach(g=>{c.classList.add(g)}),i.$flags$&yt&&(d.li.push(...i.li),i.$flags$&=-3)}for(const y of d.li)jr(u,c,y[0]);if(a[B]!==void 0)return c;$&&r===\"foreignObject\"&&($=!1,n&=-2)}let v=t.$children$;if(v.length===0)return c;v.length===1&&v[0].$type$===Nt&&(v=v[0].$children$);const x=v.map(m=>xe(e,m,n,s));for(const m of x)ut(c,m);return c},Oc=e=>{const t=e.$slots$;return t||(e.$element$.parentElement,T(),e.$slots$=zc(e))},Yr=e=>{const t=Oc(e),n={},s={},r=Array.from(e.$element$.childNodes).filter(xn);for(const o of t)o.$elm$,n[o.$key$??\"\"]=o.$elm$;for(const o of r)s[le(o,j)??\"\"]=o;return{slots:n,templates:s}},zc=e=>{const t=e.$element$.parentElement;return T(),u$(t,Dn,e.$id$).map(Qt)},Qc=(e,t,n)=>(be(e,t.style,\"cssText\",n),!0),As=(e,t,n)=>(N(n==null||typeof n==\"string\",\"class newValue must be either nullish or string\",n),t.namespaceURI===St?ft(e,t,\"class\",n):be(e,t,\"className\",n),!0),Ps=(e,t,n,s)=>s in t?((t[s]!==n||s===\"value\"&&!t.hasAttribute(s))&&(s===\"value\"&&t.tagName!==\"OPTION\"?Xc(e,t,s,n):be(e,t,s,n)),!0):!1,je=(e,t,n,s)=>(ft(e,t,s.toLowerCase(),n),!0),Fc=(e,t,n)=>(be(e,t,\"innerHTML\",n),!0),Uc=()=>!0,Wc={style:Qc,class:As,className:As,value:Ps,checked:Ps,href:je,list:je,form:je,tabIndex:je,download:je,innerHTML:Uc,[B]:Fc},$s=(e,t,n,s,r)=>{if(dr(n)){ft(e,t,n,s!=null?String(s):s);return}const o=Wc[n];if(!(o&&o(e,t,s,n))){if(!r&&n in t){be(e,t,n,s);return}n.startsWith(Mt)&&Zr(n.slice(Mt.length)),ft(e,t,n,s)}},Ns=(e,t,n,s,r,o)=>{const i={},c=t.$element$;for(const $ in s){let l=s[$];if($===\"ref\"){l!==void 0&&os(l,c);continue}if(Un($)){Wn(t.li,$,l,e.$containerState$.$containerEl$);continue}if(Q(l)&&(T(),l=$e(l,o?[1,c,l,n.$element$,$]:[2,n.$element$,l,c,$])),$===\"class\"){if(l=Bn(l,n),!l)continue}else $===\"style\"&&(l=Zt(l));i[$]=l,$s(e,c,$,l,r)}return i},Hc=(e,t,n)=>{let s=t.$props$;if(s||(t.$props$=s=ht(Yt(),e)),n===F)return;const r=V(s);T(r,\"props have to be a proxy, but it is not\",s);const o=Ne(s);T(o,\"props have to be a proxy, but it is not\",s);const i=o[P]=n[P]??F;for(const c in n)if(c!==\"children\"&&c!==j&&!i[c]){const $=n[c];o[c]!==$&&(o[c]=$,r.$notifySubs$(c))}},tt=(e,t,n,s)=>{if(n.$clearSub$(e),qe(e)){if(s&&e.hasAttribute(ke)){t.$rmSlots$.push(e);return}const r=te(e);r&&wc(r,n);const o=ie(e)?e.close:null;let i=e.firstChild;for(;(i=ro(i))&&(tt(i,t,n,!0),i=i.nextSibling,i!==o););}},Bc=async e=>{s$(e)},ut=(e,t)=>{ie(t)?t.appendTo(e):e.appendChild(t)},Vc=(e,t)=>{ie(t)?t.remove():e.removeChild(t)},Gc=(e,t,n)=>{ie(t)?t.insertBeforeTo(e,(n==null?void 0:n.nextSibling)??null):e.insertBefore(t,(n==null?void 0:n.nextSibling)??null)},rn=(e,t,n)=>{ie(t)?t.insertBeforeTo(e,Ut(n)):e.insertBefore(t,Ut(n))},Jc=(e,t,n)=>{const s={};for(let r=t;r<=n;++r){const i=e[r].$key$;i!=null&&(s[i]=r)}return s},jr=(e,t,n)=>{n.startsWith(\"on:\")||ft(e,t,n,\"\"),Zr(n)},Zr=e=>{{const t=Br(e);try{(globalThis.qwikevents||(globalThis.qwikevents=[])).push(t)}catch{ce()}}},ft=(e,t,n,s)=>{e.$operations$.push({$operation$:Kc,$args$:[t,n,s]})},Kc=(e,t,n)=>{if(n==null||n===!1)e.removeAttribute(t);else{const s=n===!0?\"\":String(n);oe(e,t,s)}},be=(e,t,n,s)=>{e.$operations$.push({$operation$:eo,$args$:[t,n,s]})},Xc=(e,t,n,s)=>{e.$postOperations$.push({$operation$:eo,$args$:[t,n,s]})},eo=(e,t,n)=>{try{e[t]=n??\"\",n==null&&Me(e)&&Je(e)&&e.removeAttribute(t)}catch(s){Te(Gt(Wo),t,{node:e,value:n},s)}},ls=(e,t,n)=>n?e.createElementNS(St,t):e.createElement(t),Qe=(e,t,n,s)=>(e.$operations$.push({$operation$:rn,$args$:[t,n,s||null]}),n),Yc=(e,t,n,s)=>(e.$operations$.push({$operation$:Gc,$args$:[t,n,s||null]}),n),to=(e,t,n)=>(e.$operations$.push({$operation$:ut,$args$:[t,n]}),n),jc=(e,t)=>{e.$containerState$.$styleIds$.add(t.styleId),e.$postOperations$.push({$operation$:Zc,$args$:[e.$containerState$,t]})},Zc=(e,t)=>{const n=e.$containerEl$,s=Jt(n),r=s.documentElement===n,o=s.head,i=s.createElement(\"style\");r&&!o&&ce(),oe(i,Kt,t.styleId),oe(i,\"hidden\",\"\"),i.textContent=t.content,r&&o?ut(o,i):rn(n,i,n.firstChild)},e$=(e,t,n)=>{e.$operations$.push({$operation$:t$,$args$:[t,n]})},t$=(e,t)=>{rn(e,t,e.firstChild)},as=(e,t)=>{if(qe(t)){const n=e.$containerState$.$subsManager$;tt(t,e,n,!0)}e.$operations$.push({$operation$:n$,$args$:[t,e]})},n$=(e,t)=>{const n=e.parentElement;n&&Vc(n,e)},no=(e,t)=>{const n=ls(e,\"q:template\",!1);return oe(n,j,t),oe(n,\"hidden\",\"\"),oe(n,\"aria-hidden\",\"true\"),n},s$=e=>{for(const t of e.$operations$)t.$operation$.apply(void 0,t.$args$);o$(e)},_n=e=>le(e,\"q:key\"),r$=(e,t)=>{t!==null&&oe(e,\"q:key\",t)},o$=e=>{const t=e.$containerState$.$subsManager$;for(const n of e.$rmSlots$){const s=_n(n);T();const r=ze(n,Ft);if(r.length>0){const o=n.getAttribute(Dn),i=e.$roots$.find(c=>c.$id$===o);if(i){const c=i.$element$;if(c.isConnected)if(ze(c,xn).some(l=>le(l,j)===s))tt(n,e,t,!1);else{const l=no(e.$doc$,s);for(const a of r)ut(l,a);rn(c,l,c.firstChild)}else tt(n,e,t,!1)}else tt(n,e,t,!1)}}for(const[n,s]of e.$addSlots$){const r=_n(n);T();const o=ze(s,xn).find(i=>i.getAttribute(j)===r);o&&(ze(o,Ft).forEach(i=>{ut(n,i)}),o.remove())}},Cs=e=>{},i$=(e,t)=>{const n=e.createComment(\"qv \"),s=e.createComment(\"/qv\");return new so(n,s,t)},c$=e=>{if(!e)return{};const t=e.split(\" \");return Object.fromEntries(t.map(n=>{const s=n.indexOf(\"=\");return s>=0?[n.slice(0,s),f$(n.slice(s+1))]:[n,\"\"]}))},$$=128,l$=1,Ds=2,a$=(e,t,n)=>e.ownerDocument.createTreeWalker(e,$$,{acceptNode(s){const r=bt(s);return r&&le(r,t)===n?l$:Ds}}),u$=(e,t,n)=>{const s=a$(e,t,n),r=[];let o=null;for(;o=s.nextNode();)r.push(bt(o));return r},f$=e=>e.replace(/\\+/g,\" \"),Ve=\":virtual\";class so{constructor(t,n,s){k(this,\"open\");k(this,\"close\");k(this,\"isSvg\");k(this,\"ownerDocument\");k(this,\"_qc_\",null);k(this,\"nodeType\",111);k(this,\"localName\",Ve);k(this,\"nodeName\",Ve);k(this,\"$attributes$\");k(this,\"$template$\");this.open=t,this.close=n,this.isSvg=s;const r=this.ownerDocument=t.ownerDocument;this.$template$=ls(r,\"template\",!1),this.$attributes$=c$(t.data.slice(3)),N(t.data.startsWith(\"qv \")),t[st]=this,n[st]=this}insertBefore(t,n){const s=this.parentElement;if(s){const r=n||this.close;s.insertBefore(t,r)}else this.$template$.insertBefore(t,n);return t}remove(){const t=this.parentElement;if(t){const n=this.childNodes;re(this.$template$.childElementCount),t.removeChild(this.open);for(let s=0;s<n.length;s++)this.$template$.appendChild(n[s]);t.removeChild(this.close)}}appendChild(t){return this.insertBefore(t,null)}insertBeforeTo(t,n){const s=this.childNodes;t.insertBefore(this.open,n);for(const r of s)t.insertBefore(r,n);t.insertBefore(this.close,n),re(this.$template$.childElementCount)}appendTo(t){this.insertBeforeTo(t,null)}get namespaceURI(){var t;return((t=this.parentElement)==null?void 0:t.namespaceURI)??\"\"}removeChild(t){this.parentElement?this.parentElement.removeChild(t):this.$template$.removeChild(t)}getAttribute(t){return this.$attributes$[t]??null}hasAttribute(t){return t in this.$attributes$}setAttribute(t,n){this.$attributes$[t]=n}removeAttribute(t){delete this.$attributes$[t]}matches(t){return!1}compareDocumentPosition(t){return this.open.compareDocumentPosition(t)}closest(t){const n=this.parentElement;return n?n.closest(t):null}querySelectorAll(t){const n=[];return ze(this,Oo).forEach(r=>{qe(r)&&(r.matches(t)&&n.push(r),n.concat(Array.from(r.querySelectorAll(t))))}),n}querySelector(t){for(const n of this.childNodes)if(Je(n)){if(n.matches(t))return n;const s=n.querySelector(t);if(s!==null)return s}return null}get innerHTML(){return\"\"}set innerHTML(t){const n=this.parentElement;n?(this.childNodes.forEach(s=>this.removeChild(s)),this.$template$.innerHTML=t,n.insertBefore(this.$template$.content,this.close)):this.$template$.innerHTML=t}get firstChild(){if(this.parentElement){const t=this.open.nextSibling;return t===this.close?null:t}else return this.$template$.firstChild}get nextSibling(){return this.close.nextSibling}get previousSibling(){return this.open.previousSibling}get childNodes(){if(!this.parentElement)return Array.from(this.$template$.childNodes);const t=[];let n=this.open;for(;(n=n.nextSibling)&&n!==this.close;)t.push(n);return t}get isConnected(){return this.open.isConnected}get parentElement(){return this.open.parentElement}}const ro=e=>{if(e==null)return null;if(Bt(e)){const t=bt(e);if(t)return t}return e},d$=e=>{let t=e,n=1;for(;t=t.nextSibling;)if(Bt(t)){const s=t[st];if(s)t=s;else if(t.data.startsWith(\"qv \"))n++;else if(t.data===\"/qv\"&&(n--,n===0))return t}qn()},bt=e=>{var n;const t=e[st];if(t)return t;if(e.data.startsWith(\"qv \")){const s=d$(e);return new so(e,s,((n=e.parentElement)==null?void 0:n.namespaceURI)===St)}return null},Ut=e=>e==null?null:ie(e)?e.open:e,Gl=async(e,t)=>{const n=rs(null,null),s=oo(n);M(e,s,!1);let r;for(;(r=s.$promises$).length>0;){s.$promises$=[];const a=await Promise.allSettled(r);for(const u of a)u.status===\"rejected\"&&console.error(u.reason)}const o=Array.from(s.$objSet$.keys());let i=0;const c=new Map;for(const a of o)c.set(a,Re(i)),i++;if(s.$noSerialize$.length>0){const a=c.get(void 0);T();for(const u of s.$noSerialize$)c.set(u,a)}const $=a=>{let u=\"\";if(D(a)){const d=io(a);if(!d)throw O(mn,a);a=d.value,d.resolved?u+=\"~\":u+=\"_\"}if(ge(a)){const d=Ne(a);d&&(u+=\"!\",a=d)}const f=c.get(a);if(f===void 0)throw O(mn,a);return f+u},l=$o(o,$,null,s,n);return JSON.stringify({_entry:$(e),_objs:l})},Jl=async(e,t,n,s)=>{var E;const r=oo(t);s==null||s.forEach((h,w)=>{r.$seen$.add(w)});let o=!1;for(const h of e)if(h.$tasks$)for(const w of h.$tasks$)Lr(w)&&r.$resources$.push(w.$state$),zr(w);for(const h of e){const w=h.$element$,_=h.li;for(const b of _)if(Je(w)){const S=b[1],I=S.$captureRef$;if(I)for(const q of I)M(q,r,!0);r.$qrls$.push(S),o=!0}}if(!o)return{state:{refs:{},ctx:{},objs:[],subs:[]},objs:[],funcs:[],qrls:[],resources:r.$resources$,mode:\"static\"};let i;for(;(i=r.$promises$).length>0;)r.$promises$=[],await Promise.all(i);const c=r.$elements$.length>0;if(c){for(const h of r.$deferElements$)us(h,r,h.$element$);for(const h of e)p$(h,r)}for(;(i=r.$promises$).length>0;)r.$promises$=[],await Promise.all(i);const $=new Map,l=Array.from(r.$objSet$.keys()),a=new Map,u=h=>{let w=$.get(h);return w===void 0&&(w=v$(h),w||console.warn(\"Missing ID\",h),$.set(h,w)),w},f=h=>{let w=\"\";if(D(h)){const S=io(h);if(!S)return null;h=S.value,S.resolved?w+=\"~\":w+=\"_\"}if(ge(h)){const S=Ne(h);if(S)w+=\"!\",h=S;else if(qe(h)){const I=u(h);return I?si+I+w:null}}const _=a.get(h);if(_)return _+w;const b=s==null?void 0:s.get(h);return b?\"*\"+b:null},d=h=>{const w=f(h);if(w===null)if(an(h)){const _=Re(a.size);return a.set(h,_),_}else throw O(mn,h);return w},v=new Map;for(const h of l){const w=(E=y$(h,t))==null?void 0:E.$subs$;if(!w)continue;const _=vo(h)??0,b=[];_&nt&&b.push(_);for(const S of w){const I=S[1];S[0]===0&&Me(I)&&ie(I)&&!r.$elements$.includes(te(I))||b.push(S)}b.length>0&&v.set(h,b)}l.sort((h,w)=>{const _=v.has(h)?0:1,b=v.has(w)?0:1;return _-b});let x=0;for(const h of l)a.set(h,Re(x)),x++;if(r.$noSerialize$.length>0){const h=a.get(void 0);T();for(const w of r.$noSerialize$)a.set(w,h)}const m=[];for(const h of l){const w=v.get(h);if(w==null)break;m.push(w.map(_=>typeof _==\"number\"?`_${_}`:el(_,f)).filter(nr))}re(m.length,v.size,\"missing subscriptions to serialize\",m,v);const y=$o(l,d,f,r,t),g={},p={};for(const h of e){const w=h.$element$,_=h.$id$,b=h.$refMap$,S=h.$props$,I=h.$contexts$,q=h.$tasks$,L=h.$componentQrl$,W=h.$seq$,ne={},Ye=ie(w)&&r.$elements$.includes(h);if(T(_,\"pause: can not generate ID for dom node\",w),b.length>0){const H=_e(b,d,\" \");H&&(p[_]=H)}else if(c){let H=!1;if(Ye){T();const z=f(S);ne.h=d(L)+(z?\" \"+z:\"\"),H=!0}else{const z=f(S);z&&(ne.h=\" \"+z,H=!0)}if(q&&q.length>0){const z=_e(q,f,\" \");z&&(ne.w=z,H=!0)}if(Ye&&W&&W.length>0){const z=_e(W,d,\" \");ne.s=z,H=!0}if(I){const z=[];I.forEach((qo,Ao)=>{const gs=f(qo);gs&&z.push(`${Ao}=${gs}`)});const ms=z.join(\" \");ms&&(ne.c=ms,H=!0)}H&&(g[_]=ne)}}return{state:{refs:p,ctx:g,objs:y,subs:m},objs:l,funcs:r.$inlinedFunctions$,resources:r.$resources$,qrls:r.$qrls$,mode:c?\"render\":\"listeners\"}},_e=(e,t,n)=>{let s=\"\";for(const r of e){const o=t(r);o!==null&&(s!==\"\"&&(s+=n),s+=o)}return s},p$=(e,t)=>{var r;const n=e.$realParentCtx$||e.$parentCtx$,s=e.$props$;if(n&&s&&!co(s)&&t.$elements$.includes(n)){const o=(r=V(s))==null?void 0:r.$subs$,i=e.$element$;if(o)for(const[c,$]of o)c===0?($!==i&&Ge(V(s),t,!1),Me($)?m$($,t):M($,t,!0)):(M(s,t,!1),Ge(V(s),t,!1))}},oo=e=>{const t=[];return e.$inlineFns$.forEach((n,s)=>{for(;t.length<=n;)t.push(\"\");t[n]=s}),{$containerState$:e,$seen$:new Set,$objSet$:new Set,$prefetch$:0,$noSerialize$:[],$inlinedFunctions$:t,$resources$:[],$elements$:[],$qrls$:[],$deferElements$:[],$promises$:[]}},h$=(e,t)=>{const n=te(e);t.$elements$.includes(n)||(t.$elements$.push(n),n.$flags$&ts?(t.$prefetch$++,us(n,t,!0),t.$prefetch$--):t.$deferElements$.push(n))},m$=(e,t)=>{const n=te(e);if(n){if(t.$elements$.includes(n))return;t.$elements$.push(n),us(n,t,e)}},us=(e,t,n)=>{if(e.$props$&&!co(e.$props$)&&(M(e.$props$,t,n),Ge(V(e.$props$),t,n)),e.$componentQrl$&&M(e.$componentQrl$,t,n),e.$seq$)for(const s of e.$seq$)M(s,t,n);if(e.$tasks$){const s=t.$containerState$.$subsManager$.$groupToManagers$;for(const r of e.$tasks$)s.has(r)&&M(r,t,n)}if(n===!0&&(Ls(e,t),e.$dynamicSlots$))for(const s of e.$dynamicSlots$)Ls(s,t)},Ls=(e,t)=>{for(;e;){if(e.$contexts$)for(const n of e.$contexts$.values())M(n,t,!0);e=e.$parentCtx$}},Ge=(e,t,n)=>{if(t.$seen$.has(e))return;t.$seen$.add(e);const s=e.$subs$;T();for(const r of s)if(r[0]>0&&M(r[2],t,n),n===!0){const i=r[1];Me(i)&&ie(i)?r[0]===0&&h$(i,t):M(i,t,!0)}},Tn=Symbol(),g$=e=>e.then(t=>{const n={resolved:!0,value:t};return e[Tn]=n,t},t=>{const n={resolved:!1,value:t};return e[Tn]=n,t}),io=e=>e[Tn],M=(e,t,n)=>{if(e!=null){const s=typeof e;switch(s){case\"function\":case\"object\":{if(t.$seen$.has(e))return;if(t.$seen$.add(e),go(e)){t.$objSet$.add(void 0),t.$noSerialize$.push(e);return}const r=e,o=Ne(e);if(o){e=o;const c=(vo(e)&we)===0;if(n&&c&&Ge(V(r),t,n),yo(r)){t.$objSet$.add(e);return}}if(G$(e,t,n)){t.$objSet$.add(e);return}if(D(e)){t.$promises$.push(g$(e).then(c=>{M(c,t,n)}));return}if(s===\"object\"){if(Me(e))return;if(A(e))for(let c=0;c<e.length;c++)M(r[c],t,n);else if(pt(e))for(const c in e)M(r[c],t,n)}break}}}t.$objSet$.add(e)},y$=(e,t)=>{if(!ge(e))return;if(e instanceof at)return V(e);const n=t.$proxyMap$.get(e);if(n)return V(n)},v$=e=>{const t=te(e);return t?t.$id$:null},co=e=>Object.keys(e).length===0;function $o(e,t,n,s,r){return e.map(o=>{if(o===null)return null;const i=typeof o;switch(i){case\"undefined\":return cn;case\"number\":if(!Number.isFinite(o))break;return o;case\"string\":if(o.charCodeAt(0)<32)break;return o;case\"boolean\":return o}const c=J$(o,t,s,r);if(c!==void 0)return c;if(i===\"object\"){if(A(o))return o.map(t);if(pt(o)){const $={};for(const l in o)if(n){const a=n(o[l]);a!==null&&($[l]=a)}else $[l]=t(o[l]);return $}}throw O(Zs,o)})}const de=(e,t,n=pe)=>Xe(null,t,e,null,null,n,null),lo=(e,t=pe)=>Xe(null,e,null,null,null,t,null),fs=(e,t={})=>{var l,a;N();let n=e.$symbol$,s=e.$chunk$;const r=e.$refSymbol$??n,o=Pn();if(o){const u=o.chunkForSymbol(r,s,(l=e.dev)==null?void 0:l.file);u?(s=u[1],e.$refSymbol$||(n=u[0])):console.error(\"serializeQRL: Cannot resolve symbol\",n,\"in\",s,(a=e.dev)==null?void 0:a.file)}if(Co&&s==null&&(s=\"/runtimeQRL\",n=\"_\"),s==null)throw O(tr,e.$symbol$);if(s.startsWith(\"./\")&&(s=s.slice(2)),ol(e))if(t.$containerState$){const u=e.resolved,f=t.$containerState$,d=u.serialized||u.toString();let v=f.$inlineFns$.get(d);v===void 0&&(v=f.$inlineFns$.size,f.$inlineFns$.set(d,v)),n=String(v)}else js(\"Sync QRL without containerState\");let i=`${s}#${n}`;const c=e.$capture$,$=e.$captureRef$;return $&&$.length?t.$getObjId$?i+=`[${_e($,t.$getObjId$,\" \")}]`:t.$addRefMap$&&(i+=`[${_e($,t.$addRefMap$,\" \")}]`):c&&c.length>0&&(i+=`[${c.join(\" \")}]`),i},ao=(e,t,n)=>{n.$element$;const s={$containerState$:t,$addRefMap$:r=>S$(n.$refMap$,r)};return _e(e,r=>fs(r,s),`"
      },
      {
        "file": "/server/q-BFBoRxOI.js",
        "line": 11,
        "content": "`)},on=(e,t)=>{const n=e.length,s=Os(e,0,\"#\"),r=Os(e,s,\"[\"),o=Math.min(s,r),i=e.substring(0,o),c=s==n?s:s+1,$=r,l=c==$?\"default\":e.substring(c,$),a=r,u=n,f=a===u?pe:e.substring(a+1,u-1).split(\" \"),d=Xe(i,l,null,null,f,null,null);return t&&d.$setContainer$(t),d},Os=(e,t,n)=>{const s=e.length,r=e.indexOf(n,t==s?0:t);return r==-1?s:r},S$=(e,t)=>{const n=e.indexOf(t);return n===-1?(e.push(t),String(e.length-1)):String(n)},uo=(e,t)=>(T(e.$capture$,\"invoke: qrl capture must be defined inside useLexicalScope()\",e),e.$captureRef$=e.$capture$.map(n=>{const s=parseInt(n,10),r=t.$refMap$[s];return N(t.$refMap$.length>s,\"out of bounds inflate access\",n),r})),Kl=e=>{const t=!G(),n=e.value;let s;if(fo(n)){if(t){if(e.onRejected&&(n.value.catch(()=>{}),n._state===\"rejected\"))return e.onRejected(n._error);if(e.onPending){const r=n._state;if(r===\"resolved\")return e.onResolved(n._resolved);if(r===\"pending\")return e.onPending();if(r===\"rejected\")throw n._error}if(Ue(()=>n._resolved)!==void 0)return e.onResolved(n._resolved)}s=n.value}else if(D(n))s=n;else if(Q(n))s=Promise.resolve(n.value);else return e.onResolved(n);return Qi(ct,{children:s.then(Is(e.onResolved),Is(e.onRejected))})},b$=e=>({__brand:\"resource\",value:void 0,loading:!G(),_resolved:void 0,_error:void 0,_state:\"pending\",_timeout:(e==null?void 0:e.timeout)??-1,_cache:0}),fo=e=>ge(e)&&e.__brand===\"resource\",w$=(e,t)=>{const n=e._state;return n===\"resolved\"?`0 ${t(e._resolved)}`:n===\"pending\"?\"1\":`2 ${t(e._error)}`},E$=e=>{const[t,n]=e.split(\" \"),s=b$(void 0);return s.value=Promise.resolve(),t===\"0\"?(s._state=\"resolved\",s._resolved=n,s.loading=!1):t===\"1\"?(s._state=\"pending\",s.value=new Promise(()=>{}),s.loading=!0):t===\"2\"&&(s._state=\"rejected\",s._error=n,s.loading=!1),s},dt=e=>me(ve,{[ke]:\"\"},0,e.name??\"\"),cn=\"\u0001\";function C(e){return{$prefixCode$:e.$prefix$.charCodeAt(0),$prefixChar$:e.$prefix$,$test$:e.$test$,$serialize$:e.$serialize$,$prepare$:e.$prepare$,$fill$:e.$fill$,$collect$:e.$collect$,$subs$:e.$subs$}}const x$=C({$prefix$:\"\u0002\",$test$:e=>an(e),$collect$:(e,t,n)=>{if(e.$captureRef$)for(const s of e.$captureRef$)M(s,t,n);t.$prefetch$===0&&t.$qrls$.push(e)},$serialize$:(e,t)=>fs(e,{$getObjId$:t}),$prepare$:(e,t)=>on(e,t.$containerEl$),$fill$:(e,t)=>{e.$capture$&&e.$capture$.length>0&&(e.$captureRef$=e.$capture$.map(t),e.$capture$=null)}}),_$=C({$prefix$:\"\u0003\",$test$:e=>Zn(e),$collect$:(e,t,n)=>{M(e.$qrl$,t,n),e.$state$&&(M(e.$state$,t,n),n===!0&&e.$state$ instanceof at&&Ge(e.$state$[Z],t,!0))},$serialize$:(e,t)=>gc(e,t),$prepare$:e=>yc(e),$fill$:(e,t)=>{e.$el$=t(e.$el$),e.$qrl$=t(e.$qrl$),e.$state$&&(e.$state$=t(e.$state$))}}),T$=C({$prefix$:\"\u0004\",$test$:e=>fo(e),$collect$:(e,t,n)=>{M(e.value,t,n),M(e._resolved,t,n)},$serialize$:(e,t)=>w$(e,t),$prepare$:e=>E$(e),$fill$:(e,t)=>{if(e._state===\"resolved\")e._resolved=t(e._resolved),e.value=Promise.resolve(e._resolved);else if(e._state===\"rejected\"){const n=Promise.reject(e._error);n.catch(()=>null),e._error=t(e._error),e.value=n}}}),k$=C({$prefix$:\"\u0005\",$test$:e=>e instanceof URL,$serialize$:e=>e.href,$prepare$:e=>new URL(e)}),I$=C({$prefix$:\"\u0006\",$test$:e=>e instanceof Date,$serialize$:e=>e.toISOString(),$prepare$:e=>new Date(e)}),R$=C({$prefix$:\"\\x07\",$test$:e=>e instanceof RegExp,$serialize$:e=>`${e.flags} ${e.source}`,$prepare$:e=>{const t=e.indexOf(\" \"),n=e.slice(t+1),s=e.slice(0,t);return new RegExp(n,s)}}),M$=C({$prefix$:\"\u000e\",$test$:e=>e instanceof Error,$serialize$:e=>e.message,$prepare$:e=>{const t=new Error(e);return t.stack=void 0,t}}),q$=C({$prefix$:\"\u000f\",$test$:e=>!!e&&typeof e==\"object\"&&Lo(e),$prepare$:(e,t,n)=>n}),Wt=Symbol(\"serializable-data\"),A$=C({$prefix$:\"\u0010\",$test$:e=>ps(e),$serialize$:(e,t)=>{const[n]=e[Wt];return fs(n,{$getObjId$:t})},$prepare$:(e,t)=>{const n=on(e,t.$containerEl$);return un(n)},$fill$:(e,t)=>{var s;const[n]=e[Wt];(s=n.$capture$)!=null&&s.length&&(n.$captureRef$=n.$capture$.map(t),n.$capture$=null)}}),P$=C({$prefix$:\"\u0011\",$test$:e=>e instanceof wn,$collect$:(e,t,n)=>{if(e.$args$)for(const s of e.$args$)M(s,t,n)},$serialize$:(e,t,n)=>{const s=Oi(e);let r=n.$inlinedFunctions$.indexOf(s);return r<0&&(r=n.$inlinedFunctions$.length,n.$inlinedFunctions$.push(s)),_e(e.$args$,t,\" \")+\" @\"+Re(r)},$prepare$:e=>{const t=e.split(\" \"),n=t.slice(0,-1),s=t[t.length-1];return new wn(s,n,s)},$fill$:(e,t)=>{Vt(e.$func$),e.$func$=t(e.$func$),e.$args$=e.$args$.map(t)}}),N$=C({$prefix$:\"\u0012\",$test$:e=>e instanceof at,$collect$:(e,t,n)=>{M(e.untrackedValue,t,n);const s=(e[et]&Rc)===0;return n===!0&&s&&Ge(e[Z],t,!0),e},$serialize$:(e,t)=>t(e.untrackedValue),$prepare$:(e,t)=>{var n;return new at(e,(n=t==null?void 0:t.$subsManager$)==null?void 0:n.$createManager$(),0)},$subs$:(e,t)=>{e[Z].$addSubs$(t)},$fill$:(e,t)=>{e.untrackedValue=t(e.untrackedValue)}}),C$=C({$prefix$:\"\u0013\",$test$:e=>e instanceof En,$collect$(e,t,n){if(M(e.ref,t,n),yo(e.ref)){const s=V(e.ref);X$(t.$containerState$.$subsManager$,s,n)&&M(e.ref[e.prop],t,n)}return e},$serialize$:(e,t)=>`${t(e.ref)} ${e.prop}`,$prepare$:e=>{const[t,n]=e.split(\" \");return new En(t,n)},$fill$:(e,t)=>{e.ref=t(e.ref)}}),D$=C({$prefix$:\"\u0014\",$test$:e=>typeof e==\"number\",$serialize$:e=>String(e),$prepare$:e=>Number(e)}),L$=C({$prefix$:\"\u0015\",$test$:e=>e instanceof URLSearchParams,$serialize$:e=>e.toString(),$prepare$:e=>new URLSearchParams(e)}),O$=C({$prefix$:\"\u0016\",$test$:e=>typeof FormData<\"u\"&&e instanceof globalThis.FormData,$serialize$:e=>{const t=[];return e.forEach((n,s)=>{typeof n==\"string\"?t.push([s,n]):t.push([s,n.name])}),JSON.stringify(t)},$prepare$:e=>{const t=JSON.parse(e),n=new FormData;for(const[s,r]of t)n.append(s,r);return n}}),z$=C({$prefix$:\"\u0017\",$test$:e=>Pe(e),$collect$:(e,t,n)=>{M(e.children,t,n),M(e.props,t,n),M(e.immutableProps,t,n),M(e.key,t,n);let s=e.type;s===dt?s=\":slot\":s===ct&&(s=\":fragment\"),M(s,t,n)},$serialize$:(e,t)=>{let n=e.type;return n===dt?n=\":slot\":n===ct&&(n=\":fragment\"),`${t(n)} ${t(e.props)} ${t(e.immutableProps)} ${t(e.key)} ${t(e.children)} ${e.flags}`},$prepare$:e=>{const[t,n,s,r,o,i]=e.split(\" \");return new Ke(t,n,s,o,parseInt(i,10),r)},$fill$:(e,t)=>{e.type=Y$(t(e.type)),e.props=t(e.props),e.immutableProps=t(e.immutableProps),e.key=t(e.key),e.children=t(e.children)}}),Q$=C({$prefix$:\"\u0018\",$test$:e=>typeof e==\"bigint\",$serialize$:e=>e.toString(),$prepare$:e=>BigInt(e)}),F$=C({$prefix$:\"\u001c\",$test$:e=>e instanceof Uint8Array,$serialize$:e=>{let t=\"\";for(const n of e)t+=String.fromCharCode(n);return btoa(t).replace(/=+$/,\"\")},$prepare$:e=>{const t=atob(e),n=new Uint8Array(t.length);let s=0;for(const r of t)n[s++]=r.charCodeAt(0);return n},$fill$:void 0}),We=Symbol(),U$=C({$prefix$:\"\u0019\",$test$:e=>e instanceof Set,$collect$:(e,t,n)=>{e.forEach(s=>M(s,t,n))},$serialize$:(e,t)=>Array.from(e).map(t).join(\" \"),$prepare$:e=>{const t=new Set;return t[We]=e,t},$fill$:(e,t)=>{const n=e[We];e[We]=void 0,Vt();const s=n.length===0?[]:n.split(\" \");for(const r of s)e.add(t(r))}}),W$=C({$prefix$:\"\u001a\",$test$:e=>e instanceof Map,$collect$:(e,t,n)=>{e.forEach((s,r)=>{M(s,t,n),M(r,t,n)})},$serialize$:(e,t)=>{const n=[];return e.forEach((s,r)=>{n.push(t(r)+\" \"+t(s))}),n.join(\" \")},$prepare$:e=>{const t=new Map;return t[We]=e,t},$fill$:(e,t)=>{const n=e[We];e[We]=void 0,Vt();const s=n.length===0?[]:n.split(\" \");N(s.length%2===0);for(let r=0;r<s.length;r+=2)e.set(t(s[r]),t(s[r+1]))}}),H$=C({$prefix$:\"\\x1B\",$test$:e=>!!po(e)||e===cn,$serialize$:e=>e,$prepare$:e=>e}),$n=[x$,_$,T$,k$,I$,R$,M$,q$,A$,P$,N$,C$,D$,L$,O$,z$,Q$,U$,W$,H$,F$],zs=(()=>{const e=[];return $n.forEach(t=>{const n=t.$prefixCode$;for(;e.length<n;)e.push(void 0);e.push(t)}),e})();function po(e){if(typeof e==\"string\"){const t=e.charCodeAt(0);if(t<zs.length)return zs[t]}}const B$=$n.filter(e=>e.$collect$),V$=e=>{for(const t of $n)if(t.$test$(e))return!0;return!1},G$=(e,t,n)=>{for(const s of B$)if(s.$test$(e))return s.$collect$(e,t,n),!0;return!1},J$=(e,t,n,s)=>{for(const r of $n)if(r.$test$(e)){let o=r.$prefixChar$;return r.$serialize$&&(o+=r.$serialize$(e,t,n,s)),o}if(typeof e==\"string\")return e},ho=(e,t)=>{const n=new Map,s=new Map;return{prepare(r){const o=po(r);if(o){const i=o.$prepare$(r.slice(1),e,t);return o.$fill$&&n.set(i,o),o.$subs$&&s.set(i,o),i}return r},subs(r,o){const i=s.get(r);return i?(i.$subs$(r,o,e),!0):!1},fill(r,o){const i=n.get(r);return i?(i.$fill$(r,o,e),!0):!1}}},K$={\"!\":(e,t)=>t.$proxyMap$.get(e)??Fn(e,t),\"~\":e=>Promise.resolve(e),_:e=>Promise.reject(e)},X$=(e,t,n)=>{if(typeof n==\"boolean\")return n;const s=e.$groupToManagers$.get(n);return s&&s.length>0?s.length===1?s[0]!==t:!0:!1},Y$=e=>e===\":slot\"?dt:e===\":fragment\"?ct:e,Xl=(e,t)=>kn(e,new Set,\"_\",t),kn=(e,t,n,s)=>{const r=wt(e);if(r==null)return e;if(j$(r)){if(t.has(r)||(t.add(r),V$(r)))return e;const o=typeof r;switch(o){case\"object\":if(D(r)||Me(r))return e;if(A(r)){let c=0;return r.forEach(($,l)=>{if(l!==c)throw O(Zs,r);kn($,t,n+\"[\"+l+\"]\"),c=l+1}),e}if(pt(r)){for(const[c,$]of Object.entries(r))kn($,t,n+\".\"+c);return e}break;case\"boolean\":case\"string\":case\"number\":return e}let i=\"\";if(s?i=s:i=\"Value cannot be serialized\",n!==\"_\"&&(i+=` in ${n},`),o===\"object\")i+=` because it's an instance of \"${e==null?void 0:e.constructor.name}\". You might need to use 'noSerialize()' or use an object literal instead. Check out https://qwik.dev/docs/advanced/dollar/`;else if(o===\"function\"){const c=e.name;i+=` because it's a function named \"${c}\". You might need to convert it to a QRL using $(fn):"
      },
      {
        "file": "/server/q-BFBoRxOI.js",
        "line": 15,
        "content": "Please check out https://qwik.dev/docs/advanced/qrl/ for more information.`}console.error(\"Trying to serialize\",e),js(i)}return e},ds=new WeakSet,mo=new WeakSet,j$=e=>ge(e)||J(e)?!ds.has(e):!0,go=e=>ds.has(e),yo=e=>mo.has(e),ln=e=>(e!=null&&ds.add(e),e),Z$=e=>(mo.add(e),e),wt=e=>ge(e)?Ne(e)??e:e,Ne=e=>e[gn],V=e=>e[Z],vo=e=>e[Le],el=(e,t)=>{const n=e[0],s=typeof e[1]==\"string\"?e[1]:t(e[1]);if(!s)return;let r=n+\" \"+s,o;if(n===0)o=e[2];else{const i=t(e[2]);if(!i)return;if(n<=2)o=e[5],r+=` ${i} ${Qs(t(e[3]))} ${e[4]}`;else if(n<=4){o=e[4];const c=typeof e[3]==\"string\"?e[3]:Qs(t(e[3]));r+=` ${i} ${c}`}else qn()}return o&&(r+=` ${encodeURI(o)}`),r},tl=(e,t)=>{const n=e.split(\" \"),s=parseInt(n[0],10);N(n.length>=2);const r=t(n[1]);if(!r||Zn(r)&&!r.$el$)return;const o=[s,r];return s===0?(N(n.length<=3),o.push(hn(n[2]))):s<=2?(N(n.length===5||n.length===6),o.push(t(n[2]),t(n[3]),n[4],hn(n[5]))):s<=4&&(N(n.length===4||n.length===5),o.push(t(n[2]),t(n[3]),hn(n[4]))),o},hn=e=>{if(e!==void 0)return decodeURI(e)},nl=e=>{const t=new Map;return{$groupToManagers$:t,$createManager$:s=>new sl(t,e,s),$clearSub$:s=>{const r=t.get(s);if(r){for(const o of r)o.$unsubGroup$(s);t.delete(s),r.length=0}},$clearSignal$:s=>{const r=t.get(s[1]);if(r)for(const o of r)o.$unsubEntry$(s)}}};class sl{constructor(t,n,s){k(this,\"$groupToManagers$\");k(this,\"$containerState$\");k(this,\"$subs$\");this.$groupToManagers$=t,this.$containerState$=n,this.$subs$=[],s&&this.$addSubs$(s)}$addSubs$(t){this.$subs$.push(...t);for(const n of this.$subs$)this.$addToGroup$(n[1],this)}$addToGroup$(t,n){let s=this.$groupToManagers$.get(t);s||this.$groupToManagers$.set(t,s=[]),s.includes(n)||s.push(n)}$unsubGroup$(t){const n=this.$subs$;for(let s=0;s<n.length;s++)n[s][1]===t&&(n.splice(s,1),s--)}$unsubEntry$(t){const[n,s,r,o]=t,i=this.$subs$;if(n===1||n===2){const c=t[4];for(let $=0;$<i.length;$++){const l=i[$];l[0]===n&&l[1]===s&&l[2]===r&&l[3]===o&&l[4]===c&&(i.splice($,1),$--)}}else if(n===3||n===4)for(let c=0;c<i.length;c++){const $=i[c];$[0]===n&&$[1]===s&&$[2]===r&&$[3]===o&&(i.splice(c,1),c--)}}$addSub$(t,n){const s=this.$subs$,r=t[1];t[0]===0&&s.some(([o,i,c])=>o===0&&i===r&&c===n)||(s.push(So=[...t,n]),this.$addToGroup$(r,this))}$notifySubs$(t){const n=this.$subs$;for(const s of n){const r=s[s.length-1];t&&r&&r!==t||ji(s,this.$containerState$)}}}let So;function rl(){return So}const Qs=e=>{if(e==null)throw Te(\"must be non null\",e);return e},an=e=>typeof e==\"function\"&&typeof e.getSymbol==\"function\",bo=\"<sync>\",ol=e=>an(e)&&e.$symbol$==bo,Xe=(e,t,n,s,r,o,i)=>{let c;const $=async function(...y){return await d.call(this,Y())(...y)},l=y=>(c||(c=y),c),a=y=>typeof y!=\"function\"||!(r!=null&&r.length)&&!(o!=null&&o.length)?y:function(...g){let p=Y();if(p){const E=p.$qrl$;p.$qrl$=$;const h=p.$event$;p.$event$===void 0&&(p.$event$=this);try{return y.apply(this,g)}finally{p.$qrl$=E,p.$event$=h}}return p=X(),p.$qrl$=$,p.$event$=this,U.call(this,p,y,...g)},u=async y=>{if(n!==null)return n;if(y&&l(y),e===\"\"){T();const E=c.getAttribute(rr),h=c.ownerDocument,w=or(h,E);return $.resolved=n=w[Number(t)]}const g=$l(),p=Y();{const E=Pn().importSymbol(c,e,t);n=R(E,h=>$.resolved=n=a(h))}return typeof n==\"object\"&&D(n)&&n.then(()=>il(t,p==null?void 0:p.$element$,g),E=>{console.error(`qrl ${t} failed to load`,E),n=null}),n},f=y=>n!==null?n:u(y);function d(y,g){return(...p)=>R(f(),E=>{if(!J(E))throw O(Ho);if(g&&g()===!1)return;const h=v(y);return U.call(this,h,E,...p)})}const v=y=>y==null?X():A(y)?Ur(y):y,x=i??t,m=wo(x);return Object.assign($,{getSymbol:()=>x,getHash:()=>m,getCaptured:()=>o,resolve:u,$resolveLazy$:f,$setContainer$:l,$chunk$:e,$symbol$:t,$refSymbol$:i,$hash$:m,getFn:d,$capture$:r,$captureRef$:o,dev:null,resolved:void 0}),n&&(n=R(n,y=>$.resolved=n=a(y))),$},wo=e=>{const t=e.lastIndexOf(\"_\");return t>-1?e.slice(t+1):e};const Fs=new Set,il=(e,t,n)=>{Fs.has(e)||(Fs.add(e),cl(\"qsymbol\",{symbol:e,element:t,reqTime:n}))},cl=(e,t)=>{!G()&&typeof document==\"object\"&&document.dispatchEvent(new CustomEvent(e,{bubbles:!1,detail:t}))},$l=()=>G()?0:typeof performance==\"object\"?performance.now():0;let ll=0;const al=e=>Xe(null,\"s\"+ll++,e,null,null,null,null),ul=e=>e,Eo=function(e,t){return t===void 0&&(t=e.toString()),e.serialized=t,Xe(\"\",bo,e,null,null,null,null)},un=e=>{function t(n,s,r){kt();const i=e.$hash$.slice(0,4)+\":\"+(s||\"\");return me(ve,{[Be]:e,[j]:n[j],[P]:n[P],children:n.children,props:n},r,i)}return t[Wt]=[e],t},ps=e=>typeof e==\"function\"&&e[Wt]!==void 0,Et=(e,t)=>{const{val:n,set:s,iCtx:r}=Ae();if(n!=null)return n;const o=J(e)?U(void 0,e):e;if((t==null?void 0:t.reactive)===!1)return s(o),o;{const i=r.$renderCtx$.$static$.$containerState$,$=(t==null?void 0:t.deep)??!0?nt:0,l=Fn(o,i,$);return s(l),l}};function hs(e,t){var s;const n=Y();return((s=n==null?void 0:n.$renderCtx$)==null?void 0:s.$static$.$containerState$.$serverData$[e])??t}const fl=e=>{dl(e,t=>t)},dl=(e,t,n)=>{const{val:s,set:r,iCtx:o,i,elCtx:c}=Ae();if(s)return s;const $=fi(e,i),l=o.$renderCtx$.$static$.$containerState$;if(r($),c.$appendStyles$||(c.$appendStyles$=[]),c.$scopeIds$||(c.$scopeIds$=[]),l.$styleIds$.has($))return $;l.$styleIds$.add($);const a=e.$resolveLazy$(l.$containerEl$),u=f=>{T(c.$appendStyles$),c.$appendStyles$.push({styleId:$,content:t(f,$)})};return D(a)?o.$waitOn$.push(a.then(u)):u(a),$},pl='\"serviceWorker\"in navigator?navigator.serviceWorker.register(\"/service-worker.js\").catch(r=>console.error(r)):console.log(\"Service worker not supported in this browser.\")',xo=ae(\"qc-s\"),hl=ae(\"qc-c\"),_o=ae(\"qc-ic\"),To=ae(\"qc-h\"),ko=ae(\"qc-l\"),Io=ae(\"qc-n\"),ml=ae(\"qc-a\"),gl=ae(\"qc-ir\"),yl=ae(\"qc-p\"),vl=ul(lo(\"s_G5JRozgukmA\")),Sl=()=>{if(!hs(\"containerAttributes\"))throw new Error(\"PrefetchServiceWorker component must be rendered on the server.\");kc();const t=mt(_o);if(t.value&&t.value.length>0){const n=t.value.length;let s=null;for(let r=n-1;r>=0;r--)t.value[r].default&&(s=me(t.value[r].default,{children:s},1,\"ar_0\"));return me(ct,{children:[s,Ie(\"script\",{\"document:onQCInit$\":vl,\"document:onQInit$\":Eo(()=>{((r,o)=>{var i;if(!r._qcs&&o.scrollRestoration===\"manual\"){r._qcs=!0;const c=(i=o.state)==null?void 0:i._qCityScroll;c&&r.scrollTo(c.x,c.y),document.dispatchEvent(new Event(\"qcinit\"))}})(window,history)},'()=>{((w,h)=>{if(!w._qcs&&h.scrollRestoration===\"manual\"){w._qcs=true;const s=h.state?._qCityScroll;if(s){w.scrollTo(s.x,s.y);}document.dispatchEvent(new Event(\"qcinit\"));}})(window,history);}')},null,null,2,\"ar_1\")]},1,\"ar_2\")}return Jn},Yl=un(de(Sl,\"s_IW497M0sx4Q\")),xt=new Map,bl=\"qaction\",Us=e=>e.pathname+e.search+e.hash,He=(e,t)=>new URL(e,t.href),In=(e,t)=>e.origin===t.origin,Ws=e=>e.endsWith(\"/\")?e:e+\"/\",Ro=({pathname:e},{pathname:t})=>{const n=Math.abs(e.length-t.length);return n===0?e===t:n===1&&Ws(e)===Ws(t)},wl=(e,t)=>e.search===t.search,Ht=(e,t)=>wl(e,t)&&Ro(e,t),El=(e,t,n)=>{let s=t??\"\";return n&&(s+=(s?\"&\":\"?\")+bl+\"=\"+encodeURIComponent(n.id)),e+(e.endsWith(\"/\")?\"\":\"/\")+\"q-data.json\"+s},xl=(e,t)=>{const n=e.href;if(typeof n==\"string\"&&typeof e.target!=\"string\"&&!e.reload)try{const s=He(n.trim(),t.url),r=He(\"\",t.url);if(In(s,r))return Us(s)}catch(s){console.error(s)}else if(e.reload)return Us(He(\"\",t.url));return null},_l=(e,t)=>{if(e){const n=He(e,t.url),s=He(\"\",t.url);return!Ro(n,s)}return!1},Tl=e=>e&&typeof e.then==\"function\",kl=(e,t,n,s)=>{const r=Mo(),i={head:r,withLocale:c=>ks(s,c),resolveValue:c=>{const $=c.__id;if(c.__brand===\"server_loader\"&&!($ in e.loaders))throw new Error(\"You can not get the returned data of a loader that has not been executed for this request.\");const l=e.loaders[$];if(Tl(l))throw new Error(\"Loaders returning a promise can not be resolved for the head function.\");return l},...t};for(let c=n.length-1;c>=0;c--){const $=n[c]&&n[c].head;$&&(typeof $==\"function\"?Hs(r,ks(s,()=>$(i))):typeof $==\"object\"&&Hs(r,$))}return i.head},Hs=(e,t)=>{typeof t.title==\"string\"&&(e.title=t.title),_t(e.meta,t.meta),_t(e.links,t.links),_t(e.styles,t.styles),_t(e.scripts,t.scripts),Object.assign(e.frontmatter,t.frontmatter)},_t=(e,t)=>{if(Array.isArray(t))for(const n of t){if(typeof n.key==\"string\"){const s=e.findIndex(r=>r.key===n.key);if(s>-1){e[s]=n;continue}}e.push(n)}},Mo=()=>({title:\"\",meta:[],links:[],styles:[],scripts:[],frontmatter:{}}),Il=e=>{},Rl=async(e,t,n)=>{const s=e.pathname,r=e.search,o=El(s,r,n==null?void 0:n.action);let i;n!=null&&n.action||(i=xt.get(o));let c;if(!i){const $=Ml(n==null?void 0:n.action,n==null?void 0:n.clearCache);n!=null&&n.action&&(n.action.data=void 0),i=fetch(o,$).then(l=>{if(l.redirected){const a=new URL(l.url);if(!a.pathname.endsWith(\"/q-data.json\")||a.origin!==location.origin){location.href=a.href;return}}if((l.headers.get(\"content-type\")||\"\").includes(\"json\"))return l.text().then(a=>{const u=Wi(a,t);if(!u){location.href=e.href;return}if(n!=null&&n.clearCache&&xt.delete(o),u.redirect)location.href=u.redirect;else if(n!=null&&n.action){const{action:f}=n,d=u.loaders[f.id];c=()=>{f.resolve({status:l.status,result:d})}}return u})}),n!=null&&n.action||xt.set(o,i)}return i.then($=>($||xt.delete(o),c&&c(),$))},Ml=(e,t)=>{const n=e==null?void 0:e.data;return n?n instanceof FormData?{method:\"POST\",body:n}:{method:\"POST\",body:JSON.stringify(n),headers:{\"Content-Type\":\"application/json, charset=UTF-8\"}}:t?{cache:\"no-cache\",headers:{\"Cache-Control\":\"no-cache\",Pragma:\"no-cache\"}}:void 0},jl=()=>mt(To),ql=()=>mt(ko),Al=()=>mt(Io),Pl=()=>ln(hs(\"qwikcity\")),Bs={},Tt={navCount:0},Nl=\":root{view-transition-name:none}\",Cl=e=>{},Dl=async(e,t)=>{const[n,s,r,o]=en(),{type:i=\"link\",forceReload:c=e===void 0,replaceState:$=!1,scroll:l=!0}=typeof t==\"object\"?t:{forceReload:t};Tt.navCount++;const a=r.value.dest,u=e===void 0?a:typeof e==\"number\"?e:He(e,o.url);if(Bs.$cbs$&&(c||typeof u==\"number\"||!Ht(u,a)||!In(u,a))){const f=Tt.navCount,d=await Promise.all([...Bs.$cbs$.values()].map(v=>v(u)));if(f!==Tt.navCount||d.some(Boolean)){f===Tt.navCount&&i===\"popstate\"&&history.pushState(null,\"\",a);return}}if(typeof u!=\"number\"&&In(u,a)&&!(!c&&Ht(u,a)))return r.value={type:i,dest:u,forceReload:c,replaceState:$,scroll:l},n.value=void 0,o.isNavigating=!0,new Promise(f=>{s.r=f})},Ll=({track:e})=>{const[t,n,s,r,o,i,c,$,l,a,u]=en();async function f(){const[v,x]=e(()=>[a.value,t.value]),m=Ec(\"\"),y=u.url,g=x?\"form\":v.type;v.replaceState;let p,E,h=null;if(p=new URL(v.dest,u.url),h=o.loadedRoute,E=o.response,h){const[w,_,b,S]=h,I=b,q=I[I.length-1],L=g===\"form\"&&!Ht(p,y);v.dest.search&&!L&&(p.search=v.dest.search),Ht(p,y)||(u.prevUrl=y),u.url=p,u.params={..._},a.untrackedValue={type:g,dest:p};const W=kl(E,u,I,m);n.headings=q.headings,n.menu=S,s.value=ln(I),r.links=W.links,r.meta=W.meta,r.styles=W.styles,r.scripts=W.scripts,r.title=W.title,r.frontmatter=W.frontmatter}}return f()},Ol=e=>{fl(de(Nl,\"s_lnepK54CC0s\"));const t=Pl();if(!(t!=null&&t.params))throw new Error(\"Missing Qwik City Env Data for help visit https://github.com/QwikDev/qwik/issues/6237\");const n=hs(\"url\");if(!n)throw new Error(\"Missing Qwik URL Env Data\");const s=new URL(n),r=Et({url:s,params:t.params,isNavigating:!1,prevUrl:void 0},{deep:!1}),o={},i=Z$(Et(t.response.loaders,{deep:!1})),c=Rt({type:\"initial\",dest:s,forceReload:!1,replaceState:!1,scroll:!0}),$=Et(Mo),l=Et({headings:void 0,menu:void 0}),a=Rt(),u=t.response.action,f=u?t.response.loaders[u]:void 0,d=Rt(f?{id:u,data:t.response.formData,output:{result:f,status:t.response.status}}:void 0),v=de(Cl,\"s_od2obl07f54\"),x=de(Dl,\"s_TAuHDP8cAnk\",[d,o,c,r]);return ue(hl,l),ue(_o,a),ue(To,$),ue(ko,r),ue(Io,x),ue(xo,i),ue(ml,d),ue(gl,c),ue(yl,v),fc(de(Ll,\"s_tCo8NSe3Gng\",[d,l,a,$,t,x,i,o,e,c,r])),me(dt,null,3,\"ar_3\")},Zl=un(de(Ol,\"s_SqKRCSVAvgI\")),zl=(e,t)=>{var n;if(!((n=navigator.connection)!=null&&n.saveData)&&t&&t.href){const s=new URL(t.href);Il(s.pathname),t.hasAttribute(\"data-prefetch\")&&Rl(s,t,{})}},Ql=async(e,t)=>{const[n,s,r,o]=en();e.defaultPrevented&&(t.hasAttribute(\"q:nbs\")?await n(location.href,{type:\"popstate\"}):t.href&&(t.setAttribute(\"aria-pressed\",\"true\"),await n(t.href,{forceReload:s,replaceState:r,scroll:o}),t.removeAttribute(\"aria-pressed\")))},Fl=e=>{const t=Al(),n=ql(),s=Rt(),{onClick$:r,prefetch:o,reload:i,replaceState:c,scroll:$,...l}=e,a=Ue(()=>xl({...l,reload:i},n));l.href=a||e.href;const u=Ue(()=>!!a&&o!==!1&&o!==\"js\"||void 0),d=Ue(()=>u||!!a&&o!==!1&&_l(a,n))?de(zl,\"s_pOY4MX0HEyo\"):void 0,v=a?Eo((m,y)=>{m.metaKey||m.ctrlKey||m.shiftKey||m.altKey||m.preventDefault()},\"(event,target)=>{if(!(event.metaKey||event.ctrlKey||event.shiftKey||event.altKey)){event.preventDefault();}}\"):void 0,x=a?de(Ql,\"s_qucHDhplgik\",[t,i,c,$]):void 0;return dc(lo(\"s_71lGmHBg3VI\",[s,d,l,n])),zi(\"a\",{ref:s,\"q:link\":!!a,...l,\"data-prefetch\":u,children:me(dt,null,3,\"ar_5\"),onClick$:[v,r,x],onMouseOver$:[l.onMouseOver$,d],onFocus$:[l.onFocus$,d],onQVisible$:[]},null,0,\"ar_6\")},ea=un(de(Fl,\"s_FX0CToya0Mw\")),ta=e=>Ie(\"script\",{nonce:qc(e,\"nonce\")},{type:\"module\",dangerouslySetInnerHTML:pl},null,3,\"ar_7\"),na=(e,...t)=>{const{id:n,validators:s}=Ul(t,e);function r(){return mt(xo,o=>{if(!(n in o))throw new Error(`routeLoader$ \"${e.getSymbol()}\" was invoked in a route where it was not declared."
      },
      {
        "file": "/server/q-BFBoRxOI.js",
        "line": 20,
        "content": "For more information check: https://qwik.dev/docs/re-exporting-loaders/`);return Hr(o,n)})}return r.__brand=\"server_loader\",r.__qrl=e,r.__validators=s,r.__id=n,Object.freeze(r),r},Ul=(e,t)=>{let n;const s=[];if(e.length===1){const r=e[0];r&&typeof r==\"object\"&&(\"validate\"in r?s.push(r):(n=r.id,r.validation&&s.push(...r.validation)))}else e.length>1&&s.push(...e.filter(r=>!!r));return typeof n==\"string\"?n=`id_${n}`:n=t.getHash(),{validators:s.reverse(),id:n}};export{Yl as A,ta as B,ct as F,ea as L,Zl as Q,Kl as R,dt as S,Gl as _,Wi as a,Ie as b,un as c,me as d,P as e,Hr as f,qc as g,kc as h,de as i,Rt as j,fc as k,Vl as l,lo as m,en as n,dc as o,Al as p,Qi as q,na as r,Hl as s,Bl as t,ql as u,Xl as v,Jl as w,Pn as x,jl as y,zi as z};"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 4,
        "content": "`:\"\",g(o=>`</${o.value}>`,[n],\"`</${p0.value}>`\")],1,null),1,null),1,null)],1,null)],1,null)],1,null)],1,\"IM_7\")},Hl=O(b(Vl,\"s_r0j4X6otVtI\")),Kl={title:\"Components - Design System\",meta:[{name:\"description\",content:\"Manage and preview your design system components\"}]},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Hl,head:Kl},Symbol.toStringTag,{value:\"Module\"}));async function xe(n){const t=E();if(!t)throw new Error(\"Supabase client not available - check configuration\");const l=n.get(\"sb-auth-token\");if(!l)return null;try{const{data:{user:s}}=await t.auth.getUser(l.value);return s}catch{return null}}const Wl=n=>e(\"ds-file-upload\",{onDsUploadSuccess$:n.onUploadSuccess$,onDsUploadError$:n.onUploadError$,onDsUploadComplete$:n.onUploadComplete$},{endpoint:g(t=>t.endpoint||\"/api/upload\",[n],'p0.endpoint||\"/api/upload\"'),accept:g(t=>t.accept||\"image/*,application/pdf,text/*\",[n],'p0.accept||\"image/*,application/pdf,text/*\"'),maxSize:g(t=>t.maxSize||10485760,[n],\"p0.maxSize||10*1024*1024\"),multiple:g(t=>t.multiple||!1,[n],\"p0.multiple||false\"),bucket:g(t=>t.bucket||\"uploads\",[n],'p0.bucket||\"uploads\"'),class:g(t=>t.class,[n],\"p0.class\")},null,2,\"iB_2\"),Jl=O(b(Wl,\"s_C03Fqoboh3U\")),Zl=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{data:s}=await l.from(\"profiles\").select(\"*\").eq(\"id\",t.id).single(),{data:a,error:r}=await l.from(\"file_metadata\").select(\"*\").eq(\"user_id\",t.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1}).limit(50),{data:o}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),i=c=>{const m=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(c===0)return\"0 B\";const d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(1)} ${m[d]}`},u=(a||[]).map(c=>({id:c.id,name:c.file_name,size:c.file_size,type:c.mime_type||\"application/octet-stream\",url:`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.storage_path}`,uploadedAt:c.created_at,thumbnailUrl:c.thumbnail_path?`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.thumbnail_path}`:void 0,tags:c.tags||[]}));return{user:t,profile:s,files:u,stats:{totalFiles:(o==null?void 0:o.total_files)||0,totalSize:(o==null?void 0:o.total_size)||0,storageUsed:i((o==null?void 0:o.total_size)||0)},hasError:!!r}},we=ae(b(Zl,\"s_00pXWz0FAag\")),Yl=async()=>{var a,r;const[n,t,l,s]=T();if((a=t.value)!=null&&a.user){n.value=!0;try{const o=await fetch(\"/api/files/list?limit=50\",{headers:{Cookie:document.cookie}});if(o.ok){const i=await o.json();l.value=i.files}}catch(o){const i=o instanceof Error?o.message:\"Unknown error\";p.error(\"Failed to refresh file list\",{error:i,endpoint:\"/api/files/list\",userId:(r=t.value.user)==null?void 0:r.id}),s.value=`❌ Failed to refresh file list: ${i}`,l.value=[]}finally{n.value=!1}}},Xl=n=>{const[t,l,s]=T(),{file:a}=n.detail;s.value=`✅ Uploaded: ${a.name}`,t(),l.value+=1},es=n=>{const[t]=T(),{file:l,error:s}=n.detail;t.value=`❌ Failed: ${l.name} - ${s}`},ts=n=>{const[t]=T(),{results:l}=n.detail,s=l.filter(r=>r.status===\"success\").length,a=l.filter(r=>r.status===\"error\").length;t.value=`📊 Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{t.value=\"\"},5e3)},ls=()=>{ne();const n=we(),t=y(\"\"),l=y(0),s=y([]),a=y(!1);if(!n.value)return e(\"div\",null,{class:\"flex items-center justify-center h-64\"},e(\"div\",null,{class:\"text-gray-500\"},\"Loading...\",3,null),3,\"Wk_0\");const o=b(Xl,\"s_cdAui9V38SU\",[b(Yl,\"s_BCO4F9EvjfI\",[a,n,s,t]),l,t]),i=b(es,\"s_2VhBVnlzOS4\",[t]),u=b(ts,\"s_tUSlurN8mDc\",[t]);return e(\"div\",null,{class:\"space-y-8\"},[e(\"div\",null,{class:\"border-b border-gray-200 pb-4\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Media Library\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Upload and manage your files with intelligent storage routing\",3,null)],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-3 gap-6\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Total Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.totalFiles,[n],\"p0.value.stats.totalFiles\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Used\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.storageUsed,[n],\"p0.value.stats.storageUsed\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Type\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-2\"},[e(\"span\",null,{class:\"block\"},\"✅ R2: All files (simplified architecture)\",3,null),e(\"span\",null,{class:\"block text-gray-400\"},\"Up to 5GB per file\",3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900 mb-4\"},\"Upload Files\",3,null),M(Jl,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf,text/*,video/*\",maxSize:52428800,multiple:!0,bucket:\"uploads\",class:\"w-full\",onUploadSuccess$:o,onUploadError$:i,onUploadComplete$:u,[F]:{endpoint:F,accept:F,maxSize:F,multiple:F,bucket:F,class:F,onUploadSuccess$:F,onUploadError$:F,onUploadComplete$:F}},3,\"Wk_1\"),t.value&&e(\"div\",null,{class:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\"},e(\"p\",null,{class:\"text-blue-800 text-sm\"},g(c=>c.value,[t],\"p0.value\"),3,null),3,\"Wk_2\"),e(\"div\",null,{class:\"mt-4 text-sm text-gray-600\"},[e(\"p\",null,{class:\"mb-2\"},[e(\"strong\",null,null,\"Simplified Storage:\",3,null),\" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"],3,null),e(\"p\",null,null,[e(\"strong\",null,null,\"Supported formats:\",3,null),\" Images, PDFs, text files, videos up to 50MB\"],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900\"},\"Your Files\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},a.value?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"🔄\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"Loading files...\",3,null)],3,\"Wk_3\"):(s.value.length>0?s.value:n.value.files).length===0?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"📁\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"No files yet\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Upload your first file using the upload area above\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Files will be stored securely and optimized for global delivery\",3,null)],3,\"Wk_4\"):e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"},(s.value.length>0?s.value:n.value.files).map(c=>e(\"div\",null,{class:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-3\"},[e(\"div\",null,{class:\"text-sm font-medium text-gray-900 truncate\"},v(c,\"name\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\"},\"R2\",3,null)],1,null),e(\"div\",null,{class:\"text-sm text-gray-600 space-y-1\"},[e(\"div\",null,null,[\"Size: \",(c.size/1024/1024).toFixed(2),\" MB\"],1,null),e(\"div\",null,null,[\"Type: \",v(c,\"type\")],1,null),e(\"div\",null,null,[\"Uploaded: \",new Date(c.uploadedAt).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"mt-4 flex space-x-2\"},[e(\"button\",null,{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\"},\"Download\",3,null),e(\"button\",null,{class:\"text-red-600 hover:text-red-800 text-sm font-medium\"},\"Delete\",3,null)],3,null)],1,c.id)),1,null),1,null)],1,null)],1,\"Wk_5\")},ss=O(b(ls,\"s_BDZLd0X4JxU\")),ns={title:\"Media Library - Dashboard\",meta:[{name:\"description\",content:\"Upload and manage your media files with intelligent storage routing\"}]},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,head:ns,useMediaData:we},Symbol.toStringTag,{value:\"Module\"})),rs=async()=>{const[n,t,l]=T();try{t.value=!0,n.value=\"\";const s=await fetch(\"/api/content/pages\");if(s.ok){const a=await s.json();l.value=a.pages||[]}else{const a=await s.json();n.value=a.error||\"Failed to load pages\"}}catch{n.value=\"Network error loading pages\"}finally{t.value=!1}},os=async()=>{const[n,t,l,s,a,r,o]=T();if(!r.value.trim()){t.value=\"Page title is required\";return}try{n.value=!0,t.value=\"\";const i={title:r.value.trim(),slug:a.value.trim()||void 0,description:s.value.trim()||void 0,template:\"default\",published:!1},u=await fetch(\"/api/content/pages\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});if(u.ok)await u.json(),r.value=\"\",a.value=\"\",s.value=\"\",o.value=!1,await l();else{const c=await u.json();t.value=c.error||\"Failed to create page\"}}catch{t.value=\"Network error creating page\"}finally{n.value=!1}},is=()=>{const[n,t]=T();!n.value&&t.value&&(n.value=t.value.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"))},us=async()=>{const[n]=T();await n()},cs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y(\"\"),a=y(!1),r=y(\"\"),o=y(\"\"),i=y(\"\"),u=b(rs,\"s_RSy4z08mHuY\",[s,t,n]),c=b(os,\"s_U0vSjZxjf0g\",[l,s,u,i,o,r,a]),m=b(is,\"s_OHe4b3BmXIA\",[o,r]);return j(b(us,\"s_q3arvP17QJ0\",[u])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your visual pages and landing pages\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_XklD0zp44XY\",[s,a])},g(d=>d.value?\"Cancel\":\"Create Page\",[a],'p0.value?\"Cancel\":\"Create Page\"'),3,null)],3,null),s.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"svg\",null,{class:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),3,null),e(\"div\",null,{class:\"ml-3\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(d=>d.value,[s],\"p0.value\"),3,null),3,null)],3,null),3,\"h8_0\"),a.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Page\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Page Title *\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter page title\",value:g(d=>d.value,[r],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_iUIdYKxt004\",[r,m])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},[\"Page URL Slug\",e(\"span\",null,{class:\"text-gray-500 text-xs\"},\"(auto-generated from title)\",3,null)],3,null),e(\"div\",null,{class:\"flex\"},[e(\"span\",null,{class:\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\"},\"/\",3,null),e(\"input\",null,{type:\"text\",class:\"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"your-page-url\",value:g(d=>d.value,[o],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_P0uR1QIAYP0\",[o])},null,3,null)],3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Description (Optional)\",3,null),e(\"textarea\",null,{class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Brief description of the page\",rows:3,value:g(d=>d.value,[i],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_0CoyY4fcrIQ\",[i])},null,3,null)],3,null),e(\"div\",null,{class:\"flex gap-2\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",disabled:g((d,h)=>d.value||!h.value.trim(),[l,r],\"p0.value||!p1.value.trim()\"),onClick$:c},[l.value&&e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,\"h8_1\"),g(d=>d.value?\"Creating...\":\"Create Page\",[l],'p0.value?\"Creating...\":\"Create Page\"')],1,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_NId9t3ngBME\",[s,i,o,r,a])},\"Cancel\",3,null)],1,null)],1,null)],1,\"h8_2\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b flex items-center justify-between\"},[e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Pages\",3,null),!t.value&&n.value.length>0&&e(\"span\",null,{class:\"text-sm text-gray-500\"},[g(d=>d.value.length,[n],\"p0.value.length\"),\" page\",g(d=>d.value.length===1?\"\":\"s\",[n],'p0.value.length===1?\"\":\"s\"')],3,\"h8_3\")],1,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},e(\"div\",null,{class:\"flex items-center justify-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),\"Loading pages...\"],3,null),3,\"h8_4\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-12 text-center text-gray-500\"},[e(\"svg\",null,{class:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"},null,3,null),3,null),e(\"h3\",null,{class:\"mt-2 text-sm font-medium text-gray-900\"},\"No pages\",3,null),e(\"p\",null,{class:\"mt-1 text-sm text-gray-500\"},\"Get started by creating your first page.\",3,null),e(\"div\",null,{class:\"mt-6\"},e(\"button\",null,{class:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",onClick$:C(\"s_7wN6ZaymF0U\",[s,a])},[e(\"svg\",null,{class:\"-ml-1 mr-2 h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"},null,3,null),3,null),\"Create Page\"],3,null),3,null)],3,\"h8_5\"):n.value.map(d=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50 transition-colors\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,{class:\"min-w-0 flex-1\"},[e(\"div\",null,{class:\"flex items-center\"},[e(\"h3\",null,{class:\"font-medium text-gray-900 truncate\"},v(d,\"title\"),1,null),e(\"span\",{class:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,d.published?\"Published\":\"Draft\",1,null)],1,null),e(\"div\",null,{class:\"mt-1 flex items-center text-sm text-gray-500\"},[e(\"span\",null,null,[\"/\",v(d,\"slug\")],1,null),d.description&&M(Pe,{children:[e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"truncate\"},v(d,\"description\"),1,null)]},1,\"h8_6\")],1,null),e(\"div\",null,{class:\"mt-2 flex items-center text-xs text-gray-400\"},[e(\"span\",null,null,[\"Created \",new Date(d.created_at).toLocaleDateString()],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[v(d,\"view_count\"),\" view\",d.view_count===1?\"\":\"s\"],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"capitalize\"},[v(d,\"template\"),\" template\"],1,null)],1,null)],1,null),e(\"div\",null,{class:\"ml-4 flex items-center space-x-2\"},[e(\"a\",{href:`/${d.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",target:\"_blank\",rel:\"noopener noreferrer\"},\"View →\",3,null),e(\"button\",null,{class:\"text-gray-400 hover:text-gray-600\"},e(\"svg\",null,{class:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"},null,3,null),3,null),3,null)],1,null)],1,null),1,d.id)),1,null)],1,null)],1,\"h8_7\")},ds=O(b(cs,\"s_Z1neaZRFYyU\")),gs={title:\"Pages - Content Management\",meta:[{name:\"description\",content:\"Manage your visual pages and landing pages\"}]},ps=Object.freeze(Object.defineProperty({__proto__:null,default:ds,head:gs},Symbol.toStringTag,{value:\"Module\"})),ms=async()=>{const[n,t]=T();try{const l=await fetch(\"/api/content/posts\");if(l.ok){const s=await l.json();t.value=s.posts||[]}}catch{}finally{n.value=!1}},hs=()=>{const[n]=T();n()},fs=async()=>{const[n,t,l]=T();try{(await fetch(\"/api/content/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t.value)})).ok&&(t.value={title:\"\",content:\"\",published:!1},l.value=!1,await n())}catch{}},bs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y({title:\"\",content:\"\",published:!1}),a=b(ms,\"s_1WTH03jRCsU\",[t,n]);j(b(hs,\"s_540yPc3E2RA\",[a]));const r=b(fs,\"s_V24BuGzIqHI\",[a,s,l]);return e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your blog posts and articles\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:C(\"s_Oc2O0zQdsgE\",[l])},g(o=>o.value?\"Cancel\":\"New Post\",[l],'p0.value?\"Cancel\":\"New Post\"'),3,null)],3,null),l.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Post\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Title\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.title,[s],\"p0.value.title\"),onInput$:C(\"s_Et0psVOr3QA\",[s])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Content\",3,null),e(\"textarea\",null,{rows:6,class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.content,[s],\"p0.value.content\"),onInput$:C(\"s_RJ3Ap4n0gmY\",[s])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center\"},[e(\"input\",null,{type:\"checkbox\",id:\"published\",class:\"mr-2\",checked:g(o=>o.value.published,[s],\"p0.value.published\"),onChange$:C(\"s_q00lGzU6qCM\",[s])},null,3,null),e(\"label\",null,{for:\"published\",class:\"text-sm font-medium text-gray-700\"},\"Publish immediately\",3,null)],3,null),e(\"div\",null,{class:\"flex space-x-3\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:r},\"Create Post\",3,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\",onClick$:C(\"s_bIZQZkM05f0\",[l])},\"Cancel\",3,null)],3,null)],3,null)],3,\"J4_0\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},\"Loading posts...\",3,\"J4_1\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},[e(\"p\",null,null,\"No posts found.\",3,null),e(\"p\",null,{class:\"text-sm mt-2\"},\"Create your first blog post above.\",3,null)],3,\"J4_2\"):n.value.map(o=>{var i;return e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},[(i=o.content)==null?void 0:i.substring(0,100),\"...\"],1,null),e(\"p\",null,{class:\"text-xs text-gray-400 mt-1\"},[\"Created: \",new Date(o.created_at).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-3\"},[e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${o.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,o.published?\"Published\":\"Draft\",1,null),e(\"a\",{href:`/posts/${o.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm\"},\"View →\",3,null)],1,null)],1,null),1,o.id)}),1,null)],1,null)],1,\"J4_3\")},ys=O(b(bs,\"s_RWtIVOCEnf0\")),vs={title:\"Posts - Content Management\",meta:[{name:\"description\",content:\"Manage your blog posts and articles\"}]},xs=Object.freeze(Object.defineProperty({__proto__:null,default:ys,head:vs},Symbol.toStringTag,{value:\"Module\"})),ws=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{count:s}=await l.from(\"posts\").select(\"*\",{count:\"exact\",head:!0}).eq(\"author_id\",t.id),{data:a}=await l.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\",t.id).order(\"created_at\",{ascending:!1}).limit(5),{data:r}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),{count:o}=await l.from(\"builder_pages\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id),{count:i}=await l.from(\"design_system_components\").select(\"*\",{count:\"exact\",head:!0}).eq(\"created_by\",t.id),u=new Date(Date.now()-3e5).toISOString(),{count:c}=await l.from(\"user_sessions\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id).gte(\"last_activity\",u).eq(\"active\",!0);return{user:t,stats:{postsCount:s||0,pagesCount:o||0,componentsCount:i||0,totalFiles:(r==null?void 0:r.total_files)||0,totalSize:(r==null?void 0:r.total_size)||0,storageUsed:Se((r==null?void 0:r.total_size)||0),activeSessions:c||0},recentPosts:a||[]}},_e=ae(b(ws,\"s_rzz0Rmkfnsc\"));function Se(n){const t=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(n===0)return\"0 B\";const l=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,l)).toFixed(1)} ${t[l]}`}const _s=async()=>{const[n]=T();try{const t=await fetch(\"/api/dashboard/stats\",{headers:{Cookie:document.cookie}});if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to fetch realtime stats\",{error:t instanceof Error?t.message:String(t)})}},Ss=()=>{const n=_e(),t=y(null);return j(b(_s,\"s_FyInf7hQmPU\",[t])),n.value?e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900 mb-8\"},[\"Welcome back, \",g(l=>l.value.user.email,[n],\"p0.value.user.email\"),\"!\"],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.postsCount,[n],\"p0.value.stats.postsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.pagesCount,[n],\"p0.value.stats.pagesCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"🧩\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Components\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.componentsCount,[n],\"p0.value.stats.componentsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g((l,s)=>{var a;return((a=s.value)==null?void 0:a.totalFiles)||l.value.stats.totalFiles||0},[n,t],\"p1.value?.totalFiles||p0.value.stats.totalFiles||0\"),3,null)],3,null)],3,null),3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Quick Actions\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"a\",null,{href:\"/dashboard/pages\",class:\"block bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Create Page\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Build with Builder.io\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block bg-green-50 hover:bg-green-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Write Post\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Create blog content\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block bg-purple-50 hover:bg-purple-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Upload Media\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Add files and images\",3,null)],3,null)],3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Design System Status\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[[\"DS Button\",\"DS Card\",\"DS Input\",\"DS File Upload\"].map(l=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},l,1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Active\",3,null)],1,l)),e(\"a\",null,{href:\"/dashboard/components\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"Manage Components →\",3,null)],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Health\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Builder.io\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Supabase\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"R2 Storage\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"View Analytics →\",3,null)],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Recent Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y divide-gray-200\"},n.value.recentPosts.length===0?e(\"div\",null,{class:\"px-6 py-4 text-gray-500\"},\"No posts yet\",3,\"we_1\"):n.value.recentPosts.map(l=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-900\"},v(l,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},new Date(l.created_at).toLocaleDateString(),1,null)],1,null),e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${l.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,l.published?\"Published\":\"Draft\",1,null)],1,null),1,l.id)),1,null)],1,null)],1,\"we_2\"):e(\"div\",null,null,\"Loading...\",3,\"we_0\")},ks=O(b(Ss,\"s_tKEjWeTgiGA\")),Cs={title:\"Dashboard - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"User dashboard\"}]},Ts=Object.freeze(Object.defineProperty({__proto__:null,_auto_formatFileSize:Se,default:ks,head:Cs,useDashboardData:_e},Symbol.toStringTag,{value:\"Module\"})),Ps=async()=>{const[n,t,l,s,a]=T();l.value=!0,t.value=\"\";try{const{error:r}=await re.signIn(n.value,a.value);if(r)throw r;await s(\"/dashboard\")}catch(r){t.value=r instanceof Error?r.message:\"Login failed\"}finally{l.value=!1}},Es=async n=>{const[t,l]=T();l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithOAuth(n);if(s)throw s}catch(s){t.value=s instanceof Error?s.message:\"OAuth login failed\",l.value=!1}},Rs=async()=>{const[n,t,l]=T();if(!n.value){t.value=\"Please enter your email\";return}l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithMagicLink(n.value);if(s)throw s;t.value=\"Check your email for the login link!\"}catch(s){t.value=s instanceof Error?s.message:\"Failed to send magic link\"}finally{l.value=!1}},Fs=()=>{const n=Ee(),t=y(\"\"),l=y(\"\"),s=y(!1),a=y(\"\"),r=b(Ps,\"s_M7uVWgz5fLo\",[t,a,s,n,l]),o=b(Es,\"s_1Fz1nHxVqXo\",[a,s]),i=b(Rs,\"s_F9kiKsoYGLc\",[t,a,s]);return e(\"div\",null,{class:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\"},e(\"div\",null,{class:\"max-w-md w-full space-y-8\"},[e(\"div\",null,null,e(\"h2\",null,{class:\"mt-6 text-center text-3xl font-extrabold text-gray-900\"},\"Sign in to your account\",3,null),3,null),e(\"div\",null,{class:\"mt-8 space-y-6\"},[a.value&&e(\"div\",null,{class:\"rounded-md bg-red-50 p-4\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(u=>u.value,[a],\"p0.value\"),3,null),3,\"V7_0\"),e(\"div\",null,{class:\"space-y-3\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_DIXakIIbtmc\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",viewBox:\"0 0 24 24\"},[e(\"path\",null,{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"},null,3,null),e(\"path\",null,{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"},null,3,null),e(\"path\",null,{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"},null,3,null),e(\"path\",null,{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"},null,3,null)],3,null),\"Continue with Google\"],3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_0Ck2IrGMcgM\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),\"Continue with GitHub\"],3,null)],3,null),e(\"div\",null,{class:\"relative\"},[e(\"div\",null,{class:\"absolute inset-0 flex items-center\"},e(\"div\",null,{class:\"w-full border-t border-gray-300\"},null,3,null),3,null),e(\"div\",null,{class:\"relative flex justify-center text-sm\"},e(\"span\",null,{class:\"px-2 bg-gray-50 text-gray-500\"},\"Or continue with\",3,null),3,null)],3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{for:\"email\",class:\"block text-sm font-medium text-gray-700\"},\"Email address\",3,null),e(\"input\",null,{id:\"email\",type:\"email\",autoComplete:\"email\",required:!0,value:g(u=>u.value,[t],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_DYgs0Z65Quc\",[t])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{for:\"password\",class:\"block text-sm font-medium text-gray-700\"},\"Password\",3,null),e(\"input\",null,{id:\"password\",type:\"password\",autoComplete:\"current-password\",required:!0,value:g(u=>u.value,[l],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_oWetVDGIFg4\",[l])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 mr-2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:r},g(u=>u.value?\"Signing in...\":\"Sign in\",[s],'p0.value?\"Signing in...\":\"Sign in\"'),3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 ml-2 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:i},\"Email magic link\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},e(\"a\",null,{href:\"/signup\",class:\"text-sm text-blue-600 hover:text-blue-500\"},\"Don't have an account? Sign up\",3,null),3,null)],1,null)],1,null),1,\"V7_1\")},Ms=O(b(Fs,\"s_aJcwFH6Iesk\")),Os={title:\"Login - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"Sign in to your account\"}]},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ms,head:Os},Symbol.toStringTag,{value:\"Module\"})),H=async({json:n})=>{n(404,{error:{code:\"NOT_FOUND\",message:\"API endpoint not found\"}})},$s=H,Ds=H,Ls=H,Is=H,js=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Ls,onGet:H,onPatch:Is,onPost:$s,onPut:Ds},Symbol.toStringTag,{value:\"Module\"})),qs=()=>e(\"div\",null,{class:\"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\"},e(\"div\",null,{class:\"text-center max-w-md mx-auto p-8\"},[e(\"div\",null,{class:\"text-8xl mb-6\"},\"🚀\",3,null),e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-4\"},\"404\",3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8\"},\"This page doesn't exist in our production stack\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"a\",null,{href:\"/\",class:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🏠 Back to Home\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},\"Or explore our live features:\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-4 text-sm\"},[e(\"a\",null,{href:\"/dashboard\",class:\"text-blue-600 hover:text-blue-800\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-purple-600 hover:text-purple-800\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/api/health\",class:\"text-green-600 hover:text-green-800\"},\"💚 Health Check\",3,null)],3,null)],3,null)],3,null),3,\"q5_0\"),Us=O(b(qs,\"s_dUKnuUOG7r8\")),zs={title:\"404 - Page Not Found\",meta:[{name:\"description\",content:\"The page you are looking for does not exist\"}]},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,head:zs},Symbol.toStringTag,{value:\"Module\"})),Ns=async({params:n,status:t})=>{const l=n.slug;if(!l)return t(404),null;try{const s=await V.getPage(l,!0);return!s||!s.published?(t(404),null):(V.incrementViewCount(s.id).catch(()=>{}),s)}catch(s){return p.error(\"Error loading page\",{slug:l},s),t(500),null}},ie=ae(b(Ns,\"s_bgpN1vdANm8\")),Gs=async()=>{try{return{params:(await V.getPublishedPages({limit:100})).data.map(t=>({slug:t.slug}))}}catch(n){return p.error(\"Error generating static pages\",{},n),{params:[]}}},Vs=n=>{const t=n.block.properties||{};switch(n.block.component_name||n.block.block_type){case\"ds-button\":return e(\"ds-button\",{variant:t.variant||\"primary\",size:t.size||\"md\",disabled:t.disabled||!1},null,t.label||\"Button\",1,\"FM_0\");case\"ds-card\":return e(\"div\",null,{class:\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm\"},[t.title&&e(\"h3\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},v(t,\"title\"),1,\"FM_1\"),t.subtitle&&e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"subtitle\"),1,\"FM_2\"),t.content&&e(\"div\",{dangerouslySetInnerHTML:v(t,\"content\")},null,null,3,\"FM_3\"),n.block.children&&n.block.children.length>0&&e(\"div\",null,null,n.block.children.map((a,r)=>M(I,{block:a},3,`${n.block.id}-child-${r}`)),1,\"FM_4\")],1,null);case\"ds-input\":return e(\"ds-input\",{type:t.type||\"text\",label:t.label||\"Input\",placeholder:t.placeholder||\"\",required:t.required||!1,disabled:t.disabled||!1},null,null,3,null);case\"ds-file-upload\":return e(\"div\",null,{class:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"},[e(\"p\",null,{class:\"text-gray-600\"},t.label||\"Upload File\",1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-2\"},[t.accept||\"*/*\",\" • Max \",((t.maxSize||10485760)/1024/1024).toFixed(1),\"MB\"],1,null)],1,null);case\"heading\":const l=t.level||2,s=`font-bold text-gray-900 ${l===1?\"text-4xl\":l===2?\"text-3xl\":l===3?\"text-2xl\":l===4?\"text-xl\":l===5?\"text-lg\":\"text-base\"}`;return l===1?e(\"h1\",{class:s},null,t.text||\"Heading\",1,\"FM_5\"):l===2?e(\"h2\",{class:s},null,t.text||\"Heading\",1,\"FM_6\"):l===3?e(\"h3\",{class:s},null,t.text||\"Heading\",1,\"FM_7\"):l===4?e(\"h4\",{class:s},null,t.text||\"Heading\",1,\"FM_8\"):l===5?e(\"h5\",{class:s},null,t.text||\"Heading\",1,\"FM_9\"):e(\"h6\",{class:s},null,t.text||\"Heading\",1,null);case\"paragraph\":return e(\"p\",null,{class:\"text-gray-700 leading-relaxed\"},t.text||\"Paragraph text\",1,null);case\"image\":return e(\"div\",null,{class:\"my-6\"},[e(\"img\",{src:t.src||\"/placeholder.jpg\",alt:t.alt||\"\",class:`max-w-full h-auto ${t.className||\"\"}`,width:t.width||\"800\",height:t.height||\"600\"},{loading:\"lazy\"},null,3,null),t.caption&&e(\"p\",null,{class:\"text-sm text-gray-500 mt-2 text-center\"},v(t,\"caption\"),1,\"FM_10\")],1,null);case\"spacer\":return e(\"div\",{style:{height:`${t.height||32}px`}},{class:\"w-full\"},null,3,null);case\"html\":return e(\"div\",{class:t.className||\"\",dangerouslySetInnerHTML:t.html||\"\"},null,null,3,null);default:return e(\"div\",null,{class:\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\"},[e(\"p\",null,{class:\"text-yellow-800 text-sm\"},[\"Unknown component: \",g(a=>a.block.component_name||a.block.block_type,[n],\"p0.block.component_name||p0.block.block_type\")],3,null),process.env.NODE_ENV===\"development\"&&e(\"pre\",null,{class:\"text-xs text-yellow-600 mt-2 overflow-auto\"},JSON.stringify(t,null,2),1,\"FM_11\")],1,null)}},I=O(b(Vs,\"s_hTWVJJoJphc\")),Hs=n=>{const l=(n.page.blocks||[]).reduce((s,a)=>{const r=a.region||\"main\";return s[r]||(s[r]=[]),s[r].push(a),s},{});switch(Object.keys(l).forEach(s=>{l[s].sort((a,r)=>a.order_index-r.order_index)}),n.template){case\"landing\":return e(\"div\",null,{class:\"min-h-screen\"},[l.header&&e(\"header\",null,{class:\"bg-white shadow-sm\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"},l.header.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_12\"),e(\"main\",null,{class:\"flex-1\"},l.main&&e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},e(\"div\",null,{class:\"space-y-12\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_13\"),1,null),l.footer&&e(\"footer\",null,{class:\"bg-gray-50 border-t\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},l.footer.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_14\")],1,\"FM_15\");case\"blog\":return e(\"article\",null,{class:\"min-h-screen bg-white\"},e(\"div\",null,{class:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},[e(\"header\",null,{class:\"mb-12\"},[e(\"h1\",null,{class:\"text-4xl font-bold text-gray-900 mb-4\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-xl text-gray-600 mb-6\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_16\"),e(\"div\",null,{class:\"flex items-center text-sm text-gray-500\"},[e(\"time\",null,{dateTime:g(s=>s.page.created_at,[n],\"p0.page.created_at\")},new Date(n.page.created_at).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"}),1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[g(s=>s.page.view_count,[n],\"p0.page.view_count\"),\" views\"],3,null)],1,null)],1,null),e(\"div\",null,{class:\"prose prose-lg max-w-none\"},l.main&&l.main.map(s=>M(I,{block:s},3,s.id)),1,null)],1,null),1,null);default:return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},e(\"div\",null,{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},[e(\"header\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-gray-600 mt-2\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_17\")],1,null),e(\"div\",{class:`grid gap-8 ${l.sidebar?\"grid-cols-1 lg:grid-cols-3\":\"grid-cols-1\"}`},null,[e(\"main\",{class:l.sidebar?\"lg:col-span-2\":\"col-span-1\"},null,l.main&&e(\"div\",null,{class:\"space-y-6\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,\"FM_18\"),1,null),l.sidebar&&e(\"aside\",null,{class:\"lg:col-span-1\"},e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm p-6 space-y-6\"},l.sidebar.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_19\")],1,null)],1,null),1,null)}},ke=O(b(Hs,\"s_mzLcv8PuSf4\")),Ks=()=>{const n=ie();return M(Re,{value:n,onPending:()=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-3 h-8 w-8 text-gray-400 mx-auto\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),e(\"p\",null,{class:\"text-gray-500 mt-2\"},\"Loading page...\",3,null)],3,null),3,\"FM_20\"),onRejected:t=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_21\"),onResolved:t=>(ne(),t?M(ke,{page:t,get template(){return t.template},[F]:{template:le(t,\"template\")}},3,\"FM_23\"):e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_22\")),[F]:{value:F,onPending:F,onRejected:F,onResolved:F}},3,\"FM_24\")},Qs=O(b(Ks,\"s_O9a4FXDqDuI\")),Ws=({resolveValue:n})=>{const t=n(ie);if(!t)return{title:\"Page Not Found\",meta:[{name:\"description\",content:\"The requested page could not be found.\"}]};const l=[{name:\"description\",content:t.seo_description||t.description||`${t.title} - Learn more about this page.`},{name:\"robots\",content:t.published?\"index, follow\":\"noindex, nofollow\"},{property:\"og:title\",content:t.seo_title||t.title},{property:\"og:description\",content:t.seo_description||t.description||\"\"},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:`/${t.slug}`},{name:\"twitter:card\",content:\"summary_large_image\"},{name:\"twitter:title\",content:t.seo_title||t.title},{name:\"twitter:description\",content:t.seo_description||t.description||\"\"}];return t.featured_image&&l.push({property:\"og:image\",content:t.featured_image}),t.social_image?(l.push({property:\"og:image\",content:t.social_image}),l.push({name:\"twitter:image\",content:t.social_image})):t.featured_image&&l.push({name:\"twitter:image\",content:t.featured_image}),{title:t.seo_title||t.title,meta:l}},Js=Object.freeze(Object.defineProperty({__proto__:null,_auto_ContentBlockRenderer:I,_auto_PageLayout:ke,default:Qs,head:Ws,onStaticGenerate:Gs,usePageData:ie},Symbol.toStringTag,{value:\"Module\"})),Zs=[je],q=()=>ze,U=()=>Ge,S=()=>Ye,Ys=[[\"/\",[S,()=>at],\"/\",[\"q-CSb0NZF_.js\",\"q-CRu92-iL.js\"]],[\"manifest.json\",[S,()=>ot],\"/manifest.json\",[\"q-CSb0NZF_.js\"]],[\"api/analytics/dashboard/\",[S,()=>mt],\"/api/analytics/dashboard/\",[\"q-CSb0NZF_.js\"]],[\"api/auth/status/\",[S,()=>ft],\"/api/auth/status/\",[\"q-CSb0NZF_.js\"]],[\"api/cache/analytics/\",[S,()=>wt],\"/api/cache/analytics/\",[\"q-CSb0NZF_.js\"]],[\"api/content/media/\",[S,()=>kt],\"/api/content/media/\",[\"q-CSb0NZF_.js\"]],[\"api/content/pages/\",[S,()=>Ot],\"/api/content/pages/\",[\"q-CSb0NZF_.js\"]],[\"api/content/posts/\",[S,()=>Dt],\"/api/content/posts/\",[\"q-CSb0NZF_.js\"]],[\"api/content/search/\",[S,()=>It],\"/api/content/search/\",[\"q-CSb0NZF_.js\"]],[\"api/dashboard/stats/\",[S,()=>qt],\"/api/dashboard/stats/\",[\"q-CSb0NZF_.js\"]],[\"api/files/list/\",[S,()=>ye],\"/api/files/list/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/signed-url/\",[S,()=>Bt],\"/api/storage/signed-url/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/proxy/[.path]\",[S,()=>Ht],\"/api/storage/proxy/[.path]\",[\"q-CSb0NZF_.js\"]],[\"api/cache/\",[S,()=>Jt],\"/api/cache/\",[\"q-CSb0NZF_.js\"]],[\"api/content/\",[S,()=>Yt],\"/api/content/\",[\"q-CSb0NZF_.js\"]],[\"api/docs/\",[S,()=>ll],\"/api/docs/\",[\"q-CSb0NZF_.js\",\"q-C-Vwv8I7.js\"]],[\"api/errors/\",[S,()=>ol],\"/api/errors/\",[\"q-CSb0NZF_.js\"]],[\"api/health/\",[S,()=>vl],\"/api/health/\",[\"q-CSb0NZF_.js\"]],[\"api/logs/\",[S,()=>Cl],\"/api/logs/\",[\"q-CSb0NZF_.js\"]],[\"api/upload/\",[S,()=>ve],\"/api/upload/\",[\"q-CSb0NZF_.js\"]],[\"auth/callback/\",[S,()=>Il],\"/auth/callback/\",[\"q-CSb0NZF_.js\",\"q-DAWT_rQB.js\"]],[\"dashboard/analytics/\",[S,U,q,()=>Nl],\"/dashboard/analytics/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D3peGYRe.js\"]],[\"dashboard/components/\",[S,U,q,()=>Ql],\"/dashboard/components/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-BXBKrR62.js\"]],[\"dashboard/media/\",[S,U,q,()=>as],\"/dashboard/media/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-TA-9Pb1a.js\"]],[\"dashboard/pages/\",[S,U,q,()=>ps],\"/dashboard/pages/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D_dUu6X9.js\"]],[\"dashboard/posts/\",[S,U,q,()=>xs],\"/dashboard/posts/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CS-S8Nx0.js\"]],[\"dashboard/\",[S,U,q,()=>Ts],\"/dashboard/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CFimUew-.js\"]],[\"login/\",[S,()=>As],\"/login/\",[\"q-CSb0NZF_.js\",\"q-ACkpa2hX.js\"]],[\"api/[.404]\",[S,()=>js],\"/api/[.404]\",[\"q-CSb0NZF_.js\",\"q-DRbnYsbH.js\"]],[\"[.catchall]\",[S,()=>Bs],\"/[.catchall]\",[\"q-CSb0NZF_.js\",\"q-BhAqSnFt.js\"]],[\"[...slug]\",[S,()=>Js],\"/[...slug]\",[\"q-CSb0NZF_.js\",\"q-BdYugbGr.js\"]]],Xs=[],en=!0,tn=\"/\",ln=!0,rn={routes:Ys,serverPlugins:Zs,menus:Xs,trailingSlash:en,basePathname:tn,cacheModules:ln};export{tn as b,ln as c,p as l,Xs as m,rn as q,Ys as r,Zs as s,en as t};"
      },
      {
        "file": "/server/q-Bg2o_rQ1.js",
        "line": 1,
        "content": "import{l as o}from\"./q-BWJCWDUn.js\";import*as n from\"@sentry/browser\";import\"./q-BFBoRxOI.js\";import\"@supabase/supabase-js\";import\"zod\";class l{constructor(){this.initialized=!1;const e=typeof process<\"u\",r=e?process.env.NODE_ENV!==\"production\":window.location.hostname===\"localhost\";this.config={dsn:e?process.env.SENTRY_DSN:\"https://c61059fda17fdf0a9baa21e9b8673f22@o4509594523205632.ingest.de.sentry.io/4509594591690832\",environment:e&&process.env.SENTRY_ENVIRONMENT||\"development\",release:e&&process.env.APP_VERSION||\"1.0.0\",sampleRate:r?1:.1,tracesSampleRate:r?1:.1,enablePerformanceMonitoring:!0,enableUserFeedback:!0}}initialize(){if(!(this.initialized||typeof window>\"u\")){if(!this.config.dsn){o.info(\"Sentry DSN not configured, skipping initialization\",{environment:this.config.environment});return}try{n.init({dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,sampleRate:this.config.sampleRate,tracesSampleRate:this.config.tracesSampleRate,replaysSessionSampleRate:this.config.environment===\"development\"?.1:.01,replaysOnErrorSampleRate:1,integrations:[...this.config.environment===\"production\"?[new n.BrowserTracing,new n.Replay({maskAllText:!0,blockAllMedia:!0})]:[]],beforeSend:(e,r)=>{if(this.config.environment===\"development\"){const t=r.originalException;if(t instanceof Error&&[\"ResizeObserver loop limit exceeded\",\"Non-Error promise rejection captured\",\"Script error\",\"Network request failed\"].some(s=>t.message.includes(s)))return null}return e.tags&&(e.tags={...e.tags,component:\"qwik-lit-builder\",platform:\"web\"}),e},beforeSendTransaction:e=>{var r;return this.config.environment===\"development\"&&(r=e.transaction)!=null&&r.includes(\"/_build/\")?null:e}}),this.initialized=!0,o.info(\"Sentry error tracking initialized\",{environment:this.config.environment,release:this.config.release})}catch(e){o.error(\"Failed to initialize Sentry\",{},e instanceof Error?e:new Error(String(e)))}}}captureError(e,r){if(this.initialized)try{return n.captureException(e,{tags:{component:(r==null?void 0:r.component)||\"unknown\",category:(r==null?void 0:r.category)||\"error\"},extra:r,level:this.mapSeverityToLevel(r==null?void 0:r.severity)})}catch(t){o.error(\"Failed to capture error in Sentry\",{},t instanceof Error?t:new Error(String(t)));return}}captureMessage(e,r=\"info\",t){if(this.initialized)try{return n.captureMessage(e,{level:r,tags:{component:(t==null?void 0:t.component)||\"unknown\"},extra:t})}catch(i){o.error(\"Failed to capture message in Sentry\",{},i instanceof Error?i:new Error(String(i)));return}}setUser(e){if(this.initialized)try{n.setUser(e)}catch(r){o.error(\"Failed to set Sentry user\",{},r instanceof Error?r:new Error(String(r)))}}setContext(e,r){if(this.initialized)try{n.setContext(e,r)}catch(t){o.error(\"Failed to set Sentry context\",{key:e},t instanceof Error?t:new Error(String(t)))}}addBreadcrumb(e,r,t){if(this.initialized)try{n.addBreadcrumb({message:e,category:r,data:t,timestamp:Date.now()/1e3,level:\"info\"})}catch(i){o.error(\"Failed to add Sentry breadcrumb\",{message:e,category:r},i instanceof Error?i:new Error(String(i)))}}startTransaction(e,r){if(!this.initialized)return null;try{return n.startTransaction({name:e,op:r})}catch(t){return o.error(\"Failed to start Sentry transaction\",{name:e,op:r},t instanceof Error?t:new Error(String(t))),null}}showUserFeedbackDialog(e){if(!(!this.initialized||!this.config.enableUserFeedback))try{const r=(e==null?void 0:e.eventId)||n.lastEventId();r&&n.showReportDialog({eventId:r})}catch(r){o.error(\"Failed to show Sentry feedback dialog\",{},r instanceof Error?r:new Error(String(r)))}}mapSeverityToLevel(e){switch(e){case\"critical\":return\"fatal\";case\"high\":return\"error\";case\"medium\":return\"warning\";case\"low\":return\"info\";default:return\"error\"}}measurePageLoad(){if(!(!this.initialized||!this.config.enablePerformanceMonitoring))try{typeof window<\"u\"&&\"performance\"in window&&new PerformanceObserver(r=>{for(const t of r.getEntries())t.entryType===\"measure\"&&n.addBreadcrumb({category:\"performance\",message:`${t.name}: ${t.duration}ms`,level:\"info\",data:{duration:t.duration,startTime:t.startTime}})}).observe({entryTypes:[\"measure\",\"navigation\"]})}catch(e){o.error(\"Failed to set up performance monitoring\",{},e instanceof Error?e:new Error(String(e)))}}reportPerformanceMetric(e,r,t=\"ms\"){if(this.initialized)try{n.addBreadcrumb({category:\"performance\",message:`${e}: ${r}${t}`,level:\"info\",data:{metric:e,value:r,unit:t}}),n.setTag(`perf.${e}`,r)}catch(i){o.error(\"Failed to report performance metric\",{name:e,value:r},i instanceof Error?i:new Error(String(i)))}}}const d=new l;function f(c,e){return d.captureError(c,e)}function m(c,e,r){d.addBreadcrumb(c,e,r)}class a{constructor(){this.errorReports=[],this.maxReports=100,this.setupGlobalHandlers()}static getInstance(){return a.instance||(a.instance=new a),a.instance}setupGlobalHandlers(){typeof window<\"u\"&&(window.addEventListener(\"error\",e=>{this.handleError(e.error,{category:\"system\",severity:\"high\",metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener(\"unhandledrejection\",e=>{this.handleError(new Error(e.reason),{category:\"system\",severity:\"high\",metadata:{type:\"unhandledrejection\",reason:e.reason}})}),window.addEventListener(\"offline\",()=>{this.handleError(new Error(\"Network offline\"),{category:\"network\",severity:\"medium\",metadata:{type:\"offline\"}})}))}handleError(e,r){var s;const t={timestamp:new Date,route:typeof window<\"u\"?window.location.pathname:void 0,userAgent:typeof navigator<\"u\"?navigator.userAgent:void 0,...r.context,metadata:{...(s=r.context)==null?void 0:s.metadata,...r.metadata}},i={error:e,context:t,severity:r.severity,category:r.category};this.recordError(i),this.reportError(i),this.attemptRecovery(i)}recordError(e){if(this.errorReports.unshift(e),this.errorReports.length>this.maxReports&&(this.errorReports=this.errorReports.slice(0,this.maxReports)),e.severity===\"critical\"&&typeof localStorage<\"u\")try{const r=JSON.parse(localStorage.getItem(\"critical_errors\")||\"[]\");r.unshift({message:e.error.message,stack:e.error.stack,context:e.context,timestamp:e.context.timestamp.toISOString()}),localStorage.setItem(\"critical_errors\",JSON.stringify(r.slice(0,10)))}catch{}}async reportError(e){var i;if(e.error.message.includes(\"Failed to report error\")||e.error.message.includes(\"fetch\")||e.error.message.includes(\"SyntaxError: Invalid or unexpected token\")||(i=e.context.metadata)!=null&&i.isErrorReportingError)return;m(`${e.category.toUpperCase()} Error occurred`,\"error\",{severity:e.severity,route:e.context.route,userId:e.context.userId,...e.context.metadata});const r=f(e.error,{category:e.category,severity:e.severity,component:\"error-handler\",...e.context.metadata}),t=e.severity===\"critical\"?\"critical\":e.severity===\"high\"?\"error\":e.severity===\"medium\"?\"warn\":\"info\";o.log(t,`${e.category.toUpperCase()} Error: ${e.error.message}`,{category:e.category,severity:e.severity,userId:e.context.userId,sessionId:e.context.sessionId,route:e.context.route,sentryEventId:r,...e.context.metadata},e.error);try{typeof fetch<\"u\"&&await fetch(\"/api/errors\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:e.error.message,stack:e.error.stack,context:e.context,severity:e.severity,category:e.category,sentryEventId:r})})}catch(s){o.error(\"Failed to report error to API\",{originalError:e.error.message},s instanceof Error?s:new Error(String(s)))}}attemptRecovery(e){var r;switch(e.category){case\"network\":(r=e.context.metadata)!=null&&r.retryable&&setTimeout(()=>{typeof window<\"u\"&&navigator.onLine&&window.location.reload()},5e3);break;case\"data\":typeof localStorage<\"u\"&&(localStorage.removeItem(\"app_cache\"),localStorage.removeItem(\"user_data\"));break;case\"ui\":e.severity===\"critical\"&&setTimeout(()=>{typeof window<\"u\"&&(window.location.href=\"/\")},3e3);break}}getRecentErrors(e=10){return this.errorReports.slice(0,e)}clearErrors(){this.errorReports=[],typeof localStorage<\"u\"&&localStorage.removeItem(\"critical_errors\")}static handleUIError(e,r){a.getInstance().handleError(e,{category:\"ui\",severity:\"medium\",context:r})}static handleAPIError(e,r){a.getInstance().handleError(e,{category:\"api\",severity:\"high\",context:r})}static handleAuthError(e,r){a.getInstance().handleError(e,{category:\"auth\",severity:\"high\",context:r})}static handleDataError(e,r){a.getInstance().handleError(e,{category:\"data\",severity:\"high\",context:r})}static handleCriticalError(e,r){a.getInstance().handleError(e,{category:\"system\",severity:\"critical\",context:r})}}a.getInstance();const{handleUIError:p}=a;export{a as GlobalErrorHandler,p as handleUIError};"
      },
      {
        "file": "/server/q-CEitmcYT.js",
        "line": 1,
        "content": "import{s as oe,q as p,t as je,w as ve,F as B,x as we,c as ae,i as ie,y as Pe,u as ke,d as v,b as _,l as Se,z as S,g as te,A as Ce,B as $e,Q as Ee}from\"./q-BFBoRxOI.js\";const D={manifestHash:\"z7vvs8\",injections:[{tag:\"link\",location:\"head\",attributes:{rel:\"stylesheet\",href:\"/assets/B-8JYXFu-style.css\"}}],bundleGraph:[\"q-_pv7qv5J.js\",128,\"q-ACkpa2hX.js\",128,-10,57,\"q-BAnjG4cU.js\",128,\"q-BdYugbGr.js\",128,-9,73,108,\"q-BeGIXpMr.js\",128,-9,50,\"q-BhAqSnFt.js\",128,-9,81,\"q-Bl3zUNLk.js\",128,-9,96,\"q-BOCTP2vN.js\",128,-10,124,\"q-BUprbeDF.js\",\"q-BXBKrR62.js\",128,-10,79,\"q-Bz1HpqI7.js\",128,\"q-BZolzTkS.js\",25,-5,101,\"q-C-pp5bYl.js\",128,\"q-C-Vwv8I7.js\",128,\"q-C7NR6O9o.js\",128,\"q-C_CWcZYR.js\",\"q-Ccds0Gka.js\",\"q-CFimUew-.js\",\"q-CGqMMX5s.js\",\"q-CHan-d8g.js\",128,\"q-CkgiV1e5.js\",128,\"q-CLlqVEZn.js\",\"q-CluS6p4c.js\",128,\"q-CrnkS1pS.js\",128,\"q-CRu92-iL.js\",128,-10,49,\"q-CS-S8Nx0.js\",128,-10,71,\"q-CSb0NZF_.js\",128,-10,36,\"q-CTYnLOPh.js\",128,\"q-CYm7iYX_.js\",8,\"q-D3peGYRe.js\",128,-10,46,\"q-D3Zxh9yP.js\",128,\"q-D7QniM0n.js\",128,\"q-D_dUu6X9.js\",128,-10,44,\"q-DAWT_rQB.js\",128,-10,118,\"q-DEsXPe0p.js\",\"q-DJ7Q58Jq.js\",128,-9,52,\"q-DlVhFiyd.js\",128,\"q-DpgkXmpv.js\",128,\"q-DRbnYsbH.js\",\"q-DTRBzU1u.js\",47,-5,40,55,98,122,\"q-DVpA_gGA.js\",8,\"q-DXihj_rK.js\",128,-9,92,\"q-DxVz7Y7e.js\",25,\"q-DyeNjWZN.js\",128,\"q-GBOy3Wml.js\",128,-9,57,\"q-R-pYA-GP.js\",128,\"q-rMnd_Iwu.js\",25,-10,91,\"q-rRPm90by.js\",47,\"q-TA-9Pb1a.js\",-9,0,\"q-uaJRmyeb.js\",25,\"08kI8AH8QFg\",-9,46,\"0Ck2IrGMcgM\",-9,57,\"0SRyEbnJ408\",-9,49,\"4kuUfUZleco\",-9,79,\"5k0fPY9uNBg\",-9,49,\"7wN6ZaymF0U\",-9,44,\"DIXakIIbtmc\",-9,57,\"NId9t3ngBME\",-9,44,\"NKJGUpOkD7g\",-9,124,\"Oc2O0zQdsgE\",-9,71,\"QKGBDBTwM0Y\",-9,49,\"XklD0zp44XY\",-9,44,\"bIZQZkM05f0\",-9,71,\"oZpj050doXE\",-10,91,\"0CoyY4fcrIQ\",-9,44,\"DYgs0Z65Quc\",-9,57,\"Et0psVOr3QA\",-9,71,\"P0uR1QIAYP0\",-9,44,\"PDNmgpeUMH0\",-9,79,\"RJ3Ap4n0gmY\",-9,71,\"iUIdYKxt004\",-9,44,\"oWetVDGIFg4\",-9,57,\"sqkaqSKZThg\",-9,79,\"K8Yq6FHadsE\",-9,79,\"L54Edk66cBw\",-9,79,\"YCN88HLlJwA\",-9,46,\"q00lGzU6qCM\",-9,71,\"540yPc3E2RA\",-9,71,\"FyInf7hQmPU\",-8,48,\"H1t3zAJGOHQ\",-9,46,\"j3Kr0B9FRBw\",-9,49,\"q3arvP17QJ0\",-9,44,\"rWqtG5m0xRg\",-9,49,\"ssUYr8QvGrs\",-9,124,\"tCo8NSe3Gng\",-8,128,\"td3CAKTRFPQ\",-9,124,\"7wE2ujpW00Q\",-8,128,\"71lGmHBg3VI\",-8,128,\"9qLjiAMeM8U\",-8,36,\"ZkIemwK62xs\",-8,118,\"0GWINbuBB7E\",-7,50,\"0JGLnTYtXJI\",-7,92,\"3iAeVpcO2pM\",-7,133,\"BDZLd0X4JxU\",-7,130,\"C03Fqoboh3U\",-7,0,\"FX0CToya0Mw\",-8,128,\"HdaH52H0R34\",-7,116,\"IW497M0sx4Q\",-8,128,\"Jj0XOz0agbs\",-8,118,\"K0On9JINAzI\",-8,128,\"Ko4dh3oGD7U\",-8,36,\"Lk3Ke0ESzr4\",-7,114,\"O9a4FXDqDuI\",-7,108,\"RWtIVOCEnf0\",-9,71,\"SqKRCSVAvgI\",-8,128,\"WrwGpWxLnZE\",-9,49,\"YuBd54ykSfc\",-8,128,\"Z1neaZRFYyU\",-9,44,\"ZUuhSgaIrkw\",-7,25,\"aJcwFH6Iesk\",-9,57,\"bJ21MjziRbQ\",-7,52,\"c7k0xbY1wX8\",-9,46,\"dUKnuUOG7r8\",-7,81,\"hTWVJJoJphc\",-7,8,\"k0Ak7zESKn0\",-7,6,\"k97l0w6myfc\",-7,42,\"kd7Nq0HZIt0\",-8,128,\"mzLcv8PuSf4\",-7,73,\"r0j4X6otVtI\",-9,79,\"sV00tvE05gA\",-9,124,\"spkpV1Js00Y\",-7,96,\"tKEjWeTgiGA\",-8,48,\"ykRnvgmcjTo\",-7,34,\"lnepK54CC0s\",-8,128,\"2JDkTrnTacI\",-8,128,\"G5JRozgukmA\",-8,128,\"OMVY0yegPg8\",-8,128,\"bngvFl8JcZA\",-8,128,\"1Fz1nHxVqXo\",-9,57,\"1WTH03jRCsU\",-9,71,\"2VhBVnlzOS4\",-7,130,\"3A9q00AdLIk\",-8,128,\"AAO897lgALA\",-9,79,\"BCO4F9EvjfI\",-7,130,\"CTWcdPwymQQ\",-7,133,\"F9kiKsoYGLc\",-9,57,\"GjYBd0GVpcg\",-8,128,\"M7uVWgz5fLo\",-9,57,\"OHe4b3BmXIA\",-9,44,\"RSy4z08mHuY\",-9,44,\"TAuHDP8cAnk\",-8,128,\"U0vSjZxjf0g\",-9,44,\"V24BuGzIqHI\",-9,71,\"YAwb1prRrtQ\",-9,46,\"b3REbKXlmZQ\",-8,128,\"ca8NcdAAFlg\",-9,124,\"cdAui9V38SU\",-7,130,\"fR0Y7GocRTY\",-9,49,\"od2obl07f54\",-8,128,\"pOY4MX0HEyo\",-8,128,\"qucHDhplgik\",-8,128,\"tFSUa4iZX9M\",-8,128,\"tUSlurN8mDc\",-7,130,\"uLTDFJ9NW3E\",-7,114,\"vps4fSntv0c\",-9,49,\"zrc0ycdnCH0\",-7,25,\"/\",-5,59,67,\"manifest.json\",-5,67,\"api/analytics/dashboard/\",-5,67,\"api/auth/status/\",-5,67,\"api/cache/analytics/\",-5,67,\"api/content/media/\",-5,67,\"api/content/pages/\",-5,67,\"api/content/posts/\",-5,67,\"api/content/search/\",-5,67,\"api/dashboard/stats/\",-5,67,\"api/files/list/\",-5,67,\"api/storage/signed-url/\",-5,67,\"api/storage/proxy/[.path]\",-5,67,\"api/cache/\",-5,67,\"api/content/\",-5,67,\"api/docs/\",-7,42,-5,67,\"api/errors/\",-5,67,\"api/health/\",-5,67,\"api/logs/\",-5,67,\"api/upload/\",-5,67,\"auth/callback/\",-5,67,87,\"dashboard/analytics/\",-5,13,21,67,75,\"dashboard/components/\",-5,13,21,30,67,\"dashboard/media/\",-5,13,21,67,\"dashboard/pages/\",-5,13,21,67,83,\"dashboard/posts/\",-5,13,21,63,67,\"dashboard/\",-8,48,-5,13,21,67,\"login/\",-5,2,67,\"api/[.404]\",-6,100,-5,67,\"[.catchall]\",-5,17,67,\"[...slug]\",-7,8,-5,67],mapping:{s_08kI8AH8QFg:\"q-C_CWcZYR.js\",s_0Ck2IrGMcgM:\"q-CrnkS1pS.js\",s_0SRyEbnJ408:\"q-CGqMMX5s.js\",s_4kuUfUZleco:\"q-D3Zxh9yP.js\",s_5k0fPY9uNBg:\"q-CGqMMX5s.js\",s_7wN6ZaymF0U:\"q-C7NR6O9o.js\",s_DIXakIIbtmc:\"q-CrnkS1pS.js\",s_NId9t3ngBME:\"q-C7NR6O9o.js\",s_NKJGUpOkD7g:\"q-rMnd_Iwu.js\",s_Oc2O0zQdsgE:\"q-CTYnLOPh.js\",s_QKGBDBTwM0Y:\"q-CGqMMX5s.js\",s_XklD0zp44XY:\"q-C7NR6O9o.js\",s_bIZQZkM05f0:\"q-CTYnLOPh.js\",s_oZpj050doXE:\"q-DEsXPe0p.js\",s_0CoyY4fcrIQ:\"q-C7NR6O9o.js\",s_DYgs0Z65Quc:\"q-CrnkS1pS.js\",s_Et0psVOr3QA:\"q-CTYnLOPh.js\",s_P0uR1QIAYP0:\"q-C7NR6O9o.js\",s_PDNmgpeUMH0:\"q-D3Zxh9yP.js\",s_RJ3Ap4n0gmY:\"q-CTYnLOPh.js\",s_iUIdYKxt004:\"q-C7NR6O9o.js\",s_oWetVDGIFg4:\"q-CrnkS1pS.js\",s_sqkaqSKZThg:\"q-D3Zxh9yP.js\",s_K8Yq6FHadsE:\"q-D3Zxh9yP.js\",s_L54Edk66cBw:\"q-D3Zxh9yP.js\",s_YCN88HLlJwA:\"q-C_CWcZYR.js\",s_q00lGzU6qCM:\"q-CTYnLOPh.js\",s_540yPc3E2RA:\"q-CTYnLOPh.js\",s_FyInf7hQmPU:\"q-CFimUew-.js\",s_H1t3zAJGOHQ:\"q-C_CWcZYR.js\",s_j3Kr0B9FRBw:\"q-CGqMMX5s.js\",s_q3arvP17QJ0:\"q-C7NR6O9o.js\",s_rWqtG5m0xRg:\"q-CGqMMX5s.js\",s_ssUYr8QvGrs:\"q-rMnd_Iwu.js\",s_tCo8NSe3Gng:\"q-rRPm90by.js\",s_td3CAKTRFPQ:\"q-rMnd_Iwu.js\",s_7wE2ujpW00Q:\"q-rRPm90by.js\",s_71lGmHBg3VI:\"q-rRPm90by.js\",s_9qLjiAMeM8U:\"q-BZolzTkS.js\",s_ZkIemwK62xs:\"q-GBOy3Wml.js\",s_0GWINbuBB7E:\"q-CHan-d8g.js\",s_0JGLnTYtXJI:\"q-DJ7Q58Jq.js\",s_3iAeVpcO2pM:\"q-uaJRmyeb.js\",s_BDZLd0X4JxU:\"q-TA-9Pb1a.js\",s_C03Fqoboh3U:\"q-_pv7qv5J.js\",s_FX0CToya0Mw:\"q-rRPm90by.js\",s_HdaH52H0R34:\"q-DyeNjWZN.js\",s_IW497M0sx4Q:\"q-rRPm90by.js\",s_Jj0XOz0agbs:\"q-GBOy3Wml.js\",s_K0On9JINAzI:\"q-rRPm90by.js\",s_Ko4dh3oGD7U:\"q-BZolzTkS.js\",s_Lk3Ke0ESzr4:\"q-DxVz7Y7e.js\",s_O9a4FXDqDuI:\"q-DVpA_gGA.js\",s_RWtIVOCEnf0:\"q-CTYnLOPh.js\",s_SqKRCSVAvgI:\"q-rRPm90by.js\",s_WrwGpWxLnZE:\"q-CGqMMX5s.js\",s_YuBd54ykSfc:\"q-rRPm90by.js\",s_Z1neaZRFYyU:\"q-C7NR6O9o.js\",s_ZUuhSgaIrkw:\"q-BOCTP2vN.js\",s_aJcwFH6Iesk:\"q-CrnkS1pS.js\",s_bJ21MjziRbQ:\"q-CkgiV1e5.js\",s_c7k0xbY1wX8:\"q-C_CWcZYR.js\",s_dUKnuUOG7r8:\"q-D7QniM0n.js\",s_hTWVJJoJphc:\"q-BdYugbGr.js\",s_k0Ak7zESKn0:\"q-BAnjG4cU.js\",s_k97l0w6myfc:\"q-C-Vwv8I7.js\",s_kd7Nq0HZIt0:\"q-rRPm90by.js\",s_mzLcv8PuSf4:\"q-CYm7iYX_.js\",s_r0j4X6otVtI:\"q-D3Zxh9yP.js\",s_sV00tvE05gA:\"q-rMnd_Iwu.js\",s_spkpV1Js00Y:\"q-DlVhFiyd.js\",s_tKEjWeTgiGA:\"q-CFimUew-.js\",s_ykRnvgmcjTo:\"q-Bz1HpqI7.js\",s_lnepK54CC0s:\"q-rRPm90by.js\",s_2JDkTrnTacI:\"q-rRPm90by.js\",s_G5JRozgukmA:\"q-rRPm90by.js\",s_OMVY0yegPg8:\"q-rRPm90by.js\",s_bngvFl8JcZA:\"q-rRPm90by.js\",s_1Fz1nHxVqXo:\"q-CrnkS1pS.js\",s_1WTH03jRCsU:\"q-CTYnLOPh.js\",s_2VhBVnlzOS4:\"q-TA-9Pb1a.js\",s_3A9q00AdLIk:\"q-rRPm90by.js\",s_AAO897lgALA:\"q-D3Zxh9yP.js\",s_BCO4F9EvjfI:\"q-TA-9Pb1a.js\",s_CTWcdPwymQQ:\"q-uaJRmyeb.js\",s_F9kiKsoYGLc:\"q-CrnkS1pS.js\",s_GjYBd0GVpcg:\"q-rRPm90by.js\",s_M7uVWgz5fLo:\"q-CrnkS1pS.js\",s_OHe4b3BmXIA:\"q-C7NR6O9o.js\",s_RSy4z08mHuY:\"q-C7NR6O9o.js\",s_TAuHDP8cAnk:\"q-rRPm90by.js\",s_U0vSjZxjf0g:\"q-C7NR6O9o.js\",s_V24BuGzIqHI:\"q-CTYnLOPh.js\",s_YAwb1prRrtQ:\"q-C_CWcZYR.js\",s_b3REbKXlmZQ:\"q-rRPm90by.js\",s_ca8NcdAAFlg:\"q-rMnd_Iwu.js\",s_cdAui9V38SU:\"q-TA-9Pb1a.js\",s_fR0Y7GocRTY:\"q-CGqMMX5s.js\",s_od2obl07f54:\"q-rRPm90by.js\",s_pOY4MX0HEyo:\"q-rRPm90by.js\",s_qucHDhplgik:\"q-rRPm90by.js\",s_tFSUa4iZX9M:\"q-rRPm90by.js\",s_tUSlurN8mDc:\"q-TA-9Pb1a.js\",s_uLTDFJ9NW3E:\"q-DxVz7Y7e.js\",s_vps4fSntv0c:\"q-CGqMMX5s.js\",s_zrc0ycdnCH0:\"q-BOCTP2vN.js\"},preloader:\"q-rRPm90by.js\"};/**"
      },
      {
        "file": "/server/q-CEitmcYT.js",
        "line": 230,
        "content": "})()`;function se(n={}){return n.debug?rn:tn}function R(){if(typeof performance>\"u\")return()=>0;const n=performance.now();return()=>(performance.now()-n)/1e6}function sn(n){let e=n.base;return typeof n.base==\"function\"&&(e=n.base(n)),typeof e==\"string\"?(e.endsWith(\"/\")||(e+=\"/\"),e):\"/build/\"}var on=\"<!DOCTYPE html>\";async function an(n,e){var Q,U,Z,z;let t=e.stream,r=0,o=0,s=0,a=0,i=\"\",c;const l=((Q=e.streaming)==null?void 0:Q.inOrder)??{strategy:\"auto\",maximunInitialChunk:5e4,maximunChunk:3e4},u=e.containerTagName??\"html\",q=e.containerAttributes??{},f=t,g=R(),w=sn(e),d=qe(e.manifest);function x(){i&&(f.write(i),i=\"\",r=0,s++,s===1&&(a=g()))}function Y(m){const b=m.length;r+=b,o+=b,i+=m}switch(l.strategy){case\"disabled\":t={write:Y};break;case\"direct\":t=f;break;case\"auto\":let m=0,b=!1;const X=l.maximunChunk??0,I=l.maximunInitialChunk??0;t={write(j){j===\"<!--qkssr-f-->\"?b||(b=!0):j===\"<!--qkssr-pu-->\"?m++:j===\"<!--qkssr-po-->\"?m--:Y(j),m===0&&(b||r>=(s===0?I:X))&&(b=!1,x())}};break}u===\"html\"?t.write(on):(t.write(\"<!--cq-->\"),e.qwikLoader?(e.qwikLoader.include===void 0&&(e.qwikLoader.include=\"never\"),e.qwikLoader.position===void 0&&(e.qwikLoader.position=\"bottom\")):e.qwikLoader={include:\"never\"}),d||console.warn(\"Missing client manifest, loading symbols in the client might 404. Please ensure the client build has run and generated the manifest for the server build.\"),await Re(e,d);const G=d==null?void 0:d.manifest.injections,k=G?G.map(m=>p(m.tag,m.attributes??{})):[],A=((U=e.qwikLoader)==null?void 0:U.include)??\"auto\",fe=((Z=e.qwikLoader)==null?void 0:Z.position)??\"bottom\";let H=!1;if(fe===\"top\"&&A!==\"never\"){H=!0;const m=se({debug:e.debug});k.push(p(\"script\",{id:\"qwikloader\",dangerouslySetInnerHTML:m})),k.push(p(\"script\",{dangerouslySetInnerHTML:\"window.qwikevents.push('click','input')\"}))}We(w,d,e.preloader,k,(z=e.serverData)==null?void 0:z.nonce);const be=R(),he=[];let F=0,J=0;await je(n,{stream:t,containerTagName:u,containerAttributes:q,serverData:e.serverData,base:w,beforeContent:k,beforeClose:async(m,b,X,I)=>{var K,M,ee,ne;F=be();const j=R();c=await ve(m,b,void 0,I);const h=[];Me(w,c,e,d,h);const _e=JSON.stringify(c.state,void 0,void 0);if(h.push(p(\"script\",{type:\"qwik/json\",dangerouslySetInnerHTML:ln(_e),nonce:(K=e.serverData)==null?void 0:K.nonce})),c.funcs.length>0){const y=q[De];h.push(p(\"script\",{\"q:func\":\"qwik/json\",dangerouslySetInnerHTML:mn(y,c.funcs),nonce:(M=e.serverData)==null?void 0:M.nonce}))}const ge=!H&&(!c||c.mode!==\"static\"),V=A===\"always\"||A===\"auto\"&&ge;if(V){const y=se({debug:e.debug});h.push(p(\"script\",{id:\"qwikloader\",dangerouslySetInnerHTML:y,nonce:(ee=e.serverData)==null?void 0:ee.nonce}))}const W=Array.from(b.$events$,y=>JSON.stringify(y));if(W.length>0){const y=(V?\"window.qwikevents\":\"(window.qwikevents||=[])\")+`.push(${W.join(\", \")})`;h.push(p(\"script\",{dangerouslySetInnerHTML:y,nonce:(ne=e.serverData)==null?void 0:ne.nonce}))}return un(he,m),J=j(),p(B,{children:h})},manifestHash:(d==null?void 0:d.manifest.manifestHash)||\"dev\"+cn()}),u!==\"html\"&&t.write(\"<!--/cq-->\"),x();const ye=c.resources.some(m=>m._cache!==1/0);return{prefetchResources:void 0,snapshotResult:c,flushes:s,manifest:d==null?void 0:d.manifest,size:o,isStatic:!ye,timing:{render:F,snapshot:J,firstFlush:a}}}function cn(){return Math.random().toString(36).slice(2)}function qe(n){const e=n?{...D,...n}:D;if(!e||\"mapper\"in e)return e;if(e.mapping){const t={};return Object.entries(e.mapping).forEach(([r,o])=>{t[C(r)]=[r,o]}),{mapper:t,manifest:e,injections:e.injections||[]}}}var ln=n=>n.replace(/<(\\/?script)/gi,\"\\\\x3C$1\");function un(n,e){var t;for(const r of e){const o=(t=r.$componentQrl$)==null?void 0:t.getSymbol();o&&!n.includes(o)&&n.push(o)}}var dn='document[\"qFuncs_HASH\"]=';function mn(n,e){return dn.replace(\"HASH\",n)+`[${e.join(`,"
      },
      {
        "file": "/server/q-CEitmcYT.js",
        "line": 231,
        "content": "`)}]`}async function _n(n){const e=ce({},qe(n));oe(e)}const pn=()=>{const n=Pe(),e=ke();return v(B,{children:[_(\"title\",null,null,n.title,1,null),_(\"link\",null,{rel:\"canonical\",href:Se(t=>t.url.href,[e],\"p0.url.href\")},null,3,null),_(\"meta\",null,{name:\"viewport\",content:\"width=device-width, initial-scale=1.0\"},null,3,null),_(\"link\",null,{rel:\"icon\",type:\"image/svg+xml\",href:\"/favicon.svg\"},null,3,null),n.meta.map(t=>S(\"meta\",{...t},null,0,t.key)),n.links.map(t=>S(\"link\",{...t},null,0,t.key)),n.styles.map(t=>S(\"style\",{...t.props,get dangerouslySetInnerHTML(){return t.style},dangerouslySetInnerHTML:te(t,\"style\")},null,0,t.key)),n.scripts.map(t=>S(\"script\",{...t.props,get dangerouslySetInnerHTML(){return t.script},dangerouslySetInnerHTML:te(t,\"script\")},null,0,t.key))]},1,\"k3_0\")},qn=ae(ie(pn,\"s_bJ21MjziRbQ\")),fn=()=>v(Ee,{children:[_(\"head\",null,null,[_(\"meta\",null,{charSet:\"utf-8\"},null,3,null),v(qn,null,3,\"PE_0\")],1,null),_(\"body\",null,{lang:\"en\"},[v(Ce,null,3,\"PE_1\"),v($e,null,3,\"PE_2\")],1,null)]},1,\"PE_3\"),bn=ae(ie(fn,\"s_0JGLnTYtXJI\"));function gn(n){return an(v(bn,null,3,\"28_0\"),{manifest:D,...n,containerAttributes:{lang:\"en-us\",...n.containerAttributes},serverData:{...n.serverData}})}export{D as m,gn as r,_n as s};"
      },
      {
        "file": "/src/lib/cache-strategies.ts",
        "line": 187,
        "content": "if (!services.kv) return { invalidated: 0, errors: ['KV not available'] };"
      },
      {
        "file": "/src/lib/cache-strategies.ts",
        "line": 253,
        "content": "if (!services.kv) return { invalidated: 0, errors: ['KV not available'] };"
      }
    ],
    "conditionalMocks": [
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 36650,
        "content": "this.config = { dsn: e2 ? process.env.SENTRY_DSN : \"https://c61059fda17fdf0a9baa21e9b8673f22@o4509594523205632.ingest.de.sentry.io/4509594591690832\", environment: e2 && process.env.SENTRY_ENVIRONMENT || \"development\", release: e2 && process.env.APP_VERSION || \"1.0.0\", sampleRate: r2 ? 1 : 0.1, tracesSampleRate: r2 ? 1 : 0.1, enablePerformanceMonitoring: true, enableUserFeedback: true };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 36659,
        "content": "init({ dsn: this.config.dsn, environment: this.config.environment, release: this.config.release, sampleRate: this.config.sampleRate, tracesSampleRate: this.config.tracesSampleRate, replaysSessionSampleRate: this.config.environment === \"development\" ? 0.1 : 0.01, replaysOnErrorSampleRate: 1, integrations: [...this.config.environment === \"production\" ? [new BrowserTracing(), new Replay$1({ maskAllText: true, blockAllMedia: true })] : []], beforeSend: /* @__PURE__ */ __name2((e2, r2) => {"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 36660,
        "content": "if (this.config.environment === \"development\") {"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 36667,
        "content": "return this.config.environment === \"development\" && (r2 = e2.transaction) != null && r2.includes(\"/_build/\") ? null : e2;"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37029,
        "content": "if (t.includes(\"placeholder\") || t.includes(\"wprgiqjcabmhhmwmurcp\") || !t) return { status: \"warn\", responseTime: Date.now() - n, message: \"Database not configured for development\", provider: \"supabase\", details: { mode: \"development\", configured: false } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37034,
        "content": "return { status: \"warn\", responseTime: Date.now() - n, message: \"Database connection failed (development mode)\", provider: \"supabase\", details: { error: t instanceof Error ? t.message : \"Unknown error\", mode: \"development\" } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37359,
        "content": "this.config.environment === \"development\" ? console[l2](`${s} ${t.message}`, t.context) : console[l2](JSON.stringify(t));"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 37441,
        "content": "const m2 = { error: c instanceof Error ? c.message : String(c), stack: c instanceof Error ? c.stack : void 0, method: t.method, path: new URL(t.url).pathname, ip: H(t), timestamp: (/* @__PURE__ */ new Date()).toISOString(), env: { hasKV: !!(r2 != null && r2.KV), nodeEnv: \"development\", kvType: typeof (r2 == null ? void 0 : r2.KV) } };"
      },
      {
        "file": "/.wrangler/tmp/dev-EyxMZr/bundledWorker-0.5703734894028065.js",
        "line": 38408,
        "content": "const i = { \"@timestamp\": u.serverTimestamp, level: u.level, message: u.message, service: \"qwik-lit-builder-client\", environment: \"development\", ...u.context, client: { timestamp: u.timestamp, route: u.route, userAgent: u.userAgent, ip: u.ip }, user: { userId: u.userId, sessionId: u.sessionId }, request: { requestId: u.requestId, duration: u.duration }, error: u.stack ? { stack: u.stack } : void 0 }, c = u.level === \"critical\" || u.level === \"error\" ? \"error\" : u.level === \"warn\" ? \"warn\" : \"log\";"
      },
      {
        "file": "/docs/SPECTRUM_INTEGRATION_PLAN.md",
        "line": 544,
        "content": "if (process.env.NODE_ENV === 'development') {"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 323,
        "content": "/if.*NODE_ENV.*development/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 325,
        "content": "/if.*development.*\\{/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 326,
        "content": "/\\?.*mock/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 327,
        "content": "/\\?.*fake/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 328,
        "content": "/development.*\\?/i,"
      },
      {
        "file": "/scripts/identify-mocks-and-simulations.js",
        "line": 621,
        "content": "/development.*\\?/i,"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 1,
        "content": "import{c as O,i as b,u as Te,b as e,d as M,e as F,L as ue,f as le,g as v,S as J,h as ne,j as y,k as j,l as g,m as C,n as T,o as me,r as ae,F as Pe,p as Ee,R as Re}from\"./q-BFBoRxOI.js\";import{createClient as Z}from\"@supabase/supabase-js\";import{z as x}from\"zod\";class Fe{constructor(t={}){this.logQueue=[],this.flushInterval=5e3,this.maxQueueSize=100,this.config={level:\"info\",service:\"qwik-lit-builder\",version:\"1.0.0\",environment:\"development\",enableConsole:!0,enableRemote:!1,...t},this.startFlushTimer()}levelToNumber(t){return{debug:0,info:1,warn:2,error:3,critical:4}[t]}shouldLog(t){return this.levelToNumber(t)>=this.levelToNumber(this.config.level)}get configuration(){return this.config}createLogEntry(t,l,s,a){const r={timestamp:new Date().toISOString(),level:t,message:l,context:{service:this.config.service,version:this.config.version,environment:this.config.environment,...s}};return typeof window<\"u\"&&(r.route=window.location.pathname,r.userAgent=navigator.userAgent),a&&(r.stack=a.stack,r.context={...r.context,errorName:a.name,errorMessage:a.message}),r}logToConsole(t){if(!this.config.enableConsole)return;const l=t.level===\"critical\"||t.level===\"error\"?\"error\":t.level===\"warn\"?\"warn\":\"log\",s=`[${t.timestamp}] [${t.level.toUpperCase()}]`;this.config.environment===\"development\"?console[l](`${s} ${t.message}`,t.context):console[l](JSON.stringify(t))}queueForRemote(t){if(this.config.enableRemote){if(this.logQueue.push(t),t.level===\"critical\"){this.flushLogs();return}this.logQueue.length>=this.maxQueueSize&&this.flushLogs()}}startFlushTimer(){typeof window>\"u\"||(this.flushTimer=window.setInterval(()=>{this.flushLogs()},this.flushInterval))}async flushLogs(){if(this.logQueue.length===0)return;const t=[...this.logQueue];this.logQueue=[];try{this.config.remoteEndpoint&&typeof fetch<\"u\"&&await fetch(this.config.remoteEndpoint,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({logs:t})})}catch{this.logQueue.length<this.maxQueueSize&&this.logQueue.unshift(...t.slice(0,this.maxQueueSize-this.logQueue.length))}}log(t,l,s,a){if(!this.shouldLog(t))return;const r=this.createLogEntry(t,l,s,a);this.logToConsole(r),this.queueForRemote(r)}debug(t,l){this.log(\"debug\",t,l)}info(t,l){this.log(\"info\",t,l)}warn(t,l){this.log(\"warn\",t,l)}error(t,l,s){this.log(\"error\",t,l,s)}critical(t,l,s){this.log(\"critical\",t,l,s)}apiCall(t,l,s,a,r){this.info(`API ${t} ${l}`,{...r,method:t,url:l,statusCode:s,duration:a,type:\"api_call\"})}userAction(t,l,s){this.info(`User action: ${t}`,{...s,userId:l,action:t,type:\"user_action\"})}performance(t,l,s){this.info(`Performance: ${t}`,{...s,metric:t,value:l,type:\"performance\"})}security(t,l,s){const a=l===\"critical\"?\"critical\":l===\"high\"?\"error\":l===\"medium\"?\"warn\":\"info\";this.log(a,`Security event: ${t}`,{...s,event:t,severity:l,type:\"security\"})}destroy(){this.flushTimer&&clearInterval(this.flushTimer),this.flushLogs()}}const p=new Fe({level:process.env.NODE_ENV===\"production\"?\"info\":\"debug\",environment:process.env.NODE_ENV===\"production\"?\"production\":process.env.NODE_ENV===\"staging\"?\"staging\":\"development\",enableRemote:process.env.NODE_ENV===\"production\",remoteEndpoint:\"/api/logs\"});typeof window<\"u\"&&window.addEventListener(\"beforeunload\",()=>{p.destroy()});const he=Object.freeze(Object.defineProperty({__proto__:null,logger:p},Symbol.toStringTag,{value:\"Module\"})),Me={enableCSP:!0,enableHSTS:!0,enableFrameGuard:!0,enableContentTypeNoSniff:!0,enableReferrerPolicy:!0,enablePermissionsPolicy:!0,corsOrigins:[\"http://localhost:5176\",\"https://*.pages.dev\"],rateLimitWindowMs:9e5,rateLimitMaxRequests:100};function Oe(n=!1){const t=typeof process<\"u\"&&process.env.CODESPACES===\"true\",l={\"default-src\":[\"'self'\"],\"script-src\":[\"'self'\",\"'unsafe-inline'\",\"https://cdn.jsdelivr.net\",\"https://unpkg.com\",\"https://*.supabase.co\",...n?[\"'unsafe-eval'\"]:[]],\"style-src\":[\"'self'\",\"'unsafe-inline'\",\"https://fonts.googleapis.com\",\"https://cdn.jsdelivr.net\"],\"img-src\":[\"'self'\",\"data:\",\"blob:\",\"https:\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.githubusercontent.com\"],\"font-src\":[\"'self'\",\"https://fonts.gstatic.com\",\"https://cdn.jsdelivr.net\"],\"connect-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\",\"https://*.sentry.io\",\"wss://*.supabase.co\",\"https://api.github.com\",...n?[\"ws://localhost:*\",\"http://localhost:*\"]:[]],\"frame-src\":[\"'self'\"],\"worker-src\":[\"'self'\",\"blob:\"],\"manifest-src\":[\"'self'\",...t?[\"https://github.dev\",\"https://*.github.dev\"]:[]],\"media-src\":[\"'self'\",\"https://*.supabase.co\",\"https://*.cloudflare.com\"],\"object-src\":[\"'none'\"],\"base-uri\":[\"'self'\"],\"form-action\":[\"'self'\"],\"frame-ancestors\":[\"'none'\"]},s=Object.entries(l).map(([a,r])=>`${a} ${r.join(\" \")}`).join(\"; \");return n?s:`${s}; upgrade-insecure-requests`}async function Ae(n,t){try{if(!n.KV)return p.warn(\"KV not available, rate limiting disabled\"),null;const l=await n.KV.get(t);return l?JSON.parse(l):null}catch(l){return p.error(\"Failed to get rate limit data from KV\",{key:t,error:l instanceof Error?l.message:String(l)}),null}}async function ce(n,t,l){try{if(!n.KV)return;const s=Math.max(1,Math.ceil((l.resetTime-Date.now())/1e3));await n.KV.put(t,JSON.stringify(l),{expirationTtl:s})}catch(s){p.error(\"Failed to set rate limit data in KV\",{key:t,error:s instanceof Error?s.message:String(s)})}}function W(n){return`rate_limit:${n.headers.get(\"cf-connecting-ip\")||n.headers.get(\"x-forwarded-for\")||n.headers.get(\"x-real-ip\")||\"unknown\"}`}async function $e(n,t,l){const s=W(n),a=Date.now(),r=a-t.rateLimitWindowMs,o=await Ae(l,s);if(!o||o.resetTime<r){const i={count:1,resetTime:a+t.rateLimitWindowMs};return await ce(l,s,i),!0}return o.count>=t.rateLimitMaxRequests?(p.security(\"Rate limit exceeded\",\"medium\",{ip:s,currentCount:o.count,maxRequests:t.rateLimitMaxRequests,windowMs:t.rateLimitWindowMs}),!1):(o.count++,await ce(l,s,o),!0)}const De=async({headers:n,request:t,next:l,json:s,platform:a})=>{const r=a==null?void 0:a.env,o=Me,i=process.env.NODE_ENV===\"development\",u=Date.now();try{if(!i&&r&&!await $e(t,o,r))throw p.security(\"Rate limit exceeded\",\"medium\",{ip:W(t),userAgent:t.headers.get(\"user-agent\"),path:new URL(t.url).pathname}),s(429,{error:\"Rate limit exceeded\",retryAfter:Math.ceil(o.rateLimitWindowMs/1e3)});o.enableFrameGuard&&n.set(\"X-Frame-Options\",\"DENY\"),o.enableContentTypeNoSniff&&n.set(\"X-Content-Type-Options\",\"nosniff\"),o.enableReferrerPolicy&&n.set(\"Referrer-Policy\",\"strict-origin-when-cross-origin\"),o.enablePermissionsPolicy&&n.set(\"Permissions-Policy\",\"camera=(), microphone=(), geolocation=(), payment=(), usb=()\"),o.enableHSTS&&!i&&n.set(\"Strict-Transport-Security\",\"max-age=31536000; includeSubDomains; preload\"),o.enableCSP&&n.set(\"Content-Security-Policy\",Oe(i)),n.set(\"X-DNS-Prefetch-Control\",\"off\"),n.set(\"X-Download-Options\",\"noopen\"),n.set(\"X-Permitted-Cross-Domain-Policies\",\"none\"),n.set(\"Cross-Origin-Embedder-Policy\",\"require-corp\"),n.set(\"Cross-Origin-Opener-Policy\",\"same-origin\"),n.set(\"Cross-Origin-Resource-Policy\",\"same-origin\"),await l();const c=Date.now()-u;c>1e3&&p.security(\"Slow request detected\",\"low\",{method:t.method,path:new URL(t.url).pathname,duration:c,ip:W(t)})}catch(c){const m={error:c instanceof Error?c.message:String(c),stack:c instanceof Error?c.stack:void 0,method:t.method,path:new URL(t.url).pathname,ip:W(t),timestamp:new Date().toISOString(),env:{hasKV:!!(r!=null&&r.KV),nodeEnv:process.env.NODE_ENV,kvType:typeof(r==null?void 0:r.KV)}};throw p.security(\"Security middleware error - DETAILED\",\"high\",m),console.error(\"SECURITY MIDDLEWARE ERROR DETAILS:\",JSON.stringify(m,null,2)),c}},Le=async({request:n,headers:t,next:l})=>{const s=n.headers.get(\"origin\"),a=[\"http://localhost:5173\",\"http://localhost:4173\",\"https://localhost:5173\",process.env.SITE_URL,/https:\\/\\/.*\\.github\\.dev$/,/https:\\/\\/.*\\.vercel\\.app$/,/https:\\/\\/.*\\.pages\\.dev$/].filter(Boolean);if(s&&a.some(o=>typeof o==\"string\"?o===s:o&&typeof o.test==\"function\"?o.test(s):!1)&&(t.set(\"Access-Control-Allow-Origin\",s),t.set(\"Access-Control-Allow-Credentials\",\"true\")),n.method===\"OPTIONS\"){t.set(\"Access-Control-Allow-Methods\",\"GET, POST, PUT, DELETE, OPTIONS\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type, Authorization, X-Requested-With\"),t.set(\"Access-Control-Max-Age\",\"86400\");return}await l()},Ie=async n=>{await De(n),n.pathname.startsWith(\"/api/\")&&await Le(n)},je=Object.freeze(Object.defineProperty({__proto__:null,onRequest:Ie},Symbol.toStringTag,{value:\"Module\"})),qe=()=>{const t=Te().url.pathname,l=[{path:\"/dashboard\",label:\"🏠 Dashboard\",description:\"System overview and real-time stats\",status:\"live\"},{path:\"/dashboard/analytics\",label:\"📈 Analytics\",description:\"Real database metrics and performance\",status:\"live\"},{path:\"/dashboard/media\",label:\"📁 Media\",description:\"Cloudflare R2 file storage\",status:\"live\"},{path:\"/dashboard/components\",label:\"🧩 Components\",description:\"LIT Web Components with Spectrum tokens\",status:\"live\"},{path:\"/dashboard/posts\",label:\"📝 Posts\",description:\"Content management with Supabase\",status:\"live\"},{path:\"/dashboard/pages\",label:\"📄 Pages\",description:\"Content pages (basic implementation)\",status:\"basic\"}];return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},[e(\"nav\",null,{class:\"bg-white shadow-sm border-b\"},e(\"div\",null,{class:\"container\"},[e(\"div\",null,{class:\"flex items-center justify-between py-4\"},[e(\"div\",null,{class:\"flex items-center space-x-4\"},[M(ue,{href:\"/\",class:\"text-2xl font-bold text-blue-600 hover:text-blue-700\",children:\"🚀 Production Platform\",[F]:{href:F,class:F}},3,\"ya_0\"),e(\"span\",null,{class:\"px-2 py-1 bg-green-100 text-green-800 text-xs font-medium rounded-full\"},\"✅ LIVE\",3,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-4\"},[e(\"span\",null,{class:\"text-sm text-gray-500\"},\"Real-time system status\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 text-sm font-medium\"},\"Health Check →\",3,null)],3,null)],1,null),e(\"div\",null,{class:\"flex space-x-1 pb-4\"},l.map(s=>M(ue,{get href(){return s.path},class:`relative flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all ${t===s.path?\"bg-blue-100 text-blue-700 shadow-sm\":\"text-gray-600 hover:text-gray-900 hover:bg-gray-50\"}`,get title(){return s.description},children:[e(\"span\",null,null,v(s,\"label\"),1,null),s.status===\"live\"&&e(\"span\",null,{class:\"w-2 h-2 bg-green-500 rounded-full\"},null,3,\"ya_1\"),s.status===\"basic\"&&e(\"span\",null,{class:\"w-2 h-2 bg-yellow-500 rounded-full\"},null,3,\"ya_2\")],[F]:{href:le(s,\"path\"),title:le(s,\"description\")}},1,s.path)),1,null)],1,null),1,null),e(\"main\",null,{class:\"container py-8\"},M(J,null,3,\"ya_3\"),1,null)],1,\"ya_4\")},Ue=O(b(qe,\"s_spkpV1Js00Y\")),ze=Object.freeze(Object.defineProperty({__proto__:null,default:Ue},Symbol.toStringTag,{value:\"Module\"})),Be=()=>e(\"div\",null,{class:\"app-layout\"},e(\"div\",null,{class:\"flex h-screen bg-gray-50\"},[e(\"aside\",null,{class:\"w-64 bg-white shadow-sm\"},[e(\"div\",null,{class:\"p-4\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Dashboard\",3,null),3,null),e(\"nav\",null,{class:\"mt-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Overview\",3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Posts\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Media\",3,null),e(\"a\",null,{href:\"/dashboard/settings\",class:\"block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100\"},\"Settings\",3,null)],3,null)],3,null),e(\"main\",null,{class:\"flex-1 overflow-y-auto\"},e(\"div\",null,{class:\"p-8\"},M(J,null,3,\"qu_0\"),1,null),1,null)],1,null),1,\"qu_1\"),Ne=O(b(Be,\"s_0GWINbuBB7E\")),Ge=Object.freeze(Object.defineProperty({__proto__:null,default:Ne},Symbol.toStringTag,{value:\"Module\"})),Ve=(n,t)=>{const[l,s,a]=T();a.value=!0,s.value=n.message,l.value=t,import(\"./q-Bg2o_rQ1.js\").then(({handleUIError:r})=>{r(n,{metadata:{component:\"ErrorBoundary\",details:t}})}).catch(r=>{Promise.resolve().then(()=>he).then(({logger:o})=>{o.error(\"Failed to load error handler\",{error:r instanceof Error?r.message:String(r)})})})},He=({track:n})=>{const[t]=T();n(()=>t.value)},Ke=()=>{const[n]=T();if(typeof window<\"u\"){const t=s=>{n(s.error||new Error(s.message),{filename:s.filename,lineno:s.lineno,colno:s.colno})},l=s=>{n(new Error(s.reason),{type:\"unhandledrejection\",reason:s.reason})};return window.addEventListener(\"error\",t),window.addEventListener(\"unhandledrejection\",l),()=>{window.removeEventListener(\"error\",t),window.removeEventListener(\"unhandledrejection\",l)}}},Qe=n=>{ne();const t=y(!1),l=y(\"\"),s=y(null),a=b(Ve,\"s_ca8NcdAAFlg\",[s,l,t]);return j(b(He,\"s_td3CAKTRFPQ\",[t])),t.value&&n.onError&&queueMicrotask(()=>{var o;const r=new Error(l.value);(o=n.onError)==null||o.call(n,r,s.value)}),j(b(Ke,\"s_ssUYr8QvGrs\",[a])),t.value?n.fallback?n.fallback:e(\"div\",null,{class:\"error-boundary\"},e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-6 m-4\"},[e(\"div\",null,{class:\"flex items-center mb-4\"},[e(\"svg\",null,{class:\"w-6 h-6 text-red-600 mr-3\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.732 16.5c-.77.833.192 2.5 1.732 2.5z\"},null,3,null),3,null),e(\"h3\",null,{class:\"text-lg font-semibold text-red-800\"},\"Something went wrong\",3,null)],3,null),e(\"p\",null,{class:\"text-red-700 mb-4\"},\"We encountered an unexpected error. The error has been reported and our team will investigate.\",3,null),e(\"details\",null,{class:\"mb-4\"},[e(\"summary\",null,{class:\"cursor-pointer text-red-600 hover:text-red-800 font-medium\"},\"Error Details\",3,null),e(\"div\",null,{class:\"mt-2 p-3 bg-red-100 rounded border font-mono text-sm text-red-800\"},[e(\"p\",null,null,[e(\"strong\",null,null,\"Message:\",3,null),\" \",g(r=>r.value,[l],\"p0.value\")],3,null),s.value&&e(\"pre\",null,{class:\"mt-2 whitespace-pre-wrap overflow-x-auto\"},JSON.stringify(s.value,null,2),1,\"OV_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex gap-3\"},[e(\"button\",null,{class:\"bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 transition-colors\",onClick$:C(\"s_NKJGUpOkD7g\",[s,l,t])},\"Try Again\",3,null),e(\"button\",null,{class:\"bg-gray-600 text-white px-4 py-2 rounded hover:bg-gray-700 transition-colors\",onClick$:C(\"s_oZpj050doXE\")},\"Go Home\",3,null)],3,null)],1,null),1,\"OV_1\"):(se.reportError=a,M(J,null,3,\"OV_2\"))},se=O(b(Qe,\"s_sV00tvE05gA\")),We=async()=>{},Je=()=>(me(C(\"s_9qLjiAMeM8U\")),M(se,{children:[e(\"nav\",null,{class:\"bg-white shadow-sm border-b border-gray-200\"},e(\"div\",null,{class:\"container\"},e(\"div\",null,{class:\"flex justify-between h-16\"},[e(\"div\",null,{class:\"flex items-center\"},e(\"a\",null,{href:\"/\",class:\"text-xl font-bold text-gray-900\"},[\"🚀 \",e(\"span\",null,{class:\"text-blue-600\"},\"Qwik + LIT\",3,null),\" Production Stack\"],3,null),3,null),e(\"div\",null,{class:\"flex items-center space-x-6\"},[e(\"a\",null,{href:\"/\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"Home\",3,null),e(\"a\",null,{href:\"/dashboard\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-gray-600 hover:text-gray-900 font-medium\"},\"📁 Media\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-green-600 hover:text-green-700 font-medium\"},\"💚 Health\",3,null),e(\"a\",null,{href:\"/login\",class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🔐 Demo Login\",3,null)],3,null)],3,null),3,null),3,null),e(\"main\",null,{class:\"min-h-screen\"},M(se,{children:M(J,null,3,\"LZ_0\")},1,\"LZ_1\"),1,null),e(\"footer\",null,{class:\"bg-gradient-to-r from-gray-50 to-gray-100 mt-12\"},e(\"div\",null,{class:\"container py-8\"},e(\"div\",null,{class:\"text-center\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},\"🚀 Production-Ready Platform\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with ⚡ Qwik City • 🧩 LIT Elements • 🗄️ Supabase • ☁️ Cloudflare\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-6 text-sm\"},[e(\"span\",null,{class:\"text-green-600 font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"⚡ Zero Hydration\",3,null),e(\"span\",null,{class:\"text-purple-600 font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"text-yellow-600 font-medium\"},\"🌐 Edge Computing\",3,null)],3,null)],3,null),3,null),3,null)]},1,\"LZ_2\")),Ze=O(b(Je,\"s_Ko4dh3oGD7U\")),Ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ze,onRequest:We},Symbol.toStringTag,{value:\"Module\"})),Xe=({cleanup:n})=>{const[t]=T(),l=setInterval(()=>{t.value=new Date().toLocaleTimeString()},1e3);n(()=>clearInterval(l))},et=async()=>{const[n]=T();if(!(typeof window>\"u\"))try{const t=await fetch(\"/api/health\");if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to load system status\",{error:t instanceof Error?t.message:String(t)})}},tt=n=>{const[t]=T();t.value=n},lt=()=>{const n=y(null),t=y(new Date().toLocaleTimeString());y(!1);const l=y(\"button\");j(b(Xe,\"s_rWqtG5m0xRg\",[t])),j(b(et,\"s_j3Kr0B9FRBw\",[n]));const s=b(tt,\"s_fR0Y7GocRTY\",[l]);return e(\"div\",null,{class:\"min-h-screen bg-gradient-to-br from-blue-50 via-white to-purple-50\"},[e(\"section\",null,{class:\"container py-20 text-center\"},e(\"div\",null,{class:\"max-w-4xl mx-auto\"},[e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-6\"},[\"🚀 \",e(\"span\",null,{class:\"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent\"},\"Qwik + LIT + Supabase\",3,null),e(\"br\",null,null,null,3,null),\"Production Stack\"],3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8 max-w-3xl mx-auto\"},[\"Live demonstration of a production-ready platform with \",e(\"strong\",null,null,\"zero mocks\",3,null),\", real databases, edge storage, and enterprise security. Everything you see is functional.\"],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-3 mb-8\"},[e(\"span\",null,{class:\"px-4 py-2 bg-green-100 text-green-800 rounded-full text-sm font-medium\"},\"✅ 0 TypeScript Errors\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-blue-100 text-blue-800 rounded-full text-sm font-medium\"},\"⚡ O(1) Loading\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-purple-100 text-purple-800 rounded-full text-sm font-medium\"},\"🔐 Enterprise Security\",3,null),e(\"span\",null,{class:\"px-4 py-2 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium\"},\"🌐 Edge Computing\",3,null)],3,null),e(\"div\",null,{class:\"flex flex-wrap justify-center gap-4\"},[e(\"a\",null,{href:\"/dashboard\",class:\"btn bg-blue-600 text-white hover:bg-blue-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🏠 Live Dashboard\",3,null),e(\"a\",null,{href:\"/login\",class:\"btn bg-purple-600 text-white hover:bg-purple-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"🔐 Auth Demo\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"btn bg-green-600 text-white hover:bg-green-700 px-8 py-3 rounded-lg font-semibold transition-all transform hover:scale-105\"},\"💚 Health Check\",3,null)],3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-6\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900\"},\"🔥 Live System Status\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},[\"Updated: \",g(a=>a.value,[t],\"p0.value\")],3,null)],3,null),n.value?e(\"div\",null,{class:\"grid md:grid-cols-3 lg:grid-cols-6 gap-6\"},[e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.database.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.database.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.database.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase DB\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.database.responseTime,[n],\"p0.value.checks.database.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.storage.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.storage.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.storage.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"R2 Storage\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.storage.responseTime,[n],\"p0.value.checks.storage.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.cache.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.cache.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.cache.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"KV Cache\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.cache.responseTime,[n],\"p0.value.checks.cache.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.external.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.external.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.external.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"External APIs\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},[g(a=>a.value.checks.external.responseTime,[n],\"p0.value.checks.external.responseTime\"),\"ms\"],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.memory.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.memory.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.memory.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Memory\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Optimal\",3,null)],3,null),e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:g(a=>`text-3xl mb-2 ${a.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`,[n],'`text-3xl mb-2 ${p0.value.checks.platform.status===\"pass\"?\"text-green-500\":\"text-red-500\"}`')},g(a=>a.value.checks.platform.status===\"pass\"?\"✅\":\"❌\",[n],'p0.value.checks.platform.status===\"pass\"?\"✅\":\"❌\"'),3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Ready\",3,null)],3,null)],3,\"UG_0\"):e(\"div\",null,{class:\"text-center py-8\"},[e(\"div\",null,{class:\"animate-spin text-4xl mb-4\"},\"⚡\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Loading real system status...\",3,null)],3,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-gray-900 mb-6 text-center\"},\"🎨 Live Design System with Spectrum Tokens\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 mb-8\"},[e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"button\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_5k0fPY9uNBg\",[s])},\"Buttons\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"input\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_0SRyEbnJ408\",[s])},\"Inputs\",3,null),e(\"button\",null,{class:g(a=>`px-4 py-2 rounded-lg transition-all ${a.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`,[l],'`px-4 py-2 rounded-lg transition-all ${p0.value===\"upload\"?\"bg-blue-600 text-white\":\"bg-gray-100 text-gray-700 hover:bg-gray-200\"}`'),onClick$:C(\"s_QKGBDBTwM0Y\",[s])},\"File Upload\",3,null)],3,null),e(\"div\",null,{class:\"text-center p-8 bg-gray-50 rounded-xl\"},[l.value===\"button\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Buttons\",3,null),e(\"div\",null,{class:\"flex justify-center gap-4 flex-wrap\"},[e(\"ds-button\",null,{variant:\"primary\",size:\"medium\"},\"Primary Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"medium\"},\"Secondary Button\",3,null),e(\"ds-button\",null,{variant:\"primary\",size:\"large\"},\"Large Button\",3,null),e(\"ds-button\",null,{variant:\"secondary\",size:\"large\",disabled:!0},\"Disabled\",3,null)],3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Powered by Adobe Spectrum design tokens • Web Components • Framework agnostic\",3,null)],3,\"UG_1\"),l.value===\"input\"&&e(\"div\",null,{class:\"space-y-4 max-w-md mx-auto\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - Inputs\",3,null),e(\"ds-input\",null,{type:\"text\",label:\"Demo Input\",placeholder:\"Try typing here...\",class:\"w-full\"},null,3,null),e(\"ds-input\",null,{type:\"email\",label:\"Email Input\",placeholder:\"user@example.com\",required:!0,class:\"w-full\"},null,3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real validation • Spectrum design tokens • Accessible by default\",3,null)],3,\"UG_2\"),l.value===\"upload\"&&e(\"div\",null,{class:\"space-y-4\"},[e(\"h3\",null,{class:\"text-xl font-semibold mb-4\"},\"LIT Web Components - File Upload\",3,null),e(\"div\",null,{class:\"max-w-md mx-auto\"},e(\"ds-file-upload\",null,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf\",maxSize:10485760,multiple:!0,bucket:\"demo\",class:\"w-full\"},null,3,null),3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-4\"},\"Real Cloudflare R2 upload • Drag & drop • Progress tracking • Security validated\",3,null)],3,\"UG_3\")],1,null)],1,null),1,null),e(\"section\",null,{class:\"container py-12\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-12\"},\"🏆 Production Features Showcase\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"📊\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Real-Time Analytics\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Live database queries with performance metrics. No simulations.\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-blue-600 hover:text-blue-800 font-medium\"},\"View Live Data →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🔐\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"JWT Authentication\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Supabase Auth with Row Level Security. Enterprise grade.\",3,null),e(\"a\",null,{href:\"/login\",class:\"text-purple-600 hover:text-purple-800 font-medium\"},\"Try Login Flow →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"☁️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Edge Storage\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Cloudflare R2 with global CDN. Upload and see permanent URLs.\",3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"text-green-600 hover:text-green-800 font-medium\"},\"Manage Files →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🛡️\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Security Hardened\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"CSP headers, rate limiting, input validation, RBAC.\",3,null),e(\"a\",null,{href:\"/api/health\",target:\"_blank\",class:\"text-red-600 hover:text-red-800 font-medium\"},\"Security Report →\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"⚡\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Zero Hydration\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Qwik resumability means instant interactivity.\",3,null),e(\"span\",null,{class:\"text-blue-600 font-medium\"},\"Active on this page!\",3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-xl shadow-lg p-6 hover:shadow-xl transition-shadow\"},[e(\"div\",null,{class:\"text-3xl mb-4\"},\"🧩\",3,null),e(\"h3\",null,{class:\"text-xl font-semibold mb-3\"},\"Web Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"LIT components with Spectrum tokens. Framework agnostic.\",3,null),e(\"a\",null,{href:\"/dashboard/components\",class:\"text-yellow-600 hover:text-yellow-800 font-medium\"},\"Component Library →\",3,null)],3,null)],3,null)],3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-gradient-to-r from-green-500 to-blue-600 rounded-2xl text-white p-8 text-center\"},[e(\"h2\",null,{class:\"text-3xl font-bold mb-6\"},\"🚀 Production Performance\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-4 gap-6\"},[e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Hydration Time\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"<500ms\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"API Response\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"0\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"TypeScript Errors\",3,null)],3,null),e(\"div\",null,null,[e(\"div\",null,{class:\"text-4xl font-bold\"},\"100%\",3,null),e(\"div\",null,{class:\"text-sm opacity-90\"},\"Real Systems\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8\"},e(\"a\",null,{href:\"/dashboard\",class:\"inline-flex items-center px-8 py-3 bg-white text-blue-600 rounded-lg hover:bg-gray-100 font-semibold transition-colors\"},\"🏠 Explore Full Dashboard\",3,null),3,null)],3,null),3,null),e(\"section\",null,{class:\"container py-12\"},e(\"div\",null,{class:\"bg-white rounded-2xl shadow-lg p-8\"},[e(\"h2\",null,{class:\"text-3xl font-bold text-center text-gray-900 mb-8\"},\"⚙️ Tech Stack\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-4 gap-6 text-center\"},[e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"⚡\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Qwik City\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"O(1) Loading\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"LIT Elements\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Web Components\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🗄️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Supabase\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Backend + Auth\",3,null)],3,null),e(\"div\",null,{class:\"p-4\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"☁️\",3,null),e(\"h3\",null,{class:\"font-semibold\"},\"Cloudflare\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Edge Computing\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 text-center\"},[e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Built with Adobe Spectrum design tokens and enterprise security standards\",3,null),e(\"div\",null,{class:\"flex justify-center flex-wrap gap-2\"},[e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"TypeScript\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vite\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Tailwind CSS\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"ESLint\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Vitest\",3,null),e(\"span\",null,{class:\"px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm\"},\"Playwright\",3,null)],3,null)],3,null)],3,null),3,null)],1,\"UG_4\")},st=O(b(lt,\"s_WrwGpWxLnZE\")),nt={title:\"Qwik + LIT + Supabase Production Platform - Live Demo\",meta:[{name:\"description\",content:\"Live demonstration of a production-ready platform built with Qwik City, LIT Web Components, Supabase backend, and Cloudflare edge services. Zero mocks, 100% functional.\"},{property:\"og:title\",content:\"Production-Ready Qwik + LIT Platform Demo\"},{property:\"og:description\",content:\"Experience a fully functional platform with real databases, authentication, file storage, and analytics. No simulations.\"}]},at=Object.freeze(Object.defineProperty({__proto__:null,default:st,head:nt},Symbol.toStringTag,{value:\"Module\"})),rt=async({json:n,headers:t})=>{t.set(\"Cache-Control\",\"public, max-age=3600\"),t.set(\"Access-Control-Allow-Origin\",\"*\"),t.set(\"Access-Control-Allow-Methods\",\"GET\"),t.set(\"Access-Control-Allow-Headers\",\"Content-Type\"),t.set(\"Content-Type\",\"application/manifest+json\"),n(200,{name:\"Qwik + LIT + Builder.io Stack\",short_name:\"Qwik Stack\",description:\"Modern web application with Qwik, LIT, and Builder.io\",start_url:\"/\",display:\"standalone\",background_color:\"#ffffff\",theme_color:\"#2563eb\",icons:[{src:\"/favicon.svg\",sizes:\"any\",type:\"image/svg+xml\"}]})},ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:rt},Symbol.toStringTag,{value:\"Module\"}));let ee=null;function E(){return ee||(ee=Z(\"https://wprgiqjcabmhhmwmurcp.supabase.co\",\"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6IndwcmdpcWpjYWJtaGhtd211cmNwIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTExMDM3NTUsImV4cCI6MjA2NjY3OTc1NX0.Q_teLY9vCvBElFVaJpIJzcXTJ_HBQdBgBGcMIeqFRoo\",{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0},global:{headers:{\"x-application-name\":\"qwik-lit-builder\"}},realtime:{params:{eventsPerSecond:10}}})),ee}const re={async signIn(n,t){const l=E();return l?l.auth.signInWithPassword({email:n,password:t}):{data:null,error:new Error(\"Supabase not available\")}},async signUp(n,t,l){const s=E();return s?s.auth.signUp({email:n,password:t,options:{data:l}}):{data:null,error:new Error(\"Supabase not available\")}},async signInWithOAuth(n){const t=E();if(!t)throw new Error(\"Supabase client not available\");return t.auth.signInWithOAuth({provider:n,options:{redirectTo:`${window.location.origin}/auth/callback`}})},async signInWithMagicLink(n){const t=E();return t?t.auth.signInWithOtp({email:n,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}}):{data:null,error:new Error(\"Supabase not available\")}},async signOut(){const n=E();return n?n.auth.signOut():{error:null}},async getSession(){const n=E();return n?n.auth.getSession():{data:{session:null},error:null}},async getUser(){const n=E();return n?n.auth.getUser():{data:{user:null},error:null}},onAuthStateChange(n){const t=E();return t?t.auth.onAuthStateChange(n):{data:{subscription:{unsubscribe:()=>{}}}}}},it=async({url:n,json:t})=>{try{const l=n.searchParams.get(\"range\")||\"7d\",s=E(),a=new Date,{startDate:r,endDate:o,previousStartDate:i,previousEndDate:u}=ut(l,a);p.info(\"Fetching real analytics data\",{timeRange:l,startDate:r.toISOString(),endDate:o.toISOString()});const[c,m,d,h]=await Promise.all([de(s,r,o),de(s,i,u),ct(s,r,o),dt()]),w={pageViews:{value:c.pageViews,change:Q(c.pageViews,m.pageViews)},uniqueVisitors:{value:c.uniqueVisitors,change:Q(c.uniqueVisitors,m.uniqueVisitors)},bounceRate:{value:`${Math.round(c.bounceRate)}%`,change:Q(m.bounceRate,c.bounceRate)},avgSessionTime:{value:gt(c.avgSessionTimeMs),change:Q(c.avgSessionTimeMs,m.avgSessionTimeMs)}},A={analytics:w,performance:{builderContent:{loadTime:`${(h.builderContentLoadTime/1e3).toFixed(1)}s`,rating:te(h.builderContentLoadTime)},mediaFiles:{loadTime:`${(h.mediaLoadTime/1e3).toFixed(1)}s`,rating:te(h.mediaLoadTime)},cacheHitRate:{value:`${Math.round(h.cacheHitRate)}%`,rating:pt(h.cacheHitRate)},apiResponseTime:{value:`${Math.round(h.apiResponseTime)}ms`,rating:te(h.apiResponseTime)}},content:d,lastUpdated:a.toISOString()};p.info(\"Real analytics data retrieved successfully\",{timeRange:l,pageViews:w.pageViews.value,uniqueVisitors:w.uniqueVisitors.value,contentItemsCount:d.length}),t(200,A)}catch(l){const s=l instanceof Error?l.message:String(l),a=l instanceof Error?l.stack:void 0;p.error(\"Failed to fetch analytics data\",{error:s,stack:a}),t(500,{error:\"Failed to fetch analytics data\",message:\"Unable to retrieve dashboard metrics. Please try again later.\"})}};function ut(n,t){const l=new Date(t);let s,a,r;switch(n){case\"24h\":s=new Date(t.getTime()-864e5),r=new Date(s),a=new Date(s.getTime()-864e5);break;case\"30d\":s=new Date(t.getTime()-2592e6),r=new Date(s),a=new Date(s.getTime()-2592e6);break;case\"90d\":s=new Date(t.getTime()-7776e6),r=new Date(s),a=new Date(s.getTime()-7776e6);break;default:s=new Date(t.getTime()-6048e5),r=new Date(s),a=new Date(s.getTime()-6048e5)}return{startDate:s,endDate:l,previousStartDate:a,previousEndDate:r}}async function de(n,t,l){try{const{data:s,error:a}=await n.from(\"analytics_events\").select(\"user_id, session_id, event_type, created_at\").eq(\"event_type\",\"page_view\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(a)throw p.error(\"Failed to fetch page view data\",{error:a}),new Error(\"Page view data unavailable\");const{data:r,error:o}=await n.from(\"user_sessions\").select(\"user_id, session_id, session_duration, bounce, created_at\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString());if(o)throw p.error(\"Failed to fetch session data\",{error:o}),new Error(\"Session data unavailable\");const i=(s==null?void 0:s.length)||0,u=new Set((s==null?void 0:s.map(d=>d.user_id))||[]).size,c=(r==null?void 0:r.length)>0?r.filter(d=>d.bounce).length/r.length*100:0,m=(r==null?void 0:r.length)>0?r.reduce((d,h)=>d+(h.session_duration||0),0)/r.length:0;return{pageViews:i,uniqueVisitors:u,bounceRate:c,avgSessionTimeMs:m,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}catch(s){const a=s instanceof Error?s.message:String(s);return p.error(\"Error fetching analytics period data\",{error:a}),{pageViews:0,uniqueVisitors:0,bounceRate:0,avgSessionTimeMs:0,previousPeriodViews:0,previousUniqueVisitors:0,previousBounceRate:0,previousSessionTimeMs:0}}}async function ct(n,t,l){var s,a,r,o,i,u,c,m,d,h,w,A;try{const[_,$,f,k]=await Promise.all([n.from(\"builder_pages\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"content_posts\").select(\"id, title, view_count, engagement_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"media_files\").select(\"id, filename, download_count, view_count\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString()),n.from(\"component_usage\").select(\"component_id, usage_count, performance_score\").gte(\"created_at\",t.toISOString()).lte(\"created_at\",l.toISOString())]);return[{type:\"Pages\",count:((s=_.data)==null?void 0:s.length)||0,views:((a=_.data)==null?void 0:a.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((r=_.data)==null?void 0:r.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Posts\",count:((o=$.data)==null?void 0:o.length)||0,views:((i=$.data)==null?void 0:i.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((u=$.data)==null?void 0:u.reduce((P,R)=>P+(R.engagement_score||0),0))||0},{type:\"Media\",count:((c=f.data)==null?void 0:c.length)||0,views:((m=f.data)==null?void 0:m.reduce((P,R)=>P+(R.view_count||0),0))||0,engagement:((d=f.data)==null?void 0:d.reduce((P,R)=>P+(R.download_count||0),0))||0},{type:\"Components\",count:((h=k.data)==null?void 0:h.length)||0,views:((w=k.data)==null?void 0:w.reduce((P,R)=>P+(R.usage_count||0),0))||0,engagement:((A=k.data)==null?void 0:A.reduce((P,R)=>P+(R.performance_score||0),0))||0}]}catch(_){const $=_ instanceof Error?_.message:String(_);return p.error(\"Error fetching content metrics\",{error:$}),[{type:\"Pages\",count:0,views:0,engagement:0},{type:\"Posts\",count:0,views:0,engagement:0},{type:\"Media\",count:0,views:0,engagement:0},{type:\"Components\",count:0,views:0,engagement:0}]}}async function dt(){try{const n=E(),{data:t}=await n.from(\"cache_entries\").select(\"hit_count\").not(\"hit_count\",\"is\",null),l=(t==null?void 0:t.reduce((d,h)=>d+(h.hit_count||0),0))||0,s=(t==null?void 0:t.length)||0,a=s>0?l/s*100:0,r=Date.now();try{await fetch(\"/api/content/pages?limit=1\",{method:\"HEAD\"})}catch{}const o=Date.now()-r,i=Date.now();try{await fetch(\"/api/files/list?limit=1\",{method:\"HEAD\"})}catch{}const u=Date.now()-i,{data:c}=await n.from(\"analytics_events\").select(\"load_time\").eq(\"event_type\",\"api_request\").not(\"load_time\",\"is\",null).order(\"created_at\",{ascending:!1}).limit(100),m=(c==null?void 0:c.length)>0?c.reduce((d,h)=>d+(h.load_time||0),0)/c.length:250;return{builderContentLoadTime:o,mediaLoadTime:u,cacheHitRate:a,apiResponseTime:m}}catch(n){const t=n instanceof Error?n.message:String(n);return p.error(\"Error fetching performance metrics\",{error:t}),{builderContentLoadTime:1200,mediaLoadTime:800,cacheHitRate:0,apiResponseTime:300}}}function Q(n,t){if(t===0)return n>0?\"+100%\":\"0%\";const l=(n-t)/t*100;return`${l>=0?\"+\":\"\"}${Math.round(l)}%`}function gt(n){const t=Math.round(n/1e3),l=Math.floor(t/60),s=t%60;return`${l}m ${s}s`}function te(n){return n<1e3?\"Excellent\":n<2e3?\"Good\":n<3e3?\"Fair\":\"Poor\"}function pt(n){return n>=90?\"Excellent\":n>=75?\"Good\":n>=50?\"Fair\":\"Poor\"}const mt=Object.freeze(Object.defineProperty({__proto__:null,onGet:it},Symbol.toStringTag,{value:\"Module\"})),ht=async({json:n,cookie:t,env:l,request:s})=>{try{const a=t.get(\"sb-auth-token\"),r=s.headers.get(\"authorization\"),o=(a==null?void 0:a.value)||(r!=null&&r.startsWith(\"Bearer \")?r.substring(7):null);if(!o){n(200,{authenticated:!1,hasToken:!1,tokenPresent:!1,reason:\"No token provided\"});return}const i=l.get(\"VITE_SUPABASE_URL\")||process.env.VITE_SUPABASE_URL||\"\",u=l.get(\"SUPABASE_SERVICE_KEY\")||process.env.SUPABASE_SERVICE_KEY||\"\";if(!i||!u){n(500,{authenticated:!1,error:\"Server configuration error - Supabase not configured\"});return}const c=Z(i,u),{data:{user:m},error:d}=await c.auth.getUser(o);if(d||!m){n(200,{authenticated:!1,hasToken:!0,tokenPresent:!0,valid:!1,reason:(d==null?void 0:d.message)||\"Invalid token\",error:d==null?void 0:d.message});return}n(200,{authenticated:!0,hasToken:!0,tokenPresent:!0,valid:!0,user:{id:m.id,email:m.email,emailVerified:m.email_confirmed_at!==null,lastSignIn:m.last_sign_in_at,createdAt:m.created_at}})}catch(a){p.error(\"Auth status check failed\",{},a),n(500,{authenticated:!1,error:\"Failed to check authentication status\"})}},ft=Object.freeze(Object.defineProperty({__proto__:null,onGet:ht},Symbol.toStringTag,{value:\"Module\"}));class bt{constructor(t){this.config=t,this.history=[],this.keyStats=new Map,this.strategyStats=new Map}recordHit(t){this.history.push(t),this.history.length>this.config.maxHistorySize&&(this.history=this.history.slice(-this.config.maxHistorySize));const l=t.key,s=this.keyStats.get(l)||{requests:0,hits:0,totalTime:0};if(s.requests++,s.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&s.hits++,this.keyStats.set(l,s),t.strategy){const a=t.strategy,r=this.strategyStats.get(a)||{requests:0,hits:0,totalTime:0};r.requests++,r.totalTime+=t.responseTime,(t.type===\"hit\"||t.type===\"stale\")&&r.hits++,this.strategyStats.set(a,r)}}getMetrics(t){const l=Date.now(),s=t?l-t*6e4:0,a=this.history.filter(f=>f.timestamp>=s),r=a.length,o=a.filter(f=>f.type===\"hit\").length,i=a.filter(f=>f.type===\"stale\").length,u=a.filter(f=>f.type===\"miss\").length,c=a.filter(f=>f.type===\"error\").length,m=r>0?(o+i)/r*100:0,d=r>0?a.reduce((f,k)=>f+k.responseTime,0)/r:0,h=a.filter(f=>f.size).reduce((f,k)=>f+(k.size||0),0),w=new Map;a.forEach(f=>{const k=w.get(f.key)||{requests:0,hits:0};k.requests++,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,w.set(f.key,k)});const A=Array.from(w.entries()).map(([f,k])=>({key:f,requests:k.requests,hitRate:k.requests>0?k.hits/k.requests*100:0})).sort((f,k)=>k.requests-f.requests).slice(0,10),_=new Map;a.forEach(f=>{if(f.strategy){const k=_.get(f.strategy)||{requests:0,hits:0,totalTime:0};k.requests++,k.totalTime+=f.responseTime,(f.type===\"hit\"||f.type===\"stale\")&&k.hits++,_.set(f.strategy,k)}});const $={};return _.forEach((f,k)=>{$[k]={requests:f.requests,hitRate:f.requests>0?f.hits/f.requests*100:0,averageTime:f.requests>0?f.totalTime/f.requests:0}}),{totalRequests:r,hits:o,misses:u,staleHits:i,errors:c,hitRate:m,averageResponseTime:d,totalSize:h,topKeys:A,strategiesPerformance:$}}generateInsights(t=60){const l=this.getMetrics(t),s=[];l.hitRate<this.config.alertThresholds.minHitRate?s.push(`⚠️ Low hit rate: ${l.hitRate.toFixed(1)}% (target: ${this.config.alertThresholds.minHitRate}%)`):l.hitRate>90&&s.push(`✅ Excellent hit rate: ${l.hitRate.toFixed(1)}%`),l.averageResponseTime>this.config.alertThresholds.maxResponseTime&&s.push(`⚠️ Slow response time: ${l.averageResponseTime.toFixed(1)}ms (target: <${this.config.alertThresholds.maxResponseTime}ms)`);const a=l.totalRequests>0?l.errors/l.totalRequests*100:0;a>this.config.alertThresholds.maxErrorRate&&s.push(`⚠️ High error rate: ${a.toFixed(1)}% (target: <${this.config.alertThresholds.maxErrorRate}%)`);const r=l.topKeys[0];return r&&r.hitRate<50&&s.push(`🔍 Most requested key \"${r.key}\" has low hit rate: ${r.hitRate.toFixed(1)}%`),Object.entries(l.strategiesPerformance).forEach(([o,i])=>{i.hitRate<50&&i.requests>10&&s.push(`🎯 Strategy \"${o}\" underperforming: ${i.hitRate.toFixed(1)}% hit rate`)}),l.totalSize>10485760&&s.push(`📊 Large cache usage: ${(l.totalSize/1024/1024).toFixed(1)}MB`),s}exportData(t){const l=Date.now(),s=t?l-t*6e4:0;return{metrics:this.getMetrics(t),insights:this.generateInsights(t),rawData:this.history.filter(a=>a.timestamp>=s)}}clear(){this.history=[],this.keyStats.clear(),this.strategyStats.clear()}getPerformanceScore(){const t=this.getMetrics(60);if(t.totalRequests===0)return 100;let l=0;l+=t.hitRate/100*50;const s=Math.max(0,100-t.averageResponseTime/10);l+=s/100*30;const a=t.errors/t.totalRequests*100,r=Math.max(0,100-a*10);return l+=r/100*20,Math.round(Math.max(0,Math.min(100,l)))}}const yt={maxHistorySize:1e4,aggregationWindow:60,alertThresholds:{minHitRate:80,maxResponseTime:100,maxErrorRate:1}},G=new bt(yt),vt=async({json:n,url:t,cacheControl:l})=>{try{l({maxAge:0,sMaxAge:60,public:!0,staleWhileRevalidate:300});const s=parseInt(t.searchParams.get(\"window\")||\"60\");switch(t.searchParams.get(\"action\")||\"metrics\"){case\"metrics\":const r=G.getMetrics(s),o=G.getPerformanceScore(),i=G.generateInsights(s);n(200,{success:!0,data:{metrics:r,performanceScore:o,insights:i,window:s,timestamp:Date.now()}});break;case\"export\":const u=G.exportData(s);n(200,{success:!0,data:u,timestamp:Date.now()});break;default:n(400,{success:!1,error:\"Invalid action. Use: metrics or export\"})}}catch(s){n(500,{success:!1,error:\"Internal server error\",details:s instanceof Error?s.message:\"Unknown error\"})}},xt=async({json:n,parseBody:t})=>{try{const l=await t(),{action:s}=l;switch(s){case\"clear\":G.clear(),n(200,{success:!0,data:{cleared:\"analytics\",timestamp:Date.now()}});break;default:n(400,{success:!1,error:\"Invalid action. Use: clear\"})}}catch(l){n(500,{success:!1,error:\"Internal server error\",details:l instanceof Error?l.message:\"Unknown error\"})}},wt=Object.freeze(Object.defineProperty({__proto__:null,onGet:vt,onPost:xt},Symbol.toStringTag,{value:\"Module\"})),_t=async({json:n,env:t,query:l,request:s})=>{const{onGet:a}=await Promise.resolve().then(()=>ye);return a({json:n,env:t,query:l,request:s})},St=async({json:n,env:t,request:l})=>{const{onPost:s}=await Promise.resolve().then(()=>ve);return s({json:n,env:t,request:l})},kt=Object.freeze(Object.defineProperty({__proto__:null,onGet:_t,onPost:St},Symbol.toStringTag,{value:\"Module\"}));class Ct{constructor(){this.supabase=E()}async getPages(t={}){try{const{page:l=1,limit:s=20,search:a,published:r,author_id:o}=t,i=(l-1)*s;let u=this.supabase.from(\"pages\").select(\"*\",{count:\"exact\"}).is(\"deleted_at\",null).order(\"created_at\",{ascending:!1});r!==void 0&&(u=u.eq(\"published\",r)),o&&(u=u.eq(\"author_id\",o)),a&&(u=u.or(`title.ilike.%${a}%,description.ilike.%${a}%,slug.ilike.%${a}%`)),u=u.range(i,i+s-1);const{data:c,error:m,count:d}=await u;if(m)throw new Error(`Failed to fetch pages: ${m.message}`);const h=d||0,w=Math.ceil(h/s);return{data:c||[],pagination:{page:l,limit:s,total:h,totalPages:w,hasMore:l<w}}}catch(l){throw p.error(\"Error fetching pages\",{},l),l}}async getPage(t,l=!1){try{const s=/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(t);let a=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).single();s?a=a.eq(\"id\",t):a=a.eq(\"slug\",t);const{data:r,error:o}=await a;if(o&&o.code!==\"PGRST116\")throw new Error(`Failed to fetch page: ${o.message}`);if(!r)return null;let i=[];if(l){const{data:u,error:c}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",r.id).order(\"order_index\",{ascending:!0});c?p.error(\"Error fetching content blocks\",{pageId:r.id},c):i=u||[]}return{...r,blocks:i}}catch(s){throw p.error(\"Error fetching page\",{identifier:t},s),s}}async createPage(t,l){try{if(await this.getPage(t.slug))throw new Error(`Page with slug \"${t.slug}\" already exists`);t.title,t.slug,t.description,t.template,t.published,t.published&&new Date().toISOString();const{data:a,error:r}=await this.supabase.rpc(\"create_page_with_template\",{page_title:t.title,page_slug:t.slug,template_name:t.template||\"default\",author_uuid:l});if(r)throw new Error(`Failed to create page: ${r.message}`);const o=await this.getPage(a);if(!o)throw new Error(\"Page was created but could not be retrieved\");return p.info(\"Page created successfully\",{pageId:o.id,title:o.title,slug:o.slug}),o}catch(s){throw p.error(\"Error creating page\",t,s),s}}async updatePage(t,l,s){try{const a=await this.getPage(t);if(!a)throw new Error(\"Page not found\");if(a.author_id!==s)throw new Error(\"Permission denied: You can only update your own pages\");if(l.slug&&l.slug!==a.slug&&await this.getPage(l.slug))throw new Error(`Page with slug \"${l.slug}\" already exists`);const r={...l,updated_at:new Date().toISOString()};l.published!==void 0&&(l.published&&!a.published?r.published_at=new Date().toISOString():!l.published&&a.published&&(r.published_at=null));const{data:o,error:i}=await this.supabase.from(\"pages\").update(r).eq(\"id\",t).eq(\"author_id\",s).select().single();if(i)throw new Error(`Failed to update page: ${i.message}`);return p.info(\"Page updated successfully\",{pageId:t,updates:Object.keys(l)}),o}catch(a){throw p.error(\"Error updating page\",{pageId:t,updates:l},a),a}}async deletePage(t,l){try{const s=await this.getPage(t);if(!s)throw new Error(\"Page not found\");if(s.author_id!==l)throw new Error(\"Permission denied: You can only delete your own pages\");const{error:a}=await this.supabase.from(\"pages\").update({deleted_at:new Date().toISOString(),published:!1,updated_at:new Date().toISOString()}).eq(\"id\",t).eq(\"author_id\",l);if(a)throw new Error(`Failed to delete page: ${a.message}`);p.info(\"Page deleted successfully\",{pageId:t})}catch(s){throw p.error(\"Error deleting page\",{pageId:t},s),s}}async togglePublished(t,l,s){try{return this.updatePage(t,{published:l},s)}catch(a){throw p.error(\"Error toggling page published status\",{pageId:t,published:l},a),a}}async getPagesByAuthor(t,l={}){return this.getPages({...l,author_id:t})}async getPublishedPages(t={}){return this.getPages({...t,published:!0})}async getPageTemplates(){try{const{data:t,error:l}=await this.supabase.from(\"page_templates\").select(\"*\").eq(\"active\",!0).order(\"name\");if(l)throw new Error(`Failed to fetch page templates: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching page templates\",{},t),t}}async searchPages(t,l={}){try{const{published:s,limit:a=10}=l;let r=this.supabase.from(\"pages\").select(\"*\").is(\"deleted_at\",null).or(`title.ilike.%${t}%,description.ilike.%${t}%,content.cs.{\"text\": \"${t}\"}`).order(\"view_count\",{ascending:!1}).limit(a);s!==void 0&&(r=r.eq(\"published\",s));const{data:o,error:i}=await r;if(i)throw new Error(`Failed to search pages: ${i.message}`);return o||[]}catch(s){throw p.error(\"Error searching pages\",{query:t,options:l},s),s}}async incrementViewCount(t){try{const{data:l}=await this.supabase.from(\"pages\").select(\"view_count\").eq(\"id\",t).single();if(l){const{error:s}=await this.supabase.from(\"pages\").update({view_count:(l.view_count||0)+1}).eq(\"id\",t);s&&p.warn(\"Failed to increment view count\",{pageId:t,error:s.message})}}catch{p.warn(\"Error incrementing view count\",{pageId:t})}}}const V=new Ct;class Tt{constructor(){this.supabase=E()}async getPageBlocks(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).order(\"order_index\",{ascending:!0});if(s)throw new Error(`Failed to fetch content blocks: ${s.message}`);return l||[]}catch(l){throw p.error(\"Error fetching page blocks\",{pageId:t},l),l}}async getBlocksByRegion(t,l){try{const{data:s,error:a}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"page_id\",t).eq(\"region\",l).order(\"order_index\",{ascending:!0});if(a)throw new Error(`Failed to fetch blocks for region: ${a.message}`);return s||[]}catch(s){throw p.error(\"Error fetching blocks by region\",{pageId:t,region:l},s),s}}async getBlock(t){try{const{data:l,error:s}=await this.supabase.from(\"content_blocks\").select(\"*\").eq(\"id\",t).single();if(s&&s.code!==\"PGRST116\")throw new Error(`Failed to fetch content block: ${s.message}`);return l||null}catch(l){throw p.error(\"Error fetching content block\",{blockId:t},l),l}}async createBlock(t){var l;try{let s=t.order_index;if(s===void 0){const{data:i}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",t.page_id).eq(\"region\",t.region||\"main\").order(\"order_index\",{ascending:!1}).limit(1);s=(((l=i==null?void 0:i[0])==null?void 0:l.order_index)||-1)+1}const a={page_id:t.page_id,block_type:t.block_type,component_name:t.component_name||t.block_type,properties:t.properties||{},children:t.children||[],order_index:s,region:t.region||\"main\",parent_block_id:t.parent_block_id||null,visibility_rules:{},block_version:\"1.0.0\"},{data:r,error:o}=await this.supabase.from(\"content_blocks\").insert(a).select().single();if(o)throw new Error(`Failed to create content block: ${o.message}`);return p.info(\"Content block created successfully\",{blockId:r.id,pageId:t.page_id,type:t.block_type}),r}catch(s){throw p.error(\"Error creating content block\",t,s),s}}async updateBlock(t,l){try{const s={...l,updated_at:new Date().toISOString()},{data:a,error:r}=await this.supabase.from(\"content_blocks\").update(s).eq(\"id\",t).select().single();if(r)throw new Error(`Failed to update content block: ${r.message}`);return p.info(\"Content block updated successfully\",{blockId:t,updates:Object.keys(l)}),a}catch(s){throw p.error(\"Error updating content block\",{blockId:t,updates:l},s),s}}async deleteBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const{error:s}=await this.supabase.from(\"content_blocks\").delete().eq(\"id\",t);if(s)throw new Error(`Failed to delete content block: ${s.message}`);await this.reorderBlocksAfterDeletion(l.page_id,l.region,l.order_index),p.info(\"Content block deleted successfully\",{blockId:t})}catch(l){throw p.error(\"Error deleting content block\",{blockId:t},l),l}}async reorderBlocks(t,l,s){var a;try{const r=s.blocks.map(u=>this.supabase.from(\"content_blocks\").update({order_index:u.order_index,updated_at:new Date().toISOString()}).eq(\"id\",u.id).eq(\"page_id\",t).eq(\"region\",l)),i=(await Promise.all(r)).filter(u=>u.error);if(i.length>0)throw new Error(`Failed to reorder blocks: ${(a=i[0].error)==null?void 0:a.message}`);p.info(\"Blocks reordered successfully\",{pageId:t,region:l,blocksCount:s.blocks.length})}catch(r){throw p.error(\"Error reordering blocks\",{pageId:t,region:l,reorderData:s},r),r}}async moveBlockToRegion(t,l,s){var a;try{const r=await this.getBlock(t);if(!r)throw new Error(\"Content block not found\");let o=s;if(o===void 0){const{data:u}=await this.supabase.from(\"content_blocks\").select(\"order_index\").eq(\"page_id\",r.page_id).eq(\"region\",l).order(\"order_index\",{ascending:!1}).limit(1);o=(((a=u==null?void 0:u[0])==null?void 0:a.order_index)||-1)+1}const i=await this.updateBlock(t,{region:l,order_index:o});return await this.reorderBlocksAfterDeletion(r.page_id,r.region,r.order_index),p.info(\"Block moved to new region\",{blockId:t,oldRegion:r.region,newRegion:l,orderIndex:o}),i}catch(r){throw p.error(\"Error moving block to region\",{blockId:t,newRegion:l},r),r}}async duplicateBlock(t){try{const l=await this.getBlock(t);if(!l)throw new Error(\"Content block not found\");const s={page_id:l.page_id,block_type:l.block_type,component_name:l.component_name||void 0,properties:l.properties,children:l.children,region:l.region,parent_block_id:l.parent_block_id||void 0},a=await this.createBlock(s);return p.info(\"Block duplicated successfully\",{originalBlockId:t,duplicatedBlockId:a.id}),a}catch(l){throw p.error(\"Error duplicating block\",{blockId:t},l),l}}async getAvailableComponents(){try{const{data:t,error:l}=await this.supabase.from(\"component_library\").select(\"*\").eq(\"active\",!0).order(\"category\",{ascending:!0}).order(\"name\",{ascending:!0});if(l)throw new Error(`Failed to fetch component library: ${l.message}`);return t||[]}catch(t){throw p.error(\"Error fetching available components\",{},t),t}}async reorderBlocksAfterDeletion(t,l,s){try{const{data:a,error:r}=await this.supabase.from(\"content_blocks\").select(\"id, order_index\").eq(\"page_id\",t).eq(\"region\",l).gt(\"order_index\",s).order(\"order_index\",{ascending:!0});if(r)throw new Error(`Failed to fetch blocks for reordering: ${r.message}`);if(!a||a.length===0)return;const o=a.map(i=>this.supabase.from(\"content_blocks\").update({order_index:i.order_index-1,updated_at:new Date().toISOString()}).eq(\"id\",i.id));await Promise.all(o),p.info(\"Blocks reordered after deletion\",{pageId:t,region:l,reorderedCount:a.length})}catch(a){p.error(\"Error reordering blocks after deletion\",{pageId:t,region:l,deletedOrderIndex:s},a)}}}new Tt;class fe extends Error{constructor(t,l,s){super(t),this.code=l,this.statusCode=s,this.name=\"CMSError\"}}const Pt=n=>/^[a-z0-9-]+$/.test(n),Et=n=>n.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"),Rt=n=>n.length>=1&&n.length<=200,Ft=async({json:n,query:t,cookie:l})=>{try{const s=parseInt(t.get(\"page\")||\"1\"),a=Math.min(parseInt(t.get(\"limit\")||\"20\"),50),r=t.get(\"search\")||void 0,o=t.get(\"published\")?t.get(\"published\")===\"true\":void 0,i=t.get(\"author_only\")===\"true\";let u;if(i){if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required for author-only requests\"});return}u=void 0}const c=await V.getPages({page:s,limit:a,search:r,published:o,author_id:u});p.info(\"Pages fetched successfully\",{page:s,limit:a,total:c.pagination.total,search:r||\"none\"}),n(200,{pages:c.data,pagination:c.pagination})}catch(s){p.error(\"Error fetching pages\",{},s),s instanceof fe?n(s.statusCode||500,{error:s.message,code:s.code}):n(500,{error:\"Failed to fetch pages\",details:s instanceof Error?s.message:\"Unknown error\"})}},Mt=async({json:n,parseBody:t,cookie:l})=>{try{const s=await t();if(!s||typeof s!=\"object\"){n(400,{error:\"Invalid request body\"});return}const{title:a,slug:r,description:o,template:i,published:u}=s;if(!a||typeof a!=\"string\"){n(400,{error:\"Title is required and must be a string\"});return}if(!Rt(a)){n(400,{error:\"Title must be between 1 and 200 characters\"});return}let c=r;if(!c)c=Et(a);else if(!Pt(c)){n(400,{error:\"Slug must contain only lowercase letters, numbers, and hyphens\"});return}if(!l.get(\"sb-access-token\")){n(401,{error:\"Authentication required\"});return}const d=null,h={title:a.trim(),slug:c,description:o?o.trim():void 0,template:i||\"default\",published:u===!0},w=await V.createPage(h,d);p.info(\"Page created successfully\",{pageId:w.id,title:w.title,slug:w.slug,published:w.published}),n(201,{success:!0,page:{id:w.id,title:w.title,slug:w.slug,description:w.description,template:w.template,published:w.published,created_at:w.created_at,url:`/${w.slug}`}})}catch(s){if(p.error(\"Error creating page\",{},s),s instanceof fe)n(s.statusCode||500,{error:s.message,code:s.code});else{const a=s instanceof Error?s.message:\"Unknown error\";a.includes(\"duplicate key\")||a.includes(\"already exists\")?n(409,{error:\"A page with this slug already exists\",code:\"DUPLICATE_SLUG\"}):a.includes(\"violates check constraint\")?n(400,{error:\"Invalid page data\",code:\"VALIDATION_ERROR\"}):n(500,{error:\"Failed to create page\",details:a})}}},Ot=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ft,onPost:Mt},Symbol.toStringTag,{value:\"Module\"})),At=async({json:n,query:t})=>{try{const l=E(),s=parseInt(t.get(\"page\")||\"1\"),a=parseInt(t.get(\"limit\")||\"10\"),r=(s-1)*a,{data:o,error:i,count:u}=await l.from(\"pages\").select(\"*\",{count:\"exact\"}).eq(\"published\",!0).order(\"created_at\",{ascending:!1}).range(r,r+a-1);if(i)throw i;n(200,{posts:o||[],pagination:{page:s,limit:a,total:u||0,pages:Math.ceil((u||0)/a)}})}catch(l){n(500,{error:\"Failed to fetch posts\",details:l instanceof Error?l.message:\"Unknown error\"})}},$t=async({json:n,request:t})=>{var l;try{const s=E(),a=await t.json(),{data:r,error:o}=await s.from(\"pages\").insert([{title:a.title||\"Untitled\",content:a.content||null,slug:a.slug||((l=a.title)==null?void 0:l.toLowerCase().replace(/\\s+/g,\"-\"))||\"untitled\",published:a.published||!1,description:a.content||\"\"}]).select().single();if(o)throw o;n(201,{post:r})}catch(s){n(500,{error:\"Failed to create post\",details:s instanceof Error?s.message:\"Unknown error\"})}},Dt=Object.freeze(Object.defineProperty({__proto__:null,onGet:At,onPost:$t},Symbol.toStringTag,{value:\"Module\"})),Lt=async({json:n,query:t})=>{const l=t.get(\"q\"),s=t.get(\"type\");if(!l){n(400,{error:\"Search query is required\"});return}try{const a={query:l,results:{pages:[],posts:[],media:[]},total:0};if(!s||s===\"posts\"){const r=E(),{data:o}=await r.from(\"posts\").select(\"id, title, content, slug, created_at\").or(`title.ilike.%${l}%,content.ilike.%${l}%`).limit(10);a.results.posts=(o==null?void 0:o.map(i=>{var u;return{id:i.id,title:i.title,type:\"post\",url:`/posts/${i.slug}`,excerpt:((u=i.content)==null?void 0:u.substring(0,150))+\"...\",created_at:i.created_at}}))||[]}if(!s||s===\"pages\"){const r=E();try{const{data:o}=await r.from(\"pages\").select(\"id, title, description, slug, created_at\").or(`title.ilike.%${l}%,description.ilike.%${l}%`).eq(\"published\",!0).limit(10);a.results.pages=(o==null?void 0:o.map(i=>({id:i.id,title:i.title,type:\"page\",url:`/${i.slug}`,excerpt:i.description||\"\",created_at:i.created_at})))||[]}catch(o){console.error(\"Pages search error:\",o),a.results.pages=[]}}if(!s||s===\"media\"){const r=E(),{data:o}=await r.from(\"uploaded_files\").select(\"id, original_name, file_type, url, uploaded_at\").ilike(\"original_name\",`%${l}%`).limit(10);a.results.media=(o==null?void 0:o.map(i=>({id:i.id,title:i.original_name,type:\"media\",url:i.url,file_type:i.file_type,created_at:i.uploaded_at})))||[]}a.total=a.results.pages.length+a.results.posts.length+a.results.media.length,n(200,a)}catch(a){n(500,{error:\"Search failed\",details:a instanceof Error?a.message:\"Unknown error\"})}},It=Object.freeze(Object.defineProperty({__proto__:null,onGet:Lt},Symbol.toStringTag,{value:\"Module\"}));class be extends Error{constructor(t,l,s=500,a){super(t),this.code=l,this.statusCode=s,this.details=a,this.name=\"AppError\",Error.captureStackTrace(this,this.constructor)}}class ge extends be{constructor(t){super(`${t} not found`,\"NOT_FOUND\",404),this.name=\"NotFoundError\"}}function oe(n){if(Promise.resolve().then(()=>he).then(({logger:t})=>{t.error(\"API Error occurred\",{error:n instanceof Error?n.message:String(n)})}),n instanceof be)return{statusCode:n.statusCode,body:{error:{code:n.code,message:n.message,details:n.details}}};if(n&&typeof n==\"object\"&&\"code\"in n){const t=n;return{statusCode:400,body:{error:{code:t.code,message:t.message||\"Database error\"}}}}return{statusCode:500,body:{error:{code:\"INTERNAL_ERROR\",message:\"An unexpected error occurred\"}}}}async function pe(n,t){try{const l=new Date(Date.now()-3e5).toISOString(),{data:s,error:a}=await t.from(\"user_sessions\").select(\"session_id\").eq(\"user_id\",n).gte(\"last_activity\",l).eq(\"active\",!0);return a?(p.warn(\"Failed to get session count\",{userId:n,error:a.message}),0):(s==null?void 0:s.length)||0}catch(l){return p.warn(\"Session count query failed\",{userId:n,error:l instanceof Error?l.message:String(l)}),0}}const jt=async({json:n,env:t,request:l})=>{try{const s=l.headers.get(\"authorization\");if(!s||!s.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const a=t.get(\"SUPABASE_URL\")||\"\",r=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!a||!r){n(500,{error:\"Server configuration error\"});return}const o=Z(a,r),i=s.replace(\"Bearer \",\"\"),{data:{user:u},error:c}=await o.auth.getUser(i);if(c||!u){n(401,{error:\"Invalid authentication\"});return}const{data:m,error:d}=await o.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",u.id).single();if(d){n(200,{totalFiles:0,totalSize:0,storageUsed:\"0 B\",imageCount:0,videoCount:0,audioCount:0,documentCount:0,lastUpload:null,avgFileSize:0,activeSessions:await pe(u.id,o)});return}const h=w=>{const A=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(w===0)return\"0 B\";const _=Math.floor(Math.log(w)/Math.log(1024));return`${(w/Math.pow(1024,_)).toFixed(1)} ${A[_]}`};n(200,{totalFiles:m.total_files||0,totalSize:m.total_size||0,storageUsed:h(m.total_size||0),imageCount:m.image_count||0,videoCount:m.video_count||0,audioCount:m.audio_count||0,documentCount:m.document_count||0,lastUpload:m.last_upload,avgFileSize:Math.round(m.avg_file_size||0),activeSessions:await pe(u.id,o)})}catch(s){const{statusCode:a,body:r}=oe(s);n(a,r)}},qt=Object.freeze(Object.defineProperty({__proto__:null,onGet:jt},Symbol.toStringTag,{value:\"Module\"})),Ut=async({json:n,env:t,request:l,url:s})=>{try{const a=parseInt(s.searchParams.get(\"page\")||\"1\"),r=parseInt(s.searchParams.get(\"limit\")||\"20\"),o=s.searchParams.get(\"filter\")||\"all\",i=s.searchParams.get(\"search\")||\"\",u=l.headers.get(\"authorization\");if(!u||!u.startsWith(\"Bearer \")){n(401,{error:\"Authentication required\"});return}const c=t.get(\"SUPABASE_URL\")||\"\",m=t.get(\"SUPABASE_SERVICE_ROLE_KEY\")||\"\";if(!c||!m){n(500,{error:\"Server configuration error\"});return}const d=Z(c,m),h=u.replace(\"Bearer \",\"\"),{data:{user:w},error:A}=await d.auth.getUser(h);if(A||!w){n(401,{error:\"Invalid authentication\"});return}let _=d.from(\"file_metadata\").select(\"*\",{count:\"exact\"}).eq(\"user_id\",w.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1});if(o!==\"all\")switch(o){case\"images\":_=_.like(\"mime_type\",\"image/%\");break;case\"videos\":_=_.like(\"mime_type\",\"video/%\");break;case\"audio\":_=_.like(\"mime_type\",\"audio/%\");break;case\"documents\":_=_.or(\"mime_type.like.application/%,mime_type.like.text/%\");break}i&&(_=_.textSearch(\"search_vector\",i));const $=(a-1)*r;_=_.range($,$+r-1);const{data:f,error:k,count:P}=await _;if(k){n(500,{error:\"Failed to fetch files\"});return}const R=t.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\",K=D=>`https://qwik-production-files.${R}.r2.cloudflarestorage.com/${D}`,X=(f||[]).map(D=>({id:D.id,name:D.file_name,size:D.file_size,type:D.mime_type||\"application/octet-stream\",url:K(D.storage_path),uploadedAt:D.created_at,thumbnailUrl:D.thumbnail_path?K(D.thumbnail_path):void 0,tags:D.tags||[]})),B=P||0,N=Math.ceil(B/r),Ce=a<N;n(200,{files:X,pagination:{page:a,limit:r,total:B,totalPages:N,hasMore:Ce},stats:{totalFiles:B,filteredCount:X.length}})}catch(a){const{statusCode:r,body:o}=oe(a);n(r,o)}},ye=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ut},Symbol.toStringTag,{value:\"Module\"})),zt=async({query:n,json:t,platform:l,error:s})=>{var o;const a=n.get(\"key\"),r=parseInt(n.get(\"expires\")||\"3600\");if(!a)throw s(400,\"Missing key parameter\");if(!((o=l==null?void 0:l.env)!=null&&o.R2))throw s(500,\"R2 storage not configured\");try{const i=new URL(`/api/storage/proxy/${a}`,l.request.url);t(200,{url:i.toString(),expires:new Date(Date.now()+r*1e3).toISOString()})}catch{throw s(500,\"Failed to generate signed URL\")}},Bt=Object.freeze(Object.defineProperty({__proto__:null,onGet:zt},Symbol.toStringTag,{value:\"Module\"}));class Nt{constructor(t){this.kv=t}async get(t){const l=await this.kv.get(t);if(!l)return null;try{return JSON.parse(l)}catch{return l}}async set(t,l,s){const a={};s&&(a.expirationTtl=s);const r=typeof l==\"string\"?l:JSON.stringify(l);await this.kv.put(t,r,a)}async delete(t){await this.kv.delete(t)}async list(t){return(await this.kv.list({prefix:t})).keys.map(s=>s.name)}}class Gt{constructor(t){this.r2=t}async upload(t,l){return await this.r2.put(t,l)}async get(t){return await this.r2.get(t)}async delete(t){await this.r2.delete(t)}async list(t){return await this.r2.list({prefix:t})}async createSignedUrl(t,l){const s=new URL(\"/api/storage/signed-url\",\"https://your-domain.com\");return s.searchParams.set(\"key\",t),s.searchParams.set(\"expires\",l.toString()),s.toString()}}function Y(n){return n.env?{kv:n.env.KV?new Nt(n.env.KV):null,r2:n.env.R2?new Gt(n.env.R2):null,env:n.env}:{kv:null,r2:null,env:void 0}}const Vt=async({params:n,platform:t,error:l,cacheControl:s,send:a})=>{var o,i;const r=n.path;if(!r||!((o=t==null?void 0:t.env)!=null&&o.R2))throw l(404,\"File not found\");try{const c=await Y(t).r2.get(r);if(!c)throw new ge(\"File\");s({maxAge:2592e3,sMaxAge:31536e3,public:!0,immutable:!0}),a(new Response(c.body,{headers:{\"Content-Type\":((i=c.httpMetadata)==null?void 0:i.contentType)||\"application/octet-stream\",\"Content-Length\":c.size.toString(),ETag:c.httpEtag||\"\",\"Cache-Control\":\"public, max-age=2592000, immutable\"}}))}catch(u){throw u instanceof ge?l(404,\"File not found\"):l(500,\"Failed to retrieve file\")}},Ht=Object.freeze(Object.defineProperty({__proto__:null,onGet:Vt},Symbol.toStringTag,{value:\"Module\"})),Kt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{const o=await a.kv.get(r);n(200,{key:r,value:o,found:o!==null})}catch{throw l(500,\"Failed to get cache value\")}},Qt=async({json:n,platform:t,error:l,request:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");try{const r=await s.json(),{key:o,value:i,ttl:u}=r;if(!o)throw l(400,\"Key is required\");await a.kv.set(o,i,u),n(200,{success:!0,key:o})}catch{throw l(500,\"Failed to set cache value\")}},Wt=async({json:n,platform:t,error:l,query:s})=>{const a=Y(t);if(!a.kv)throw l(503,\"KV storage not available\");const r=s.get(\"key\");if(!r)throw l(400,\"Key parameter required\");try{await a.kv.delete(r),n(200,{success:!0,key:r})}catch{throw l(500,\"Failed to delete cache value\")}},Jt=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Wt,onGet:Kt,onPost:Qt},Symbol.toStringTag,{value:\"Module\"})),Zt=async({json:n})=>{n(200,{message:\"Unified Content Management API\",version:\"1.0.0\",contentTypes:{pages:{description:\"Visual pages and landing pages\",provider:\"Builder.io\",endpoints:[\"GET /api/content/pages - List all pages\",\"GET /api/content/pages/{id} - Get specific page\",\"POST /api/content/pages - Create new page\",\"PUT /api/content/pages/{id} - Update page\",\"DELETE /api/content/pages/{id} - Delete page\"]},posts:{description:\"Blog posts and articles\",provider:\"Supabase\",endpoints:[\"GET /api/content/posts - List all posts\",\"GET /api/content/posts/{id} - Get specific post\",\"POST /api/content/posts - Create new post\",\"PUT /api/content/posts/{id} - Update post\",\"DELETE /api/content/posts/{id} - Delete post\"]},media:{description:\"Files, images, and assets\",provider:\"R2 + Supabase\",endpoints:[\"GET /api/content/media - List all media\",\"POST /api/content/media - Upload new media\",\"DELETE /api/content/media/{id} - Delete media\"]},search:{description:\"Unified search across all content\",provider:\"Multi-source\",endpoints:[\"GET /api/content/search?q={query} - Search all content types\",\"GET /api/content/search/{type}?q={query} - Search specific type\"]}},documentation:\"/api/docs\"})},Yt=Object.freeze(Object.defineProperty({__proto__:null,onGet:Zt},Symbol.toStringTag,{value:\"Module\"})),z={title:\"Qwik LIT Builder App API\",version:\"2.0.0\",description:\"REST API for file management, dashboard analytics, cache management, and health monitoring\",endpoints:{\"GET /api/health\":{description:\"Health check endpoint with service status\",params:{},response:{status:\"healthy\",timestamp:\"ISO string\",checks:\"object\"}},\"POST /api/upload\":{description:\"File upload to R2 storage with database metadata\",params:{file:\"File\",bucket:\"string\",userId:\"string?\"},response:{success:!0,storage:\"r2\",path:\"string\",url:\"string\",size:\"number\"}},\"GET /api/dashboard/stats\":{description:\"Real-time dashboard statistics from database\",params:{},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{totalFiles:\"number\",totalSize:\"number\",storageUsed:\"string\",imageCount:\"number\",videoCount:\"number\",audioCount:\"number\",documentCount:\"number\",lastUpload:\"string|null\",avgFileSize:\"number\",activeSessions:\"number\"}},\"GET /api/files/list\":{description:\"List user files with pagination and filtering\",params:{page:\"number?\",limit:\"number?\",filter:\"string?\",search:\"string?\"},headers:{Authorization:\"Bearer JWT_TOKEN\"},response:{files:\"MediaFile[]\",pagination:{page:\"number\",total:\"number\",hasMore:\"boolean\"},stats:{totalFiles:\"number\",filteredCount:\"number\"}}},\"GET /api/cache\":{description:\"Get cached value by key\",params:{key:\"string\"},response:{key:\"string\",value:\"any\",found:\"boolean\"}},\"POST /api/cache\":{description:\"Set cache value with optional TTL\",body:{key:\"string\",value:\"any\",ttl:\"number?\"},response:{success:!0,key:\"string\"}},\"DELETE /api/cache\":{description:\"Delete cached value by key\",params:{key:\"string\"},response:{success:!0,key:\"string\"}}},errors:{400:{code:\"BAD_REQUEST\",message:\"Invalid request parameters\"},404:{code:\"NOT_FOUND\",message:\"Resource not found\"},500:{code:\"INTERNAL_ERROR\",message:\"Internal server error\"},503:{code:\"SERVICE_UNAVAILABLE\",message:\"Service temporarily unavailable\"}}},Xt=async({json:n,headers:t})=>{t.set(\"Content-Type\",\"application/json\"),n(200,z)},el=()=>e(\"div\",null,{class:\"container mx-auto py-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold mb-8\"},\"API Documentation\",3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Overview\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-2\"},[\"Version: \",z.version],3,null),e(\"p\",null,{class:\"text-gray-600\"},z.description,3,null)],3,null),e(\"div\",null,{class:\"space-y-6\"},[e(\"h2\",null,{class:\"text-2xl font-semibold\"},\"Endpoints\",3,null),Object.entries(z.endpoints).map(([n,t])=>{const[l,s]=n.split(\" \");return e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"div\",null,{class:\"flex items-center gap-4 mb-4\"},[e(\"span\",{class:`px-3 py-1 rounded text-white text-sm font-medium ${l===\"GET\"?\"bg-blue-500\":l===\"POST\"?\"bg-green-500\":l===\"PUT\"?\"bg-yellow-500\":l===\"DELETE\"?\"bg-red-500\":\"bg-gray-500\"}`},null,l,1,null),e(\"code\",null,{class:\"text-lg font-mono\"},s,1,null)],1,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"description\"),1,null),\"params\"in t&&t.params&&Object.keys(t.params).length>0&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Parameters:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},JSON.stringify(t.params,null,2),1,null)],1,\"Q5_0\"),\"body\"in t&&t.body&&e(\"div\",null,{class:\"mb-4\"},[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Request Body:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.body==\"string\"?t.body:JSON.stringify(t.body,null,2),1,null)],1,\"Q5_1\"),t.response&&e(\"div\",null,null,[e(\"h4\",null,{class:\"font-semibold mb-2\"},\"Response:\",3,null),e(\"pre\",null,{class:\"bg-gray-100 p-3 rounded text-sm overflow-x-auto\"},typeof t.response==\"string\"?t.response:JSON.stringify(t.response,null,2),1,null)],1,\"Q5_2\")],1,n)})],1,null),e(\"div\",null,{class:\"mt-12\"},[e(\"h2\",null,{class:\"text-2xl font-semibold mb-6\"},\"Error Responses\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 gap-4\"},Object.entries(z.errors).map(([n,t])=>e(\"div\",null,{class:\"bg-white rounded-lg shadow p-4\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-2\"},[e(\"span\",null,{class:\"text-lg font-semibold\"},[\"HTTP \",n],1,null),e(\"code\",null,{class:\"text-sm text-red-600\"},v(t,\"code\"),1,null)],1,null),e(\"p\",null,{class:\"text-gray-600\"},v(t,\"message\"),1,null)],1,n)),1,null)],1,null)],1,\"Q5_3\"),tl=O(b(el,\"s_k97l0w6myfc\")),ll=Object.freeze(Object.defineProperty({__proto__:null,_auto_API_DOCS:z,default:tl,onGet:Xt},Symbol.toStringTag,{value:\"Module\"})),sl=x.object({message:x.string(),stack:x.string().optional(),context:x.object({userId:x.string().optional(),sessionId:x.string().optional(),route:x.string().optional(),timestamp:x.string(),userAgent:x.string().optional(),metadata:x.record(x.any()).optional()}),severity:x.enum([\"low\",\"medium\",\"high\",\"critical\"]),category:x.enum([\"ui\",\"api\",\"auth\",\"data\",\"network\",\"system\"])}),nl=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),r=sl.parse(a),o={timestamp:new Date().toISOString(),level:r.severity===\"critical\"||r.severity===\"high\"?\"error\":r.severity===\"medium\"?\"warn\":\"info\",message:r.message,category:r.category,severity:r.severity,context:r.context,stack:r.stack,userAgent:t.headers.get(\"user-agent\"),ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\"};if(r.severity===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const i=`critical_error_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(i,JSON.stringify(o),{expirationTtl:604800})}await al(o),n(200,{success:!0,data:{errorId:`err_${Date.now()}_${Math.random().toString(36).slice(2)}`}})}catch{n(500,{error:\"Failed to process error report\"})}};async function al(n){try{const t=process.env.SENTRY_DSN;if(t&&n.severity===\"critical\"){const l=`${t.replace(\"/sentry.io/\",\"/sentry.io/api/\")}/store/`;await fetch(l,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",\"X-Sentry-Auth\":`Sentry sentry_version=7, sentry_key=${t.split(\"@\")[0].split(\"//\")[1]}`},body:JSON.stringify({message:n.message,level:n.level,platform:\"javascript\",timestamp:n.timestamp,tags:{category:n.category,severity:n.severity},extra:{context:n.context,userAgent:n.userAgent,ip:n.ip},exception:n.stack?[{type:\"Error\",value:n.message,stacktrace:{frames:n.stack.split(`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 2,
        "content": "`).map(s=>({filename:\"unknown\",function:s.trim(),lineno:0}))}}]:void 0})})}process.env.ERROR_WEBHOOK_URL&&n.severity===\"critical\"&&await fetch(process.env.ERROR_WEBHOOK_URL,{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({text:`🚨 Critical Error: ${n.message}`,attachments:[{color:\"danger\",fields:[{title:\"Category\",value:n.category,short:!0},{title:\"Route\",value:n.context.route||\"unknown\",short:!0},{title:\"User Agent\",value:n.userAgent||\"unknown\",short:!1},{title:\"Stack Trace\",value:n.stack||\"No stack trace\",short:!1}]}]})})}catch{}}const rl=async({json:n})=>{n(200,{success:!0,data:{service:\"error-reporting\",status:\"healthy\",timestamp:new Date().toISOString()}})},ol=Object.freeze(Object.defineProperty({__proto__:null,onGet:rl,onPost:nl},Symbol.toStringTag,{value:\"Module\"})),L={requestCount:0,errorCount:0,lastReset:Date.now(),responseTimes:[]};function il(){L.requestCount++}function ul(){L.errorCount++}function cl(n){L.responseTimes.push(n),L.responseTimes.length>100&&L.responseTimes.shift()}async function dl(){const n=Date.now();try{const t=process.env.VITE_SUPABASE_URL||\"\";if(t.includes(\"placeholder\")||t.includes(\"wprgiqjcabmhhmwmurcp\")||!t)return{status:\"warn\",responseTime:Date.now()-n,message:\"Database not configured for development\",provider:\"supabase\",details:{mode:\"development\",configured:!1}};const s=E(),{error:a}=await s.from(\"profiles\").select(\"count\").limit(1),r=Date.now()-n;if(a)throw new Error(a.message);return r>1e3?{status:\"warn\",responseTime:r,message:\"Database response time is high\",provider:\"supabase\",details:{threshold:1e3}}:{status:\"pass\",responseTime:r,message:\"Database connection successful\",provider:\"supabase\"}}catch(t){return{status:\"warn\",responseTime:Date.now()-n,message:\"Database connection failed (development mode)\",provider:\"supabase\",details:{error:t instanceof Error?t.message:\"Unknown error\",mode:\"development\"}}}}async function gl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.R2?(await n.env.R2.head(\"health-check.txt\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Storage service operational\",provider:\"cloudflare-r2\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"R2 storage not configured\",provider:\"cloudflare-r2\"}}catch(s){const a=Date.now()-t;return a<5e3?{status:\"pass\",responseTime:a,message:\"Storage service operational\",provider:\"cloudflare-r2\"}:{status:\"fail\",responseTime:a,message:\"Storage service unavailable\",provider:\"cloudflare-r2\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function pl(n){var l;const t=Date.now();try{return(l=n==null?void 0:n.env)!=null&&l.KV?(await n.env.KV.get(\"health-check\"),{status:\"pass\",responseTime:Date.now()-t,message:\"Cache service operational\",provider:\"cloudflare-kv\"}):{status:\"warn\",responseTime:Date.now()-t,message:\"KV cache not configured\",provider:\"cloudflare-kv\"}}catch(s){return{status:\"fail\",responseTime:Date.now()-t,message:\"Cache service unavailable\",provider:\"cloudflare-kv\",details:{error:s instanceof Error?s.message:\"Unknown error\"}}}}async function ml(){const n=Date.now();try{const l=new AbortController,s=setTimeout(()=>l.abort(),1e3),a=await Promise.allSettled([fetch(\"https://api.github.com/zen\",{method:\"GET\",signal:l.signal}).then(i=>i.ok),fetch(\"https://httpbin.org/status/200\",{method:\"HEAD\",signal:l.signal}).then(i=>i.ok)]);clearTimeout(s);const r=Date.now()-n,o=a.filter(i=>i.status===\"fulfilled\"&&i.value===!0).length;return o===0?{status:\"fail\",responseTime:r,message:\"All external services unavailable\",details:{totalChecks:a.length,passed:o}}:o<a.length?{status:\"warn\",responseTime:r,message:\"Some external services unavailable\",details:{totalChecks:a.length,passed:o}}:{status:\"pass\",responseTime:r,message:\"External services accessible\",details:{totalChecks:a.length,passed:o}}}catch(t){return{status:\"fail\",responseTime:Date.now()-n,message:\"External services check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function hl(){try{let n=null;if(typeof performance<\"u\"&&\"memory\"in performance&&(n=performance.memory),n){const t=n.usedJSHeapSize/1024/1024,l=n.totalJSHeapSize/1024/1024,s=t/l*100;return s>90?{status:\"fail\",message:\"Memory usage critical\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:s>75?{status:\"warn\",message:\"Memory usage high\",details:{usagePercentage:s,usedMB:t,totalMB:l}}:{status:\"pass\",message:\"Memory usage normal\",details:{usagePercentage:s,usedMB:t,totalMB:l}}}return{status:\"pass\",message:\"Memory monitoring not available\"}}catch(n){return{status:\"fail\",message:\"Memory check failed\",details:{error:n instanceof Error?n.message:\"Unknown error\"}}}}function fl(n){try{const t={provider:\"cloudflare-pages\",region:\"unknown\"};return n!=null&&n.env&&(t.provider=n.env.DEPLOY_TARGET||\"cloudflare-pages\",t.region=n.env.CF_REGION||\"unknown\",t.hasKV=!!n.env.KV,t.hasR2=!!n.env.R2,t.hasD1=!!n.env.DB),{status:\"pass\",message:\"Platform operational\",details:t}}catch(t){return{status:\"fail\",message:\"Platform check failed\",details:{error:t instanceof Error?t.message:\"Unknown error\"}}}}function bl(n){const t=Object.values(n),l=t.filter(r=>r.status===\"fail\").length,s=t.filter(r=>r.status===\"warn\").length,a=process.env.NODE_ENV===\"development\";return l>0?\"unhealthy\":s>0&&!a?\"degraded\":\"healthy\"}const yl=async({json:n,platform:t})=>{var s;const l=Date.now();il();try{const a=((s=t==null?void 0:t.env)==null?void 0:s.DEPLOY_TARGET)===\"cloudflare\",r=[dl(),gl(t),pl(t),Promise.resolve(hl()),Promise.resolve(fl(t))];a||r.push(ml());const o=await Promise.all(r),[i,u,c,m,d,h]=o,A={database:i,storage:u,cache:c,external:h||{status:\"pass\",message:\"External services check skipped in production\",responseTime:0},memory:m,platform:d},_=bl(A),f=Date.now()-L.lastReset,k=L.requestCount>0?L.errorCount/L.requestCount*100:0,P=Date.now()-l;cl(P);let R=null;typeof performance<\"u\"&&\"memory\"in performance&&(R=performance.memory);const K={status:_,timestamp:new Date().toISOString(),uptime:Math.floor(f/1e3),version:process.env.npm_package_version||\"1.0.0\",environment:process.env.NODE_ENV||\"development\",checks:A,metrics:{responseTime:P,errorRate:Math.round(k*100)/100,requestCount:L.requestCount,memoryUsage:R}};p.info(\"Health check completed\",{status:_,responseTime:P,checks:Object.entries(A).map(([B,N])=>({name:B,status:N.status,responseTime:N.responseTime}))}),n(_===\"healthy\"||_===\"degraded\"?200:503,K)}catch(a){ul(),p.error(\"Health check failed\",{responseTime:Date.now()-l},a),n(503,{error:\"Health check failed\",message:a instanceof Error?a.message:\"Unknown error\",details:{status:\"unhealthy\",timestamp:new Date().toISOString()}})}},vl=Object.freeze(Object.defineProperty({__proto__:null,onGet:yl},Symbol.toStringTag,{value:\"Module\"})),xl=x.object({timestamp:x.string(),level:x.enum([\"debug\",\"info\",\"warn\",\"error\",\"critical\"]),message:x.string(),context:x.record(x.any()).optional(),userId:x.string().optional(),sessionId:x.string().optional(),requestId:x.string().optional(),route:x.string().optional(),userAgent:x.string().optional(),ip:x.string().optional(),duration:x.number().optional(),stack:x.string().optional()}),wl=x.object({logs:x.array(xl)}),_l=async({json:n,request:t,platform:l})=>{var s;try{const a=await t.json(),{logs:r}=wl.parse(a),o=r.map(i=>({...i,ip:t.headers.get(\"cf-connecting-ip\")||t.headers.get(\"x-forwarded-for\")||\"unknown\",serverTimestamp:new Date().toISOString(),userAgent:t.headers.get(\"user-agent\")||i.userAgent}));for(const i of o){const u={\"@timestamp\":i.serverTimestamp,level:i.level,message:i.message,service:\"qwik-lit-builder-client\",environment:process.env.NODE_ENV||\"development\",...i.context,client:{timestamp:i.timestamp,route:i.route,userAgent:i.userAgent,ip:i.ip},user:{userId:i.userId,sessionId:i.sessionId},request:{requestId:i.requestId,duration:i.duration},error:i.stack?{stack:i.stack}:void 0},c=i.level===\"critical\"||i.level===\"error\"?\"error\":i.level===\"warn\"?\"warn\":\"log\";if(console[c](\"[CLIENT_LOG]\",JSON.stringify(u)),i.level===\"critical\"&&((s=l==null?void 0:l.env)!=null&&s.ERROR_LOGS)){const m=`client_critical_${Date.now()}_${Math.random().toString(36).slice(2)}`;await l.env.ERROR_LOGS.put(m,JSON.stringify(u),{expirationTtl:604800})}}await Sl(o),n(200,{success:!0,data:{processed:r.length,timestamp:new Date().toISOString()}})}catch{n(500,{error:\"Failed to process log batch\"})}};async function Sl(n){try{const t=process.env.LOGGING_ENDPOINT,l=process.env.LOGGING_API_KEY;t&&l&&await fetch(t,{method:\"POST\",headers:{\"Content-Type\":\"application/json\",Authorization:`Bearer ${l}`},body:JSON.stringify({logs:n})})}catch{}}const kl=async({json:n})=>{n(200,{success:!0,data:{service:\"log-collection\",status:\"healthy\",timestamp:new Date().toISOString(),features:{clientLogs:!0,structuredOutput:!0,externalForwarding:!!process.env.LOGGING_ENDPOINT,kvStorage:!0}}})},Cl=Object.freeze(Object.defineProperty({__proto__:null,onGet:kl,onPost:_l},Symbol.toStringTag,{value:\"Module\"}));x.object({id:x.string().uuid(),email:x.string().email(),name:x.string().min(1)});const Tl=x.object({file:x.any().refine(n=>n&&typeof n==\"object\"&&(\"name\"in n||\"filename\"in n)&&(\"size\"in n||\"length\"in n),\"Must be a valid file\"),bucket:x.string().optional().default(\"uploads\")}),Pl=(n,t)=>n.safeParse(t);class El{constructor(t,l,s){this.bucket=t,this.accountId=l,this.bucketName=s}async uploadFile(t,l){try{const s=await t.arrayBuffer();return await this.bucket.put(l,s,{httpMetadata:{contentType:t.type||\"application/octet-stream\",cacheControl:\"public, max-age=31536000\"},customMetadata:{originalName:t.name,uploadedAt:new Date().toISOString(),size:t.size.toString()}})?{success:!0,url:this.getFileUrl(l),path:l,size:t.size}:{success:!1,error:\"Failed to upload file to R2\"}}catch(s){return{success:!1,error:s instanceof Error?s.message:\"Unknown R2 upload error\"}}}async deleteFile(t){try{return await this.bucket.delete(t),{success:!0}}catch(l){return{success:!1,error:l instanceof Error?l.message:\"Unknown R2 delete error\"}}}getFileUrl(t){return`https://${this.bucketName}.${this.accountId}.r2.cloudflarestorage.com/${t}`}async listFiles(t){try{return(await this.bucket.list({prefix:t,limit:1e3})).objects.map(s=>s.key)}catch{return[]}}}function Rl(n){const t=\"qwik-production-files\";return new El(n.R2,n.CLOUDFLARE_ACCOUNT_ID,t)}class Fl{constructor(t){this.r2Client=Rl({R2:t.r2Bucket,CLOUDFLARE_ACCOUNT_ID:t.cloudflareAccountId})}async uploadFile(t,l){try{const s=this.validateFile(t);return s.valid?await this.uploadToR2(t,l):{success:!1,provider:\"r2\",error:s.error}}catch(s){return p.error(\"Storage upload failed\",{error:s instanceof Error?s.message:String(s)}),{success:!1,provider:\"r2\",error:s instanceof Error?s.message:\"Unknown upload error\"}}}async deleteFile(t){try{return await this.r2Client.deleteFile(t)}catch(l){return p.error(\"Storage deletion failed\",{error:l instanceof Error?l.message:String(l)}),{success:!1,error:l instanceof Error?l.message:\"Unknown delete error\"}}}getFileUrl(t){return this.r2Client.getFileUrl(t)}async listFiles(t){try{const l=t?`users/${t}/`:\"uploads/\";return await this.r2Client.listFiles(l)}catch(l){return p.error(\"Storage listing failed\",{error:l instanceof Error?l.message:String(l)}),[]}}async uploadToR2(t,l){const s=this.generateFilePath(t,l);return{...await this.r2Client.uploadFile(t,s),provider:\"r2\"}}validateFile(t){return t.size>5368709120?{valid:!1,error:\"File size exceeds maximum limit of 5GB\"}:t.size===0?{valid:!1,error:\"File is empty\"}:!t.name||t.name.trim().length===0?{valid:!1,error:\"File name is required\"}:{valid:!0}}generateFilePath(t,l){const s=Date.now(),a=Math.random().toString(36).substring(7),r=t.name.split(\".\").pop()||\"\",o=t.name.replace(/\\.[^/.]+$/,\"\").substring(0,50),i=this.getFileCategory(t);return`${l?`users/${l}/`:\"uploads/\"}${i}/${s}-${a}-${o}.${r}`}getFileCategory(t){const l=t.type.toLowerCase();return l.startsWith(\"image/\")?\"images\":l.startsWith(\"video/\")?\"videos\":l.startsWith(\"audio/\")?\"audio\":l.includes(\"pdf\")||l.includes(\"text/\")||l.includes(\"application/json\")?\"documents\":\"files\"}async getStorageStats(t){const l=await this.listFiles(t);let s=0;for(const a of l)try{s+=1024}catch{}return{totalFiles:l.length,totalSize:s}}}function Ml(n){return new Fl(n)}const Ol=async({json:n})=>{n(405,{error:\"Method not allowed. Use POST to upload files.\"})},Al=async({request:n,json:t,env:l})=>{try{const s=await n.formData(),a=s.get(\"file\"),r=s.get(\"bucket\"),o=s.get(\"userId\"),i=Pl(Tl,{file:a,bucket:r});if(!i.success){t(400,{error:\"Invalid file upload data\",details:i.error.issues.map(h=>h.message)});return}const c=i.data.file,d=await Ml({r2Bucket:l.get(\"R2\"),cloudflareAccountId:l.get(\"CLOUDFLARE_ACCOUNT_ID\")||\"\"}).uploadFile(c,o);if(!d.success){t(500,{success:!1,error:d.error||\"Upload failed\"});return}t(200,{success:!0,storage:\"r2\",path:d.path,url:d.url,size:d.size,message:\"File uploaded successfully to R2\"})}catch(s){const{statusCode:a,body:r}=oe(s);t(a,r)}},ve=Object.freeze(Object.defineProperty({__proto__:null,onGet:Ol,onPost:Al},Symbol.toStringTag,{value:\"Module\"})),$l=async({url:n,redirect:t})=>{const l=n.searchParams.get(\"code\"),s=n.searchParams.get(\"access_token\"),a=n.searchParams.get(\"next\")||\"/dashboard\";throw l||s?t(302,`/auth/callback?token_present=true&next=${encodeURIComponent(a)}`):t(302,\"/login?error=auth_failed\")},Dl=()=>(me(C(\"s_ZkIemwK62xs\")),e(\"div\",null,{class:\"min-h-screen flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4\"},null,3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Completing sign in...\",3,null)],3,null),3,\"76_0\")),Ll=O(b(Dl,\"s_Jj0XOz0agbs\")),Il=Object.freeze(Object.defineProperty({__proto__:null,default:Ll,onGet:$l},Symbol.toStringTag,{value:\"Module\"})),jl=async n=>{var i,u,c,m;const[t,l,s,a,r,o]=T();try{a.value=!0,s.value=null,p.info(\"Fetching real analytics data\",{timeRange:n});const d=await fetch(`/api/analytics/dashboard?range=${n}`);if(!d.ok)throw new Error(`HTTP ${d.status}: ${d.statusText}`);const h=await d.json();t.value=h.analytics||{},o.value=h.performance||{},l.value=h.content||[],r.value=h.lastUpdated?new Date(h.lastUpdated).toLocaleString():\"Unknown\",p.info(\"Real analytics data loaded successfully\",{pageViews:((u=(i=h.analytics)==null?void 0:i.pageViews)==null?void 0:u.value)||0,uniqueVisitors:((m=(c=h.analytics)==null?void 0:c.uniqueVisitors)==null?void 0:m.value)||0,contentItems:Array.isArray(h.content)?h.content.length:0})}catch(d){const h=`Failed to load analytics: ${d instanceof Error?d.message:String(d)}`;s.value=h,p.error(\"Analytics data fetch failed\",{error:d instanceof Error?d.message:String(d),timeRange:n}),t.value={pageViews:{value:0,change:\"Error\"},uniqueVisitors:{value:0,change:\"Error\"},bounceRate:{value:\"Error\",change:\"Error\"},avgSessionTime:{value:\"Error\",change:\"Error\"}}}finally{a.value=!1}},ql=async({track:n})=>{const[t,l]=T();n(()=>l.value),await t(l.value)},Ul=()=>{const n=y(\"7d\"),t=y(!0),l=y(null),s=y(\"\"),a=y({pageViews:{value:0,change:\"0%\"},uniqueVisitors:{value:0,change:\"0%\"},bounceRate:{value:\"0%\",change:\"0%\"},avgSessionTime:{value:\"0m 0s\",change:\"0%\"}}),r=y({builderContent:{loadTime:\"0s\",rating:\"Measuring...\"},mediaFiles:{loadTime:\"0s\",rating:\"Measuring...\"},cacheHitRate:{value:\"0%\",rating:\"Measuring...\"},apiResponseTime:{value:\"0ms\",rating:\"Measuring...\"}}),o=y([]),i=b(jl,\"s_YAwb1prRrtQ\",[a,o,l,t,s,r]);return j(b(ql,\"s_H1t3zAJGOHQ\",[i,n])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Analytics & Performance\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},[\"Real-time monitoring of your content performance and system metrics\",s.value&&e(\"span\",null,{class:\"ml-2 text-sm text-gray-500\"},[\"• Last updated: \",g(u=>u.value,[s],\"p0.value\")],3,\"M2_0\")],1,null)],1,null),e(\"div\",null,{class:\"flex items-center gap-4\"},[t.value&&e(\"div\",null,{class:\"flex items-center text-blue-600\"},[e(\"div\",null,{class:\"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-600 mr-2\"},null,3,null),\"Loading...\"],3,\"M2_1\"),e(\"select\",null,{class:\"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(u=>u.value,[n],\"p0.value\"),disabled:g(u=>u.value,[t],\"p0.value\"),onChange$:C(\"s_YCN88HLlJwA\",[n])},[e(\"option\",null,{value:\"24h\"},\"Last 24 hours\",3,null),e(\"option\",null,{value:\"7d\"},\"Last 7 days\",3,null),e(\"option\",null,{value:\"30d\"},\"Last 30 days\",3,null),e(\"option\",null,{value:\"90d\"},\"Last 90 days\",3,null)],3,null)],1,null)],1,null),l.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-md p-4 mb-8\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"span\",null,{class:\"text-red-400\"},\"⚠️\",3,null),3,null),e(\"div\",null,{class:\"ml-3\"},[e(\"h3\",null,{class:\"text-sm font-medium text-red-800\"},\"Analytics Data Error\",3,null),e(\"div\",null,{class:\"mt-2 text-sm text-red-700\"},[e(\"p\",null,null,g(u=>u.value,[l],\"p0.value\"),3,null),e(\"button\",null,{class:\"mt-2 text-red-800 hover:text-red-600 underline\",onClick$:C(\"s_08kI8AH8QFg\",[i,n])},\"Try again\",3,null)],3,null)],3,null)],3,null),3,\"M2_2\"),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Page Views\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.pageViews.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.pageViews.change,[a],\"p0.value.pageViews.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Unique Visitors\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},a.value.uniqueVisitors.value.toLocaleString(),1,null)],1,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.uniqueVisitors.change,[a],\"p0.value.uniqueVisitors.change\"),3,null)],1,null),1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Bounce Rate\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.bounceRate.value,[a],\"p0.value.bounceRate.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.bounceRate.change,[a],\"p0.value.bounceRate.change\"),3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"p\",null,{class:\"text-sm font-medium text-gray-600\"},\"Avg. Session Time\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(u=>u.value.avgSessionTime.value,[a],\"p0.value.avgSessionTime.value\"),3,null)],3,null),e(\"div\",null,{class:\"text-green-600 text-sm font-medium\"},g(u=>u.value.avgSessionTime.change,[a],\"p0.value.avgSessionTime.change\"),3,null)],3,null),3,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Performance\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},[e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Builder.io Content\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.builderContent.loadTime,[r],\"p0.value.builderContent.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.builderContent.rating,[r],\"p0.value.builderContent.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average load time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.mediaFiles.loadTime,[r],\"p0.value.mediaFiles.loadTime\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.mediaFiles.rating,[r],\"p0.value.mediaFiles.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Cache Hit Rate\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Caching efficiency\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.cacheHitRate.value,[r],\"p0.value.cacheHitRate.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},g(u=>u.value.cacheHitRate.rating,[r],\"p0.value.cacheHitRate.rating\"),3,null)],3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between p-4 bg-gray-50 rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"API Response Time\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Average response time\",3,null)],3,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-xl font-bold text-gray-900\"},g(u=>u.value.apiResponseTime.value,[r],\"p0.value.apiResponseTime.value\"),3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-blue-100 text-blue-800 rounded-full\"},g(u=>u.value.apiResponseTime.rating,[r],\"p0.value.apiResponseTime.rating\"),3,null)],3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Content Analytics\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"space-y-4\"},o.value.length===0&&!t.value?e(\"div\",null,{class:\"text-center py-8 text-gray-500\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📊\",3,null),e(\"p\",null,null,\"No content metrics available\",3,null),e(\"p\",null,{class:\"text-sm\"},\"Create some content to see analytics\",3,null)],3,\"M2_3\"):o.value.map((u,c)=>{var m;return e(\"div\",null,{class:\"flex items-center justify-between p-4 border rounded-lg\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(u,\"type\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},[v(u,\"count\"),\" items\"],1,null)],1,null),e(\"div\",null,{class:\"text-right\"},[e(\"p\",null,{class:\"text-lg font-semibold text-gray-900\"},u.views!==void 0?u.views.toLocaleString():((m=u.usage)==null?void 0:m.toLocaleString())||\"0\",1,null),e(\"p\",null,{class:\"text-xs text-gray-500\"},[u.views!==void 0?\"views\":\"usage\",\" •\",u.engagement!==void 0?` ${(u.engagement/1e3).toFixed(1)}k engagement`:u.performance||\"No data\"],1,null)],1,null)],1,c)}),1,null),1,null)],1,null)],1,null),e(\"div\",null,{class:\"grid lg:grid-cols-2 gap-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Traffic Trends\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"📈\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Traffic Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Integration with Google Analytics\",3,null)],3,null),3,null),3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Component Usage\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"div\",null,{class:\"h-64 bg-gray-100 rounded-lg flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"div\",null,{class:\"text-4xl mb-2\"},\"🧩\",3,null),e(\"p\",null,{class:\"text-gray-600\"},\"Component Usage Chart\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Most used design system components\",3,null)],3,null),3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6\"},[e(\"h3\",null,{class:\"font-medium text-blue-900 mb-4\"},\"📊 AI-Powered Insights\",3,null),e(\"div\",null,{class:\"grid md:grid-cols-2 lg:grid-cols-3 gap-4\"},[e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Performance Tip:\",3,null),\" Your Builder.io pages load 23% faster than average. Consider using this architecture for more content.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Content Insight:\",3,null),\" Posts with DS Card components have 31% higher engagement rates.\"],3,null),3,null),e(\"div\",null,{class:\"bg-white rounded-lg p-4\"},e(\"p\",null,{class:\"text-sm text-blue-800\"},[e(\"strong\",null,null,\"Optimization:\",3,null),\" Enable image compression to reduce media load times by ~40%.\"],3,null),3,null)],3,null)],3,null)],1,\"M2_4\")},zl=O(b(Ul,\"s_c7k0xbY1wX8\")),Bl={title:\"Analytics - Performance Metrics\",meta:[{name:\"description\",content:\"Monitor your content performance and system metrics\"}]},Nl=Object.freeze(Object.defineProperty({__proto__:null,default:zl,head:Bl},Symbol.toStringTag,{value:\"Module\"})),Gl=(n,t)=>{const[l,s]=T();l.value={...l.value,[s.value]:{...l.value[s.value],[n]:t}}},Vl=()=>{const n=y(\"ds-button\"),t=y({\"ds-button\":{variant:\"primary\",size:\"medium\",text:\"Sample Button\"},\"ds-card\":{variant:\"default\",content:\"<p>Sample card content</p>\"},\"ds-input\":{type:\"text\",placeholder:\"Enter text...\",label:\"Sample Input\"},\"ds-file-upload\":{accept:\"image/*\",multiple:!1}}),l=[{name:\"ds-button\",title:\"DS Button\",description:\"Interactive button with variants and sizes\",props:[{name:\"variant\",type:\"select\",options:[\"primary\",\"secondary\"],default:\"primary\"},{name:\"size\",type:\"select\",options:[\"medium\",\"large\"],default:\"medium\"},{name:\"disabled\",type:\"boolean\",default:!1},{name:\"text\",type:\"string\",default:\"Button Text\"}]},{name:\"ds-card\",title:\"DS Card\",description:\"Container component with variants\",props:[{name:\"variant\",type:\"select\",options:[\"default\",\"elevated\"],default:\"default\"},{name:\"content\",type:\"richtext\",default:\"<p>Card content</p>\"}]},{name:\"ds-input\",title:\"DS Input\",description:\"Form input with validation\",props:[{name:\"type\",type:\"select\",options:[\"text\",\"email\",\"password\"],default:\"text\"},{name:\"placeholder\",type:\"string\",default:\"Enter text...\"},{name:\"label\",type:\"string\",default:\"Input Label\"},{name:\"required\",type:\"boolean\",default:!1}]},{name:\"ds-file-upload\",title:\"DS File Upload\",description:\"File upload with drag & drop\",props:[{name:\"accept\",type:\"string\",default:\"image/*\"},{name:\"multiple\",type:\"boolean\",default:!1},{name:\"maxSize\",type:\"number\",default:10485760}]}],s=b(Gl,\"s_AAO897lgALA\",[t,n]),a=l.find(o=>o.name===n.value),r=t.value[n.value];return e(\"div\",null,null,[e(\"div\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Design System Components\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage and preview your LIT web components\",3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8\"},[e(\"div\",null,{class:\"lg:col-span-1\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Available Components\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},l.map(o=>e(\"button\",{class:`w-full px-6 py-4 text-left hover:bg-gray-50 ${n.value===o.name?\"bg-blue-50 border-r-2 border-blue-500\":\"\"}`,onClick$:C(\"s_4kuUfUZleco\",[o,n])},null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},v(o,\"description\"),1,null)],0,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border mt-6\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Builder.io Registration\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},[e(\"div\",null,{class:\"space-y-3\"},l.map(o=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},v(o,\"title\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Registered\",3,null)],1,o.name)),1,null),e(\"button\",null,{class:\"w-full mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 text-sm\"},\"Re-register Components\",3,null)],1,null)],1,null)],1,null),e(\"div\",null,{class:\"lg:col-span-2 space-y-6\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},[\"Live Preview - \",a==null?void 0:a.title],1,null),1,null),e(\"div\",null,{class:\"p-8 bg-gray-50 min-h-32 flex items-center justify-center\"},[n.value===\"ds-button\"&&e(\"ds-button\",{variant:v(r,\"variant\"),size:v(r,\"size\"),disabled:v(r,\"disabled\")},null,v(r,\"text\"),1,\"IM_0\"),n.value===\"ds-card\"&&e(\"ds-card\",{variant:v(r,\"variant\")},null,e(\"div\",{dangerouslySetInnerHTML:v(r,\"content\")},null,null,3,null),1,\"IM_1\"),n.value===\"ds-input\"&&e(\"ds-input\",{type:v(r,\"type\"),placeholder:v(r,\"placeholder\"),label:v(r,\"label\"),required:v(r,\"required\")},null,null,3,\"IM_2\"),n.value===\"ds-file-upload\"&&e(\"ds-file-upload\",{accept:v(r,\"accept\"),multiple:v(r,\"multiple\"),maxSize:v(r,\"maxSize\")},null,null,3,\"IM_3\")],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Properties\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-4\"},a==null?void 0:a.props.map(o=>e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},v(o,\"name\"),1,null),o.type===\"select\"?e(\"select\",{value:r[o.name],onChange$:C(\"s_L54Edk66cBw\",[o,s])},{class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},\"options\"in o&&o.options?o.options.map(i=>e(\"option\",{value:i},null,i,1,i)):null,0,\"IM_4\"):o.type===\"boolean\"?e(\"input\",{checked:r[o.name],onChange$:C(\"s_K8Yq6FHadsE\",[o,s])},{type:\"checkbox\",class:\"mr-2\"},null,2,\"IM_5\"):o.type===\"number\"?e(\"input\",{value:r[o.name],onInput$:C(\"s_PDNmgpeUMH0\",[o,s])},{type:\"number\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,\"IM_6\"):e(\"input\",{value:r[o.name],onInput$:C(\"s_sqkaqSKZThg\",[o,s])},{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\"},null,2,null)],1,o.name)),1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Generated Code\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},e(\"pre\",null,{class:\"bg-gray-100 p-4 rounded-lg text-sm overflow-x-auto\"},e(\"code\",null,null,[`<${n.value}${Object.entries(r).map(([o,i])=>typeof i==\"boolean\"&&i?` ${o}`:typeof i==\"boolean\"&&!i?\"\":` ${o}=\"${i}\"`).join(\"\")}>`,n.value===\"ds-button\"?r.text:\"\",n.value===\"ds-card\"?`"
      },
      {
        "file": "/server/q-BWJCWDUn.js",
        "line": 4,
        "content": "`:\"\",g(o=>`</${o.value}>`,[n],\"`</${p0.value}>`\")],1,null),1,null),1,null)],1,null)],1,null)],1,null)],1,\"IM_7\")},Hl=O(b(Vl,\"s_r0j4X6otVtI\")),Kl={title:\"Components - Design System\",meta:[{name:\"description\",content:\"Manage and preview your design system components\"}]},Ql=Object.freeze(Object.defineProperty({__proto__:null,default:Hl,head:Kl},Symbol.toStringTag,{value:\"Module\"}));async function xe(n){const t=E();if(!t)throw new Error(\"Supabase client not available - check configuration\");const l=n.get(\"sb-auth-token\");if(!l)return null;try{const{data:{user:s}}=await t.auth.getUser(l.value);return s}catch{return null}}const Wl=n=>e(\"ds-file-upload\",{onDsUploadSuccess$:n.onUploadSuccess$,onDsUploadError$:n.onUploadError$,onDsUploadComplete$:n.onUploadComplete$},{endpoint:g(t=>t.endpoint||\"/api/upload\",[n],'p0.endpoint||\"/api/upload\"'),accept:g(t=>t.accept||\"image/*,application/pdf,text/*\",[n],'p0.accept||\"image/*,application/pdf,text/*\"'),maxSize:g(t=>t.maxSize||10485760,[n],\"p0.maxSize||10*1024*1024\"),multiple:g(t=>t.multiple||!1,[n],\"p0.multiple||false\"),bucket:g(t=>t.bucket||\"uploads\",[n],'p0.bucket||\"uploads\"'),class:g(t=>t.class,[n],\"p0.class\")},null,2,\"iB_2\"),Jl=O(b(Wl,\"s_C03Fqoboh3U\")),Zl=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{data:s}=await l.from(\"profiles\").select(\"*\").eq(\"id\",t.id).single(),{data:a,error:r}=await l.from(\"file_metadata\").select(\"*\").eq(\"user_id\",t.id).eq(\"upload_status\",\"completed\").order(\"created_at\",{ascending:!1}).limit(50),{data:o}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),i=c=>{const m=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(c===0)return\"0 B\";const d=Math.floor(Math.log(c)/Math.log(1024));return`${(c/Math.pow(1024,d)).toFixed(1)} ${m[d]}`},u=(a||[]).map(c=>({id:c.id,name:c.file_name,size:c.file_size,type:c.mime_type||\"application/octet-stream\",url:`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.storage_path}`,uploadedAt:c.created_at,thumbnailUrl:c.thumbnail_path?`https://qwik-production-files.e1a6f9414e9b47f056d1731ab791f4db.r2.cloudflarestorage.com/${c.thumbnail_path}`:void 0,tags:c.tags||[]}));return{user:t,profile:s,files:u,stats:{totalFiles:(o==null?void 0:o.total_files)||0,totalSize:(o==null?void 0:o.total_size)||0,storageUsed:i((o==null?void 0:o.total_size)||0)},hasError:!!r}},we=ae(b(Zl,\"s_00pXWz0FAag\")),Yl=async()=>{var a,r;const[n,t,l,s]=T();if((a=t.value)!=null&&a.user){n.value=!0;try{const o=await fetch(\"/api/files/list?limit=50\",{headers:{Cookie:document.cookie}});if(o.ok){const i=await o.json();l.value=i.files}}catch(o){const i=o instanceof Error?o.message:\"Unknown error\";p.error(\"Failed to refresh file list\",{error:i,endpoint:\"/api/files/list\",userId:(r=t.value.user)==null?void 0:r.id}),s.value=`❌ Failed to refresh file list: ${i}`,l.value=[]}finally{n.value=!1}}},Xl=n=>{const[t,l,s]=T(),{file:a}=n.detail;s.value=`✅ Uploaded: ${a.name}`,t(),l.value+=1},es=n=>{const[t]=T(),{file:l,error:s}=n.detail;t.value=`❌ Failed: ${l.name} - ${s}`},ts=n=>{const[t]=T(),{results:l}=n.detail,s=l.filter(r=>r.status===\"success\").length,a=l.filter(r=>r.status===\"error\").length;t.value=`📊 Complete: ${s} uploaded, ${a} failed`,setTimeout(()=>{t.value=\"\"},5e3)},ls=()=>{ne();const n=we(),t=y(\"\"),l=y(0),s=y([]),a=y(!1);if(!n.value)return e(\"div\",null,{class:\"flex items-center justify-center h-64\"},e(\"div\",null,{class:\"text-gray-500\"},\"Loading...\",3,null),3,\"Wk_0\");const o=b(Xl,\"s_cdAui9V38SU\",[b(Yl,\"s_BCO4F9EvjfI\",[a,n,s,t]),l,t]),i=b(es,\"s_2VhBVnlzOS4\",[t]),u=b(ts,\"s_tUSlurN8mDc\",[t]);return e(\"div\",null,{class:\"space-y-8\"},[e(\"div\",null,{class:\"border-b border-gray-200 pb-4\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Media Library\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Upload and manage your files with intelligent storage routing\",3,null)],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-3 gap-6\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Total Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.totalFiles,[n],\"p0.value.stats.totalFiles\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Used\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900 mt-2\"},g(c=>c.value.stats.storageUsed,[n],\"p0.value.stats.storageUsed\"),3,null)],3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Storage Type\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600 mt-2\"},[e(\"span\",null,{class:\"block\"},\"✅ R2: All files (simplified architecture)\",3,null),e(\"span\",null,{class:\"block text-gray-400\"},\"Up to 5GB per file\",3,null)],3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow p-6\"},[e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900 mb-4\"},\"Upload Files\",3,null),M(Jl,{endpoint:\"/api/upload\",accept:\"image/*,application/pdf,text/*,video/*\",maxSize:52428800,multiple:!0,bucket:\"uploads\",class:\"w-full\",onUploadSuccess$:o,onUploadError$:i,onUploadComplete$:u,[F]:{endpoint:F,accept:F,maxSize:F,multiple:F,bucket:F,class:F,onUploadSuccess$:F,onUploadError$:F,onUploadComplete$:F}},3,\"Wk_1\"),t.value&&e(\"div\",null,{class:\"mt-4 p-3 bg-blue-50 border border-blue-200 rounded-md\"},e(\"p\",null,{class:\"text-blue-800 text-sm\"},g(c=>c.value,[t],\"p0.value\"),3,null),3,\"Wk_2\"),e(\"div\",null,{class:\"mt-4 text-sm text-gray-600\"},[e(\"p\",null,{class:\"mb-2\"},[e(\"strong\",null,null,\"Simplified Storage:\",3,null),\" All files go to Cloudflare R2 for consistent performance and global CDN delivery.\"],3,null),e(\"p\",null,null,[e(\"strong\",null,null,\"Supported formats:\",3,null),\" Images, PDFs, text files, videos up to 50MB\"],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-xl font-semibold text-gray-900\"},\"Your Files\",3,null),3,null),e(\"div\",null,{class:\"p-6\"},a.value?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"🔄\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"Loading files...\",3,null)],3,\"Wk_3\"):(s.value.length>0?s.value:n.value.files).length===0?e(\"div\",null,{class:\"text-center py-12\"},[e(\"div\",null,{class:\"text-gray-400 text-6xl mb-4\"},\"📁\",3,null),e(\"h3\",null,{class:\"text-lg font-medium text-gray-900 mb-2\"},\"No files yet\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-4\"},\"Upload your first file using the upload area above\",3,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},\"Files will be stored securely and optimized for global delivery\",3,null)],3,\"Wk_4\"):e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\"},(s.value.length>0?s.value:n.value.files).map(c=>e(\"div\",null,{class:\"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow\"},[e(\"div\",null,{class:\"flex items-center justify-between mb-3\"},[e(\"div\",null,{class:\"text-sm font-medium text-gray-900 truncate\"},v(c,\"name\"),1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs rounded-full bg-blue-100 text-blue-800\"},\"R2\",3,null)],1,null),e(\"div\",null,{class:\"text-sm text-gray-600 space-y-1\"},[e(\"div\",null,null,[\"Size: \",(c.size/1024/1024).toFixed(2),\" MB\"],1,null),e(\"div\",null,null,[\"Type: \",v(c,\"type\")],1,null),e(\"div\",null,null,[\"Uploaded: \",new Date(c.uploadedAt).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"mt-4 flex space-x-2\"},[e(\"button\",null,{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\"},\"Download\",3,null),e(\"button\",null,{class:\"text-red-600 hover:text-red-800 text-sm font-medium\"},\"Delete\",3,null)],3,null)],1,c.id)),1,null),1,null)],1,null)],1,\"Wk_5\")},ss=O(b(ls,\"s_BDZLd0X4JxU\")),ns={title:\"Media Library - Dashboard\",meta:[{name:\"description\",content:\"Upload and manage your media files with intelligent storage routing\"}]},as=Object.freeze(Object.defineProperty({__proto__:null,default:ss,head:ns,useMediaData:we},Symbol.toStringTag,{value:\"Module\"})),rs=async()=>{const[n,t,l]=T();try{t.value=!0,n.value=\"\";const s=await fetch(\"/api/content/pages\");if(s.ok){const a=await s.json();l.value=a.pages||[]}else{const a=await s.json();n.value=a.error||\"Failed to load pages\"}}catch{n.value=\"Network error loading pages\"}finally{t.value=!1}},os=async()=>{const[n,t,l,s,a,r,o]=T();if(!r.value.trim()){t.value=\"Page title is required\";return}try{n.value=!0,t.value=\"\";const i={title:r.value.trim(),slug:a.value.trim()||void 0,description:s.value.trim()||void 0,template:\"default\",published:!1},u=await fetch(\"/api/content/pages\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(i)});if(u.ok)await u.json(),r.value=\"\",a.value=\"\",s.value=\"\",o.value=!1,await l();else{const c=await u.json();t.value=c.error||\"Failed to create page\"}}catch{t.value=\"Network error creating page\"}finally{n.value=!1}},is=()=>{const[n,t]=T();!n.value&&t.value&&(n.value=t.value.toLowerCase().replace(/[^a-z0-9\\s-]/g,\"\").replace(/\\s+/g,\"-\").replace(/-+/g,\"-\").replace(/^-|-$/g,\"\"))},us=async()=>{const[n]=T();await n()},cs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y(\"\"),a=y(!1),r=y(\"\"),o=y(\"\"),i=y(\"\"),u=b(rs,\"s_RSy4z08mHuY\",[s,t,n]),c=b(os,\"s_U0vSjZxjf0g\",[l,s,u,i,o,r,a]),m=b(is,\"s_OHe4b3BmXIA\",[o,r]);return j(b(us,\"s_q3arvP17QJ0\",[u])),e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your visual pages and landing pages\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_XklD0zp44XY\",[s,a])},g(d=>d.value?\"Cancel\":\"Create Page\",[a],'p0.value?\"Cancel\":\"Create Page\"'),3,null)],3,null),s.value&&e(\"div\",null,{class:\"bg-red-50 border border-red-200 rounded-lg p-4 mb-6\"},e(\"div\",null,{class:\"flex\"},[e(\"div\",null,{class:\"flex-shrink-0\"},e(\"svg\",null,{class:\"h-5 w-5 text-red-400\",viewBox:\"0 0 20 20\",fill:\"currentColor\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),3,null),e(\"div\",null,{class:\"ml-3\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(d=>d.value,[s],\"p0.value\"),3,null),3,null)],3,null),3,\"h8_0\"),a.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Page\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Page Title *\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Enter page title\",value:g(d=>d.value,[r],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_iUIdYKxt004\",[r,m])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},[\"Page URL Slug\",e(\"span\",null,{class:\"text-gray-500 text-xs\"},\"(auto-generated from title)\",3,null)],3,null),e(\"div\",null,{class:\"flex\"},[e(\"span\",null,{class:\"inline-flex items-center px-3 rounded-l-lg border border-r-0 border-gray-300 bg-gray-50 text-gray-500 text-sm\"},\"/\",3,null),e(\"input\",null,{type:\"text\",class:\"flex-1 border border-gray-300 rounded-r-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"your-page-url\",value:g(d=>d.value,[o],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_P0uR1QIAYP0\",[o])},null,3,null)],3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Description (Optional)\",3,null),e(\"textarea\",null,{class:\"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-blue-500 focus:border-blue-500\",placeholder:\"Brief description of the page\",rows:3,value:g(d=>d.value,[i],\"p0.value\"),disabled:g(d=>d.value,[l],\"p0.value\"),onInput$:C(\"s_0CoyY4fcrIQ\",[i])},null,3,null)],3,null),e(\"div\",null,{class:\"flex gap-2\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed flex items-center\",disabled:g((d,h)=>d.value||!h.value.trim(),[l,r],\"p0.value||!p1.value.trim()\"),onClick$:c},[l.value&&e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-4 w-4 text-white\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,\"h8_1\"),g(d=>d.value?\"Creating...\":\"Create Page\",[l],'p0.value?\"Creating...\":\"Create Page\"')],1,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400 disabled:opacity-50\",disabled:g(d=>d.value,[l],\"p0.value\"),onClick$:C(\"s_NId9t3ngBME\",[s,i,o,r,a])},\"Cancel\",3,null)],1,null)],1,null)],1,\"h8_2\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b flex items-center justify-between\"},[e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Pages\",3,null),!t.value&&n.value.length>0&&e(\"span\",null,{class:\"text-sm text-gray-500\"},[g(d=>d.value.length,[n],\"p0.value.length\"),\" page\",g(d=>d.value.length===1?\"\":\"s\",[n],'p0.value.length===1?\"\":\"s\"')],3,\"h8_3\")],1,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},e(\"div\",null,{class:\"flex items-center justify-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-2 h-5 w-5 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),\"Loading pages...\"],3,null),3,\"h8_4\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-12 text-center text-gray-500\"},[e(\"svg\",null,{class:\"mx-auto h-12 w-12 text-gray-400\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z\"},null,3,null),3,null),e(\"h3\",null,{class:\"mt-2 text-sm font-medium text-gray-900\"},\"No pages\",3,null),e(\"p\",null,{class:\"mt-1 text-sm text-gray-500\"},\"Get started by creating your first page.\",3,null),e(\"div\",null,{class:\"mt-6\"},e(\"button\",null,{class:\"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\",onClick$:C(\"s_7wN6ZaymF0U\",[s,a])},[e(\"svg\",null,{class:\"-ml-1 mr-2 h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 6v6m0 0v6m0-6h6m-6 0H6\"},null,3,null),3,null),\"Create Page\"],3,null),3,null)],3,\"h8_5\"):n.value.map(d=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50 transition-colors\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,{class:\"min-w-0 flex-1\"},[e(\"div\",null,{class:\"flex items-center\"},[e(\"h3\",null,{class:\"font-medium text-gray-900 truncate\"},v(d,\"title\"),1,null),e(\"span\",{class:`ml-2 inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${d.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,d.published?\"Published\":\"Draft\",1,null)],1,null),e(\"div\",null,{class:\"mt-1 flex items-center text-sm text-gray-500\"},[e(\"span\",null,null,[\"/\",v(d,\"slug\")],1,null),d.description&&M(Pe,{children:[e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"truncate\"},v(d,\"description\"),1,null)]},1,\"h8_6\")],1,null),e(\"div\",null,{class:\"mt-2 flex items-center text-xs text-gray-400\"},[e(\"span\",null,null,[\"Created \",new Date(d.created_at).toLocaleDateString()],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[v(d,\"view_count\"),\" view\",d.view_count===1?\"\":\"s\"],1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,{class:\"capitalize\"},[v(d,\"template\"),\" template\"],1,null)],1,null)],1,null),e(\"div\",null,{class:\"ml-4 flex items-center space-x-2\"},[e(\"a\",{href:`/${d.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm font-medium\",target:\"_blank\",rel:\"noopener noreferrer\"},\"View →\",3,null),e(\"button\",null,{class:\"text-gray-400 hover:text-gray-600\"},e(\"svg\",null,{class:\"h-5 w-5\",fill:\"none\",viewBox:\"0 0 24 24\",stroke:\"currentColor\"},e(\"path\",null,{\"stroke-linecap\":\"round\",\"stroke-linejoin\":\"round\",\"stroke-width\":\"2\",d:\"M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z\"},null,3,null),3,null),3,null)],1,null)],1,null),1,d.id)),1,null)],1,null)],1,\"h8_7\")},ds=O(b(cs,\"s_Z1neaZRFYyU\")),gs={title:\"Pages - Content Management\",meta:[{name:\"description\",content:\"Manage your visual pages and landing pages\"}]},ps=Object.freeze(Object.defineProperty({__proto__:null,default:ds,head:gs},Symbol.toStringTag,{value:\"Module\"})),ms=async()=>{const[n,t]=T();try{const l=await fetch(\"/api/content/posts\");if(l.ok){const s=await l.json();t.value=s.posts||[]}}catch{}finally{n.value=!1}},hs=()=>{const[n]=T();n()},fs=async()=>{const[n,t,l]=T();try{(await fetch(\"/api/content/posts\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify(t.value)})).ok&&(t.value={title:\"\",content:\"\",published:!1},l.value=!1,await n())}catch{}},bs=()=>{const n=y([]),t=y(!0),l=y(!1),s=y({title:\"\",content:\"\",published:!1}),a=b(ms,\"s_1WTH03jRCsU\",[t,n]);j(b(hs,\"s_540yPc3E2RA\",[a]));const r=b(fs,\"s_V24BuGzIqHI\",[a,s,l]);return e(\"div\",null,null,[e(\"div\",null,{class:\"flex justify-between items-center mb-8\"},[e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-gray-600 mt-2\"},\"Manage your blog posts and articles\",3,null)],3,null),e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:C(\"s_Oc2O0zQdsgE\",[l])},g(o=>o.value?\"Cancel\":\"New Post\",[l],'p0.value?\"Cancel\":\"New Post\"'),3,null)],3,null),l.value&&e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border p-6 mb-8\"},[e(\"h2\",null,{class:\"text-xl font-semibold mb-4\"},\"Create New Post\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Title\",3,null),e(\"input\",null,{type:\"text\",class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.title,[s],\"p0.value.title\"),onInput$:C(\"s_Et0psVOr3QA\",[s])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{class:\"block text-sm font-medium text-gray-700 mb-2\"},\"Content\",3,null),e(\"textarea\",null,{rows:6,class:\"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500\",value:g(o=>o.value.content,[s],\"p0.value.content\"),onInput$:C(\"s_RJ3Ap4n0gmY\",[s])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center\"},[e(\"input\",null,{type:\"checkbox\",id:\"published\",class:\"mr-2\",checked:g(o=>o.value.published,[s],\"p0.value.published\"),onChange$:C(\"s_q00lGzU6qCM\",[s])},null,3,null),e(\"label\",null,{for:\"published\",class:\"text-sm font-medium text-gray-700\"},\"Publish immediately\",3,null)],3,null),e(\"div\",null,{class:\"flex space-x-3\"},[e(\"button\",null,{class:\"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700\",onClick$:r},\"Create Post\",3,null),e(\"button\",null,{class:\"bg-gray-300 text-gray-700 px-4 py-2 rounded-lg hover:bg-gray-400\",onClick$:C(\"s_bIZQZkM05f0\",[l])},\"Cancel\",3,null)],3,null)],3,null)],3,\"J4_0\"),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Your Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y\"},t.value?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},\"Loading posts...\",3,\"J4_1\"):n.value.length===0?e(\"div\",null,{class:\"px-6 py-8 text-center text-gray-500\"},[e(\"p\",null,null,\"No posts found.\",3,null),e(\"p\",null,{class:\"text-sm mt-2\"},\"Create your first blog post above.\",3,null)],3,\"J4_2\"):n.value.map(o=>{var i;return e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},v(o,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-1\"},[(i=o.content)==null?void 0:i.substring(0,100),\"...\"],1,null),e(\"p\",null,{class:\"text-xs text-gray-400 mt-1\"},[\"Created: \",new Date(o.created_at).toLocaleDateString()],1,null)],1,null),e(\"div\",null,{class:\"flex items-center space-x-3\"},[e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${o.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,o.published?\"Published\":\"Draft\",1,null),e(\"a\",{href:`/posts/${o.slug}`},{class:\"text-blue-600 hover:text-blue-800 text-sm\"},\"View →\",3,null)],1,null)],1,null),1,o.id)}),1,null)],1,null)],1,\"J4_3\")},ys=O(b(bs,\"s_RWtIVOCEnf0\")),vs={title:\"Posts - Content Management\",meta:[{name:\"description\",content:\"Manage your blog posts and articles\"}]},xs=Object.freeze(Object.defineProperty({__proto__:null,default:ys,head:vs},Symbol.toStringTag,{value:\"Module\"})),ws=async({cookie:n})=>{const t=await xe(n);if(!t)return null;const l=E(),{count:s}=await l.from(\"posts\").select(\"*\",{count:\"exact\",head:!0}).eq(\"author_id\",t.id),{data:a}=await l.from(\"posts\").select(\"id, title, published, created_at\").eq(\"author_id\",t.id).order(\"created_at\",{ascending:!1}).limit(5),{data:r}=await l.from(\"user_file_stats\").select(\"*\").eq(\"user_id\",t.id).single(),{count:o}=await l.from(\"builder_pages\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id),{count:i}=await l.from(\"design_system_components\").select(\"*\",{count:\"exact\",head:!0}).eq(\"created_by\",t.id),u=new Date(Date.now()-3e5).toISOString(),{count:c}=await l.from(\"user_sessions\").select(\"*\",{count:\"exact\",head:!0}).eq(\"user_id\",t.id).gte(\"last_activity\",u).eq(\"active\",!0);return{user:t,stats:{postsCount:s||0,pagesCount:o||0,componentsCount:i||0,totalFiles:(r==null?void 0:r.total_files)||0,totalSize:(r==null?void 0:r.total_size)||0,storageUsed:Se((r==null?void 0:r.total_size)||0),activeSessions:c||0},recentPosts:a||[]}},_e=ae(b(ws,\"s_rzz0Rmkfnsc\"));function Se(n){const t=[\"B\",\"KB\",\"MB\",\"GB\",\"TB\"];if(n===0)return\"0 B\";const l=Math.floor(Math.log(n)/Math.log(1024));return`${(n/Math.pow(1024,l)).toFixed(1)} ${t[l]}`}const _s=async()=>{const[n]=T();try{const t=await fetch(\"/api/dashboard/stats\",{headers:{Cookie:document.cookie}});if(t.ok){const l=await t.json();n.value=l}}catch(t){p.error(\"Failed to fetch realtime stats\",{error:t instanceof Error?t.message:String(t)})}},Ss=()=>{const n=_e(),t=y(null);return j(b(_s,\"s_FyInf7hQmPU\",[t])),n.value?e(\"div\",null,null,[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900 mb-8\"},[\"Welcome back, \",g(l=>l.value.user.email,[n],\"p0.value.user.email\"),\"!\"],3,null),e(\"div\",null,{class:\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8\"},[e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Posts\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.postsCount,[n],\"p0.value.stats.postsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Pages\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.pagesCount,[n],\"p0.value.stats.pagesCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"🧩\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Components\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g(l=>l.value.stats.componentsCount,[n],\"p0.value.stats.componentsCount\"),3,null)],3,null)],3,null),3,null),e(\"div\",null,{class:\"bg-white p-6 rounded-lg shadow\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"div\",null,{class:\"text-2xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-500\"},\"Media Files\",3,null),e(\"p\",null,{class:\"text-3xl font-bold text-gray-900\"},g((l,s)=>{var a;return((a=s.value)==null?void 0:a.totalFiles)||l.value.stats.totalFiles||0},[n,t],\"p1.value?.totalFiles||p0.value.stats.totalFiles||0\"),3,null)],3,null)],3,null),3,null)],3,null),e(\"div\",null,{class:\"grid lg:grid-cols-3 gap-8 mb-8\"},[e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Quick Actions\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"a\",null,{href:\"/dashboard/pages\",class:\"block bg-blue-50 hover:bg-blue-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📄\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Create Page\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Build with Builder.io\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/posts\",class:\"block bg-green-50 hover:bg-green-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📝\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Write Post\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Create blog content\",3,null)],3,null)],3,null),3,null),e(\"a\",null,{href:\"/dashboard/media\",class:\"block bg-purple-50 hover:bg-purple-100 p-4 rounded-lg transition-colors\"},e(\"div\",null,{class:\"flex items-center\"},[e(\"span\",null,{class:\"text-xl mr-3\"},\"📁\",3,null),e(\"div\",null,null,[e(\"h3\",null,{class:\"font-medium text-gray-900\"},\"Upload Media\",3,null),e(\"p\",null,{class:\"text-sm text-gray-600\"},\"Add files and images\",3,null)],3,null)],3,null),3,null)],3,null)],3,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"Design System Status\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[[\"DS Button\",\"DS Card\",\"DS Input\",\"DS File Upload\"].map(l=>e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},l,1,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Active\",3,null)],1,l)),e(\"a\",null,{href:\"/dashboard/components\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"Manage Components →\",3,null)],1,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm border\"},[e(\"div\",null,{class:\"px-6 py-4 border-b\"},e(\"h2\",null,{class:\"text-lg font-semibold\"},\"System Health\",3,null),3,null),e(\"div\",null,{class:\"p-6 space-y-3\"},[e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Builder.io\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"Supabase\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"span\",null,{class:\"text-sm font-medium\"},\"R2 Storage\",3,null),e(\"span\",null,{class:\"px-2 py-1 text-xs bg-green-100 text-green-800 rounded-full\"},\"✅ Connected\",3,null)],3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"block text-center bg-gray-50 hover:bg-gray-100 p-3 rounded-lg transition-colors text-sm text-blue-600 font-medium\"},\"View Analytics →\",3,null)],3,null)],3,null)],1,null),e(\"div\",null,{class:\"bg-white rounded-lg shadow\"},[e(\"div\",null,{class:\"px-6 py-4 border-b border-gray-200\"},e(\"h2\",null,{class:\"text-lg font-semibold text-gray-900\"},\"Recent Posts\",3,null),3,null),e(\"div\",null,{class:\"divide-y divide-gray-200\"},n.value.recentPosts.length===0?e(\"div\",null,{class:\"px-6 py-4 text-gray-500\"},\"No posts yet\",3,\"we_1\"):n.value.recentPosts.map(l=>e(\"div\",null,{class:\"px-6 py-4 hover:bg-gray-50\"},e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"div\",null,null,[e(\"h3\",null,{class:\"text-sm font-medium text-gray-900\"},v(l,\"title\"),1,null),e(\"p\",null,{class:\"text-sm text-gray-500\"},new Date(l.created_at).toLocaleDateString(),1,null)],1,null),e(\"span\",{class:`px-2 py-1 text-xs rounded-full ${l.published?\"bg-green-100 text-green-800\":\"bg-gray-100 text-gray-800\"}`},null,l.published?\"Published\":\"Draft\",1,null)],1,null),1,l.id)),1,null)],1,null)],1,\"we_2\"):e(\"div\",null,null,\"Loading...\",3,\"we_0\")},ks=O(b(Ss,\"s_tKEjWeTgiGA\")),Cs={title:\"Dashboard - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"User dashboard\"}]},Ts=Object.freeze(Object.defineProperty({__proto__:null,_auto_formatFileSize:Se,default:ks,head:Cs,useDashboardData:_e},Symbol.toStringTag,{value:\"Module\"})),Ps=async()=>{const[n,t,l,s,a]=T();l.value=!0,t.value=\"\";try{const{error:r}=await re.signIn(n.value,a.value);if(r)throw r;await s(\"/dashboard\")}catch(r){t.value=r instanceof Error?r.message:\"Login failed\"}finally{l.value=!1}},Es=async n=>{const[t,l]=T();l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithOAuth(n);if(s)throw s}catch(s){t.value=s instanceof Error?s.message:\"OAuth login failed\",l.value=!1}},Rs=async()=>{const[n,t,l]=T();if(!n.value){t.value=\"Please enter your email\";return}l.value=!0,t.value=\"\";try{const{error:s}=await re.signInWithMagicLink(n.value);if(s)throw s;t.value=\"Check your email for the login link!\"}catch(s){t.value=s instanceof Error?s.message:\"Failed to send magic link\"}finally{l.value=!1}},Fs=()=>{const n=Ee(),t=y(\"\"),l=y(\"\"),s=y(!1),a=y(\"\"),r=b(Ps,\"s_M7uVWgz5fLo\",[t,a,s,n,l]),o=b(Es,\"s_1Fz1nHxVqXo\",[a,s]),i=b(Rs,\"s_F9kiKsoYGLc\",[t,a,s]);return e(\"div\",null,{class:\"min-h-screen flex items-center justify-center bg-gray-50 py-12 px-4 sm:px-6 lg:px-8\"},e(\"div\",null,{class:\"max-w-md w-full space-y-8\"},[e(\"div\",null,null,e(\"h2\",null,{class:\"mt-6 text-center text-3xl font-extrabold text-gray-900\"},\"Sign in to your account\",3,null),3,null),e(\"div\",null,{class:\"mt-8 space-y-6\"},[a.value&&e(\"div\",null,{class:\"rounded-md bg-red-50 p-4\"},e(\"p\",null,{class:\"text-sm text-red-800\"},g(u=>u.value,[a],\"p0.value\"),3,null),3,\"V7_0\"),e(\"div\",null,{class:\"space-y-3\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_DIXakIIbtmc\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",viewBox:\"0 0 24 24\"},[e(\"path\",null,{fill:\"#4285F4\",d:\"M22.56 12.25c0-.78-.07-1.53-.2-2.25H12v4.26h5.92c-.26 1.37-1.04 2.53-2.21 3.31v2.77h3.57c2.08-1.92 3.28-4.74 3.28-8.09z\"},null,3,null),e(\"path\",null,{fill:\"#34A853\",d:\"M12 23c2.97 0 5.46-.98 7.28-2.66l-3.57-2.77c-.98.66-2.23 1.06-3.71 1.06-2.86 0-5.29-1.93-6.16-4.53H2.18v2.84C3.99 20.53 7.7 23 12 23z\"},null,3,null),e(\"path\",null,{fill:\"#FBBC05\",d:\"M5.84 14.09c-.22-.66-.35-1.36-.35-2.09s.13-1.43.35-2.09V7.07H2.18C1.43 8.55 1 10.22 1 12s.43 3.45 1.18 4.93l2.85-2.22.81-.62z\"},null,3,null),e(\"path\",null,{fill:\"#EA4335\",d:\"M12 5.38c1.62 0 3.06.56 4.21 1.64l3.15-3.15C17.45 2.09 14.97 1 12 1 7.7 1 3.99 3.47 2.18 7.07l3.66 2.84c.87-2.6 3.3-4.53 6.16-4.53z\"},null,3,null)],3,null),\"Continue with Google\"],3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"w-full flex justify-center items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:C(\"s_0Ck2IrGMcgM\",[o])},[e(\"svg\",null,{class:\"w-5 h-5 mr-2\",fill:\"currentColor\",viewBox:\"0 0 20 20\"},e(\"path\",null,{\"fill-rule\":\"evenodd\",d:\"M10 0C4.477 0 0 4.484 0 10.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0110 4.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.942.359.31.678.921.678 1.856 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0020 10.017C20 4.484 15.522 0 10 0z\",\"clip-rule\":\"evenodd\"},null,3,null),3,null),\"Continue with GitHub\"],3,null)],3,null),e(\"div\",null,{class:\"relative\"},[e(\"div\",null,{class:\"absolute inset-0 flex items-center\"},e(\"div\",null,{class:\"w-full border-t border-gray-300\"},null,3,null),3,null),e(\"div\",null,{class:\"relative flex justify-center text-sm\"},e(\"span\",null,{class:\"px-2 bg-gray-50 text-gray-500\"},\"Or continue with\",3,null),3,null)],3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"div\",null,null,[e(\"label\",null,{for:\"email\",class:\"block text-sm font-medium text-gray-700\"},\"Email address\",3,null),e(\"input\",null,{id:\"email\",type:\"email\",autoComplete:\"email\",required:!0,value:g(u=>u.value,[t],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_DYgs0Z65Quc\",[t])},null,3,null)],3,null),e(\"div\",null,null,[e(\"label\",null,{for:\"password\",class:\"block text-sm font-medium text-gray-700\"},\"Password\",3,null),e(\"input\",null,{id:\"password\",type:\"password\",autoComplete:\"current-password\",required:!0,value:g(u=>u.value,[l],\"p0.value\"),class:\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-blue-500 focus:border-blue-500 sm:text-sm\",onInput$:C(\"s_oWetVDGIFg4\",[l])},null,3,null)],3,null),e(\"div\",null,{class:\"flex items-center justify-between\"},[e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 mr-2 flex justify-center py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:r},g(u=>u.value?\"Signing in...\":\"Sign in\",[s],'p0.value?\"Signing in...\":\"Sign in\"'),3,null),e(\"button\",null,{disabled:g(u=>u.value,[s],\"p0.value\"),class:\"flex-1 ml-2 flex justify-center py-2 px-4 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50\",onClick$:i},\"Email magic link\",3,null)],3,null)],3,null),e(\"div\",null,{class:\"text-center\"},e(\"a\",null,{href:\"/signup\",class:\"text-sm text-blue-600 hover:text-blue-500\"},\"Don't have an account? Sign up\",3,null),3,null)],1,null)],1,null),1,\"V7_1\")},Ms=O(b(Fs,\"s_aJcwFH6Iesk\")),Os={title:\"Login - Qwik + LIT + Builder.io\",meta:[{name:\"description\",content:\"Sign in to your account\"}]},As=Object.freeze(Object.defineProperty({__proto__:null,default:Ms,head:Os},Symbol.toStringTag,{value:\"Module\"})),H=async({json:n})=>{n(404,{error:{code:\"NOT_FOUND\",message:\"API endpoint not found\"}})},$s=H,Ds=H,Ls=H,Is=H,js=Object.freeze(Object.defineProperty({__proto__:null,onDelete:Ls,onGet:H,onPatch:Is,onPost:$s,onPut:Ds},Symbol.toStringTag,{value:\"Module\"})),qs=()=>e(\"div\",null,{class:\"min-h-[60vh] flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50\"},e(\"div\",null,{class:\"text-center max-w-md mx-auto p-8\"},[e(\"div\",null,{class:\"text-8xl mb-6\"},\"🚀\",3,null),e(\"h1\",null,{class:\"text-6xl font-bold text-gray-900 mb-4\"},\"404\",3,null),e(\"p\",null,{class:\"text-xl text-gray-600 mb-8\"},\"This page doesn't exist in our production stack\",3,null),e(\"div\",null,{class:\"space-y-4\"},[e(\"a\",null,{href:\"/\",class:\"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg hover:bg-blue-700 font-medium transition-colors\"},\"🏠 Back to Home\",3,null),e(\"div\",null,{class:\"text-sm text-gray-500\"},\"Or explore our live features:\",3,null),e(\"div\",null,{class:\"flex justify-center space-x-4 text-sm\"},[e(\"a\",null,{href:\"/dashboard\",class:\"text-blue-600 hover:text-blue-800\"},\"📊 Dashboard\",3,null),e(\"a\",null,{href:\"/dashboard/analytics\",class:\"text-purple-600 hover:text-purple-800\"},\"📈 Analytics\",3,null),e(\"a\",null,{href:\"/api/health\",class:\"text-green-600 hover:text-green-800\"},\"💚 Health Check\",3,null)],3,null)],3,null)],3,null),3,\"q5_0\"),Us=O(b(qs,\"s_dUKnuUOG7r8\")),zs={title:\"404 - Page Not Found\",meta:[{name:\"description\",content:\"The page you are looking for does not exist\"}]},Bs=Object.freeze(Object.defineProperty({__proto__:null,default:Us,head:zs},Symbol.toStringTag,{value:\"Module\"})),Ns=async({params:n,status:t})=>{const l=n.slug;if(!l)return t(404),null;try{const s=await V.getPage(l,!0);return!s||!s.published?(t(404),null):(V.incrementViewCount(s.id).catch(()=>{}),s)}catch(s){return p.error(\"Error loading page\",{slug:l},s),t(500),null}},ie=ae(b(Ns,\"s_bgpN1vdANm8\")),Gs=async()=>{try{return{params:(await V.getPublishedPages({limit:100})).data.map(t=>({slug:t.slug}))}}catch(n){return p.error(\"Error generating static pages\",{},n),{params:[]}}},Vs=n=>{const t=n.block.properties||{};switch(n.block.component_name||n.block.block_type){case\"ds-button\":return e(\"ds-button\",{variant:t.variant||\"primary\",size:t.size||\"md\",disabled:t.disabled||!1},null,t.label||\"Button\",1,\"FM_0\");case\"ds-card\":return e(\"div\",null,{class:\"bg-white border border-gray-200 rounded-lg p-6 shadow-sm\"},[t.title&&e(\"h3\",null,{class:\"text-lg font-semibold text-gray-900 mb-2\"},v(t,\"title\"),1,\"FM_1\"),t.subtitle&&e(\"p\",null,{class:\"text-gray-600 mb-4\"},v(t,\"subtitle\"),1,\"FM_2\"),t.content&&e(\"div\",{dangerouslySetInnerHTML:v(t,\"content\")},null,null,3,\"FM_3\"),n.block.children&&n.block.children.length>0&&e(\"div\",null,null,n.block.children.map((a,r)=>M(I,{block:a},3,`${n.block.id}-child-${r}`)),1,\"FM_4\")],1,null);case\"ds-input\":return e(\"ds-input\",{type:t.type||\"text\",label:t.label||\"Input\",placeholder:t.placeholder||\"\",required:t.required||!1,disabled:t.disabled||!1},null,null,3,null);case\"ds-file-upload\":return e(\"div\",null,{class:\"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center\"},[e(\"p\",null,{class:\"text-gray-600\"},t.label||\"Upload File\",1,null),e(\"p\",null,{class:\"text-sm text-gray-500 mt-2\"},[t.accept||\"*/*\",\" • Max \",((t.maxSize||10485760)/1024/1024).toFixed(1),\"MB\"],1,null)],1,null);case\"heading\":const l=t.level||2,s=`font-bold text-gray-900 ${l===1?\"text-4xl\":l===2?\"text-3xl\":l===3?\"text-2xl\":l===4?\"text-xl\":l===5?\"text-lg\":\"text-base\"}`;return l===1?e(\"h1\",{class:s},null,t.text||\"Heading\",1,\"FM_5\"):l===2?e(\"h2\",{class:s},null,t.text||\"Heading\",1,\"FM_6\"):l===3?e(\"h3\",{class:s},null,t.text||\"Heading\",1,\"FM_7\"):l===4?e(\"h4\",{class:s},null,t.text||\"Heading\",1,\"FM_8\"):l===5?e(\"h5\",{class:s},null,t.text||\"Heading\",1,\"FM_9\"):e(\"h6\",{class:s},null,t.text||\"Heading\",1,null);case\"paragraph\":return e(\"p\",null,{class:\"text-gray-700 leading-relaxed\"},t.text||\"Paragraph text\",1,null);case\"image\":return e(\"div\",null,{class:\"my-6\"},[e(\"img\",{src:t.src||\"/placeholder.jpg\",alt:t.alt||\"\",class:`max-w-full h-auto ${t.className||\"\"}`,width:t.width||\"800\",height:t.height||\"600\"},{loading:\"lazy\"},null,3,null),t.caption&&e(\"p\",null,{class:\"text-sm text-gray-500 mt-2 text-center\"},v(t,\"caption\"),1,\"FM_10\")],1,null);case\"spacer\":return e(\"div\",{style:{height:`${t.height||32}px`}},{class:\"w-full\"},null,3,null);case\"html\":return e(\"div\",{class:t.className||\"\",dangerouslySetInnerHTML:t.html||\"\"},null,null,3,null);default:return e(\"div\",null,{class:\"p-4 bg-yellow-50 border border-yellow-200 rounded-lg\"},[e(\"p\",null,{class:\"text-yellow-800 text-sm\"},[\"Unknown component: \",g(a=>a.block.component_name||a.block.block_type,[n],\"p0.block.component_name||p0.block.block_type\")],3,null),process.env.NODE_ENV===\"development\"&&e(\"pre\",null,{class:\"text-xs text-yellow-600 mt-2 overflow-auto\"},JSON.stringify(t,null,2),1,\"FM_11\")],1,null)}},I=O(b(Vs,\"s_hTWVJJoJphc\")),Hs=n=>{const l=(n.page.blocks||[]).reduce((s,a)=>{const r=a.region||\"main\";return s[r]||(s[r]=[]),s[r].push(a),s},{});switch(Object.keys(l).forEach(s=>{l[s].sort((a,r)=>a.order_index-r.order_index)}),n.template){case\"landing\":return e(\"div\",null,{class:\"min-h-screen\"},[l.header&&e(\"header\",null,{class:\"bg-white shadow-sm\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6\"},l.header.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_12\"),e(\"main\",null,{class:\"flex-1\"},l.main&&e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},e(\"div\",null,{class:\"space-y-12\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_13\"),1,null),l.footer&&e(\"footer\",null,{class:\"bg-gray-50 border-t\"},e(\"div\",null,{class:\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},l.footer.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_14\")],1,\"FM_15\");case\"blog\":return e(\"article\",null,{class:\"min-h-screen bg-white\"},e(\"div\",null,{class:\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12\"},[e(\"header\",null,{class:\"mb-12\"},[e(\"h1\",null,{class:\"text-4xl font-bold text-gray-900 mb-4\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-xl text-gray-600 mb-6\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_16\"),e(\"div\",null,{class:\"flex items-center text-sm text-gray-500\"},[e(\"time\",null,{dateTime:g(s=>s.page.created_at,[n],\"p0.page.created_at\")},new Date(n.page.created_at).toLocaleDateString(\"en-US\",{year:\"numeric\",month:\"long\",day:\"numeric\"}),1,null),e(\"span\",null,{class:\"mx-2\"},\"•\",3,null),e(\"span\",null,null,[g(s=>s.page.view_count,[n],\"p0.page.view_count\"),\" views\"],3,null)],1,null)],1,null),e(\"div\",null,{class:\"prose prose-lg max-w-none\"},l.main&&l.main.map(s=>M(I,{block:s},3,s.id)),1,null)],1,null),1,null);default:return e(\"div\",null,{class:\"min-h-screen bg-gray-50\"},e(\"div\",null,{class:\"max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 py-8\"},[e(\"header\",null,{class:\"mb-8\"},[e(\"h1\",null,{class:\"text-3xl font-bold text-gray-900\"},g(s=>s.page.title,[n],\"p0.page.title\"),3,null),n.page.description&&e(\"p\",null,{class:\"text-gray-600 mt-2\"},g(s=>s.page.description,[n],\"p0.page.description\"),3,\"FM_17\")],1,null),e(\"div\",{class:`grid gap-8 ${l.sidebar?\"grid-cols-1 lg:grid-cols-3\":\"grid-cols-1\"}`},null,[e(\"main\",{class:l.sidebar?\"lg:col-span-2\":\"col-span-1\"},null,l.main&&e(\"div\",null,{class:\"space-y-6\"},l.main.map(s=>M(I,{block:s},3,s.id)),1,\"FM_18\"),1,null),l.sidebar&&e(\"aside\",null,{class:\"lg:col-span-1\"},e(\"div\",null,{class:\"bg-white rounded-lg shadow-sm p-6 space-y-6\"},l.sidebar.map(s=>M(I,{block:s},3,s.id)),1,null),1,\"FM_19\")],1,null)],1,null),1,null)}},ke=O(b(Hs,\"s_mzLcv8PuSf4\")),Ks=()=>{const n=ie();return M(Re,{value:n,onPending:()=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"svg\",null,{class:\"animate-spin -ml-1 mr-3 h-8 w-8 text-gray-400 mx-auto\",fill:\"none\",viewBox:\"0 0 24 24\"},[e(\"circle\",null,{class:\"opacity-25\",cx:\"12\",cy:\"12\",r:\"10\",stroke:\"currentColor\",\"stroke-width\":\"4\"},null,3,null),e(\"path\",null,{class:\"opacity-75\",fill:\"currentColor\",d:\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"},null,3,null)],3,null),e(\"p\",null,{class:\"text-gray-500 mt-2\"},\"Loading page...\",3,null)],3,null),3,\"FM_20\"),onRejected:t=>e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_21\"),onResolved:t=>(ne(),t?M(ke,{page:t,get template(){return t.template},[F]:{template:le(t,\"template\")}},3,\"FM_23\"):e(\"div\",null,{class:\"min-h-screen bg-gray-50 flex items-center justify-center\"},e(\"div\",null,{class:\"text-center\"},[e(\"h1\",null,{class:\"text-2xl font-bold text-gray-900 mb-4\"},\"Page Not Found\",3,null),e(\"p\",null,{class:\"text-gray-600 mb-6\"},\"The page you're looking for doesn't exist.\",3,null),e(\"a\",null,{href:\"/\",class:\"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700\"},\"Go Home\",3,null)],3,null),3,\"FM_22\")),[F]:{value:F,onPending:F,onRejected:F,onResolved:F}},3,\"FM_24\")},Qs=O(b(Ks,\"s_O9a4FXDqDuI\")),Ws=({resolveValue:n})=>{const t=n(ie);if(!t)return{title:\"Page Not Found\",meta:[{name:\"description\",content:\"The requested page could not be found.\"}]};const l=[{name:\"description\",content:t.seo_description||t.description||`${t.title} - Learn more about this page.`},{name:\"robots\",content:t.published?\"index, follow\":\"noindex, nofollow\"},{property:\"og:title\",content:t.seo_title||t.title},{property:\"og:description\",content:t.seo_description||t.description||\"\"},{property:\"og:type\",content:\"article\"},{property:\"og:url\",content:`/${t.slug}`},{name:\"twitter:card\",content:\"summary_large_image\"},{name:\"twitter:title\",content:t.seo_title||t.title},{name:\"twitter:description\",content:t.seo_description||t.description||\"\"}];return t.featured_image&&l.push({property:\"og:image\",content:t.featured_image}),t.social_image?(l.push({property:\"og:image\",content:t.social_image}),l.push({name:\"twitter:image\",content:t.social_image})):t.featured_image&&l.push({name:\"twitter:image\",content:t.featured_image}),{title:t.seo_title||t.title,meta:l}},Js=Object.freeze(Object.defineProperty({__proto__:null,_auto_ContentBlockRenderer:I,_auto_PageLayout:ke,default:Qs,head:Ws,onStaticGenerate:Gs,usePageData:ie},Symbol.toStringTag,{value:\"Module\"})),Zs=[je],q=()=>ze,U=()=>Ge,S=()=>Ye,Ys=[[\"/\",[S,()=>at],\"/\",[\"q-CSb0NZF_.js\",\"q-CRu92-iL.js\"]],[\"manifest.json\",[S,()=>ot],\"/manifest.json\",[\"q-CSb0NZF_.js\"]],[\"api/analytics/dashboard/\",[S,()=>mt],\"/api/analytics/dashboard/\",[\"q-CSb0NZF_.js\"]],[\"api/auth/status/\",[S,()=>ft],\"/api/auth/status/\",[\"q-CSb0NZF_.js\"]],[\"api/cache/analytics/\",[S,()=>wt],\"/api/cache/analytics/\",[\"q-CSb0NZF_.js\"]],[\"api/content/media/\",[S,()=>kt],\"/api/content/media/\",[\"q-CSb0NZF_.js\"]],[\"api/content/pages/\",[S,()=>Ot],\"/api/content/pages/\",[\"q-CSb0NZF_.js\"]],[\"api/content/posts/\",[S,()=>Dt],\"/api/content/posts/\",[\"q-CSb0NZF_.js\"]],[\"api/content/search/\",[S,()=>It],\"/api/content/search/\",[\"q-CSb0NZF_.js\"]],[\"api/dashboard/stats/\",[S,()=>qt],\"/api/dashboard/stats/\",[\"q-CSb0NZF_.js\"]],[\"api/files/list/\",[S,()=>ye],\"/api/files/list/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/signed-url/\",[S,()=>Bt],\"/api/storage/signed-url/\",[\"q-CSb0NZF_.js\"]],[\"api/storage/proxy/[.path]\",[S,()=>Ht],\"/api/storage/proxy/[.path]\",[\"q-CSb0NZF_.js\"]],[\"api/cache/\",[S,()=>Jt],\"/api/cache/\",[\"q-CSb0NZF_.js\"]],[\"api/content/\",[S,()=>Yt],\"/api/content/\",[\"q-CSb0NZF_.js\"]],[\"api/docs/\",[S,()=>ll],\"/api/docs/\",[\"q-CSb0NZF_.js\",\"q-C-Vwv8I7.js\"]],[\"api/errors/\",[S,()=>ol],\"/api/errors/\",[\"q-CSb0NZF_.js\"]],[\"api/health/\",[S,()=>vl],\"/api/health/\",[\"q-CSb0NZF_.js\"]],[\"api/logs/\",[S,()=>Cl],\"/api/logs/\",[\"q-CSb0NZF_.js\"]],[\"api/upload/\",[S,()=>ve],\"/api/upload/\",[\"q-CSb0NZF_.js\"]],[\"auth/callback/\",[S,()=>Il],\"/auth/callback/\",[\"q-CSb0NZF_.js\",\"q-DAWT_rQB.js\"]],[\"dashboard/analytics/\",[S,U,q,()=>Nl],\"/dashboard/analytics/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D3peGYRe.js\"]],[\"dashboard/components/\",[S,U,q,()=>Ql],\"/dashboard/components/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-BXBKrR62.js\"]],[\"dashboard/media/\",[S,U,q,()=>as],\"/dashboard/media/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-TA-9Pb1a.js\"]],[\"dashboard/pages/\",[S,U,q,()=>ps],\"/dashboard/pages/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-D_dUu6X9.js\"]],[\"dashboard/posts/\",[S,U,q,()=>xs],\"/dashboard/posts/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CS-S8Nx0.js\"]],[\"dashboard/\",[S,U,q,()=>Ts],\"/dashboard/\",[\"q-CSb0NZF_.js\",\"q-BeGIXpMr.js\",\"q-Bl3zUNLk.js\",\"q-CFimUew-.js\"]],[\"login/\",[S,()=>As],\"/login/\",[\"q-CSb0NZF_.js\",\"q-ACkpa2hX.js\"]],[\"api/[.404]\",[S,()=>js],\"/api/[.404]\",[\"q-CSb0NZF_.js\",\"q-DRbnYsbH.js\"]],[\"[.catchall]\",[S,()=>Bs],\"/[.catchall]\",[\"q-CSb0NZF_.js\",\"q-BhAqSnFt.js\"]],[\"[...slug]\",[S,()=>Js],\"/[...slug]\",[\"q-CSb0NZF_.js\",\"q-BdYugbGr.js\"]]],Xs=[],en=!0,tn=\"/\",ln=!0,rn={routes:Ys,serverPlugins:Zs,menus:Xs,trailingSlash:en,basePathname:tn,cacheModules:ln};export{tn as b,ln as c,p as l,Xs as m,rn as q,Ys as r,Zs as s,en as t};"
      },
      {
        "file": "/server/q-Bg2o_rQ1.js",
        "line": 1,
        "content": "import{l as o}from\"./q-BWJCWDUn.js\";import*as n from\"@sentry/browser\";import\"./q-BFBoRxOI.js\";import\"@supabase/supabase-js\";import\"zod\";class l{constructor(){this.initialized=!1;const e=typeof process<\"u\",r=e?process.env.NODE_ENV!==\"production\":window.location.hostname===\"localhost\";this.config={dsn:e?process.env.SENTRY_DSN:\"https://c61059fda17fdf0a9baa21e9b8673f22@o4509594523205632.ingest.de.sentry.io/4509594591690832\",environment:e&&process.env.SENTRY_ENVIRONMENT||\"development\",release:e&&process.env.APP_VERSION||\"1.0.0\",sampleRate:r?1:.1,tracesSampleRate:r?1:.1,enablePerformanceMonitoring:!0,enableUserFeedback:!0}}initialize(){if(!(this.initialized||typeof window>\"u\")){if(!this.config.dsn){o.info(\"Sentry DSN not configured, skipping initialization\",{environment:this.config.environment});return}try{n.init({dsn:this.config.dsn,environment:this.config.environment,release:this.config.release,sampleRate:this.config.sampleRate,tracesSampleRate:this.config.tracesSampleRate,replaysSessionSampleRate:this.config.environment===\"development\"?.1:.01,replaysOnErrorSampleRate:1,integrations:[...this.config.environment===\"production\"?[new n.BrowserTracing,new n.Replay({maskAllText:!0,blockAllMedia:!0})]:[]],beforeSend:(e,r)=>{if(this.config.environment===\"development\"){const t=r.originalException;if(t instanceof Error&&[\"ResizeObserver loop limit exceeded\",\"Non-Error promise rejection captured\",\"Script error\",\"Network request failed\"].some(s=>t.message.includes(s)))return null}return e.tags&&(e.tags={...e.tags,component:\"qwik-lit-builder\",platform:\"web\"}),e},beforeSendTransaction:e=>{var r;return this.config.environment===\"development\"&&(r=e.transaction)!=null&&r.includes(\"/_build/\")?null:e}}),this.initialized=!0,o.info(\"Sentry error tracking initialized\",{environment:this.config.environment,release:this.config.release})}catch(e){o.error(\"Failed to initialize Sentry\",{},e instanceof Error?e:new Error(String(e)))}}}captureError(e,r){if(this.initialized)try{return n.captureException(e,{tags:{component:(r==null?void 0:r.component)||\"unknown\",category:(r==null?void 0:r.category)||\"error\"},extra:r,level:this.mapSeverityToLevel(r==null?void 0:r.severity)})}catch(t){o.error(\"Failed to capture error in Sentry\",{},t instanceof Error?t:new Error(String(t)));return}}captureMessage(e,r=\"info\",t){if(this.initialized)try{return n.captureMessage(e,{level:r,tags:{component:(t==null?void 0:t.component)||\"unknown\"},extra:t})}catch(i){o.error(\"Failed to capture message in Sentry\",{},i instanceof Error?i:new Error(String(i)));return}}setUser(e){if(this.initialized)try{n.setUser(e)}catch(r){o.error(\"Failed to set Sentry user\",{},r instanceof Error?r:new Error(String(r)))}}setContext(e,r){if(this.initialized)try{n.setContext(e,r)}catch(t){o.error(\"Failed to set Sentry context\",{key:e},t instanceof Error?t:new Error(String(t)))}}addBreadcrumb(e,r,t){if(this.initialized)try{n.addBreadcrumb({message:e,category:r,data:t,timestamp:Date.now()/1e3,level:\"info\"})}catch(i){o.error(\"Failed to add Sentry breadcrumb\",{message:e,category:r},i instanceof Error?i:new Error(String(i)))}}startTransaction(e,r){if(!this.initialized)return null;try{return n.startTransaction({name:e,op:r})}catch(t){return o.error(\"Failed to start Sentry transaction\",{name:e,op:r},t instanceof Error?t:new Error(String(t))),null}}showUserFeedbackDialog(e){if(!(!this.initialized||!this.config.enableUserFeedback))try{const r=(e==null?void 0:e.eventId)||n.lastEventId();r&&n.showReportDialog({eventId:r})}catch(r){o.error(\"Failed to show Sentry feedback dialog\",{},r instanceof Error?r:new Error(String(r)))}}mapSeverityToLevel(e){switch(e){case\"critical\":return\"fatal\";case\"high\":return\"error\";case\"medium\":return\"warning\";case\"low\":return\"info\";default:return\"error\"}}measurePageLoad(){if(!(!this.initialized||!this.config.enablePerformanceMonitoring))try{typeof window<\"u\"&&\"performance\"in window&&new PerformanceObserver(r=>{for(const t of r.getEntries())t.entryType===\"measure\"&&n.addBreadcrumb({category:\"performance\",message:`${t.name}: ${t.duration}ms`,level:\"info\",data:{duration:t.duration,startTime:t.startTime}})}).observe({entryTypes:[\"measure\",\"navigation\"]})}catch(e){o.error(\"Failed to set up performance monitoring\",{},e instanceof Error?e:new Error(String(e)))}}reportPerformanceMetric(e,r,t=\"ms\"){if(this.initialized)try{n.addBreadcrumb({category:\"performance\",message:`${e}: ${r}${t}`,level:\"info\",data:{metric:e,value:r,unit:t}}),n.setTag(`perf.${e}`,r)}catch(i){o.error(\"Failed to report performance metric\",{name:e,value:r},i instanceof Error?i:new Error(String(i)))}}}const d=new l;function f(c,e){return d.captureError(c,e)}function m(c,e,r){d.addBreadcrumb(c,e,r)}class a{constructor(){this.errorReports=[],this.maxReports=100,this.setupGlobalHandlers()}static getInstance(){return a.instance||(a.instance=new a),a.instance}setupGlobalHandlers(){typeof window<\"u\"&&(window.addEventListener(\"error\",e=>{this.handleError(e.error,{category:\"system\",severity:\"high\",metadata:{filename:e.filename,lineno:e.lineno,colno:e.colno}})}),window.addEventListener(\"unhandledrejection\",e=>{this.handleError(new Error(e.reason),{category:\"system\",severity:\"high\",metadata:{type:\"unhandledrejection\",reason:e.reason}})}),window.addEventListener(\"offline\",()=>{this.handleError(new Error(\"Network offline\"),{category:\"network\",severity:\"medium\",metadata:{type:\"offline\"}})}))}handleError(e,r){var s;const t={timestamp:new Date,route:typeof window<\"u\"?window.location.pathname:void 0,userAgent:typeof navigator<\"u\"?navigator.userAgent:void 0,...r.context,metadata:{...(s=r.context)==null?void 0:s.metadata,...r.metadata}},i={error:e,context:t,severity:r.severity,category:r.category};this.recordError(i),this.reportError(i),this.attemptRecovery(i)}recordError(e){if(this.errorReports.unshift(e),this.errorReports.length>this.maxReports&&(this.errorReports=this.errorReports.slice(0,this.maxReports)),e.severity===\"critical\"&&typeof localStorage<\"u\")try{const r=JSON.parse(localStorage.getItem(\"critical_errors\")||\"[]\");r.unshift({message:e.error.message,stack:e.error.stack,context:e.context,timestamp:e.context.timestamp.toISOString()}),localStorage.setItem(\"critical_errors\",JSON.stringify(r.slice(0,10)))}catch{}}async reportError(e){var i;if(e.error.message.includes(\"Failed to report error\")||e.error.message.includes(\"fetch\")||e.error.message.includes(\"SyntaxError: Invalid or unexpected token\")||(i=e.context.metadata)!=null&&i.isErrorReportingError)return;m(`${e.category.toUpperCase()} Error occurred`,\"error\",{severity:e.severity,route:e.context.route,userId:e.context.userId,...e.context.metadata});const r=f(e.error,{category:e.category,severity:e.severity,component:\"error-handler\",...e.context.metadata}),t=e.severity===\"critical\"?\"critical\":e.severity===\"high\"?\"error\":e.severity===\"medium\"?\"warn\":\"info\";o.log(t,`${e.category.toUpperCase()} Error: ${e.error.message}`,{category:e.category,severity:e.severity,userId:e.context.userId,sessionId:e.context.sessionId,route:e.context.route,sentryEventId:r,...e.context.metadata},e.error);try{typeof fetch<\"u\"&&await fetch(\"/api/errors\",{method:\"POST\",headers:{\"Content-Type\":\"application/json\"},body:JSON.stringify({message:e.error.message,stack:e.error.stack,context:e.context,severity:e.severity,category:e.category,sentryEventId:r})})}catch(s){o.error(\"Failed to report error to API\",{originalError:e.error.message},s instanceof Error?s:new Error(String(s)))}}attemptRecovery(e){var r;switch(e.category){case\"network\":(r=e.context.metadata)!=null&&r.retryable&&setTimeout(()=>{typeof window<\"u\"&&navigator.onLine&&window.location.reload()},5e3);break;case\"data\":typeof localStorage<\"u\"&&(localStorage.removeItem(\"app_cache\"),localStorage.removeItem(\"user_data\"));break;case\"ui\":e.severity===\"critical\"&&setTimeout(()=>{typeof window<\"u\"&&(window.location.href=\"/\")},3e3);break}}getRecentErrors(e=10){return this.errorReports.slice(0,e)}clearErrors(){this.errorReports=[],typeof localStorage<\"u\"&&localStorage.removeItem(\"critical_errors\")}static handleUIError(e,r){a.getInstance().handleError(e,{category:\"ui\",severity:\"medium\",context:r})}static handleAPIError(e,r){a.getInstance().handleError(e,{category:\"api\",severity:\"high\",context:r})}static handleAuthError(e,r){a.getInstance().handleError(e,{category:\"auth\",severity:\"high\",context:r})}static handleDataError(e,r){a.getInstance().handleError(e,{category:\"data\",severity:\"high\",context:r})}static handleCriticalError(e,r){a.getInstance().handleError(e,{category:\"system\",severity:\"critical\",context:r})}}a.getInstance();const{handleUIError:p}=a;export{a as GlobalErrorHandler,p as handleUIError};"
      },
      {
        "file": "/src/lib/logger.ts",
        "line": 112,
        "content": "if (this.config.environment === 'development') {"
      },
      {
        "file": "/src/lib/logger.ts",
        "line": 256,
        "content": "process.env.NODE_ENV === 'staging' ? 'staging' : 'development',"
      },
      {
        "file": "/src/lib/sentry.ts",
        "line": 60,
        "content": "replaysSessionSampleRate: this.config.environment === 'development' ? 0.1 : 0.01,"
      },
      {
        "file": "/src/lib/sentry.ts",
        "line": 76,
        "content": "if (this.config.environment === 'development') {"
      },
      {
        "file": "/src/lib/sentry.ts",
        "line": 106,
        "content": "if (this.config.environment === 'development') {"
      },
      {
        "file": "/src/middleware/security.ts",
        "line": 174,
        "content": "const isDev = process.env.NODE_ENV === 'development';"
      },
      {
        "file": "/src/routes/[...slug]/index.tsx",
        "line": 185,
        "content": "{process.env.NODE_ENV === 'development' && ("
      },
      {
        "file": "/src/routes/api/health/index.ts",
        "line": 344,
        "content": "const isDevelopment = process.env.NODE_ENV === 'development';"
      },
      {
        "file": "/src/routes/api/health/index.ts",
        "line": 348,
        "content": "} else if (warnChecks > 0 && !isDevelopment) {"
      }
    ],
    "developmentOnlyCode": []
  },
  "mockDependencies": [
    {
      "name": "@playwright/test",
      "version": "^1.41.0",
      "type": "e2e-testing"
    },
    {
      "name": "@testing-library/dom",
      "version": "^10.4.0",
      "type": "test-utilities"
    },
    {
      "name": "@testing-library/user-event",
      "version": "^14.6.1",
      "type": "test-utilities"
    },
    {
      "name": "@vitest/ui",
      "version": "^3.2.4",
      "type": "test-framework"
    },
    {
      "name": "@web/test-runner-playwright",
      "version": "^0.11.1",
      "type": "e2e-testing"
    },
    {
      "name": "playwright",
      "version": "^1.41.0",
      "type": "e2e-testing"
    },
    {
      "name": "vitest",
      "version": "^3.2.4",
      "type": "test-framework"
    }
  ],
  "mockEnvVars": [
    {
      "file": ".env",
      "line": 3,
      "content": "NODE_ENV=development"
    },
    {
      "file": ".env",
      "line": 4,
      "content": "SITE_URL=http://localhost:5177"
    },
    {
      "file": ".env",
      "line": 20,
      "content": "SENTRY_ENVIRONMENT=development"
    },
    {
      "file": ".env",
      "line": 33,
      "content": "JWT_SECRET=dev_jwt_secret_replace_in_production"
    },
    {
      "file": ".env",
      "line": 34,
      "content": "SESSION_SECRET=dev_session_secret_replace_in_production"
    },
    {
      "file": ".env",
      "line": 35,
      "content": "ENCRYPTION_KEY=dev_encryption_key_replace_in_production"
    },
    {
      "file": ".env",
      "line": 36,
      "content": "WEBHOOK_SECRET=dev_webhook_secret_replace_in_production"
    }
  ]
}